{"version":3,"file":"static/js/14867.b6a1ff7e.chunk.js","mappings":"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","sources":["njslab/Tools/MapboxDeckGLPolygon/MapboxGLWrapper/index.ts","njslab/Tools/MapboxDeckGLPolygon/lib/index.ts","njslab/Tools/MapboxDeckGLPolygon/DeckGL/index.ts","njslab/Tools/MapboxDeckGLPolygon/CanvasCustom/index.ts","njslab/Tools/MapboxDeckGLPolygon/UI/index.ts","njslab/Tools/MapboxDeckGLPolygon/index.ts"],"sourcesContent":["import mapboxgl from \"mapbox-gl\";\r\n\r\nimport { OrbitView, PolygonLayer, COORDINATE_SYSTEM, ArcLayer, ScatterplotLayer } from 'deck.gl';\r\nimport { Deck } from '@deck.gl/core';\r\nimport DeckGL from 'deck.gl';\r\n\r\nimport { Solution } from '..';\r\n\r\nimport { downloadImage } from '../lib';\r\n\r\nexport class MapboxGLWrapper {\r\n    public solution: Solution;\r\n    public map: mapboxgl.Map;\r\n\r\n    public canvasMapbox;\r\n    constructor(solution: Solution) {\r\n        this.solution = solution;\r\n        this.initMap(solution.divHost.id);\r\n    }\r\n    private initMap(id: string) {\r\n        // https://account.mapbox.com\r\n        mapboxgl.accessToken = process.env.REACT_APP_MAPBOX;\r\n        this.map = new mapboxgl.Map({\r\n            preserveDrawingBuffer: true,\r\n            container: id,\r\n            zoom: 6,\r\n            // pitch: 30,\r\n            // minZoom: 10,\r\n            // center: [-74.5, 40],\r\n            center: [-77.430815, 37.801833],\r\n            style: 'mapbox://styles/mapbox/dark-v10' // 'mapbox://styles/mapbox/streets-v11'\r\n            \r\n        });\r\n        this.map.dragRotate.disable();\r\n\r\n\r\n        // new ScatterplotLayer({\r\n        //     id: 'scatter-plot',\r\n        //     data: YOUR_DATA_ARRAY, // Your data goes here\r\n        //     getPosition: d => [d.longitude, d.latitude],\r\n        //     getRadius: d => d.radius,\r\n        //     getColor: d => d.color,\r\n        //   }),\r\n\r\n        // this.map.addLayer({layer})\r\n\r\n\r\n\r\n\r\n        // https://docs.mapbox.com/mapbox-gl-js/api/events/#mapmouseevent#type\r\n        this.map.on('mousemove', (e) => { this.mouseMove(e); });\r\n        this.map.on('click', (e) => { this.mouseClick(e); });\r\n        this.map.on('mousedown', (e) => { this.mouseDown(e); });\r\n        this.map.on('dblclick', (e) => { this.mouseDClick(e); });\r\n        this.map.on('mouseup', (e) => { this.mouseUp(e); });\r\n        window.addEventListener('keydown', (k) => {\r\n            // console.log(k)\r\n            // if (k.key === 'p'){\r\n\r\n            // }\r\n        });\r\n\r\n        let div = document.getElementsByClassName('mapboxgl-canvas')[0] as HTMLDivElement;\r\n        div.style.position = 'absolute';\r\n        \r\n        div = document.getElementsByClassName('mapboxgl-control-container')[0] as HTMLDivElement;\r\n        div.style.display = 'none';\r\n\r\n        this.map.on('load', () => { this.initPost(); });\r\n    }\r\n    public initPost(){\r\n        this.solution.initPost();\r\n\r\n        // const canvas = document.createElement('canvas');\r\n        // this.solution.divHost.appendChild(canvas);\r\n        // canvas.id = 'canvasID';\r\n        // canvas.width = this.solution.divHost.clientWidth;\r\n        // canvas.height = this.solution.divHost.clientHeight;\r\n        \r\n        // this.initCustomCanvas();\r\n\r\n        // this.solution.renderer.canvas.style.width = '200%';\r\n        // this.solution.renderer.canvas.style.height = '200%';\r\n        this.canvasMapbox = this.map.getCanvas();\r\n\r\n        // this.solution.renderer.canvas.width = this.canvasMapbox.width ;\r\n        // this.solution.renderer.canvas.height = this.canvasMapbox.height ;\r\n    }\r\n    public initCustomCanvas(){\r\n\r\n        this.solution.renderer.canvas.width = this.canvasMapbox.width ;\r\n        this.solution.renderer.canvas.height = this.canvasMapbox.height ;\r\n\r\n        // this.solution.renderer.canvas.style.width = '100%';\r\n        // this.solution.renderer.canvas.style.height = '100%';\r\n        this.solution.renderer.canvas.style.display = 'none';\r\n\r\n       const bound: any = this.map.getBounds();\r\n        // console.log(bound);\r\n\r\n       this.map.addSource('canvas-source', {\r\n            type: 'canvas',\r\n            canvas: this.solution.renderer.canvas,\r\n            coordinates: [\r\n\r\n                // [ 180, 90],\r\n                // [ 180, -90],\r\n                // [ -180, -90], \r\n                // [ -180, 90]\r\n\r\n                \r\n                // [bound._sw[0], bound._sw[1]],\r\n                // [bound._sw[0], bound._ne[1]],\r\n                // [bound._ne[0], bound._ne[1]],\r\n                // [bound._ne[0], bound._sw[1]],\r\n\r\n            //    [ -125.618336, 48.944262], \r\n            //    [ -125.618336, 24.786775], \r\n            //    [ -65.591812, 24.786775],\r\n            //    [ -65.591812, 48.944262]\r\n\r\n                // [91.4461, 21.5006],\r\n                // [100.3541, 21.5006],\r\n                // [100.3541, 13.9706],\r\n                // [91.4461, 13.9706]\r\n            ],\r\n            // Set to true if the canvas source is animated. If the canvas is static, animate should be set to false to improve performance.\r\n            animate: true\r\n            });\r\n             \r\n        this.map.addLayer({\r\n            id: 'canvas-layer',\r\n            type: 'raster',\r\n            source: 'canvas-source'\r\n            });\r\n\r\n    }\r\n    \r\n    public center = (lng: number = -99.292649, lat: number = 39.043903) => {\r\n        const v = new mapboxgl.LngLat(lng, lat);\r\n        // console.log(v);\r\n        this.map.setCenter({ lat, lng })\r\n    }\r\n    public toMap = (x: number, y: number) => {\r\n        const p = this.map.unproject({x, y} as any)\r\n        return [p.lng, p.lat];\r\n    }\r\n    public toScreen = (lon: number, lat: number) => {\r\n        const p = this.map.project([lon, lat])\r\n        return [p.x, p.y];\r\n    }\r\n    public mouseDown = (e) => {\r\n        // console.log(this.toScreen(-71.093161, 42.358871))\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseUp = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseMove = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseClick = (e) => {\r\n        // this.downloadImage();\r\n        // console.log(e)\r\n        \r\n        // console.log(this.toMap(100, 100));\r\n        // console.log(e.point)\r\n        // this.center()\r\n        // this.map.zoomTo(0)\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseDClick = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n     \r\n    }\r\n    public downloadImage() {\r\n        const canvasMapbox = this.map.getCanvas();\r\n        const dataURL = downloadImage(canvasMapbox, this.solution.renderer.canvas);\r\n        // console.log(dataURL)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n","\nexport const downloadImage = (canvasMapbox, customCanvas, fileName = 'map.png') => {\n    // console.log({canvasMapbox, customCanvas})\n    // const canvasMapbox = this.map.getCanvas(); // this.solution.deckGL.deckLayer.deck.canvas; // this.map.getCanvas(); //  document.querySelector(\".mapboxgl-canvas\") as HTMLCanvasElement;\n\n    const canvasOut = document.createElement(\"canvas\");\n    canvasOut.width = canvasMapbox.width;\n    canvasOut.height = canvasMapbox.height;\n    const context = canvasOut.getContext(\"2d\");\n\n    // context.globalAlpha = 1.0;\n    context.globalAlpha = 1.0;\n    // context.drawImage(this.deckLayer.deck.canvas, 0, 0);\n    context.drawImage(canvasMapbox, 0, 0);\n    // context.drawImage(this.solution.renderer.canvas, 0, 0, canvasMapbox.width, canvasMapbox.height);\n    context.drawImage(customCanvas, 0, 0, canvasMapbox.width, canvasMapbox.height);\n    const dataURL = canvasOut.toDataURL();\n    let img = new Image();\n    img.width = canvasMapbox.width;\n    img.height = canvasMapbox.height;\n    img.src = dataURL;\n\n    let link = document.createElement('a');\n    link.download = fileName;\n    link.href = dataURL\n    link.click();    \n    return dataURL;\n};\n","import { MapboxLayer } from '@deck.gl/mapbox';\nimport { ScatterplotLayer, ArcLayer } from '@deck.gl/layers';\n\nimport { Solution } from '..';\n\nexport class DeckGL {\n    public solution: Solution;\n    deckLayer: any;\n    deckLayer2: any;\n    map: mapboxgl.Map;\n    constructor(solution: Solution) {\n        this.solution = solution;\n    }\n    public initPost() {\n        this.map = this.solution.mapboxWrapper.map;\n\n        this.deckLayer = new MapboxLayer({\n            id: 'my-scatterplot',\n            type: ScatterplotLayer,\n            data: [\n                {position: [-74.5, 40], size: 10000},\n                {position: [-74.5, 40.5], size: 5000},\n                {position: [-74.6, 40.5], size: 5800},\n                {position: [-74.7, 40.5], size: 100},\n            ],\n            // @ts-ignore\n            getPosition: d => d.position,\n            getRadius: d => d.size,\n            getFillColor: d => [255, 140, 0],\n            getLineColor: d => [255, 255, 0]\n        });\n        this.map.addLayer(this.deckLayer, 'waterway-label');\n\n\n\n        const data = [\n            { pickup: [-122.42, 37.8], dropoff: [-74.5, 40.5] },\n            { pickup: [-122.43, 37.8], dropoff: [-122.42, 37.75] }\n        ];\n\n\n        this.deckLayer2 = new MapboxLayer({\n            id: 'my-scatterplot2',\n            type: ArcLayer,\n            data: data,\n            // @ts-ignore\n            getSourcePosition: d => d.pickup,\n            getTargetPosition: d => d.dropoff,\n            getSourceColor: d => [255, 128, 0],\n            getTargetColor: d => [0, 128, 255],\n            strokeWidth: 5\n          });\n\n        // this.deckLayer2 =  new ArcLayer({\n        //     data,\n        //     // @ts-ignore\n        //     getSourcePosition: d => d.pickup,\n        //     // @ts-ignore\n        //     getTargetPosition: d => d.dropoff,\n        //     getSourceColor: d => [255, 128, 0],\n        //     getTargetColor: d => [0, 128, 255],\n        //     strokeWidth: 5\n        // });\n   \n        this.map.addLayer(this.deckLayer2 ); // 'water-shadow'\n    }\n}","import { RendererCanvas } from '../../../../lib';\nimport { Solution } from '..';\n\nexport class Renderer extends RendererCanvas {\n    public app: Solution\n    public time: number = 0.0;\n    public pts: number[][] = [];\n    public isActive = false;\n    constructor(div: any, app: Solution) {\n        super(div);\n        this.app = app;\n        this.canvas.id = 'mapboxCustom'\n\n        // const dd = app.mapboxWrapper.map.getCanvas();\n\n        // this.canvas.width = dd.width;\n        // this.canvas.height = dd.height;\n        this.canvas.style.position = 'absolute';\n        // this.canvas.style.width = '100%';\n        // this.canvas.style.height = '100%';\n        this.canvas.style.pointerEvents = 'none';\n        this.canvas.style.mixBlendMode = 'color-dodge'\n\n        // console.log(dd.width, dd.height,)\n        // TODO\n        // You code goes here for one time operation\n        // this.pts.push([0, 0]); \n        // this.pts.push([this.canvas.width * 2, this.canvas.height * 2]); \n        // this.pts.push([-71.093161, 42.358871]);\n\n        this.start();\n    }\n    public initPost() {\n        this.ctx.globalCompositeOperation = 'color-dodge';\n        this.isActive = true;\n        // \n    }\n    public mouseDown = (x: number, y: number): void => {\n\n    }\n    public mouseUp = (x: number, y: number): void => {\n\n    }\n    public mouseDrag = (x: number, y: number): void => {\n\n    }\n    public render(ctx: CanvasRenderingContext2D): void {\n        if (!this.isActive) { return; }\n        this.time += 0.1;\n\n        const z = this.app.mapboxWrapper.map.getZoom();\n        const zoomFactor = Math.pow(2, z) * 0.1\n        \n\n        for(let i = 0 ; i < this.pts.length; ++i) {\n            const pt = this.pts[i];\n            const p = this.app.mapboxWrapper.toScreen(pt[0], pt[1]);\n            // const p = this.app.mapboxWrapper.map.unproject({x: 10, y: 10})\n    \n\n            const size = 0.25 * zoomFactor;\n\n            ctx.beginPath();\n            ctx.arc(p[0], p[1], size + ((Math.sin(this.time + i) + 3) * zoomFactor ), 0, Math.PI * 2);\n            ctx.closePath();\n            ctx.fillStyle = 'rgba(0, 255, 0, 0.7)';\n            ctx.fill();\n        }\n\n    }\n}","import { Solution } from '..';\nexport class UIWrapper {\n    public solution: Solution;\n    public divHost: HTMLElement;\n    constructor(solution: Solution) {\n        this.solution = solution;\n        this.divHost = solution.divHost;\n        this.initUI();\n    }\n    public initUI() {\n        const divMenu = document.createElement('div');\n        this.divHost.appendChild(divMenu);\n\n        const div = document.createElement('div');\n        div.textContent = 'download';\n        div.style.position = 'relative';\n        div.style.margin = '10px';\n        div.onclick = () => {\n            this.solution.mapboxWrapper.downloadImage();\n        }\n        divMenu.appendChild(div);\n    }\n}","import { MapboxGLWrapper } from './MapboxGLWrapper';\r\nimport { DeckGL } from './DeckGL';\r\nimport { Renderer } from './CanvasCustom';\r\nimport { UIWrapper } from './UI';\r\n\r\nexport class Solution {\r\n    public divHost: HTMLDivElement;\r\n    public mapboxWrapper: MapboxGLWrapper;\r\n    public deckGL: DeckGL\r\n    public renderer: Renderer;\r\n    public uiWrapper: UIWrapper;\r\n    constructor(id: string) {\r\n        this.divHost = document.getElementById(id) as HTMLDivElement;\r\n        this.divHost.style.position = 'relative';\r\n        \r\n        this.deckGL = new DeckGL(this);\r\n        this.mapboxWrapper = new MapboxGLWrapper(this);\r\n        this.mapboxWrapper.mouseDown = this.mouseDown\r\n        this.mapboxWrapper.mouseUp = this.mouseUp\r\n        this.mapboxWrapper.mouseClick = this.mouseClick\r\n        this.mapboxWrapper.mouseMove = this.mouseMove\r\n        \r\n        this.renderer = new Renderer(this.divHost, this);\r\n\r\n        this.uiWrapper = new UIWrapper(this);\r\n    }\r\n    public initPost() {\r\n        this.renderer.initPost();\r\n        this.deckGL.initPost();\r\n    }\r\n    public mouseDown = (e) => {\r\n        // TODO\r\n    }\r\n    public mouseUp = (e) => {\r\n        // TODO\r\n    }\r\n    public mouseDrag = (e) => {\r\n        // TODO\r\n    }\r\n    public mouseClick = (e) => {\r\n        // TODO\r\n        // console.log(e);\r\n        // console.log(e['lngLat']);\r\n        // this.renderer.pts.push([e['lngLat']['lng'], e['lngLat']['lat']])\r\n        // this.renderer.pts.push([e.point.x, e.point.y])\r\n    }\r\n    public mouseMove = (e)  =>{\r\n        // TODO\r\n    }\r\n    public keyDown(k: KeyboardEvent) {\r\n        // TODO\r\n    }\r\n    public destroy() {\r\n        this.renderer.destroy();\r\n        while (this.divHost.lastElementChild) {\r\n            this.divHost.removeChild(this.divHost.lastElementChild);\r\n        }\r\n    }\r\n}"],"names":["MapboxGLWrapper","constructor","solution","map","canvasMapbox","center","lng","lat","mapboxgl","setCenter","toMap","x","y","p","this","unproject","toScreen","lon","project","mouseDown","e","mouseUp","mouseMove","mouseClick","mouseDClick","initMap","divHost","id","process","preserveDrawingBuffer","container","zoom","style","dragRotate","disable","on","window","addEventListener","k","div","document","getElementsByClassName","position","display","initPost","getCanvas","initCustomCanvas","renderer","canvas","width","height","getBounds","addSource","type","coordinates","animate","addLayer","source","downloadImage","customCanvas","fileName","canvasOut","createElement","context","getContext","globalAlpha","drawImage","dataURL","toDataURL","img","Image","src","link","download","href","click","DeckGL","deckLayer","deckLayer2","mapboxWrapper","MapboxLayer","ScatterplotLayer","data","size","getPosition","d","getRadius","getFillColor","getLineColor","ArcLayer","pickup","dropoff","getSourcePosition","getTargetPosition","getSourceColor","getTargetColor","strokeWidth","Renderer","RendererCanvas","app","super","time","pts","isActive","mouseDrag","pointerEvents","mixBlendMode","start","ctx","globalCompositeOperation","render","z","getZoom","zoomFactor","Math","pow","i","length","pt","beginPath","arc","sin","PI","closePath","fillStyle","fill","UIWrapper","initUI","divMenu","appendChild","textContent","margin","onclick","Solution","deckGL","uiWrapper","getElementById","keyDown","destroy","lastElementChild","removeChild"],"sourceRoot":""}
"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[16290],{152:(t,e,s)=>{s.d(e,{n:()=>i});class i{constructor(t){this.render=void 0,this.vecs=[],this.pts=[],this.cps=[],this.circle=[],this.polylines=[],this.showFrame=!1,this.showPoint=!0;const e=document.getElementById(t),s=e.getBoundingClientRect(),i=document.createElement("canvas");i.width=s.width,i.height=s.height,e.appendChild(i);const h=i.getContext("2d");let l=-Math.PI/2,r=0,c=!1,a=!1,d=1,u=0,g=0,v=0,y=0,p=0,m=0,f=500;const x=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),o=Math.cos(s),h=Math.sin(s);let l=t.x*o-t.y*h,r=t.x*h+t.y*o,c=t.z*i-r*n;return r=t.z*n+r*i,{x:l,y:r,z:c}},b=t=>{const e=f/(f+t.y)*d;return{x:t.x*e+i.width/2+v,y:-t.z*e+i.height/2+y}},P=t=>{let e=x(t,l,r);return b(e)},k=()=>{h.clearRect(0,0,i.width,i.height);for(let s=0;s<this.polylines.length;++s){let t="red";s%3===1?t="green":s%3===2&&(t="blue"),h.strokeStyle=t,h.beginPath();for(let e=0;e<this.polylines[s].length;++e){let t=P(this.polylines[s][e]);0===e?h.moveTo(t.x,t.y):h.lineTo(t.x,t.y)}h.stroke()}const t=[];this.showPoint&&this.pts.forEach((t=>{const e=x(t,l,r),s=b(e),i=f/(f+e.y)*d;let n=t.size*i;n=n<.1?.1:n,h.beginPath(),h.arc(s.x,s.y,n,0,2*Math.PI),h.fillStyle=t.color?t.color:"#f00",h.fill()}));let e=0;this.showFrame&&this.vecs.forEach((s=>{const i=x(s[0],l,r),o=b(i);t.push(o);const c=x(s[1],l,r),a=b(c);let d="red";e%3===1?d="green":e%3===2&&(d="blue"),n(h,o,a,d),e++})),this.cps.forEach((t=>{const e=x(t,l,r),s=b(e);let i=3*(f/(f+e.y)*d);i=i<.1?.1:i,h.beginPath(),h.arc(s.x,s.y,i,0,2*Math.PI),h.fillStyle="#000",h.fill()})),h.beginPath();for(let s=0;s<this.cps.length;++s){const t=x(this.cps[s],l,r),e=b(t);0===s?h.moveTo(e.x,e.y):h.lineTo(e.x,e.y)}h.lineWidth=1,h.strokeStyle="rgba(0,0,0, 0.75)",h.stroke(),this.circle[0]&&o(h,this.circle[0],this.circle[1],P)};this.render=()=>k(),i.addEventListener("mousedown",(t=>{2===t.button?c=!0:0===t.button&&(t.altKey?c=!0:(a=!0,p=t.clientX-v,m=t.clientY-y)),u=t.clientX,g=t.clientY})),i.addEventListener("mousemove",(t=>{if(c){const e=t.clientX-u,s=t.clientY-g;l-=.01*s,r+=.01*e,u=t.clientX,g=t.clientY}else a&&(v=t.clientX-p,y=t.clientY-m)})),i.addEventListener("mouseup",(()=>{c=!1,a=!1})),i.addEventListener("contextmenu",(t=>{t.preventDefault()})),i.addEventListener("wheel",(t=>{const e=t.clientX-i.getBoundingClientRect().left,s=t.clientY-i.getBoundingClientRect().top,n=d,o=Math.max(.001,.02*d);d+=t.deltaY*-o,d=Math.min(Math.max(d,.1),50);const h=d/n;v-=(e-i.width/2-v)*(h-1),y-=(s-i.height/2-y)*(h-1)})),k()}}const n=function(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"black";const n=e,o=s;t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),t.closePath(),t.strokeStyle=i,t.lineWidth=2,t.stroke()},o=(t,e,s,i)=>{t.beginPath();for(let n=0;n<=360;n++){const o=n*Math.PI/180;let h=i({x:e.x+s*Math.cos(o),y:e.y+s*Math.sin(o),z:e.z});0===n?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y)}t.closePath(),t.stroke()}},16290:(t,e,s)=>{s.r(e),s.d(e,{Solution:()=>o});var i=s(152);class n{constructor(t,e,s,i){if(this.controlPoints=void 0,this.knots=void 0,this.weights=void 0,this.degree=void 0,t.length!==s.length)throw new Error("The number of control points must match the number of weights.");this.controlPoints=t,this.knots=e,this.weights=s,this.degree=i}basisFunction(t,e,s){if(0===e)return this.knots[t]<=s&&s<this.knots[t+1]?1:0;const i=this.knots[t+e]-this.knots[t],n=this.knots[t+e+1]-this.knots[t+1];return(0!==i?(s-this.knots[t])/i*this.basisFunction(t,e-1,s):0)+(0!==n?(this.knots[t+e+1]-s)/n*this.basisFunction(t+1,e-1,s):0)}evaluate(t){const e=this.controlPoints.length,s=[0,0,0];let i=0;for(let n=0;n<e;n++){const e=this.weights[n]*this.basisFunction(n,this.degree,t);i+=e,s[0]+=e*this.controlPoints[n][0],s[1]+=e*this.controlPoints[n][1],s[2]+=e*this.controlPoints[n][2]}return new h(s[0]/i,s[1]/i,s[2]/i)}}class o{constructor(t){this.div=void 0,this.renderer=void 0,this.pts=[],this.lns=[],this.t=0,this.curve=void 0,this.div=document.getElementById(t),this.renderer=new i.n(t),this.renderer.pts=this.pts,this.init(),this.update(),this.render()}init(){const t=new n([[50,300,0],[150,100,0],[250,500,0],[350,200,0],[450,400,0]],[0,0,0,0,1,2,3,3,3,3],[1,1,1,1,1],3),e=[0,.25,.5,.75,1].map((e=>t.evaluate(e))),s=[];for(let i=0;i<100;++i){const e=.01*i,n=t.evaluate(e);s.push(n)}this.pts.push(...s),console.log("1 Curve points:",e),this.curve=t}update(){for(let t=0;t<this.pts.length;++t);console.log(this.pts),this.t+=.01}render(){requestAnimationFrame((()=>{this.render()})),this.update(),this.renderer.render()}destroy(){try{for(;this.div&&this.div.lastElementChild;){const t=this.div.lastElementChild;this.div.removeChild(t)}}catch(t){console.error("Error removing child elements:",t)}}}class h{constructor(t,e,s){this.x=0,this.y=0,this.z=0,this.r=10,this.color="#f0f",this.x=t,this.y=e,this.z=s}render(t){t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.r,0,2*Math.PI),t.closePath(),t.fill()}}}}]);
//# sourceMappingURL=16290.d4420b50.chunk.js.map
{"version":3,"file":"static/js/32432.7a1e9264.chunk.js","mappings":"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","sources":["njslab/GIS/ReactMapGL-canvas-viz/Controller/index.tsx","njslab/GIS/ReactMapGL-canvas-viz/Core/index.ts","njslab/GIS/ReactMapGL-canvas-viz/Component/BInterpolation/BezierInterpolation.ts","njslab/GIS/ReactMapGL-canvas-viz/Component/BInterpolation/index.tsx","webpack://NJS-Lab/./src/njslab/GIS/ReactMapGL-canvas-viz/style.module.css?5531","njslab/GIS/ReactMapGL-canvas-viz/App.tsx","njslab/GIS/ReactMapGL-canvas-viz/index.tsx"],"sourcesContent":["import { Button } from 'antd';\nimport { takeScreenshot } from '../Core';\n\nconst Controller = ({ mapRef }) => {\n\n    const onCapture = (e) => {\n        const canvas = mapRef.getCanvas()\n\n        takeScreenshot(mapRef).then((dataURL) => {\n            const img = new Image()\n            img.width = canvas.width\n            img.height = canvas.height\n            img.src = dataURL as string;\n            // img.onload = function () {\n            //   console.log('done')\n            //   ctx.drawImage(img, 0, 0)\n            // }\n\n            const link = document.createElement('a')\n            link.download = 'fileName.png'\n            link.href = dataURL as string;\n            link.click()\n\n        });\n    }\n\n    return (\n        <div>\n            <div>menu</div>\n\n            <Button type=\"text\" onClick={onCapture}>capture</Button>\n            {/* <Button type=\"text\" onClick={onCapture}>capture</Button> */}\n            {/* <Button type=\"text\" onClick={onCapture}>capture</Button> */}\n\n        </div>\n    )\n}\n\nexport default Controller","\nexport const downloadImage = (canvasMapbox, customCanvas, fileName = 'map.png') => {\n    // console.log({ canvasMapbox, customCanvas })\n    // const canvasMapbox = this.map.getCanvas(); // this.solution.deckGL.deckLayer.deck.canvas; // this.map.getCanvas(); //  document.querySelector(\".mapboxgl-canvas\") as HTMLCanvasElement;\n    const canvasOut = document.createElement('canvas')\n    canvasOut.width = canvasMapbox.width\n    canvasOut.height = canvasMapbox.height\n    const context = canvasOut.getContext('2d')\n    // console.log('context', context)\n    // context.globalAlpha = 1.0;\n    context.globalAlpha = 1.0\n    // context.drawImage(this.deckLayer.deck.canvas, 0, 0);\n    context.drawImage(canvasMapbox, 0, 0)\n    // context.drawImage(this.solution.renderer.canvas, 0, 0, canvasMapbox.width, canvasMapbox.height);\n    context.drawImage(customCanvas, 0, 0, canvasMapbox.width, canvasMapbox.height)\n    const dataURL = canvasOut.toDataURL()\n    const img = new Image()\n    img.width = canvasMapbox.width\n    img.height = canvasMapbox.height\n    img.src = dataURL\n    const link = document.createElement('a')\n    link.download = fileName\n    link.href = dataURL\n    link.click()\n    return dataURL\n}\n\nexport const takeScreenshot = (map) => {\n    return new Promise(function (resolve, reject) {\n        map.once('render', function () {\n            resolve(map.getCanvas().toDataURL())\n        })\n        /* trigger render */\n        map.setBearing(map.getBearing())\n    })\n}\n","\n\nexport class BezierInterpolation {\n    private p0: Vector;\n    private p1: Vector;\n    private p2: Vector;\n    private p3: Vector;\n    private N = 10;\n    private m: Vector = new Vector(0,0);\n    private down = false;\n    private _capture = undefined;\n    private ptsList: Vector[] = [];\n    private t: number = 0;\n    private projectedValues = []\n    constructor(N = 10) {\n        this.N = N;\n        const offset = 50;\n        const offsetController = 50\n\n        const width = 200;\n        const height = 100\n\n        \n        this.p0 = new Vector(offset, height + offset);\n        this.p3 = new Vector(width + offset, offset);\n\n        const xCP = (this.p3.x - this.p0.x) * 0.35 \n        const yCP = (this.p3.y - this.p0.y) * 0.35 \n\n        this.p1 = new Vector(this.p0.x + xCP, this.p0.y + yCP);\n        this.p2 = new Vector(this.p3.x - xCP, this.p3.y - yCP);\n        this.ptsList = [this.p1, this.p2];\n    }\n    private get capture() {\n        return this._capture\n    }\n    private set capture(v) {\n        this._capture = v;\n    }\n    public mouseDown(x: number, y: number): void {\n        this.m.x = x;\n        this.m.y = y;\n        for (let i = 0; i < this.ptsList.length; ++i) {\n\n            const dis = this.ptsList[i].distanceTo(this.m);\n            if (dis < 10) {\n                this.capture = this.ptsList[i];\n            }\n\n        }\n    }\n    public mouseUp(x: number, y: number): void {\n        this.capture = undefined;\n        this.down = false;\n    }\n    public mouseDrag(x: number, y: number): void {\n        this.m.x = x;\n        this.m.y = y;\n        if (this.capture) {\n            this.capture.x = x;\n            this.capture.y = y;\n        }\n    }\n    private project(n: number = 10) {\n        let pts = [];\n        this.projectedValues = []\n        let interval = 1.0 / (n - 1);\n        for (let i = 0; i < n; ++i) {\n            let v = DeCasteljausAlgorithm(this.p0, this.p1, this.p2, this.p3, interval * i);\n            this.projectedValues.push(remap(v.y, this.p0.y, this.p3.y, 0, 1 ))\n            pts.push(v);\n        }\n\n        return pts\n    }\n    public getProjection() {\n        return this.projectedValues\n    }\n    public render(ctx: CanvasRenderingContext2D): void {\n\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n        ctx.beginPath();\n        ctx.rect(this.p0.x, this.p3.y, 200, 100);\n        ctx.strokeStyle = '#000';\n        ctx.lineWidth = 1;\n        ctx.stroke();\n\n        let pts = this.project(this.N);\n        ctx.strokeStyle = '#00ffff';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        for (let i = 0; i < pts.length - 1; ++i) {\n            ctx.moveTo(pts[i].x, pts[i].y)\n            ctx.lineTo(pts[1 + i].x, pts[1 + i].y)\n        }\n        ctx.stroke();\n\n        ctx.strokeStyle = '#000';\n        ctx.lineWidth = 1;\n        ctx.beginPath();\n        ctx.moveTo(this.p0.x, this.p0.y);\n        ctx.lineTo(this.p1.x, this.p1.y);\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(this.p2.x, this.p2.y);\n        ctx.lineTo(this.p3.x, this.p3.y);\n        ctx.stroke();\n\n        this.p0.draw(ctx);\n        this.p1.draw(ctx);\n        this.p2.draw(ctx);\n        this.p3.draw(ctx);\n    }\n\n}\n\nclass Vector {\n    public x = 0;\n    public y = 0;\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    public distanceTo(other: Vector) {\n        return Math.sqrt((other.x - this.x) * (other.x - this.x) + (other.y - this.y) * (other.y - this.y));\n    }\n    public draw(ctx: CanvasRenderingContext2D) {\n        ctx.fillStyle = '#ffffff';\n        ctx.beginPath();\n        ctx.arc(this.x, this.y, 5.0, 0.0, 3.14159 * 2)\n        ctx.closePath();\n        ctx.fill();\n    }\n}\nconst remap = (CValue: number, OldMin: number, OldMax: number, NewMin: number, NewMax: number) => {\n    return (((CValue - OldMin) * (NewMax - NewMin)) / (OldMax - OldMin)) + NewMin;\n}\nconst interpolation = (p0: Vector, p1: Vector, t0: number, t1: number) => {\n    return new Vector(\n        t1 * p0.x + t0 * p1.x,\n        t1 * p0.y + t0 * p1.y\n    );\n};\nconst DeCasteljausAlgorithm = (p0: Vector, p1: Vector, p2: Vector, p3: Vector, t0: number) => {\n    const t1 = 1.0 - t0;\n    const QVector = interpolation(p0, p1, t0, t1);\n    const RVector = interpolation(p1, p2, t0, t1);\n    const SVector = interpolation(p2, p3, t0, t1);\n    const PVector = interpolation(QVector, RVector, t0, t1);\n    const TVector = interpolation(RVector, SVector, t0, t1);\n    return interpolation(PVector, TVector, t0, t1);\n};","import { remap } from \"../../../../../lib\";\nimport { useRef, useState, useEffect } from \"react\";\n\nimport { BezierInterpolation } from \"./BezierInterpolation\";\n\nconst BInterpolation = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [startPos, setStartPos] = useState<{ x: number; y: number } | null>(\n    null\n  );\n\n  const [bezierInterpolation] = useState(() => new BezierInterpolation(100));\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    canvas.width = 500;\n    canvas.height = 500;\n\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    bezierInterpolation.render(ctx);\n  }, []);\n\n  const handleMouseDown = (e: React.MouseEvent<HTMLCanvasElement>) => {\n    setIsDragging(true);\n    const rect = canvasRef.current?.getBoundingClientRect();\n    if (rect) {\n      setStartPos({ x: e.clientX - rect.left, y: e.clientY - rect.top });\n\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n\n      bezierInterpolation.mouseDown(x, y);\n    }\n  };\n\n  const handleMouseMove = (e: React.MouseEvent<HTMLCanvasElement>) => {\n    if (!isDragging || !startPos) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext(\"2d\");\n    const rect = canvas?.getBoundingClientRect();\n\n    if (ctx && rect) {\n      //     console.log('dragging')\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n\n      //   ctx.strokeStyle = 'black';\n      //   ctx.lineWidth = 2;\n      //   ctx.beginPath();\n      //   ctx.moveTo(startPos.x, startPos.y);\n      //   ctx.lineTo(x, y);\n      //   ctx.stroke();\n\n      // console.log('ren')\n      //   setStartPos({ x, y });\n\n      bezierInterpolation.mouseDrag(x, y);\n      bezierInterpolation.render(ctx);\n    //   console.log(bezierInterpolation.getProjection());\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n    setStartPos(null);\n    bezierInterpolation.mouseUp(0, 0);\n  };\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={500}\n      height={500}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onMouseLeave={handleMouseUp} // 드래그 종료 처리\n      style={{\n        cursor: \"crosshair\",\n      }}\n    />\n  );\n};\nexport default BInterpolation;\n","// extracted by mini-css-extract-plugin\nexport default {\"mapContainer\":\"style_mapContainer__VmRBv\",\"menu\":\"style_menu__OZNbn\"};","import mapboxgl from 'mapbox-gl';\nimport Map, { Layer, Marker, Popup, Source } from 'react-map-gl';\nimport { Suspense, useCallback, useState, useRef, useEffect, useMemo } from 'react';\nimport { csvToJsonArray } from '../../../lib/NJSCore/Core/NData'\nimport Controller from './Controller/index';\n\nimport BInterpolation from './Component/BInterpolation';\n\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport styles from './style.module.css';\n\nconst App = () => {\n  const mapRef = useRef();\n\n  const [dataElection, setDataElection] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(process.env.PUBLIC_URL + '/static/dataDummyReady/presidential_election_county_summary_bead.csv');\n        if (!response.ok) {\n          throw new Error('Failed to load csv data');\n        }\n\n        const csvText = await response.text();\n        const result = csvToJsonArray(csvText)\n        // console.log(result)\n        setDataElection(result)\n      } catch (error) {\n        console.error('Error fetching GeoJSON:', error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const interpolateColor = useCallback((input) => {\n    if (input < 0 || input > 1) {\n      throw new Error('Input must be between 0 and 1.')\n    }\n    const red = Math.round(255 * (1 - input))\n    const blue = Math.round(255 * input)\n    return [red, 0, blue]\n  }, [])\n\n  const getLocPctServed = useCallback((geoid) => {\n\n    const county = dataElection.find((item) => {\n      const paddedCountyFips = item.county_fips.toString().padStart(5, '0')\n      return paddedCountyFips === geoid\n    })\n\n    if (county) {\n      return {\n        colorData: parseFloat(county.vote_per_D) || 0,\n        vote_per_D: county.vote_per_D,\n        vote_per_R: county.vote_per_R,\n        loc_pct_served: parseFloat(county.loc_pct_served) || 0\n      }\n    }\n    return null\n  }, [dataElection])\n\n  const [hoveredPoint, setHoveredPoint] = useState(null);\n  const onHover = useCallback((event) => {\n    const county = event.features && event.features[0];\n    if (county) {\n      setHoveredPoint({\n        ...county.properties,\n        longitude: event.lngLat.lng,\n        latitude: event.lngLat.lat,\n      });\n    } else {\n      setHoveredPoint(null);\n    }\n  }, []);\n\n  const onClick = useCallback((event) => {\n    const features = event.target.queryRenderedFeatures(event.point);\n\n    if (event?.features?.length > 0) {\n      // console.log(event, features);\n    }\n  }, []);\n\n\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(process.env.PUBLIC_URL + '/static/dataDummyReady/underserved_locations.geojson');\n        if (!response.ok) {\n          throw new Error('Failed to load GeoJSON data');\n        }\n\n        const geojsonData = await response.json();\n        setDataPoint(geojsonData);\n      } catch (error) {\n        console.error('Error fetching GeoJSON:', error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(process.env.PUBLIC_URL + '/static/data/us_counties.geojson');\n        if (!response.ok) {\n          throw new Error('Failed to load GeoJSON data');\n        }\n\n        const geojsonData = await response.json();\n        setDataPolygon(geojsonData);\n      } catch (error) {\n        console.error('Error fetching GeoJSON:', error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const [dataPoint, setDataPoint] = useState({\n    type: 'FeatureCollection',\n    features: [],\n  });\n  const layerIDPoint = 'my-layer-circle';\n  const layerStylePointCircle: any = {\n    id: layerIDPoint,\n    type: 'circle',\n    paint: {\n      'circle-radius': 6,\n      'circle-color': '#4E3FC8',\n      'circle-opacity': 0.8,\n      'circle-stroke-width': 2,\n      'circle-stroke-color': '#fff',\n    },\n  };\n\n\n  const decayFactor = 1.5;\n\n  const [dataPolygon, setDataPolygon] = useState({\n    type: 'FeatureCollection',\n    features: [],\n  });\n  const layerIDPolygon = 'polygon-layer';\n  const layerStylePolygon: any = {\n    id: layerIDPolygon,\n    type: 'fill',\n    paint: {\n      // 'fill-color': '#f00',\n      'fill-color': [\n        'rgba',\n        ['get', 'R'],\n        ['get', 'G'],\n        ['get', 'B'],\n        ['get', 'O']\n      ],\n      'fill-opacity': 0.5,\n      'fill-outline-color': '#000',\n    },\n  };\n  const updatedGeoJSON = useMemo(\n    () => ({\n      ...dataPolygon,\n      features: dataPolygon.features.map((feature) => {\n        const county = getLocPctServed(feature.properties.GEOID)\n        if (!county) return feature\n\n        const voteR = parseFloat(county.vote_per_R)\n        const voteD = parseFloat(county.vote_per_D)\n        const sum = voteR + voteD\n        const percentageD = voteD / sum\n        const color = interpolateColor(percentageD)\n\n        return {\n          ...feature,\n          properties: {\n            ...feature.properties,\n            R: color[0],\n            G: 0,\n            B: color[2],\n            O:\n              1 -\n              Math.min(county.loc_pct_served ** 2 * decayFactor * 0.0001, 1),\n            loc_pct_served: county.loc_pct_served,\n            vote_per_D: county.vote_per_D,\n            vote_per_R: county.vote_per_R\n          }\n        }\n      })\n    }),\n    [dataPolygon, getLocPctServed, interpolateColor, decayFactor]\n  )\n  \n\n  return (\n    // <div ref={mapContainer} className={styles.mapContainer}>\n    // <div>\n    <div className={styles.mapContainer}>\n      <div className={styles.menu}>\n        <Controller mapRef={mapRef.current} />\n      </div>\n      <Suspense>\n        <Map\n          // @ts-ignore\n          mapLib={mapboxgl}\n          ref={mapRef}\n          initialViewState={{\n            longitude: -100,\n            latitude: 40,\n            zoom: 3.5,\n            // latitude: 37.7577,\n            // longitude: -122.4376,\n            // zoom: 8,\n          }}\n          style={{\n            width: '100%',\n            height: '100%',\n            position: 'relative',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            zIndex: 0,\n            flex: 1,\n          }}\n          mapStyle='mapbox://styles/mapbox/dark-v10'\n          mapboxAccessToken={process.env.REACT_APP_MAPBOX}\n          dragRotate={false}\n          interactiveLayerIds={[\n            layerIDPoint, \n            // layerIDPolygon\n          ]}\n          onMouseMove={onHover}\n          onClick={onClick}\n          // onMove={(evt) => setViewport(evt.viewState)}\n        >\n          <Source id={layerIDPoint} type='geojson' data={dataPoint}>\n            <Layer {...layerStylePointCircle} />\n          </Source>\n\n          <Source id={layerIDPolygon} type='geojson' data={updatedGeoJSON}>\n            <Layer {...layerStylePolygon} />\n          </Source>\n\n          {hoveredPoint && (\n            <Popup\n              longitude={hoveredPoint.longitude}\n              latitude={hoveredPoint.latitude}\n              offset={[0, -15]}\n              closeButton={false}\n              className='z-10'\n            >\n              <div className='p-2'>\n                <h3 className='font-bold'>{hoveredPoint.NAME}</h3>\n                <p>GEOID: { JSON.stringify(hoveredPoint)}</p>\n              </div>\n            </Popup>\n          )}\n          <div style={{\n            position: 'absolute',\n            background: 'rgba(255, 255, 255, 0.23)',\n            width: '200px',\n            height: '100px'\n          }}>\n          <BInterpolation />\n          </div>\n        </Map>\n      </Suspense>\n    </div>\n  );\n};\nexport default App;\n","\"use client\";\r\n\r\nimport ReactDOM from \"react-dom/client\";\r\nimport App from \"./App\";\r\nimport React from \"react\";\r\n\r\nexport class Solution {\r\n  divHost: HTMLDivElement;\r\n  constructor(id: string) {\r\n    this.divHost = document.getElementById(id) as HTMLDivElement;\r\n    const div = document.createElement(\"div\");\r\n    div.style.height = \"100%\";\r\n    div.style.width = \"100%\";\r\n    this.divHost.appendChild(div);\r\n\r\n    const root = ReactDOM.createRoot(div);\r\n\r\n    root.render(\r\n      // <React.StrictMode>\r\n      // <HelleApp /> syntax sugar\r\n      React.createElement(App, {})\r\n      // </React.StrictMode>\r\n    );\r\n  }\r\n  public destroy() {\r\n    try {\r\n      while (this.divHost && this.divHost.lastElementChild) {\r\n        const lastChild = this.divHost.lastElementChild as Node;\r\n        this.divHost.removeChild(lastChild);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error removing child elements:\", error);\r\n    }\r\n  }\r\n}\r\n"],"names":["mapRef","type","onClick","e","canvas","getCanvas","map","Promise","resolve","reject","once","toDataURL","setBearing","getBearing","then","dataURL","img","Image","width","height","src","link","document","createElement","download","href","click","BezierInterpolation","constructor","N","p0","p1","p2","p3","m","Vector","down","_capture","undefined","ptsList","t","projectedValues","this","xCP","x","yCP","y","capture","v","mouseDown","i","length","distanceTo","mouseUp","mouseDrag","project","n","pts","interval","DeCasteljausAlgorithm","push","remap","getProjection","render","ctx","clearRect","beginPath","rect","strokeStyle","lineWidth","stroke","moveTo","lineTo","draw","other","Math","sqrt","fillStyle","arc","closePath","fill","CValue","OldMin","OldMax","NewMin","NewMax","interpolation","t0","t1","QVector","RVector","SVector","PVector","TVector","canvasRef","useRef","isDragging","setIsDragging","useState","startPos","setStartPos","bezierInterpolation","useEffect","current","getContext","fillRect","handleMouseUp","ref","onMouseDown","getBoundingClientRect","clientX","left","clientY","top","onMouseMove","onMouseUp","onMouseLeave","style","cursor","dataElection","setDataElection","async","response","fetch","process","ok","Error","csvText","text","result","csvToJsonArray","error","console","fetchData","interpolateColor","useCallback","input","round","getLocPctServed","geoid","county","find","item","county_fips","toString","padStart","colorData","parseFloat","vote_per_D","vote_per_R","loc_pct_served","hoveredPoint","setHoveredPoint","onHover","event","features","properties","longitude","lngLat","lng","latitude","lat","target","queryRenderedFeatures","point","geojsonData","json","setDataPoint","setDataPolygon","dataPoint","layerIDPoint","layerStylePointCircle","id","paint","dataPolygon","layerIDPolygon","layerStylePolygon","updatedGeoJSON","useMemo","feature","GEOID","voteR","voteD","color","R","G","B","O","min","className","styles","Suspense","mapLib","mapboxgl","initialViewState","zoom","position","right","bottom","zIndex","flex","mapStyle","mapboxAccessToken","dragRotate","interactiveLayerIds","data","offset","closeButton","NAME","JSON","stringify","background","Solution","divHost","getElementById","div","appendChild","ReactDOM","React","App","destroy","lastElementChild","lastChild","removeChild"],"sourceRoot":""}
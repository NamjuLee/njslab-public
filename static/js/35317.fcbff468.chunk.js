"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[35317],{17874:(t,e,i)=>{i.d(e,{$b:()=>n.$,CU:()=>a.CU,Ds:()=>g.D,EW:()=>a.EW,Hq:()=>m.Hq,KF:()=>u.KF,Nl:()=>p.Nl,R4:()=>u.R4,Ry:()=>l.Ry,TE:()=>d.TE,UU:()=>h.U,Ux:()=>d.Ux,VT:()=>u.VT,Wf:()=>l.Wf,XL:()=>m.XL,Yr:()=>d.Yr,__:()=>p.__,ew:()=>s.e,g9:()=>l.g9,hL:()=>o.hL,i$:()=>c.i,iC:()=>m.iC,kC:()=>d.kC,lJ:()=>l.lJ,nP:()=>u.nP,oU:()=>p.oU,qA:()=>p.qA,rW:()=>m.rW,sR:()=>u.sR,wX:()=>m.wX,zq:()=>r.zq});var a=i(49384),o=i(11548),n=i(95203),r=i(6986),s=i(21015),p=i(64768),l=i(14495),h=i(88764),c=i(8742),d=i(98537),g=i(81524),m=i(8894),u=i(85523)},35317:(t,e,i)=>{i.r(e),i.d(e,{ImageAnnoApp:()=>_,Solution:()=>W});i(95203);var a=i(49384),o=i(8894),n=i(81524),r=(i(17874),i(64768)),s=i(11548),p=i(22970),l=i(6986),h=(i(88764),i(85523));class c{constructor(t){this.app=void 0,this.app=t}undo(t){t===r.y0.Editing||t===r.y0.Effecting?this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickUndo():t===r.y0.Drawing&&this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickUndo()}redo(t){t===r.y0.Editing||t===r.y0.Effecting?this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickRedo():t===r.y0.Drawing&&this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickRedo()}rotateCropping(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onRotateCropping(t)}zoomCropping(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onZoomLevel(t)}setScaleGraphics(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(t,e,i)}scaleUpGraphics(){this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(.1,!1)}scaleDownGraphics(){this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(-.1,!1)}activateEffectEnv(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.y0.Editing;this.app.implementation.imageWrapper.tools.editingTool.app.api.activateEffectEnv(t)}deactivateEffectEnv(){this.app.implementation.imageWrapper.tools.editingTool.app.api.deactivateEffectEnv()}setColor(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t===r.y0.Drawing)this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickSetColor(e,i)}setDrawingMode(t){this.app.implementation.imageWrapper.tools.drawingTool.app&&this.app.implementation.imageWrapper.tools.drawingTool.app.pushAction(t)}revertToOriginal(t){if(t===r.y0.Drawing)this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickRevertToOriginal();else this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickRevertToOriginal()}shiftShape(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickShiftShape(t)}shiftShapeRatio(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickShiftShapeRatio(t)}shiftFilterPreset(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.shiftFilterPreset(t)}reset(){}resizeByWindow(){this.app.implementation.imageWrapper.resizeByWindow()}destroy(){this.app.implementation.imageWrapper.destroy(),this.app.modelController.destroy();try{this.app.modelController.divHost.removeChild(this.app.modelController.div)}catch(t){}}destroyEditing(){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickPlace(),this.app.implementation.imageWrapper.tools.editingTool.app.destroy()}destroyDrawing(){this.app.implementation.imageWrapper.dataSet.paramDrawing.updateDrawingData(this.app.implementation.imageWrapper.tools.drawingTool.app.api.getDataGeometry()),this.app.implementation.imageWrapper.dataSet.paramDrawing.scale=this.app.implementation.imageWrapper.tools.drawingTool.app.api.getScaleFactor(),this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickPlace(),this.app.implementation.imageWrapper.tools.drawingTool.app.destroy()}getData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.app.implementation.imageWrapper.getData(t,e)}resizeDiv(t){t<.3?this.app.implementation.imageWrapper.updateSizeDiv(25):t>.6?this.app.implementation.imageWrapper.updateSizeDiv(90):this.app.implementation.imageWrapper.updateSizeDiv(50)}onClickImportImgByURL(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.app.implementation.imageWrapper.importImgByURL(t,e)}onClickAppendApp(t){this.app.implementation.imageWrapper.appendApp(t)}onClickDownload(){this.app.implementation.commonProcess.downloadImage()}onToggleInteractionMode(){this.app.implementation.commonProcess.toggleInteractionMode()}}class d{constructor(t){this.imageWrapper=void 0,this.imgOrigin=void 0,this._img=void 0,this.widthOrigin=0,this.heightOrigin=0,this.divImg=void 0,this.imageWrapper=t}updateSizeDiv(t){this.imageWrapper.implementation.app.modelController.processorType===r.XN.Img&&(this.divImg.style.width="".concat(t,"%"))}resetImageSize(){this.imgOrigin.width=this.widthOrigin,this.imgOrigin.height=this.heightOrigin}initDivForImgModified(t){this.widthOrigin=t.width,this.heightOrigin=t.height,this.imgOrigin.style.maxWidth="100%",this.imgOrigin.style.maxHeight="100%";const e=document.createElement("div");e.style.textAlign="center",e.style.display="flex",e.style.justifyContent="center",this.imageWrapper.implementation.app.modelController.div.append(e);const i=document.createElement("div");i.id="divImg",i.style.width="50%",i.style.display="flex",i.style.justifyContent="center",i.append(this.imgOrigin),this.divImg=i,e.append(this.divImg)}get img(){return this._img}set img(t){this._img=t}initDivForCSS(t){this.widthOrigin=t.width,this.heightOrigin=t.height,this.img.style.objectFit="none";const e=document.createElement("div");e.style.textAlign="center",e.append(t),this.imageWrapper.implementation.app.modelController.div.append(e)}updateImage(t){this.divImg.removeChild(this.img),this.img=t,this.img.style.width="100%",this.img.style.height="100%",this.divImg.append(this.img)}clear(){this.clearData(),this.clearImgElement()}clearData(){this.imageWrapper.dataSet.clearData()}clearImgElement(){if(this.img&&this.divImg)try{this.divImg.removeChild(this.img),this.imageWrapper.tools.exImageViewer.destroy()}catch(t){console.debug("fail to remove img and img div")}}}var g=i(18489);class m{constructor(){this.img=void 0,this.x=0,this.y=0,this.width=10,this.height=10,this.scale=1,this.rotation=0,this.isCropGraphics=!0,this.shape=r.oU.Rectangle,this.aspectRatio=r.Nl.Original}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height,scale:this.scale,rotation:this.rotation,shape:this.shape,aspectRatio:this.aspectRatio,isCropGraphics:this.isCropGraphics}}toString(){return JSON.stringify(this.toJSON())}update(t,e,i,a,o,n,r,s){this.x=t,this.y=e,this.width=i,this.height=a,this.scale=o,this.rotation=n,this.shape=r,this.aspectRatio=s}}class u{constructor(){this.scale=1,this.canvas=void 0,this.data=void 0}updateDrawingData(t){this.data=t}toJSON(){return{scale:this.scale,geometry:this.data}}updateDrawingCanvas(t){this.canvas=t}getDrawingCanvas(){return this.canvas}}class E{constructor(){this.data={typePreset:"normal",filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]],tints:[],inter:1}}update(t){this.data.typePreset=t.typePreset,this.data.filters=t.filters,this.data.tints=t.tints}toJSON(){return{typePreset:this.data.typePreset,filters:this.data.filters,tints:this.data.tints,inter:1}}}var v=i(98537);class C{constructor(t){this.imageWrapper=void 0,this.paramCropping=void 0,this.paramEffecting=void 0,this.paramDrawing=void 0,this.typeImageCompression=r.__.Png,this.ctx=void 0,this.ctxFiltered=void 0,this.init=!0,this.imageWrapper=t,this.typeImageCompression=this.imageWrapper.implementation.app.typeImageCompression,this.initData()}initData(){if(this.paramCropping=new m,this.paramEffecting=new E,this.paramDrawing=new u,this.imageWrapper.implementation.app.param.data&&this.imageWrapper.implementation.app.param.data.drawing){const{geometry:t}=this.imageWrapper.implementation.app.param.data.drawing,e=t.map((t=>t.id?t:(0,g.Z)((0,g.Z)({},t),{},{id:(0,v.Fs)()})));this.paramDrawing.updateDrawingData(e),this.paramDrawing.scale=this.imageWrapper.implementation.app.param.data.drawing.scale}if(this.imageWrapper.implementation.app.param.data&&this.imageWrapper.implementation.app.param.data.effecting){const t=this.imageWrapper.implementation.app.param.data.effecting;this.paramEffecting.update(t)}}resetData(){this.paramCropping.width=this.imageWrapper.view.widthOrigin,this.paramCropping.height=this.imageWrapper.view.heightOrigin}updateParamCrop(t,e,i,a,o,n,r,s){this.paramCropping.update(t,e,i,a,o,n,r,s)}updateEffecting(t){this.paramEffecting.update(t)}updateDrawingData(t){this.paramDrawing.updateDrawingData(t)}updateDrawingCanvas(t){this.paramDrawing.updateDrawingCanvas(t)}getDrawingCanvas(){return this.paramDrawing.getDrawingCanvas()}clearData(){this.initData()}updateData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dataSync(t,e),{ctx:this.ctx,ctxFiltered:this.ctxFiltered,editing:this.paramCropping.toJSON(),drawing:this.paramDrawing.toJSON(),effecting:this.paramEffecting.toJSON()}}dataSync(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.init&&(this.imageWrapper.implementation.app.modelController.io.emitAction("done-dataSyn@"),this.init=!1);let i=!1;e&&this.imageWrapper.tools.activeApp===r.y0.Drawing&&(i=this.imageWrapper.tools.drawingTool.app.api.needRevertBaseImage());const o=this.imageWrapper.tools.editingTool.app.getData(i);if(this.checkUpdateDrawingData(),t){this.ctx=o.ctx,this.ctxFiltered=o.ctxFiltered;let t=this.imageWrapper.implementation.app.param.environment===r.qA.AGSM?(0,h.VT)():(0,h.KF)(),e=(0,h.nP)();this.ctx=(0,s.eg)(this.ctx,this.paramDrawing.toJSON(),this.paramDrawing.scale,o.params.x,o.params.y,this.imageWrapper.implementation.app.param.environment,t.path2D,e.path2D),this.ctxFiltered=(0,s.eg)(this.ctxFiltered,this.paramDrawing.toJSON(),this.paramDrawing.scale,o.params.x,o.params.y,this.imageWrapper.implementation.app.param.environment,t.path2D,e.path2D),this.paramCropping.isCropGraphics&&(this.ctx=(0,a.EW)(this.ctx,o.params.shape,0,0,o.params.width,o.params.height,!1),this.ctxFiltered=(0,a.EW)(this.ctxFiltered,o.params.shape,0,0,o.params.width,o.params.height,!1))}this.paramCropping.update(o.params.x,o.params.y,o.params.width,o.params.height,o.params.scale,o.params.rotationRadian,o.params.shape,o.params.aspectRatio)}checkUpdateDrawingData(){if(this.imageWrapper.tools.activeApp===r.y0.Editing&&0===this.imageWrapper.tools.editingTool.app.api.getGeometryLength());else{const t=this.imageWrapper.tools.drawingTool.app.api.getDataGeometry();t&&(this.updateDrawingData(t),this.paramDrawing.scale=this.imageWrapper.tools.drawingTool.app.api.getScaleFactor())}}}class y{constructor(t){this.tools=void 0,this.app=void 0,this.revertToOriginal=!1,this.tools=t}async append(){return i.e(56756).then(i.bind(i,56756)).then((t=>{let{AppImageDrawing:e,InteractionMode:i}=t;this.tools.divUpdatePre();const a={id:this.tools.imageWrapper.implementation.app.modelController.divHost.id,UI:this.tools.imageWrapper.implementation.app.param.ui,interactionMode:i.Drawing,config:{BASE_URL:""},environment:this.tools.imageWrapper.implementation.app.param.environment,themeUI:this.tools.imageWrapper.implementation.app.modelController.theme.themeData};this.revertToOriginal&&(this.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData([]),this.revertToOriginal=!1);const o=this.tools.imageWrapper.dataSet.paramDrawing.toJSON();this.app=new e(a,o),this.app.updateEffecting(this.tools.imageWrapper.dataSet.paramEffecting.toJSON()),this.app.emitAction=t=>{this.from(t)},this.app.initImageByImg(this.tools.imageWrapper.implementation.imageWrapper.view.img,this.tools.imageWrapper.implementation.imageWrapper.dataSet.paramCropping.toString(),this.tools.imageWrapper.implementation.imageWrapper.view.imgOrigin,this.tools.imageWrapper.implementation.app.param.colorCover)})).catch((t=>{throw console.debug("Stop loading Image Editing App."),console.debug(t),t}))}from(t){const e=t.indexOf(this.tools.delimiter),i=e<0?[t]:[t.substring(0,e),t.substring(e+1,t.length)];let a;switch(i[0]){case"set-drawing-mode":case"update-container-size":case"ready":case"select-shapes":case"history":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t);break;case"destroy":return void this.tools.appDestroy();case"update":this.tools.imageWrapper.dataSet.updateDrawingData(JSON.parse(i[1]));break;case"remove":case"add":case"transform":this.updateGeomData();break;case"update-cropping":a=JSON.parse(i[1]),this.updateCropping(a);break;case"update-effecting":a=JSON.parse(i[1]),this.tools.imageWrapper.dataSet.updateEffecting(a)}}updateCropping(t){this.tools.imageWrapper.dataSet.updateParamCrop(t.x,t.y,t.width,t.height,t.scale,t.rotation,t.shape,t.aspectRatio),this.tools.editingTool.app.api.updateFrameParam(t.x,t.y,t.width,t.height,t.scale,t.rotation,t.shape,t.aspectRatio),this.tools.imageWrapper.implementation.app.modelController.io.emitAction("ready@update-div-size")}updateGeomData(){const t=this.app.api.getAllGeometries(),e=this.app.api.getScaleFactor();this.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData(t),this.tools.imageWrapper.dataSet.paramDrawing.scale=e,this.tools.imageWrapper.dataSet.updateDrawingCanvas(this.app.api.getCanvas())}}class f{constructor(t){this.tools=void 0,this.app=void 0,this.tools=t}async append(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.y0.Editing;return i.e(86041).then(i.bind(i,86041)).then((e=>{let{AppImageEditing:i}=e;this.tools.divUpdatePre();const a={id:this.tools.imageWrapper.implementation.app.modelController.divHost.id,UI:this.tools.imageWrapper.implementation.app.param.ui,theme:this.tools.imageWrapper.implementation.app.param.ui?this.tools.imageWrapper.implementation.app.modelController.theme.themeData:void 0,environment:this.tools.imageWrapper.implementation.app.param.environment};this.app=new i(a),this.tools.imageWrapper.implementation.app.param.colorCover&&(this.app.coverColor=this.tools.imageWrapper.implementation.app.param.colorCover),this.app.api.setTypeImageCompression=this.tools.imageWrapper.implementation.app.typeImageCompression,this.app.emitAction=t=>{this.from(t)},t===r.y0.Effecting&&this.app.api.activateEffectEnv("markup");const o=this.tools.imageWrapper.implementation.imageWrapper.dataSet.paramDrawing.toJSON();o.geometry&&(this.app.pushDrawingData(o.geometry),this.app.setScaleGlobal(o.scale)),this.app.initImageByImg(this.tools.imageWrapper.implementation.imageWrapper.view.imgOrigin),this.app.api.initEffect(this.tools.imageWrapper.implementation.imageWrapper.dataSet.paramEffecting.toJSON());const n=this.tools.imageWrapper.implementation.imageWrapper.getParamCrop();this.app.api.initFrame(n.x,n.y,n.width,n.height,n.scale,n.rotation,n.shape,n.aspectRatio)})).catch((t=>{throw console.debug("Stop loading Image Editing App."),console.debug(t),t}))}from(t){const e=t.indexOf(this.tools.delimiter),i=e<0?[t]:[t.substring(0,e),t.substring(e+1,t.length)];let a;switch(i[0]){case"destroy":this.tools.appDestroy();break;case"update-container-size":case"ready":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t);break;case"post-update":this.tools.imageWrapper.implementation.app.modelController.io.emitAction("post-update@");break;case"filter":a=JSON.parse(i[1]),this.tools.imageWrapper.dataSet.paramEffecting.update(a),this.tools.imageWrapper.implementation.app.modelController.io.emitAction("filter@".concat(a.typePreset));break;case"history":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t),this.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData(this.app.api.getDrawing());break;case"update":a=JSON.parse(i[1]),this.update(a);break;case"update-geometry":this.tools.imageWrapper.dataSet.updateDrawingData(JSON.parse(i[1]))}}update(t){this.tools.imageWrapper.dataSet.updateEffecting(t.filter);const e=t.crop;if(this.tools.imageWrapper.implementation.app.modelController.processorType===r.XN.Css)this.tools.imageWrapper.implementation.imageWrapper.updateImgCropByCSS(e.x,e.y,e.width,e.height,e.scale,e.rotation,e.shape,e.aspectRatio);else{const t=this.tools.editingTool.app.getImage();this.tools.imageWrapper.implementation.imageWrapper.updateImgCropByImg(t,e.x,e.y,e.width,e.height,e.scale,e.rotation,e.shape,e.aspectRatio)}this.tools.exImageViewer.updateCanvasSize(200,200),this.tools.imageWrapper.updateDrawing()}}class N{constructor(t){this.tools=void 0,this.app=void 0,this.renderScale=1,this.tools=t}async append(t,e,a){return i.e(21030).then(i.bind(i,21030)).then((i=>{let{ExpressImageViewer:o}=i;this.app=new o(t,e,a)})).catch((t=>{throw console.debug("Stop loading Image Effecting App."),console.debug(t),t}))}from(t){const e=t.indexOf(this.tools.delimiter),i=e<0?[t]:[t.substring(0,e),t.substring(e+1,t.length)];console.log(e,i)}updateCanvasSize(t,e){this.app.updateCanvasSize(t,e)}updateDrawing(){this.app}destroy(){this.app.destroy()}}class w{constructor(t){this.imageWrapper=void 0,this.drawingTool=void 0,this.editingTool=void 0,this.exImageViewer=void 0,this.delimiter="@",this.activeApp=r.y0.Editing,this.imageWrapper=t,this.drawingTool=new y(this),this.editingTool=new f(this),this.exImageViewer=new N(this)}appDestroy(){this.divUpdatePost()}divUpdatePre(){this.imageWrapper.implementation.app.modelController.div.style.display="none"}divUpdatePost(){this.imageWrapper.implementation.app.environment===r.qA.Standalone&&(this.imageWrapper.implementation.app.modelController.div.style.display="block"),this.imageWrapper.resizeByWindow()}appendApp(t){switch(t.toLowerCase()){case r.y0.Effecting:this.editingTool.append(r.y0.Effecting),this.activeApp=r.y0.Editing;break;case r.y0.Editing:this.editingTool.append(),this.activeApp=r.y0.Editing;break;case r.y0.Drawing:this.drawingTool.append(),this.activeApp=r.y0.Drawing;break;case r.y0.Viewer:this.exImageViewer.append(this.imageWrapper.view.divImg,this.imageWrapper.view.imgOrigin.clientWidth,this.imageWrapper.view.imgOrigin.clientHeight)}}updateEnvironment(t){void 0!==this.editingTool.app&&this.editingTool.app.api.shiftEnvironment(t),void 0!==this.drawingTool.app&&this.drawingTool.app.api.shiftEnvironment(t)}}class D{constructor(t){this.implementation=void 0,this.view=void 0,this.dataSet=void 0,this.tools=void 0,this.implementation=t,this.tools=new w(this),this.view=new d(this),this.dataSet=new C(this)}async importImgByURL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.view.clear();const i=await(0,o.oK)(t);if(this.view.imgOrigin=i,this.view.img=i,this.implementation.app.modelController.processorType===r.XN.Css)this.view.initDivForCSS(this.view.imgOrigin);else{try{this.view.initDivForImgModified(this.view.imgOrigin)}catch(a){return void console.log("importImgByURL->initDivForImgModified",a)}this.tools.appendApp(r.y0.Viewer)}if(this.dataSet.resetData(),e&&this.tools.editingTool.append(),this.implementation.app.param.data&&this.implementation.app.param.data.editing){const t=this.implementation.app.param.data.editing;this.dataSet.updateParamCrop(t.x,t.y,t.width,t.height,t.scale,t.rotation,t.shape,t.aspectRatio)}}getData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.tools.imageWrapper.dataSet.updateData(t,e)}getParamCrop(){return this.dataSet.paramCropping}updateImgCropByImg(t,e,i,a,o,n,r,s,p){this.dataSet.updateParamCrop(e,i,a,o,n,r,s,p),this.view.updateImage(t)}updateImgCropByCSS(t,e,i,a,o,n,r,s){this.dataSet.updateParamCrop(t,e,i,a,o,n,r,s),this.view.img.style.objectPosition="".concat(-this.dataSet.paramCropping.x,"px ").concat(-this.dataSet.paramCropping.y,"px ");const p="scale(".concat(o,") rotate(").concat(180*n/Math.PI,"deg)");this.view.img.style.transform=p,this.view.img.width=this.dataSet.paramCropping.width,this.view.img.height=this.dataSet.paramCropping.height}updateImgCrop(t,e,i,a,o,n,r,s){this.dataSet.updateParamCrop(t,e,i,a,o,n,r,s)}updateEnvironment(t){this.tools.updateEnvironment(t)}toJSON(){return JSON.stringify(this.dataSet.paramCropping)}resizeByWindow(){this.updateDrawing()}updateSizeDiv(t){this.view.updateSizeDiv(t),this.tools.exImageViewer.renderScale=t<30?.5:t>80?1.2:1,this.updateDrawing()}updateDrawing(){this.tools.exImageViewer.updateDrawing()}appendApp(t){this.tools.appendApp(t)}updateViewMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.An.Drawing;this.tools.exImageViewer.app.updateMode(t)}destroy(){this.tools.drawingTool.app.destroy(),this.tools.editingTool.app.destroy()}}class A{constructor(t){this.implementation=void 0,this.implementation=t}downloadImage(){let t=this.implementation.imageWrapper.tools.exImageViewer.app.getCanvas(),e=this.implementation.imageWrapper.tools.editingTool.app.getImage();if(t){let i=new Image;i=e,e=(0,a.z5)(i,t,i.width,i.height)}(0,a.GN)(e)}toggleInteractionMode(){this.implementation.imageWrapper.tools.exImageViewer.app&&(this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode===p.An.InteractiveViewer?this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode=p.An.ObserveViewer:this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode=p.An.InteractiveViewer)}}class I{constructor(t){this.app=void 0,this.commonProcess=void 0,this.imageWrapper=void 0,this.app=t,this.commonProcess=new A(this),this.imageWrapper=new D(this)}}class R{constructor(t){this.io=void 0,this.io=t}pushAction(t){const e=t.indexOf("@"),i=e<0?[t]:[t.substring(0,e),t.substring(e+1,t.length)],a=i[1];switch(i[0]){case"style":break;case"activateApp":this.io.controller.app.api.onClickAppendApp(a);break;case"destroyApp":this.destroyApp(a);break;case p.Us.SetDrawingMode:const t=i[0]+"@";this.setDrawingMode(a,t)}}destroyApp(t){switch(t){case r.y0.Drawing:this.io.controller.app.api.destroyDrawing();break;case r.y0.Editing:this.io.controller.app.api.destroyEditing()}}setDrawingMode(t,e){switch(t){case l.uA.SELECT:this.io.controller.app.api.setDrawingMode(e+l.uA.SELECT);break;case l.uA.POINT_REGULAR:this.io.controller.app.api.setDrawingMode(e+l.uA.POINT_REGULAR);break;case l.uA.POINT_NUMBERED:this.io.controller.app.api.setDrawingMode(e+l.uA.POINT_NUMBERED);break;case l.uA.POLYLINE_BENDING:this.io.controller.app.api.setDrawingMode(e+l.uA.POLYLINE_BENDING);break;case l.uA.FREEHAND_POLYLINE_BENDING:this.io.controller.app.api.setDrawingMode(e+l.uA.FREEHAND_POLYLINE_BENDING);break;case l.uA.POLYGON:this.io.controller.app.api.setDrawingMode(e+l.uA.POLYGON);break;case l.uA.FREEHAND_POLYGON:this.io.controller.app.api.setDrawingMode(e+l.uA.FREEHAND_POLYGON);break;case l.uA.RECTANGLE:this.io.controller.app.api.setDrawingMode(e+l.uA.RECTANGLE);break;case l.uA.CIRCLE:this.io.controller.app.api.setDrawingMode(e+l.uA.CIRCLE);break;case l.uA.ARROW_SINGLE:this.io.controller.app.api.setDrawingMode(e+l.uA.ARROW_SINGLE);break;case l.uA.ARROW_DOUBLE:this.io.controller.app.api.setDrawingMode(e+l.uA.ARROW_DOUBLE);break;case l.uA.TEXT_LEADERLINE:this.io.controller.app.api.setDrawingMode(e+l.uA.TEXT_LEADERLINE)}}}class O{constructor(t){this.controller=void 0,this.stateProcessing=void 0,this.init=!0,this.controller=t,this.stateProcessing=new R(this)}emitAction(t){this.init&&"post-update"===t.split("@")[0]&&(this.init=!1,this.controller.app.postUpdate(),this.controller.app.param.appDefault===r.y0.Editing?this.controller.app.emitAction("update-container-size@original"):this.controller.app.emitAction("update-container-size@")),this.controller.app.emitAction(t)}pushAction(t,e,i){this.switchEnvironment(t,i),"markup"===t&&"set-drawing-mode"===e&&this.stateProcessing.pushAction(p.Us.SetDrawingMode+"@"+i),"markup"===t&&e&&this.pushActionMarkup(e,i),"crop"!==t&&"filter"!==t||!e||this.pushActionCropFilter(e,i)}switchEnvironment(t,e){if("crop"===t&&"markup"===e||"filter"===t&&"markup"===e){0===this.controller.app.implementation.imageWrapper.tools.editingTool.app.api.getGeometryLength()&&(this.controller.app.implementation.imageWrapper.tools.drawingTool.revertToOriginal=!0),this.stateProcessing.pushAction("destroyApp@"+r.y0.Editing),this.stateProcessing.pushAction("activateApp@"+r.y0.Drawing)}"markup"===t&&"crop"===e?(this.stateProcessing.pushAction("destroyApp@"+r.y0.Drawing),this.stateProcessing.pushAction("activateApp@"+r.y0.Editing)):"filter"===t&&"crop"===e&&this.stateProcessing.io.controller.app.api.deactivateEffectEnv(),"filter"===e&&("crop"===t?this.stateProcessing.io.controller.app.api.activateEffectEnv():"markup"===t&&(this.stateProcessing.pushAction("destroyApp@"+r.y0.Drawing),this.stateProcessing.pushAction("activateApp@"+r.y0.Effecting)))}pushActionCropFilter(t,e){switch(t){case"undo":this.controller.app.api.undo(r.y0.Editing);break;case"redo":this.controller.app.api.redo(r.y0.Editing);break;case"shape":this.controller.app.api.shiftShape(e);break;case"aspect-ratio":this.controller.app.api.shiftShapeRatio(e);break;case"revert-to-original":this.controller.app.api.revertToOriginal(r.y0.Editing);break;case"set-filter-preset":this.controller.app.api.shiftFilterPreset(e)}}pushActionMarkup(t,e){switch(t){case"init-scale":this.controller.app.api.setScaleGraphics(+e,!0,!1);break;case"set-scale":this.controller.app.api.setScaleGraphics(+e);break;case"offset-scale":this.controller.app.api.setScaleGraphics(+e,!1);break;case"undo":this.controller.app.api.undo(r.y0.Drawing);break;case"redo":this.controller.app.api.redo(r.y0.Drawing);break;case"init-color":const t=!1;this.controller.app.api.setColor(r.y0.Drawing,e,t);break;case"set-color":this.controller.app.api.setColor(r.y0.Drawing,e);break;case"revert-to-original":this.controller.app.api.revertToOriginal(r.y0.Drawing)}}}class b{constructor(t){this.modelController=void 0,this.themeData={background:"radial-gradient(rgb(235, 235, 235), rgba(200, 200, 200, 1))",top:{iconFill:"rgb(255, 255, 255)",background:"rgb(34, 34, 34)",marginBottom:"100px",padding:"25px",height:"90px"},bottom:{background:"radial-gradient(rgb(235, 235, 235), rgba(200, 200, 200, 1))"}},this.modelController=t}}class T{constructor(t){this.modelController=void 0,this.modelController=t,this.init()}init(){let t=document.createElement("div");t.id="expree-image-ui",this.modelController.div.append(t);const e=document.createElement("input");e.style.color="#ffffff",e.style.background="rgba(255, 255, 255,0.1)",e.style.border="0px",e.style.margin="2px",e.setAttribute("type","text"),e.setAttribute("value","https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png"),t.append(e),e.addEventListener("keyup",(t=>{13===t.keyCode&&(this.modelController.app.environment===r.qA.Standalone&&t.preventDefault(),this.modelController.app.api.onClickImportImgByURL(e.value))}));let i="#ffffff",a=document.createElement("div");a.textContent="XGraphics Express Image App",a.style.fontSize="14px",a.style.fontWeight="400",a.style.color="#000000",a.style.padding="10px",t.append(a);let o=document.createElement("div");o.textContent="Editing",o.style.fontSize="12px",o.style.fontWeight="400",o.style.color=i,o.style.width="220px",o.style.padding="5px",o.style.marginBottom="10px",o.onclick=()=>{this.modelController.app.api.onClickAppendApp("editing")},o.onmouseenter=()=>{o.style.background="#333333"},o.onmouseleave=()=>{o.style.background="rgba(0, 0, 0, 0)"},t.append(o);let s=document.createElement("div");s.textContent="Effecting",s.style.fontSize="12px",s.style.fontWeight="400",s.style.color=i,s.style.width="220px",s.style.padding="5px",s.style.marginBottom="10px",s.onclick=()=>{this.modelController.app.api.onClickAppendApp("effecting")},s.onmouseenter=()=>{s.style.background="#333333"},s.onmouseleave=()=>{s.style.background="rgba(0, 0, 0, 0)"},t.append(s);let p=document.createElement("div");p.textContent="Drawing",p.style.fontSize="12px",p.style.fontWeight="400",p.style.color=i,p.style.width="220px",p.style.padding="5px",p.style.marginBottom="10px",p.onclick=()=>{this.modelController.app.api.onClickAppendApp("drawing")},p.onmouseenter=()=>{p.style.background="#333333"},p.onmouseleave=()=>{p.style.background="rgba(0, 0, 0, 0)"},t.append(p);let l=document.createElement("input");l.type="range",l.min="0.1",l.max="1.0",l.step="0.01",l.value="0.5",l.oninput=()=>{this.modelController.app.api.resizeDiv(+l.value)},t.append(l);let h=this.modelController.theme.themeData.top.iconFill,c=(0,n.s)((()=>{this.modelController.app.api.onToggleInteractionMode()}),'\n            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="'.concat(h,'" viewBox="0 0 12 32">\n            <path fill-rule="evenodd" d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5z"/>\n            </svg>\n            '));c.style.display="block",c.style.marginTop="15px",c.style.transform="scale(2)";const d=c.firstElementChild;d.onmouseenter=()=>{d.style.fill="#333333"},d.onmouseleave=()=>{d.style.fill="rgba(255, 255, 255, 1)"},t.append(c);let g=(0,n.s)((()=>{this.modelController.app.api.onClickDownload()}),'\n            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="'.concat(h,'" viewBox="0 0 12 32">\n            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 6.854-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5a.5.5 0 0 1 1 0v3.793l1.146-1.147a.5.5 0 0 1 .708.708z"/>\n            </svg>\n            '));g.style.display="block",g.style.marginTop="15px",g.style.transform="scale(2)";const m=g.firstElementChild;m.onmouseenter=()=>{m.style.fill="#333333"},m.onmouseleave=()=>{m.style.fill="rgba(255, 255, 255, 1)"},t.append(g)}}class L{constructor(t){this.app=void 0,this.io=void 0,this.theme=void 0,this.ui=void 0,this.divHost=void 0,this.div=void 0,this.processorType=r.XN.Img,this.app=t,this.theme=new b(this);const e=document.getElementById(this.app.param.id),i=document.createElement("div");e&&i&&(this.divHost=e,this.div=i,this.div.id="express-image-wrapper",this.app.environment===r.qA.Standalone&&(this.div.style.position="relative",this.div.style.width="100vw",this.div.style.height="100vh"),this.divHost.append(this.div)),this.init()}init(){this.io=new O(this),this.app.param.ui&&(this.ui=new T(this))}destroy(){}}class S{constructor(t){this.api=void 0,this.modelController=void 0,this.implementation=void 0,this.debugMode=!0,this.typeImageCompression=void 0,this.param=void 0,this.emitAction=void 0,this._environment=r.qA.SMX,console.log("init....."),console.log(t),(0,h.jY)(),this.param=t,this.typeImageCompression=t.typeImageCompression||r.__.Jpeg,t.emitAction&&this.bindActionEmitting(t.emitAction),this.initApp()}initApp(){this.api=new c(this),this.param.environment&&(this.environment=this.param.environment),this.modelController=new L(this),this.implementation=new I(this),this.param.url&&this.importImgByURL(this.param.url),document.body.addEventListener("keydown",(t=>{t.shiftKey&&"KeyD"===t.key||(t.shiftKey&&"{"===t.key?this.api.undo(""):t.shiftKey&&"}"===t.key?this.api.redo(""):t.shiftKey&&"+"===t.key?this.api.rotateCropping(-10):t.shiftKey&&"_"===t.key?this.api.rotateCropping(10):t.shiftKey&&")"===t.key?this.api.zoomCropping(-.13):t.shiftKey&&"("===t.key?this.api.zoomCropping(.13):t.shiftKey&&"!"===t.key?this.api.scaleDownGraphics():t.shiftKey&&"@"===t.key&&this.api.scaleUpGraphics()),"s"===t.key&&(this.environment=this.environment===r.qA.AGSM?r.qA.SMX:r.qA.AGSM)}))}get environment(){return this._environment}set environment(t){this._environment=t,this.param.environment=t,this.implementation.imageWrapper.updateEnvironment(t)}postUpdate(){console.log("post update...",this.param.appDefault),this.param.appDefault===r.y0.Effecting?this.pushAction("crop","tab-change","filter"):this.param.appDefault===r.y0.Drawing?this.pushAction("crop","tab-change","markup"):(this.param.appDefault,r.y0.Editing)}pushAction(t,e,i){this.modelController.io.pushAction(t,e,i)}bindActionEmitting(t){this.emitAction=t}getData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.api.getData(t,e)}destroy(){this.api.destroy()}async importImgByURL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return await this.api.onClickImportImgByURL(t,e)}}var P=i(458);class x{constructor(t,e){this.imageAnnoApp=void 0,this.hostDiv=void 0,this.main=void 0,this.divTop=void 0,this.divContainer=void 0,this.imageAnnoApp=t,this.hostDiv=e,this.main=document.createElement("div"),this.main.id="imageMain",this.main.style.zIndex="10",this.main.style.backgroundColor="#777",this.main.style.width="100%",this.main.style.height="100%",this.main.style.position="absolute",this.hostDiv.appendChild(this.main),this.divContainer=document.createElement("div"),this.divContainer.id="ng",this.main.appendChild(this.divContainer),this.divTop=document.createElement("div"),this.divTop.id="ui",this.divTop.style.zIndex="10",this.divTop.style.backgroundColor="#000",this.divTop.style.width="100%",this.divTop.style.height="100px",this.divTop.style.position="absolute",this.main.appendChild(this.divTop),this.appendButton()}appendButton(){let t=document.createElement("div");t.textContent="RPoint",t.style.fontSize="12px",t.style.fontWeight="400",t.style.color="#fff",t.style.width="220px",t.style.padding="5px",t.style.marginBottom="10px",t.onclick=()=>{this.imageAnnoApp.app.pushAction("markup","set-drawing-mode",P.AG.POINT_REGULAR)},this.divTop.appendChild(t),t=document.createElement("div"),t.textContent="Rect",t.style.fontSize="12px",t.style.fontWeight="400",t.style.color="#fff",t.style.width="220px",t.style.padding="5px",t.style.marginBottom="10px",t.onclick=()=>{this.imageAnnoApp.app.pushAction("markup","set-drawing-mode",P.AG.RECTANGLE)},this.divTop.appendChild(t)}}class _{static init(t){new _(t)}constructor(t){this.div=void 0,this.host=void 0,this.imageUI=void 0,this.app=void 0,this.emit=t=>{},this.host=document.getElementById(t),this.host.style.backgroundColor="#999",this.imageUI=new x(this,this.host),this.init(this.imageUI.divContainer.id)}init(t){this.app=new S({id:t,ui:!1,appDefault:r.y0.Editing,data:{},emitAction:this.emit}),this.app.importImgByURL("https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg",!0)}}class W{constructor(t){this.divHost=void 0,this.divHost=document.getElementById(t),_.init(t)}destroy(){if(this.divHost)try{for(;this.divHost.firstChild;)this.divHost.removeChild(this.divHost.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("divHost is undefined in destroy method")}}},8742:(t,e,i)=>{i.d(e,{i:()=>a});class a{constructor(){this.history=[],this.currentIndex=-1}reset(){this.history=[],this.currentIndex=-1}push(t){this.currentIndex<this.history.length-1&&this.history.splice(this.currentIndex+1,this.history.length),this.history.push(t),this.currentIndex=this.history.length-1}undo(){if(0!==this.currentIndex)return this.currentIndex--,this.history[this.currentIndex]}redo(){return this.currentIndex++,this.currentIndex=this.currentIndex<this.history.length?this.currentIndex:this.history.length-1,this.history[this.currentIndex]}getIndexCurrent(){return this.currentIndex}getLengthHistory(){return this.history.length}getCurrentState(){return{currentIndex:this.getIndexCurrent(),historyNum:this.getLengthHistory()}}}},8894:(t,e,i)=>{i.d(e,{AJ:()=>d,Hq:()=>c,Sm:()=>o,Wo:()=>r,XL:()=>l,Z3:()=>s,iC:()=>n,kt:()=>a,oK:()=>g,rW:()=>p,wX:()=>h});const a=()=>"rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),")"),o=(t,e,i,a,o,n)=>Math.sqrt((t-a)*(t-a)+(e-o)*(e-o)+(i-n)*(i-n)),n=(t,e,i)=>"#"+[Math.round(t),Math.round(e),Math.round(i)].map((t=>{const e=t.toString(16);return 1===e.length?"0"+e:e})).join(""),r=function(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i=i||"1.0",t=t.replace("#","");const o=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);if(a){const t=.58*o+.17*n+.8*r;e="rgba("+t+","+t+","+t+","+i+")"}else e="rgba("+o+","+n+","+r+","+i+")";return e},s=(t,e)=>{const i=t.split(",");return i[0]+","+i[1]+","+i[2]+","+e+")"},p=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=t.replace("#","");const a=parseInt(t.substring(0,2),16),o=parseInt(t.substring(2,4),16),n=parseInt(t.substring(4,6),16);if(i){const t=.58*a+.17*o+.8*n;return[t,t,t,e]}return[a,o,n,e]},l=(t,e,i)=>{t/=255,e/=255,i/=255;const a=Math.max(t,e,i),o=Math.min(t,e,i);let n=(a+o)/2,r=(a+o)/2,s=(a+o)/2;if(a===o)n=r=0;else{const p=a-o;switch(r=s>.5?p/(2-a-o):p/(a+o),a){case t:n=(e-i)/p+(e<i?6:0);break;case e:n=(i-t)/p+2;break;case i:n=(t-e)/p+4}n/=6}return[n,r,s]},h=(t,e,i)=>{let a,o,n;if(0===e)a=o=n=i;else{const r=(t,e,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t),s=i<.5?i*(1+e):i+e-i*e,p=2*i-s;a=r(p,s,t+1/3),o=r(p,s,t),n=r(p,s,t-1/3)}return[Math.max(0,Math.min(Math.round(255*a),255)),Math.max(0,Math.min(Math.round(255*o),255)),Math.max(0,Math.min(Math.round(255*n),255))]},c=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const a=[];for(let o=0;o<t.length;++o){const n=t[o]+(e[o]-t[o])*i;a.push(n)}return a},d=(t,e,i,a)=>{const o=l(t[0],t[1],t[2]);o[0]+=e,o[1]+=i,o[1]<0&&(o[1]=0),o[2]+=a;const n=h(o[0],o[1],o[2]);return[n[0],n[1],n[2],t[3]]},g=async t=>new Promise(((e,i)=>{const a=new Image;a.crossOrigin="anonymous",a.addEventListener("load",(()=>e(a))),a.addEventListener("error",(t=>i(t))),a.src=t}))},88764:(t,e,i)=>{i.d(e,{U:()=>a});const a={normal:{filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]],tints:[]},film1:{filters:[["contrast",.8],["saturate",1.3],["hue-rotate",-10]],tints:[{bg0:[204,163,76,.15],mode:"soft-light"},{bg0:[68,126,90,.2],mode:"color-dodge"}]},film2:{filters:[["contrast",1.05],["brightness",1],["saturate",1.2],["hue-rotate",-12]],tints:[{bg0:[228,133,111,.25],mode:"screen"},{bg0:[0,95,102,.25],mode:"color-dodge"}]},film3:{filters:[["sepia",.1],["contrast",.95],["brightness",1.15],["saturate",1.1],["hue-rotate",-5]],tints:[{bg0:[1,68,93,.35],mode:"lighten"},{bg0:[161,159,80,.2],mode:"darken"}]},film4:{filters:[["sepia",.1],["brightness",1.1],["saturate",1.25],["hue-rotate",-2]],tints:[{bg0:[0,60,170,.3],mode:"screen"},{bg0:[104,125,200,.25],mode:"overlay"}]},highSaturation:{filters:[["sepia",.1],["contrast",.9],["brightness",1.15],["saturate",1.5]],tints:[{in:.7,out:1,bg0:[0,0,0,0],bg1:[0,0,0,.15],mode:"multiply"}]},bw1:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[40,154,191,.12],mode:"color"}]},bw2:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[55,88,180,.15],mode:"color"}]},sepia:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[255,191,66,.5],mode:"soft-light"},{bg0:[196,100,236,.1],mode:"hard-light"}]}}},14495:(t,e,i)=>{i.d(e,{Ry:()=>d,Wf:()=>l,g9:()=>c,lJ:()=>r});var a=i(88764),o=i(98537),n=i(64768);const r=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return void 0===i||(t.filter=s(i,a),t.drawImage(e,0,0),t.filter="none"),t},s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i="";for(let a=0;a<t.length;++a)i+=p(t[a][0],t[a][1],e);return i},p=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;switch(t){case n.x$.blur:return"blur(".concat((0,o.m1)(0,e,i),"px)");case n.x$.sepia:return"sepia(".concat((0,o.m1)(0,e,i),")");case n.x$.contrast:return"contrast(".concat((0,o.m1)(1,e,i),")");case n.x$.brightness:return"brightness(".concat((0,o.m1)(1,e,i),")");case n.x$.saturate:return"saturate(".concat((0,o.m1)(1,e,i),")");case n.x$.hueRotate:return"hue-rotate(".concat((0,o.m1)(0,e,i),"deg)");default:return""}},l=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(void 0!==e)for(let r=0;r<e.length;++r){const s=e[r];s&&(s.bg1?h(t,s.mode,!0,s.bg0,n,s.bg1,s.in,s.out,i,a,o):h(t,s.mode,!1,s.bg0,n))}},h=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:.5,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:.5,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;t.globalCompositeOperation=e,t.setTransform(t.canvas.width,0,0,t.canvas.height,0,0);const d=.65*c;if(i){let e=t.createRadialGradient(l,h,s*d,l,h,p*d);e.addColorStop(0,"rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",").concat((0,o.m1)(0,a[3],n),")")),e.addColorStop(1,"rgba(".concat(r[0],",").concat(r[1],",").concat(r[2],",").concat((0,o.m1)(0,r[3],n),")")),t.fillStyle=e}else t.fillStyle="rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",").concat((0,o.m1)(0,a[3],n),")");return t.fillRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="source-over",t},c=t=>{const e=[];for(let o in a.U)e.push(o);const i=1/e.length;return e[Math.floor(t/i)]},d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";const e={filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]]};if("normal"===t)return e;const i=a.U[t];if(void 0!==i&&void 0!==i.filters)for(let a=0;a<i.filters.length;++a){const t=i.filters[a][0];for(let o=0;o<e.filters.length;++o)if(e.filters[o][0]===t){e.filters[o][1]=i.filters[a][1];break}}return e.tints=i.tints,e}},21015:(t,e,i)=>{let a,o;i.d(e,{$:()=>a,e:()=>o}),function(t){t.Black="#000000",t.White="#ffffff",t.Aqua="#00ffff",t.Azure="#f0ffff",t.Beige="#f5f5dc",t.Blue="#0000ff",t.Brown="#a52a2a",t.Cyan="#00ffff",t.DarkBlue="#00008b",t.DarkCyan="#008b8b",t.DarkGrey="#a9a9a9",t.DarkGreen="#006400",t.DarKhaki="#bdb76b",t.DarkMagenta="#8b008b",t.DarkOliveGreen="#556b2f",t.DarkOrange="#ff8c00",t.DarkOrchid="#9932cc",t.DarkRed="#8b0000",t.DarkSalmon="#e9967a",t.DarkViolet="#9400d3",t.Fuchsia="#ff00ff",t.Gold="#ffd700",t.Green="#008000",t.Indigo="#4b0082",t.Khaki="#f0e68c",t.LightBlue="#add8e6",t.LightCyan="#e0ffff",t.LightGreen="#90ee90",t.LightGrey="#d3d3d3",t.LightPink="#ffb6c1",t.LightYellow="#ffffe0",t.Lime="#00ff00",t.Magenta="#ff00ff",t.Maroon="#800000",t.Navy="#000080",t.Olive="#808000",t.Orange="#ffa500",t.Pink="#ffc0cb",t.Purple="#800080",t.Red="#ff0000",t.Silver="#c0c0c0",t.Yellow="#ffff00"}(a||(a={})),function(t){t.SourceOver="source-over",t.SourceIn="source-in",t.SourceOut="source-out",t.SourceAtop="source-atop",t.Copy="copy",t.DestinationOver="destination-over",t.DestinationIn="destination-in",t.DestinationOut="destination-out",t.DestinationAtop="destination-atop",t.Lighter="lighter",t.Multiply="multiply",t.Screen="screen",t.Overlay="overlay",t.Darken="darken",t.Lighten="lighten",t.ColorDodge="color-dodge",t.ColorBurn="color-burn",t.HardLight="hard-light",t.SoftLight="soft-light",t.Difference="difference",t.Exclusion="exclusion",t.Hue="hue",t.Saturation="saturation",t.Color="color",t.Luminosity="luminosity"}(o||(o={}))},22970:(t,e,i)=>{let a,o,n,r,s,p,l,h,c,d,g,m,u,E,v,C,y,f,N,w,D;i.d(e,{An:()=>u,Aq:()=>E,BQ:()=>a,CF:()=>n,Nq:()=>f,Nv:()=>c,PH:()=>D,Us:()=>r,cg:()=>s,ct:()=>m,g:()=>h,g4:()=>l,hO:()=>p,iu:()=>N,oW:()=>g,rO:()=>v,uD:()=>C,wn:()=>y,xX:()=>d}),function(t){t.GuidedTour="guidedTour",t.AnnotationMap="annotationMap",t.ExpressMapping="expressMapping",t.ExpressCharting="expressCharting",t.ExpressDrawing="expressDrawing",t.AnnotationGlobe="annotationGlobe",t.AnnotationTerrain="annotationTerrain",t.VisualizationBin="visualizationBin",t.Visualization="visualization",t.VisualizationMapping="visualizationMapping",t.VisualizationCharting="visualizationCharting",t.ImageEditor="imageEditor",t.Viewer3D="viewer3D",t.AnnotationScene="annotationScene",t.WallPaper2D="wallPaper2D",t.Annotation3D="annotation3D",t.WallPaper3D="wallPaper3D",t.DrawingTool2D="drawingTool2D",t.DrawingTool3D="drawingTool3D"}(a||(a={})),function(t){t.Mercator="mercator",t.SphericalProjection="sphericalProjection",t.Orthographic="orthographic",t.ConicEqualArea="conicEqualArea",t.ConicEqualDistance="conicEqualDistance",t.EqualEarth="equalEarth",t.EquiRectangular="equiRectangular",t.Gnomonic="gnomonic",t.ConicConformal="conicConformal",t.StereoGraphics="stereoGraphics",t.AlbersUSA="albersUSA"}(o||(o={})),function(t){t.Default="default",t.Auto="auto",t.Crosshair="crosshair",t.Move="move",t.Pointer="pointer",t.Text="text",t.Wait="wait",t.Help="help",t.Progress="progress",t.NWSEresize="nwse-resize",t.NESWresize="nesw-resize",t.NSresize="ns-resize",t.EWresize="ew-resize"}(n||(n={})),function(t){t.Select="select",t.Undo="undo",t.Redo="redo",t.Deselect="deselect",t.PointerOut="pointerOut",t.SetDrawingMode="setDrawingMode",t.ToggleMapfilter="toggleMapfilter",t.ToggleQuickActions="toggleQuickActions",t.ChangeTheme="changeTheme",t.ToggleDrawingTooltips="toggleDrawingTooltips",t.ToggleGrid="toggleGrid",t.ToggleMeasure="toggleMeasure",t.ShiftUnit="shiftUnit",t.DumpIconsBase64s="dumpIconsBase64s",t.AddIconBase64="addIconBase64",t.SelectIconBase64="selectIconBase64",t.ActiveColorId="activeColorId",t.InclusiveSelect="inclusiveSelect",t.InclusiveDeselect="inclusiveDeselect",t.ExclusiveSelect="exclusiveSelect",t.ExclusiveDeselect="exclusiveDeselect",t.ReorderNumberedPoints="reorderNumberedPoints",t.ReorderNumberedTourPoints="reorderNumberedTourPoints",t.Remove="remove",t.RemoveSelected="removeSelected",t.Update="update",t.Unhighlight="unhighlight",t.Hover="hover",t.Unhover="unhover",t.Enter="enter",t.Leave="leave",t.Show="show",t.Hide="hide",t.HidePopup="hidePopup",t.ShowPopup="showPopup",t.Dump="dump",t.InitGhost="initGhost",t.EnterGhost="enterGhost",t.LeaveGhost="leaveGhost",t.ShowGhostPopup="showGhostPopup",t.HideGhostPopup="hideGhostPopup",t.AddGhost="addGhost",t.Add="add",t.Transform="transform",t.RemoveGhost="removeGhost",t.ShowText="showText",t.HideText="hideText",t.StartEditingText="startEditingText",t.EndEditingText="endEditingText",t.PolylineConstraintLength="polylineConstraintLength",t.PolylineConstraintLengthPercentage="polylineConstraintLengthPercentage",t.DisableExcept="disableExcept",t.Highlight="highlight",t.Style="style",t.ClusteringPoint="clusteringPoint",t.TEMPLoadImage="loadImage"}(r||(r={})),function(t){t.Round="round",t.Butt="butt",t.Square="square"}(s||(s={})),function(t){t.None="none",t.DeepLearning="deepLearning"}(p||(p={})),function(t){t.Svg="svg",t.Canvas="canvas",t.Three="three",t.webgl="webgl",t.Webgl2="webgl2",t.WebGPU="webGPU"}(l||(l={})),function(t){t.Regular="regular",t.DouglasPeucker="douglasPeucker"}(h||(h={})),function(t){t.None="none",t.Zoom="zoom",t.Collision="collision",t.Agent="agent"}(c||(c={})),function(t){t.None="none",t.Zoom="zoom",t.Collision="collision",t.Agent="agent",t.Grid="grid"}(d||(d={})),function(t){t.RpointA="rPointA",t.RpointB="rPointB",t.Image="image"}(g||(g={})),function(t){t.Production="production",t.Development="development",t.Local="local"}(m||(m={})),function(t){t.Drawing="drawing",t.InteractiveViewer="interactiveViewer",t.ObserveViewer="observeViewer"}(u||(u={})),function(t){t.Opera="opera",t.Chrome="chrome",t.Safari="safari",t.Firefox="firefox",t.Ie="ie",t.Edge="edge",t.Unknown="unknown"}(E||(E={})),function(t){t.Up="up",t.Down="down"}(v||(v={})),function(t){t.Left="left",t.Middle="middle",t.Right="right",t.Wheel="wheel",t.Drag="drag",t.DragLeft="dragLeft",t.DragMiddle="dragMiddle",t.DragRight="dragRight",t.Move="move",t.Double="double",t.Up="up",t.Down="down",t.DownMiddle="downMiddle",t.DownRight="downRight"}(C||(C={})),function(t){t.Start="start",t.End="end",t.Move="move",t.Cancel="cancel"}(y||(y={})),function(t){t.Native="native",t.JSAPI4X="JSAPI4X"}(f||(f={})),function(t){t.Curve="curve",t.CurveClosed="curveClosed",t.Line="line",t.Polyline="polyline",t.PolylineBending="polylineBending",t.Polygon="polygon",t.PolygonGraph="polygonGraph",t.PolylineGon="polylineGon",t.Smooth="smooth",t.SmartDrawing="smartDrawing"}(N||(N={})),function(t){t.Wrap="Wrap",t.LineBreak="lineBreak",t.Normal="normal"}(w||(w={})),function(t){t.Start="start",t.End="end",t.Left="left",t.Center="center",t.Right="right"}(D||(D={}))},64768:(t,e,i)=>{let a,o,n,r,s,p,l;i.d(e,{Nl:()=>l,XN:()=>s,__:()=>r,oU:()=>p,qA:()=>a,x$:()=>o,y0:()=>n}),function(t){t.AGSM="agsm",t.SMX="smx",t.Standalone="standalone"}(a||(a={})),function(t){t.blur="blur",t.sepia="sepia",t.contrast="contrast",t.brightness="brightness",t.saturate="saturate",t.hueRotate="hue-rotate",t.none="none"}(o||(o={})),function(t){t.Editing="editing",t.Effecting="effecting",t.Drawing="drawing",t.Viewer="viewer"}(n||(n={})),function(t){t.Jpeg="jpeg",t.Png="png"}(r||(r={})),function(t){t.Css="css",t.Img="img"}(s||(s={})),function(t){t.Circle="circle",t.Rectangle="rectangle",t.RectangleRounded="rectangleRounded",t.Star="star",t.Diamond="diamond"}(p||(p={})),function(t){t.Freeform="freeform",t.Original="original",t.Square="square",t.Portrait="portrait",t.Landscape="landscape",t.Fixed_3_2="3 x 2",t.Fixed_4_3="4 x 3",t.Fixed_16_9="16 x 9"}(l||(l={}))},6986:(t,e,i)=>{let a,o,n,r;i.d(e,{$u:()=>n,uA:()=>a,zq:()=>o}),function(t){t.NONE="NONE",t.SELECT="SELECT",t.REMOVE="REMOVE",t.SELECT_RECT="SELECT_RECT",t.SELECT_LASSO="SELECT_LASSO",t.MOVE_EASING="MOVE_EASING",t.UNDO="UNDO",t.REDO="REDO",t.POINT_REGULAR="POINT_REGULAR",t.POINT_NUMBERED="POINT_NUMBERED",t.POLYLINE="POLYLINE",t.FREEHAND_POLYLINE_BENDING="FREEHAND_POLYLINE_BENDING",t.POLYLINE_CONSTRAINT="POLYLINE_CONSTRAINT",t.POLYGON="POLYGON",t.POLYGON_GRAPH="POLYGON_GRAPH",t.POLYGON_MULTIPLE="POLYGON_MULTIPLE",t.POLYGON_CONSTRAINT="POLYGON_CONSTRAINT",t.POLYLINE_BENDING="POLYLINE_BENDING",t.LINE_GRAPH="LINE_GRAPH",t.CIRCLE="CIRCLE",t.CIRCLE_CONSTRAINT_AREA="CIRCLE_CONSTRAINT_AREA",t.CIRCLE_CONSTRAINT_CIRCUMFERENCE="CIRCLE_CONSTRAINT_CIRCUMFERENCE",t.RECTANGLE="RECTANGLE",t.POINT_ICON="POINT_ICON",t.TEXT="TEXT",t.TEXT_LEADERLINE="TEXT_LEADERLINE",t.STAR="STAR",t.ARROW_SINGLE="ARROW_SINGLE",t.ARROW_DOUBLE="ARROW_DOUBLE",t.CURVE="CURVE",t.CURVE_OPEN="CURVE_OPEN",t.CURVE_CLOSE="CURVE_CLOSE",t.FREEHAND_POLYLINE="FREEHAND_POLYLINE",t.FREEHAND_POLYGON="FREEHAND_POLYGON",t.FREEHAND_POLYGON_GRAPH="FREEHAND_POLYGON_GRAPH",t.FREEHAND_CURVE="FREEHAND_CURVE",t.FREEHAND_CURVE_CLOSED="FREEHAND_CURVE_CLOSED",t.SMARTDRAWING="SMARTDRAWING",t.SMARTDRAWING_DEEPLEARNING="SMARTDRAWING_DEEPLEARNING",t.LINE="LINE",t.APOINT="APOINT",t.CPOINT_REGULAR="CPOINT_REGULAR",t.CPOINT_NUMBERED="CPOINT_NUMBERED",t.CLINE="CLINE",t.CPOLYLINE="CPOLYLINE",t.CPOLYGON="CPOLYGON",t.CLINE_TOOGLE="CLINE_TOOGLE",t.CARC="CARC",t.CCIRCLE="CCIRCLE",t.CRECTANGLE="CRECTANGLE",t.CNGON="CNGON",t.CSTAR="CSTAR",t.CCURVE="CCURVE",t.CCURVE_CLOSE="CCURVE_CLOSE",t.CFREEHAND_POLYLINE="CFREEHAND_POLYLINE",t.CFREEHAND_CURVE="CFREEHAND_CURVE",t.CFREEHAND_LINE="CFREEHAND_LINE",t.CFREEHAND_SMARTDRAWING="CFREEHAND_SMARTDRAWING",t.CFREEHAND_SMOOTH="CFREEHAND_SMOOTH",t.CRECTANGLE_CROP="CRECTANGLE_CROP",t.CPOINT="CPOINT",t.CNODE="CNODE",t.CEDGE="CEDGE",t.SVG_TOUR_POINT="SVG_TOUR_POINT",t.SVG_TOUR_LINE="SVG_TOUR_LINE",t.LINE_SPIKE="LINE_SPIKE",t.CIRCLE_TRAJECTORY="CIRCLE_TRAJECTORY",t.ARC_SPIKE="ARC_SPIKE",t.POINT_REGULAR_TOUR="POINT_REGULAR_TOUR",t.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR"}(a||(a={})),function(t){t.POINT_REGULAR="POINT_REGULAR",t.POINT_NUMBERED="POINT_NUMBERED",t.POINT_ICON="POINT_ICON",t.POINT_REGULAR_TOUR="POINT_REGULAR_TOUR",t.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR",t.POLYLINE="POLYLINE",t.POLYLINE_BENDING="POLYLINE_BENDING",t.POLYGON="POLYGON",t.POLYGON_DEPRECATED="POLYGON_DEPRECATED",t.POLYGON_GRAPH="POLYGON_GRAPH",t.POLYGON_MULTIPLE="POLYGON_MULTIPLE",t.CIRCLE="CIRCLE",t.RECTANGLE="RECTANGLE",t.AN_GON="AN_GON",t.ARROW_SINGLE="ARROW_SINGLE",t.ARROW_DOUBLE="ARROW_DOUBLE",t.TEXT="TEXT",t.CATEXT="CATEXT",t.TEXT_LEADERLINE="TEXT_LEADERLINE",t.APOINT="APOINT",t.AMIDPOINT="AMIDPOINT",t.ANODE="ANODE",t.APOINT_PATH="APOINT_PATH",t.ANODE_RECT="ANODE_RECT",t.ANODE_CIRCLE="ANODE_CIRCLE",t.ANODE_NGON="ANODE_NGON",t.ANODE_TEXT="ANODE_TEXT",t.AMIDPOINT_ALINE="AMIDPOINT_ALINE",t.CURVE="CURVE",t.CURVE_OPEN="CURVE_OPEN",t.CURVE_CLOSE="CURVE_CLOSE",t.FREEHAND_POLYLINE="FREEHAND_POLYLINE",t.FREEHAND_CURVE="FREEHAND_CURVE",t.SMARTDRAWING="SMARTDRAWING",t.ALINE="ALINE",t.CPOINT="CPOINT",t.CMIDPOINT="CMIDPOINT",t.CNODE="CNODE",t.CNODE_RECT="CNODE_RECT",t.CNODE_CIRCLE="CNODE_CIRCLE",t.CNODE_NGON="CNODE_NGON",t.CNODE_TEXT="CNODE_TEXT",t.CPOINT_REGULAR="CPOINT_REGULAR",t.CPOINT_NUMBERED="CPOINT_NUMBERED",t.CLINE="CLINE",t.CEDGE="CEDGE",t.CPOLYLINE="CPOLYLINE",t.CPOLYGON="CPOLYGON",t.CRECTANGLE="CRECTANGLE",t.CN_GON="CN_GON",t.CN_STAR="CN_STAR",t.CARC="CARC",t.CCIRCLE="CCIRCLE",t.CCURVE="CCURVE",t.CCURVE_OPEN="CCURVE_OPEN",t.CCURVE_CLOSED="CCURVE_CLOSED",t.CBLACKHOLE="CBLACKHOLE",t.CFREEHAND="CFREEHAND",t.COTHERS="COTHERS"}(o||(o={})),function(t){t.SMALL="SMALL",t.MEDIUM="MEDIUM",t.LARGE="LARGE"}(n||(n={})),function(t){t.Canvas="Canvas",t.WebGL2="WebGL2",t.WebGPU="WebGPU",t.WebAssembly="WebAssembly"}(r||(r={}))},65450:(t,e,i)=>{let a;i.d(e,{f:()=>a}),function(t){t.Meter="meter",t.Kilometer="kilometer",t.Centimeter="centimeter",t.Millimeter="millimeter",t.Micrometer="micrometer",t.Nanometer="nanometer",t.Mile="mile",t.Yard="yard",t.Foot="foot",t.Inch="inch"}(a||(a={}))},49384:(t,e,i)=>{i.d(e,{CU:()=>o,EW:()=>n,GN:()=>p,JY:()=>r,z5:()=>s});var a=i(64768);i(14495);const o=function(t,e,i,o,n,r){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];switch(!(arguments.length>6&&void 0!==arguments[6])||arguments[6]||(i=0,o=0),t.beginPath(),s||t.rect(-1,-1,t.canvas.width+2,t.canvas.height+2),e){case a.oU.RectangleRounded:const e=1.57;let s=.5*(n+r)*.05;s=s>.5*n?.5*n-10:s,s=s>.5*r?.5*r-10:s,t.moveTo(i,o),t.arc(i+n-s,o+s,s,3*e,4*e,!1),t.arc(i+n-s,o+r-s,s,0*e,1*e,!1),t.arc(i+s,o+r-s,s,1*e,2*e,!1),t.arc(i+s,o+s,s,2*e,3*e,!1);break;case a.oU.Circle:const p=.5*n,l=.5*r;t.ellipse(i+p,o+l,p,l,0,0,2*Math.PI);break;default:t.rect(i,o,n,r)}t.closePath(),t.fill("evenodd")},n=function(t,e,i,a,n,r){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return t.globalCompositeOperation="destination-out",t.fillStyle="rgba(255, 255, 255, 1)",o(t,e,i,a,n,r,s,p),t.globalCompositeOperation="source-over",t},r=function(t,e,i,a,o,r){return n(t,e,i,a,o,r,!(arguments.length>6&&void 0!==arguments[6])||arguments[6],!0)},s=(t,e,i,a)=>{const o=document.createElement("canvas");o.width=i,o.height=a;const n=o.getContext("2d");n.drawImage(t,0,0,i,a),n.drawImage(e,0,0,i,a);const r=new Image;return r.src=o.toDataURL(),r},p=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myImage";const i=document.createElement("a");i.download="".concat(e,".png"),i.href=t.src,i.click()}},95203:(t,e,i)=>{i.d(e,{$:()=>o});var a=i(22970);class o{constructor(t){this.div=void 0,this.div=t}default(){this.div?this.div.style.cursor!==a.CF.Default&&(this.div.style.cursor=a.CF.Default):document.body.style.cursor!==a.CF.Default&&(document.body.style.cursor=a.CF.Default)}auto(){this.div?this.div.style.cursor!==a.CF.Auto&&(this.div.style.cursor=a.CF.Auto):document.body.style.cursor!==a.CF.Auto&&(document.body.style.cursor=a.CF.Auto)}creating(){this.div?this.div.style.cursor!==a.CF.Crosshair&&(this.div.style.cursor=a.CF.Crosshair):document.body.style.cursor!==a.CF.Crosshair&&(document.body.style.cursor=a.CF.Crosshair)}dragging(){this.div?this.div.style.cursor!==a.CF.Move&&(this.div.style.cursor=a.CF.Move):document.body.style.cursor!==a.CF.Move&&(document.body.style.cursor=a.CF.Move)}hovering(){this.div?this.div.style.cursor!==a.CF.Pointer&&(this.div.style.cursor=a.CF.Pointer):document.body.style.cursor!==a.CF.Pointer&&(document.body.style.cursor=a.CF.Pointer)}texting(){this.div?this.div.style.cursor!==a.CF.Text&&(this.div.style.cursor=a.CF.Text):document.body.style.cursor!==a.CF.Text&&(document.body.style.cursor=a.CF.Text)}set_nwse_resize(){this.div?this.div.style.cursor!==a.CF.NWSEresize&&(this.div.style.cursor=a.CF.NWSEresize):document.body.style.cursor!==a.CF.NWSEresize&&(document.body.style.cursor=a.CF.NWSEresize)}set_nesw_resize(){this.div?this.div.style.cursor!==a.CF.NESWresize&&(this.div.style.cursor=a.CF.NESWresize):document.body.style.cursor!==a.CF.NESWresize&&(document.body.style.cursor=a.CF.NESWresize)}set_ns_resize(){this.div?this.div.style.cursor!==a.CF.NSresize&&(this.div.style.cursor=a.CF.NSresize):document.body.style.cursor!==a.CF.NSresize&&(document.body.style.cursor=a.CF.NSresize)}set_ew_resize(){this.div?this.div.style.cursor!==a.CF.EWresize&&(this.div.style.cursor=a.CF.EWresize):document.body.style.cursor!==a.CF.EWresize&&(document.body.style.cursor=a.CF.EWresize)}}},11548:(t,e,i)=>{i.d(e,{eg:()=>s,aK:()=>C,nq:()=>v,wq:()=>E,Kz:()=>d,Bm:()=>c,xG:()=>u,JV:()=>m,ld:()=>h,_y:()=>l,hL:()=>p});var a=i(64768);class o{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}mult(t){return this.x*=t,this.y*=t,this.z*=t,new o(this.x,this.y,this.z)}divByVal(t){return this.x/=t,this.y/=t,this.z/=t,new o(this.x,this.y,this.z)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,new o(this.x,this.y,this.z)}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,new o(this.x,this.y,this.z)}unitize(){return this.normalize()}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-4||(this.x=this.x/t,this.y=this.y/t,this.z=this.z/t),this}}var n=i(6986),r=i(43056);const s=(t,e,i,o,r,s,p,l)=>{const g=document.createElement("canvas");g.width=t.canvas.width,g.height=t.canvas.height;const y=g.getContext("2d");y.imageSmoothingQuality="high",y.drawImage(t.canvas,0,0,t.canvas.width,t.canvas.height);const f=e.geometry,N=[o,r];if(f){let t=f.length;for(;t--;){const e=f[t],o=e.styles.width*i*e.styles.scale;switch(e.type){case n.zq.POINT_REGULAR:h(y,e.nodes,p,e.styles.colorRgba,N,i*e.styles.scale,-9,-28);break;case n.zq.POINT_NUMBERED:s===a.qA.AGSM?c(y,e.nodes,e.styles.colorRgba,e.styles.number,N,i*e.styles.scale,0,0):d(y,e.nodes,l,e.styles.colorRgba,e.styles.number,N,i*e.styles.scale,-13.14,-28);break;case n.zq.POLYLINE_BENDING:e.nodes.length>1&&m(y,e.nodes,e.styles.colorRgba,N,o);break;case n.zq.POLYGON_GRAPH:case n.zq.RECTANGLE:u(y,e.nodes,e.styles.colorRgba,N,o);break;case n.zq.CIRCLE:E(y,e.nodes,e.styles.colorRgba,N,o);break;case n.zq.ARROW_SINGLE:v(y,e.nodes,e.styles.colorRgba,N,o);break;case n.zq.ARROW_DOUBLE:C(y,e.nodes,e.styles.colorRgba,N,o)}}}return y},p=function(t,e,i,a,o){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5;t.beginPath(),t.arc(e+a-n,i-o+n,n,4.71,6.28,!1),t.arc(e+a-n,i+o-n,n,0,1.57,!1),t.arc(e-a+n,i+o-n,n,1.57,3.14,!1),t.arc(e-a+n,i-o+n,n,3.14,4.71,!1),t.closePath(),t.strokeStyle="#000000",t.fillStyle="#ffffff",t.fill(),t.stroke()},l=function(t,e,i,a){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-8,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-32;t.fillStyle="rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", 1)"),t.save(),t.translate(e[0].sx+r*n-o[0],e[0].sy+s*n-o[1]),t.scale(n,n),t.fill(i),t.restore()},h=function(t,e,i,a){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-8,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-32;t.fillStyle="rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", 1)"),t.save(),t.translate(e[0].sx+r*n-o[0],e[0].sy+s*n-o[1]),t.scale(n,n),t.fill(i),t.restore()},c=function(t,e,i,a){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-8,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-32;const p=26+n,l="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")");t.fillStyle=l,t.save(),t.translate(e[0].sx+r*n-o[0],e[0].sy+s*n-o[1]),t.scale(n,n),t.beginPath(),t.arc(0,0-.5*p,.5*p,0,2*Math.PI),t.closePath(),t.fill(),t.restore(),g(t,e,l,a,o,n,20)},d=function(t,e,i,a,o){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-8,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-32;const l="rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", ").concat(a[3],")");t.fillStyle=l,t.save(),t.translate(e[0].sx+s*r-n[0],e[0].sy+p*r-n[1]),t.scale(r,r),t.fill(i),t.restore(),g(t,e,l,o,n,r)},g=function(t,e,i,a,o){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:28;const p="".concat(10*n,"px ").concat("Avenir Next");t.textAlign="center",t.fillStyle=(0,r.XV)(i),t.font=p,t.fillText(a.toString(),e[0].sx-o[0],e[0].sy-o[1]-s*n*.5)},m=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t.strokeStyle="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")"),t.lineWidth=o,t.beginPath(),t.moveTo(e[0].sx-a[0],e[0].sy-a[1]);for(let n=1;n<e.length;++n)t.lineTo(e[n].sx-a[0],e[n].sy-a[1]);t.lineCap="round",t.stroke(),t.lineCap="butt"},u=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t.fillStyle="rgba(8, 127, 155, 0.3)",t.strokeStyle="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")"),t.lineWidth=o,t.beginPath(),t.moveTo(e[0].sx-a[0],e[0].sy-a[1]);for(let n=1;n<e.length;++n)t.lineTo(e[n].sx-a[0],e[n].sy-a[1]);t.closePath(),t.stroke()},E=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const n="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")");t.strokeStyle=n,t.lineWidth=o;const r=.5*(e[2].sx-e[0].sx),s=.5*(e[2].sy-e[0].sy),p=e[0].sx+r-a[0],l=e[0].sy+s-a[1];t.beginPath(),t.ellipse(p,l,r,s,0,0,2*Math.PI),t.closePath(),t.stroke()},v=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const n="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")");t.strokeStyle=n,t.fillStyle=n,t.lineWidth=o,y(t,e,a,o,!1)},C=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const n="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")");t.strokeStyle=n,t.fillStyle=n,t.lineWidth=o,y(t,e,a,o,!0)},y=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const n=[e[0].sx-i[0],e[0].sy-i[1],e[1].sx-i[0],e[1].sy-i[1],e[2].sx-i[0],e[2].sy-i[1]],r=[];for(let l=0;l<e.length;++l)r.push(.5);const s=[];for(const l of n)s.push(l);let p=[];for(let l=0;l<s.length-4;l+=2)p=p.concat(f(s[l],s[l+1],s[l+2],s[l+3],s[l+4],s[l+5],r[l]));N(t,n,p,a,o)},f=(t,e,i,a,o,n,r)=>{const s=Math.sqrt(Math.pow(i-t,2)+Math.pow(a-e,2)),p=r*s/(s+Math.sqrt(Math.pow(o-i,2)+Math.pow(n-a,2))),l=r-p;return[i+p*(t-o),a+p*(e-n),i-l*(t-o),a-l*(e-n)]},N=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const r=e,s=i,p=r.length;w(t,r[0],r[1],s[0],s[1],r[2],r[3]),w(t,r[p-2],r[p-1],s[2*p-10],s[2*p-9],r[p-4],r[p-3]),D(t,new o(r[4],r[5]),new o(s[2],s[3]),r[4],r[5],a),n&&D(t,new o(r[0],r[1]),new o(s[0],s[1]),r[0],r[1],a)},w=(t,e,i,a,o,n,r)=>{t.beginPath(),t.moveTo(n,r),t.quadraticCurveTo(a,o,e,i),t.stroke(),t.setLineDash([])},D=function(t,e,i,a,o){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;const r=A(e,i);t.save(),t.translate(a,o),t.rotate(-r*Math.PI/180);t.beginPath(),t.moveTo(0,0),t.lineTo(6*n,-3.75*n),t.lineTo(6*n,3.75*n),t.closePath(),t.stroke(),t.fill(),t.restore()},A=(t,e)=>{const i=e.sub(t),a=new o(1,0,0);return i.y>0?-1*I(a,i):I(a,i)},I=(t,e)=>180*R(t,e)/Math.PI,R=(t,e)=>Math.acos(O(t,e)),O=(t,e)=>b(T(t),T(e)),b=(t,e)=>t.x*e.x+t.y*e.y+t.z*e.z,T=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return e<1e-4?new o(t.x,t.y,t.z):new o(t.x/e,t.y/e,t.z/e)}},81524:(t,e,i)=>{i.d(e,{D:()=>o,s:()=>a});const a=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=document.createElement("button");return a.style.background="transparent",a.style.border="none",a.innerHTML=e,a.onclick=()=>t(),a.style.transform="scale(".concat(i,")"),a},o=function(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];clearTimeout(e),e=setTimeout((()=>{t.apply(e,o)}),i)}}},98537:(t,e,i)=>{i.d(e,{AR:()=>s,Cv:()=>d,Fs:()=>l,TE:()=>a,Ux:()=>r,Yr:()=>p,kC:()=>n,m1:()=>h,sI:()=>m,vI:()=>c,yH:()=>o,yP:()=>g});i(65450);Math.PI,Math.PI;const a=(t,e,i,a)=>Math.sqrt((t-i)*(t-i)+(e-a)*(e-a)),o=(t,e,i)=>[t*(i/e),i],n=(t,e,i)=>[i,e*(i/t)],r=(t,e,i)=>[t*(i/e),i],s=t=>{for(let e=0;e<t.length;++e)if(t[e]<0)return!0;return!1},p=t=>t*(Math.PI/180),l=()=>{let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)}))},h=(t,e,i)=>t+(e-t)*i,c=(t,e)=>{let i=[],a=(t.length-1)/(e-1);i[0]=t[0];for(let o=1;o<e-1;o++){let e=o*a,n=+Math.floor(e).toFixed(),r=+Math.ceil(e).toFixed(),s=e-n;i[o]=h(t[n],t[r],s)}return i[e-1]=t[t.length-1],i},d=t=>{let e=1,i=0;for(;e<t.length;)t[e]>t[i]||(i=e),e+=1;return i},g=t=>Math.sqrt(t/Math.PI),m=t=>t/Math.PI*.5},20163:(t,e,i)=>{i.d(e,{Ql:()=>o,X4:()=>a,ee:()=>n});const a=t=>{const e=9===t.nodeType?t.documentElement:t,i={name:e.nodeName};return i.content=Array.from(e.childNodes||[]).filter((t=>3===t.nodeType)).map((t=>t.textContent)).join("").trim(),i.attributes=Array.from(e.attributes||[]).filter((t=>t)).reduce(((t,e)=>(t[e.name]=e.value,t)),{}),i.children=Array.from(e.childNodes||[]).filter((t=>1===t.nodeType)).map((t=>i[t.nodeName]=a(t))),i},o=async t=>fetch(t,{mode:"no-cors"}).then((t=>t.text())).catch((t=>{console.log(t)})),n=async t=>{let e=new DOMParser,i=await e.parseFromString(t,"text/xml");return r(i)},r=t=>{let e={};if(1===t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(let i=0;i<t.attributes.length;i++){let a=t.attributes.item(i);e["@attributes"][a.nodeName]=a.nodeValue}}}else 3===t.nodeType&&t.nodeValue&&(e=t.nodeValue);if(t.hasChildNodes())for(let i=0;i<t.childNodes.length;i++){let a=t.childNodes.item(i),o=a.nodeName;if("undefined"===typeof e[o])e[o]=r(a);else{if("undefined"===typeof e[o].push){let t=e[o];e[o]=[],e[o].push(t)}e[o].push(r(a))}}return e}},85523:(t,e,i)=>{i.d(e,{KF:()=>d,R4:()=>s,VT:()=>c,dX:()=>n,jY:()=>m,nP:()=>g,sR:()=>r});var a=i(20163);const o="M9 0a9.022 9.022 0 00-9 9.041c0 4.992 5 11.761 9 19.421 4-7.659 9-14.428 9-19.42A9.022 9.022 0 009 .001V0zm0 12.652a3.85 3.85 0 113.833-3.85A3.841 3.841 0 019 12.652z";const n=t=>{t=JSON.parse(JSON.stringify(t));let e=[],i=t.svg.g.g.path["@attributes"].d.split(" "),a=0;for(let o=0;o<i.length;++o)if("M"!==i[o][0])if("C"!==i[o][0])if("L"!==i[o][0]){if("0"===i[o][0]||Number(i[o][0])){let t=i[o].split(",").map(Number);e[a+" C"].push(t[0],t[1])}}else a=o,e[a+" L"]=i[o].slice(1).split(",").map(Number);else a=o,e[a+" C"]=i[o].slice(1).split(",").map(Number);else e[o+" M"]=i[o].slice(1).split(",").map(Number);let n=new Path2D;return Object.keys(e).map((t=>{let i=e[t];if(i){let e=t.split(" ")[1];"M"===e?n.moveTo(i[0],i[1]):"C"===e?n.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]):"L"===e&&n.lineTo(i[0],i[1])}return 0})),n.closePath(),{type:"path",height:parseInt(t.svg["@attributes"].height,10),width:parseInt(t.svg["@attributes"].width,10),path:e,path2D:new Path2D(o)}},r=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=document.createElement("button");return a.style.background="transparent",a.style.border="none",a.innerHTML=e,a.onclick=()=>t(),a.style.transform="scale(".concat(i,")"),a},s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ffffff",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#CBDAE2",r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("x","1"),r.setAttribute("y","1"),r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(e)),r.setAttribute("stroke-width","".concat(o)),r.setAttribute("rx","".concat(i)),r.setAttribute("fill","".concat(a)),r.setAttribute("stroke","".concat(n));let s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.appendChild(r),s.setAttribute("width","".concat(t+2*o)),s.setAttribute("height","".concat(e+2*o)),s.style.position="absolute",s},p={width:10,height:10,path2D:void 0,path:t=>"njslabSandboxStatic/pointSVG/point.svg"},l={width:10,height:10,path2D:void 0,path:t=>"njslabSandboxStatic/pointSVG/point.svg"},h={width:10,height:10,path2D:void 0,path:t=>"njslabSandboxStatic/pointSVG/unnumbered-pin.svg"},c=()=>p,d=()=>l,g=()=>h,m=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=[p,l,h],i=new DOMParser;try{for(let o=0;o<e.length;++o){let n=await(0,a.Ql)(e[o].path(t));if(n){const t=i.parseFromString(n,"text/xml"),r=(0,a.X4)(t);e[o].width=r.attributes.height,e[o].height=r.attributes.width,e[o].path2D=new Path2D(r.children[0].attributes.d)}}return!0}catch(o){return console.debug(o),!1}}}}]);
//# sourceMappingURL=35317.fcbff468.chunk.js.map
"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[42393],{42393:(e,t,o)=>{o.r(t),o.d(t,{Solution:()=>p});var a=o(1250),s=o(5483),n=o.n(s),i=o(34648),l=o(72791),r=o(2556);var c=o(80184);const d=e=>{let{mapRef:t}=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"menu"}),(0,c.jsx)(r.ZP,{type:"text",onClick:e=>{const o=t.getCanvas();var a;(a=t,new Promise((function(e,t){a.once("render",(function(){e(a.getCanvas().toDataURL())})),a.setBearing(a.getBearing())}))).then((e=>{const t=new Image;t.width=o.width,t.height=o.height,t.src=e;const a=document.createElement("a");a.download="fileName.png",a.href=e,a.click()}))},children:"capture"})]})};o(43161);const h="style_mapContainer__WcUpI",u="style_menu__a+qnp",m=()=>{const e=(0,l.useRef)(),[t,o]=((0,l.useRef)(),(0,l.useState)(null)),[a,s]=(0,l.useState)({latitude:39.5,longitude:-98.35,zoom:3.5}),r=(0,l.useCallback)((e=>{const t=e.features&&e.features[0];console.log(e.features,t),console.log("event",e.target.boxZoom._map),o({longitude:e.lngLat.lng,latitude:e.lngLat.lat,countyName:t&&t.properties.COUNTY})}),[]),m=(0,l.useCallback)((e=>{var t;e.target.queryRenderedFeatures(e.point);(null===e||void 0===e||null===(t=e.features)||void 0===t?void 0:t.length)>0&&console.log(e)}),[]),[p,f]=(0,l.useState)({type:"FeatureCollection",features:[]}),g="my-layer";(0,l.useEffect)((()=>{(async()=>{try{const e=await fetch("/njs-lab-public/static/dataDummyReady/underserved_locations.geojson");if(!e.ok)throw new Error("Failed to load GeoJSON data");const t=await e.json();f(t)}catch(e){console.error("Error fetching GeoJSON:",e)}})()}),[]);const v={id:g+"-circle",type:"circle",paint:{"circle-radius":6,"circle-color":"#4E3FC8","circle-opacity":.8,"circle-stroke-width":2,"circle-stroke-color":"#fff"}},[y,j]=(0,l.useState)({type:"FeatureCollection",features:[]});(0,l.useEffect)((()=>{(async()=>{try{const e=await fetch("/njs-lab-public/static/data/us_counties.geojson");if(!e.ok)throw new Error("Failed to load GeoJSON data");const t=await e.json();j(t)}catch(e){console.error("Error fetching GeoJSON:",e)}})()}),[]);const x={id:g,type:"fill",paint:{"fill-color":"#3366cc","fill-opacity":.5,"fill-outline-color":"#000"}};return(0,c.jsxs)("div",{className:h,children:[(0,c.jsx)("div",{className:u,children:(0,c.jsx)(d,{mapRef:e.current})}),(0,c.jsx)(l.Suspense,{children:(0,c.jsxs)(i.ZP,{mapLib:n(),ref:e,initialViewState:{longitude:-100,latitude:40,zoom:3.5},style:{width:"100%",height:"100%",position:"relative",top:0,left:0,right:0,bottom:0,zIndex:0,flex:1},mapStyle:"mapbox://styles/mapbox/dark-v10",mapboxAccessToken:"pk.eyJ1IjoiZGVzaWduanUiLCJhIjoiY2xhNGU0YWo4MDlhYzNwdHBwenVvang4eiJ9.P3sX4l_3KjdPeRRbVS1VVg",dragRotate:!1,interactiveLayerIds:["my-layer-circle"],onMouseMove:r,onClick:m,onMove:e=>s(e.viewState),children:[(0,c.jsx)(i.Hw,{id:g,type:"geojson",data:p,children:(0,c.jsx)(i.mh,{...v})}),(0,c.jsx)(i.Hw,{id:"polygon-layer",type:"geojson",data:y,children:(0,c.jsx)(i.mh,{...x})}),t&&(0,c.jsx)(i.GI,{longitude:a.longitude,latitude:a.latitude,offset:[8,8],closeButton:!1,className:"z-10",children:(0,c.jsxs)("div",{className:"p-2",children:[(0,c.jsx)("h3",{className:"font-bold",children:t.name}),(0,c.jsxs)("p",{children:["No Broadband: ",t.noBroadband,"%"]}),(0,c.jsxs)("p",{children:["Vote Share: ",t.voteShare,"%"]})]})})]})})]})};class p{constructor(e){this.divHost=void 0,this.divHost=document.getElementById(e);const t=document.createElement("div");t.style.height="100%",t.style.width="100%",this.divHost.appendChild(t);a.createRoot(t).render(l.createElement(m,{}))}destroy(){try{for(;this.divHost&&this.divHost.lastElementChild;){const e=this.divHost.lastElementChild;this.divHost.removeChild(e)}}catch(e){console.error("Error removing child elements:",e)}}}}}]);
//# sourceMappingURL=42393.305fb85b.chunk.js.map
{"version":3,"file":"static/js/53015.e2977ed7.chunk.js","mappings":"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","sources":["njslab/Workshop/workshop-graph/09_Graph-Exporting/index.ts"],"sourcesContent":["import { RendererCanvas } from '../../../../lib';\r\n\r\nexport class Solution extends RendererCanvas {\r\n    divText: HTMLDivElement;\r\n    divSel: HTMLDivElement;\r\n    graphController: GraphController;\r\n\r\n\r\n    constructor(id: string) {\r\n        super(document.getElementById(id) as HTMLDivElement);\r\n\r\n        this.canvas.style.position = 'absolute'\r\n        const divMenu = document.createElement('div');\r\n        divMenu.style.position = 'absolute'\r\n        this.divHost.appendChild(divMenu);\r\n\r\n        const divBtn = document.createElement('button');\r\n        divBtn.textContent = 'run'\r\n        divBtn.onclick = () => {\r\n            this.graphController.needPopulate = !this.graphController.needPopulate;\r\n        }\r\n        divMenu.appendChild(divBtn);\r\n\r\n        const divRemove = document.createElement('button');\r\n        divRemove.textContent = 'remove'\r\n        divRemove.onclick = () => {\r\n            this.graphController.removeSelection();\r\n        }\r\n        divMenu.appendChild(divRemove);\r\n\r\n        const divText = document.createElement('div');\r\n        divText.textContent = 'N:0, E:0'\r\n        divMenu.appendChild(divText);\r\n        this.divText = divText;\r\n\r\n        const divSel = document.createElement('div');\r\n        divSel.textContent = 'undefined'\r\n        divMenu.appendChild(divSel);\r\n        this.divSel = divSel;\r\n\r\n        const btnExport = document.createElement('button');\r\n        btnExport.textContent = 'Export JSON';\r\n        divMenu.appendChild(btnExport);\r\n        btnExport.onclick = () => {\r\n            this.graphController.exportJSON();\r\n        }\r\n\r\n        const divDes = document.createElement('div');\r\n        divDes.innerHTML = '1 Export graph to JSON <br> 2 display the order of nodes ';\r\n        divMenu.appendChild(divDes);\r\n\r\n        this.init();\r\n    }\r\n    public init() {\r\n        // TODO\r\n        this.graphController = new GraphController(this.canvas);\r\n        this.graphController.divLog = this.divText;\r\n        this.graphController.divSel = this.divSel;\r\n        this.mouseClick(200, 200);\r\n\r\n        this.start()\r\n    }\r\n\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        this.graphController.render(ctx);\r\n    }\r\n    public mouseClick(x: number, y: number): void {\r\n\r\n\r\n        this.graphController.mouseClick(x, y);\r\n    }\r\n    public mouseDown(x: number, y: number): void {\r\n        this.graphController.mouseDown(x, y)\r\n    }\r\n    public mouseMove(x: number, y: number): void {\r\n        this.graphController.mouseMove(x, y);\r\n    }\r\n    public mouseDrag(x: number, y: number): void {\r\n        this.graphController.mouseDrag(x, y)\r\n    }\r\n    public mouseUp() {\r\n        this.graphController.mouseUp();\r\n    }\r\n}\r\n\r\n\r\nclass GraphController {\r\n    public graph: Graph;\r\n    public canvas: HTMLCanvasElement;\r\n    public divLog: HTMLDivElement;\r\n    public divSel: HTMLDivElement;\r\n\r\n    public needPopulate = false;\r\n    public m = new Vector3(0, 0, 0);\r\n\r\n    private nodePre: Node | Edge | undefined = undefined\r\n\r\n    constructor(canvas: HTMLCanvasElement) {\r\n        this.graph = new Graph();\r\n        this.canvas = canvas;\r\n    }\r\n    public populate() {\r\n        const x = Math.random() * this.canvas.width;\r\n        const y = Math.random() * this.canvas.height;\r\n        this.mouseClick(x, y);\r\n    }\r\n    public removeSelection() {\r\n        // console.log(this.graph.captured)\r\n        if (this.graph.captured) {\r\n            this.graph.captured.remove();\r\n            this.graph.captured = undefined;\r\n        }\r\n    }\r\n    // ..........................................................\r\n    public mouseDown(x: number, y: number): void {\r\n        const node = this.graph.getNodeVec(x, y);\r\n\r\n        if (this.graph.captured && this.graph.captured !== node) {\r\n            this.nodePre = this.graph.captured;\r\n        };\r\n\r\n        this.graph.captured = node\r\n    }\r\n\r\n    public mouseClick(x: number, y: number): void {\r\n\r\n        if (this.nodePre && this.graph.captured) {\r\n            // console.log('connection needed')\r\n            this.graph.addEdge(this.nodePre as Node, this.graph.captured as Node)\r\n            return;\r\n        }\r\n\r\n\r\n\r\n        const closeEdge = this.graph.getEdgeVec(x, y);\r\n\r\n        // connect selected nodes\r\n\r\n\r\n        // add node by edge\r\n        if (closeEdge && this.graph.captured === undefined) {\r\n            const node = this.graph.addNode(closeEdge.vec.x, closeEdge.vec.y);\r\n            this.graph.edgeSplitByNode(node, closeEdge.edge);\r\n            return\r\n        }\r\n\r\n        if (this.graph.captured === undefined) {\r\n            // console.log(this.graph.captured)\r\n            const node = this.graph.addNode(x, y, 0);\r\n            this.graph.addEdgeClosestByNode(node);\r\n        }\r\n    }\r\n\r\n    public mouseMove(x: number, y: number): void {\r\n        this.m.x = x;\r\n        this.m.y = y;\r\n    }\r\n    public mouseUp() {\r\n        if (this.graph.captured && this.graph.captured.type === 'node') {\r\n            const node = this.graph.captured as Node;\r\n\r\n            node.edges.forEach((e, i) => {\r\n                this.graph.edgeSplitByEdge(e)\r\n            })\r\n\r\n            const other = this.graph.getNode(node);\r\n            if (other) {\r\n                const dis = distance(node.vec, other.vec);\r\n                if (dis < 8) {\r\n                    this.graph.mergeTwoNodes(other, node);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    public mouseDrag(x: number, y: number): void {\r\n        if (this.graph.captured && this.graph.captured.type === 'node') {\r\n            const node = this.graph.captured as Node;\r\n            node.vec.x = x;\r\n            node.vec.y = y;\r\n        }\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        if (this.needPopulate) {\r\n            this.populate();\r\n        }\r\n\r\n        this.graph.render(ctx);\r\n\r\n        this.divLog.textContent = this.graph.log;\r\n        // this.divSel.textContent = JSON.stringify(this.graph.captured);\r\n\r\n        if (this.graph.captured) {\r\n            this.divSel.textContent = this.graph.captured.type;\r\n        } else {\r\n            this.divSel.textContent = 'undefined';\r\n        }\r\n\r\n        ctx.beginPath();\r\n        ctx.arc(this.m.x, this.m.y, 2, 0, 3.14 * 2);\r\n        ctx.closePath();\r\n        ctx.fillStyle = '#888';\r\n        ctx.fill();\r\n\r\n\r\n    }\r\n    public exportJSON() {\r\n        const data = this.graph.toJSON();\r\n        downloadJson(JSON.stringify(data), 'graph.json')\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nclass Graph {\r\n    public log: string = '';\r\n    public nodes: Node[] = [];\r\n    public edges: Edge[] = [];\r\n\r\n    private _captured: Node | Edge | undefined = undefined;\r\n    constructor() {\r\n\r\n    }\r\n    public updatePost() {\r\n        // this.divLog.textContent = `N:${this.nodes.length}, E:${this.edges.length}`;\r\n    }\r\n    public get captured() {\r\n        return this._captured\r\n    }\r\n    public set captured(v) {\r\n        if (this._captured) {\r\n            this._captured.isSelected = false;\r\n        }\r\n\r\n        this._captured = v;\r\n        if (v) {\r\n            this._captured.isSelected = true;\r\n        }\r\n\r\n    }\r\n    // ..............................................................\r\n    public addNode(x: number, y: number, z: number = 0) {\r\n        // console.trace()\r\n        const node = new Node(this, x, y, 0);\r\n        node.id = this.nodes.length;\r\n        this.nodes.push(node);\r\n        this.updatePost();\r\n        return node;\r\n    }\r\n    public addEdgeClosestByNode(node: Node) {\r\n        const nn = this.getNode(node);\r\n        if (nn) this.addEdge(node, nn);\r\n    }\r\n    public addEdge(n0: Node, n1: Node) {\r\n        const edge = new Edge(n0, n1);\r\n        n0.edges.push(edge);\r\n        n1.edges.push(edge);\r\n        this.edges.push(edge);\r\n\r\n        this.edgeSplitByEdge(edge);\r\n        this.updatePost();\r\n        return edge;\r\n    }\r\n    public addEdgeSlipt(n0: Node, n1: Node) {\r\n        const edge = new Edge(n0, n1);\r\n        n0.edges.push(edge);\r\n        n1.edges.push(edge);\r\n        this.edges.push(edge);\r\n        return edge;\r\n    }\r\n    // ..............................................................\r\n    public edgeSplitByNode(node: Node, edge: Edge) {\r\n        const n0 = edge.n0;\r\n        const n1 = edge.n1;\r\n\r\n        this.addEdge(n0, node);\r\n        this.addEdge(node, n1);\r\n\r\n        this.removeEdge(edge);\r\n    }\r\n    public edgeSplitByEdge(edge: Edge) {\r\n        const nodes: Node[] = [];\r\n        for (let i = this.edges.length - 1; i > -1; --i) {\r\n            const other = this.edges[i];\r\n            // if (edge === other) continue;\r\n            if (edge.n0 !== other.n0 && edge.n0 !== other.n1 && edge.n1 !== other.n0 && edge.n1 !== other.n1) {\r\n                const inter = getIntersectEdge(edge, other);\r\n                if (inter) {\r\n                    const nn = new Node(this, inter[0], inter[1])\r\n                    this.nodes.push(nn);\r\n                    this.addEdgeSlipt(nn, other.n0);\r\n                    this.addEdgeSlipt(nn, other.n1);\r\n                    this.removeEdge(other);\r\n                    nodes.push(nn);\r\n                }\r\n            }\r\n        }\r\n        // console.log('dd', nodes.length);\r\n        if (nodes.length > 0) {\r\n            let nodeFirst = edge.n0;\r\n            nodes.push(edge.n1);\r\n            const disList = nodes.map((n) => { return distance(n.vec, edge.n0.vec); });\r\n            const indices = disList.map((val, index) => index);\r\n            const sortedDis = indices.sort((a, b) => disList[a] - disList[b]);\r\n            this.addEdgeSlipt(nodeFirst, nodes[sortedDis[0]]);\r\n            for (let i = 0; i < sortedDis.length - 1; ++i) {\r\n                this.addEdgeSlipt(nodes[sortedDis[i]], nodes[sortedDis[i + 1]]);\r\n            }\r\n            this.removeEdge(edge);\r\n        }\r\n        this.updateNodeID();\r\n    }\r\n    // ..............................................................\r\n    public removeEdge(other) {\r\n        other.n0.removeEdge(other);\r\n        other.n1.removeEdge(other);\r\n        this.edges.splice(this.edges.indexOf(other), 1);\r\n    }\r\n    public removeNode(node: Node) {\r\n        node.edges.forEach((edge) => {\r\n            if (edge.n0 === node) {\r\n                edge.n1.removeEdge(edge)\r\n            } else {\r\n                edge.n0.removeEdge(edge)\r\n            }\r\n            this.edges.splice(this.edges.indexOf(edge), 1);\r\n        })\r\n        this.nodes.splice(this.nodes.indexOf(node), 1);\r\n        this.updateNodeID();\r\n    }\r\n    // ..............................................................\r\n    public getNode(node: Node) {\r\n        let theDis = Number.MAX_VALUE;\r\n        let index = -1;\r\n        for (let i = 0; i < this.nodes.length; ++i) {\r\n            if (this.nodes[i] === node) continue;\r\n            const vec = this.nodes[i].vec;\r\n            const dis = distance(vec, node.vec)\r\n            if (theDis > dis) {\r\n                theDis = dis;\r\n                index = i;\r\n            }\r\n        }\r\n        if (index > -1) { return this.nodes[index]; }\r\n        return undefined;\r\n    }\r\n    public getNodeVec(x: number, y: number, minDis = 8) {\r\n        let theDis = Number.MAX_VALUE;\r\n        let index = -1;\r\n        const v = new Vector3(x, y)\r\n        for (let i = 0; i < this.nodes.length; ++i) {\r\n            const vec = this.nodes[i].vec;\r\n            const dis = distance(vec, v)\r\n            if (theDis > dis) {\r\n                theDis = dis;\r\n                index = i;\r\n            }\r\n        }\r\n        if (index > -1 && theDis < minDis) { return this.nodes[index]; }\r\n        return undefined;\r\n    }\r\n    public getEdgeVec(x: number, y: number, minDis = 8) {\r\n        const mv = new Vector3(x, y, 0)\r\n        for (let i = 0; i < this.edges.length; ++i) {\r\n            const edge = this.edges[i];\r\n            const cp = pointOnLine(mv, edge.n0.vec, edge.n1.vec)\r\n\r\n            const dis = distance(mv, cp);\r\n            if (dis < minDis) {\r\n                return { edge, vec: cp }\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    public getEdgeByTwoNode(n0: Node, n1: Node) {\r\n        for (let i = 0; i < this.edges.length; ++i) {\r\n            const edge = this.edges[i];\r\n            if ((edge.n0 === n0 && edge.n1 === n1) || (edge.n0 === n1 && edge.n1 === n0)) {\r\n                return edge;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    // ..............................................................\r\n    public mergeTwoNodes(n0: Node, n1: Node) {\r\n\r\n        const others = []\r\n        for (let i = 0; i < n1.edges.length; ++i) {\r\n            const edge = n1.edges[i]\r\n            if (edge.n0 === n1) {\r\n                others.push(edge.n1)\r\n            } else {\r\n                others.push(edge.n0)\r\n            }\r\n        }\r\n        n1.remove();\r\n\r\n        others.forEach((n) => {\r\n            if (!this.getEdgeByTwoNode(n0, n)) {\r\n                this.addEdge(n0, n);\r\n            }\r\n        })\r\n    }\r\n    public updateNodeID() {\r\n        for (let i = 0; i < this.nodes.length; ++i) {\r\n            this.nodes[i].id = i;\r\n        }\r\n    }\r\n    public toJSON() {\r\n        const data = { node: [], edge: [] }\r\n        this.nodes.forEach((n) => { data.node.push(n.toJSON()); });\r\n        this.edges.forEach((e) => { data.edge.push(e.toJSON()); });\r\n        return data;\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        this.log = `N:${this.nodes.length}, E:${this.edges.length}`;\r\n        // console.log(`N:${this.nodes.length}, E:${this.edges.length}`)\r\n        this.edges.forEach((e: Edge) => { e.render(ctx); })\r\n        this.nodes.forEach((n: Node) => { n.render(ctx); })\r\n    }\r\n}\r\n\r\nclass Edge {\r\n    public type = 'edge';\r\n    public n0: Node;\r\n    public n1: Node;\r\n    public isSelected = false;\r\n    public data: any = [];\r\n    constructor(n0: Node, n1: Node) {\r\n        this.n0 = n0;\r\n        this.n1 = n1;\r\n    }\r\n    public toJSON() {\r\n        return {\r\n            n0: this.n0.id,\r\n            n1: this.n1.id,\r\n            data: this.data,\r\n        };\r\n    }\r\n    public remove() {\r\n        this.n0.removeEdge(this);\r\n        this.n1.removeEdge(this);\r\n    }\r\n    public render(ctx) {\r\n        if (this.isSelected) {\r\n            ctx.lineWidth = 3;\r\n            ctx.strokeStyle = '#00f';\r\n            ctx.beginPath();\r\n            ctx.moveTo(this.n0.vec.x, this.n0.vec.y);\r\n            ctx.lineTo(this.n1.vec.x, this.n1.vec.y);\r\n            ctx.stroke();\r\n        }\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.n0.vec.x, this.n0.vec.y);\r\n        ctx.lineTo(this.n1.vec.x, this.n1.vec.y);\r\n        ctx.strokeStyle = '#0f0';\r\n        ctx.stroke();\r\n    }\r\n}\r\n\r\nclass Node {\r\n    public type = 'node';\r\n    public graph: Graph;\r\n    public vec: Vector3;\r\n    public r: number = 5;\r\n    public edges: Edge[] = [];\r\n    public isSelected = false;\r\n    public id = -1;\r\n    public data: any = [];\r\n    constructor(graph: Graph, x: number, y: number, z: number = 0) {\r\n        this.graph = graph;\r\n        this.vec = new Vector3(x, y, z);\r\n    }\r\n    public toJSON() {\r\n        return {\r\n            id: this.id,\r\n            vec: { x: this.vec.x, y: this.vec.y, z: this.vec.z },\r\n            data: this.data\r\n        };\r\n    }\r\n    public remove() {\r\n        this.graph.removeNode(this);\r\n    }\r\n    public removeEdge(other) {\r\n        this.edges.splice(this.edges.indexOf(other), 1);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        ctx.beginPath();\r\n        ctx.arc(this.vec.x, this.vec.y, this.r, 0, 3.14 * 2)\r\n        ctx.closePath();\r\n        ctx.fillStyle = '#ff0000';\r\n        ctx.fill();\r\n        if (this.isSelected) {\r\n            ctx.lineWidth = 3;\r\n            ctx.strokeStyle = '#00f';\r\n            ctx.stroke();\r\n        }\r\n\r\n        ctx.strokeStyle = '#ff0000';\r\n        ctx.lineWidth = 1\r\n        ctx.strokeText(`${this.id}`, this.vec.x, this.vec.y - 7)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Vector3 {\r\n    public x: number;\r\n    public y: number;\r\n    public z: number;\r\n    constructor(x: number, y: number, z: number = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z\r\n    }\r\n}\r\n\r\nconst distance = (v0: Vector3, v1: Vector3) => {\r\n    return Math.sqrt(distance2(v0, v1));\r\n}\r\nconst distance2 = (v0: Vector3, v1: Vector3) => {\r\n    return (v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z);\r\n}\r\n\r\nconst getIntersectEdge = (e0: Edge, e1: Edge) => {\r\n    return getIntersect(e0.n0, e0.n1, e1.n0, e1.n1)\r\n}\r\n\r\nconst getIntersect = (n0: Node, n1: Node, n2: Node, n3: Node) => {\r\n    return getLineIntersectPlane(n0.vec.x, n0.vec.y, n1.vec.x, n1.vec.y, n2.vec.x, n2.vec.y, n3.vec.x, n3.vec.y)\r\n}\r\n\r\nconst getLineIntersectPlane = (x1: number, y1: number, x2: number, y2: number, x3: number, y3: number, x4: number, y4: number) => {\r\n    // Check if none of the lines are of length 0\r\n    if ((x1 === x2 && y1 === y2) || (x3 === x4 && y3 === y4)) {\r\n        return undefined;\r\n    }\r\n\r\n    const denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1));\r\n\r\n    // Lines are parallel\r\n    if (denominator === 0) {\r\n        return undefined;\r\n    }\r\n\r\n    const ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator;\r\n    const ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator;\r\n\r\n    // is the intersection along the segments\r\n    if (ua < 0 || ua > 1 || ub < 0 || ub > 1) {\r\n        return undefined;\r\n    }\r\n\r\n    // Return a object with the x and y coordinates of the intersection\r\n    const x = x1 + ua * (x2 - x1);\r\n    const y = y1 + ua * (y2 - y1);\r\n\r\n    return [x, y];\r\n};\r\n\r\nconst lerp = (a: number, b: number, t: number) => { return a + t * (b - a); }\r\n\r\nconst pointOnLine = (p: Vector3, p0: Vector3, p1: Vector3) => {\r\n    let dx = p1.x - p0.x,\r\n        dy = p1.y - p0.y,\r\n        t = ((p.x - p0.x) * dx + (p.y - p0.y) * dy) / (dx * dx + dy * dy),\r\n        x = lerp(p0.x, p1.x, t),\r\n        y = lerp(p0.y, p1.y, t);\r\n    return new Vector3(x, y);\r\n};\r\n\r\nconst downloadJson = (collection, name = 'download',) => {\r\n    const link = document.createElement('a');\r\n    link.href = 'data:application/json;charset=utf-8,' + encodeURIComponent(collection);\r\n    link.download = `${name}`;\r\n    link.click();\r\n};"],"names":["Solution","RendererCanvas","constructor","id","super","document","getElementById","divText","divSel","graphController","this","canvas","style","position","divMenu","createElement","divHost","appendChild","divBtn","textContent","onclick","needPopulate","divRemove","removeSelection","btnExport","exportJSON","divDes","innerHTML","init","GraphController","divLog","mouseClick","start","render","ctx","x","y","mouseDown","mouseMove","mouseDrag","mouseUp","graph","m","Vector3","nodePre","undefined","Graph","populate","Math","random","width","height","captured","remove","node","getNodeVec","addEdge","closeEdge","getEdgeVec","addNode","vec","edgeSplitByNode","edge","addEdgeClosestByNode","type","edges","forEach","e","i","edgeSplitByEdge","other","getNode","distance","mergeTwoNodes","log","beginPath","arc","closePath","fillStyle","fill","data","toJSON","downloadJson","JSON","stringify","nodes","_captured","updatePost","v","isSelected","Node","length","push","nn","n0","n1","Edge","addEdgeSlipt","removeEdge","inter","getIntersectEdge","nodeFirst","disList","map","n","sortedDis","val","index","sort","a","b","updateNodeID","splice","indexOf","removeNode","theDis","Number","MAX_VALUE","dis","minDis","mv","cp","pointOnLine","getEdgeByTwoNode","others","lineWidth","strokeStyle","moveTo","lineTo","stroke","z","r","strokeText","v0","v1","sqrt","distance2","e0","e1","getIntersect","n2","n3","getLineIntersectPlane","x1","y1","x2","y2","x3","y3","x4","y4","denominator","ua","ub","lerp","t","p","p0","p1","dx","dy","collection","name","link","href","encodeURIComponent","download","click"],"sourceRoot":""}
"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[56756],{51719:(t,i,e)=>{e.d(i,{R:()=>s,_:()=>n});const n="@";class s{constructor(t){this.ioWrapper=void 0,this.ioWrapper=t}emitAction(t){this.ioWrapper.model.app.emitAction&&this.ioWrapper.model.app.emitAction(t)}getNumLayers(){this.ioWrapper.model.app.getNumLayers&&this.ioWrapper.model.app.getNumLayers()}localizedString(t){this.ioWrapper.model.app.localizedString&&this.ioWrapper.model.app.localizedString(t)}}},56756:(t,i,e)=>{e.r(i),e.d(i,{AppImageDrawing:()=>M,CONFIG:()=>b,InteractionMode:()=>s.An});var n=e(18489),s=e(38581);class o{constructor(t,i){this.model=void 0,this.appProperties=void 0,this.appControllerStatus=void 0,this.browserUtility=void 0,this.model=t,this.appProperties=new s.gj,this.appProperties.isStandalone=!0,this.appControllerStatus=new s.jp(i),this.browserUtility=new s.R7}initPost(){}}class a{constructor(t){this.model=void 0,this.theme=void 0,this.model=t,this.importAssets()}async importAssets(){}async importAsset(t){const i=await(0,s.ee)(t);return(0,s.dX)(i)}}class r{constructor(t){this.model=void 0,this.model=t}mouseEventController(t){this.model.app.implementations&&this.model.app.implementations.mouseEventController(t),this.model.app.addon}keyboardEventController(t){this.model.app.implementations&&this.model.app.implementations.keyboardEventController(t),this.model.app.addon}keyboardEventControllerFromDocument(t){this.model.app.implementations&&this.model.app.implementations.keyboardEventControllerFromDocument(t)}touchEventController(t){this.model.app.implementations&&this.model.app.implementations.touchEventController(t)}}var h=e(51719);class p{constructor(){this.preEvent=void 0,this.key=void 0,this.hasAltKey=void 0,this.hasCtrlKey=void 0,this.hasShiftKey=void 0,this.hasMetaCommand=void 0,this.code=void 0,this.keyCode=void 0,this.PRESS_TYPE=void 0}}class m{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.Nq.JSAPI4X;this.model=void 0,this.MouseEventDataPre=void 0,this.type=void 0,this.isUp=void 0,this.keyDown=this.keyDown.bind(this),this.keyUp=this.keyUp.bind(this),this.model=t,this.type=i,this.isUp=!1,this.init(),this.MouseEventDataPre=new p}init(){"undefined"!==typeof document&&(document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp))}destroy(){"undefined"!==typeof document&&(document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp))}keyDown(t){const i=this.commonEventBuilder(t);i.PRESS_TYPE=s.rO.Down,this.keyEventFromDocument(i)}keyUp(t){const i=this.commonEventBuilder(t);i.PRESS_TYPE=s.rO.Up,i.hasShiftKey&&i.hasCtrlKey||this.keyEventFromDocument(i)}commonEventBuilder(t){const i=new p;return i.preEvent=this.MouseEventDataPre,i.key=t.key,i.keyCode=t.keyCode,i.code=t.code,i.hasCtrlKey=t.ctrlKey,i.hasShiftKey=t.shiftKey,i.hasAltKey=t.altKey,i.hasMetaCommand=t.metaKey,this.MouseEventDataPre=i,i}keyEvent(t){this.model.controllerWrapper.keyboardEventController(t)}keyEventFromDocument(t){this.model.controllerWrapper.keyboardEventControllerFromDocument(t)}}var l=e(19207);class d{constructor(t){this.mouseInteraction=void 0,this.frame=0,this.frameSkip=2,this.mouseInteraction=t}removeEvent(){}appendEvent(){}}class c extends d{constructor(t){super(t),this.clickable=!0,this.disableMoveEvent=!1,this.mouseClick=t=>{this.clickable?this.mouseInteraction.mouseClick(t):this.clickable=!0},this.mouseDoubleClick=t=>{this.mouseInteraction.mouseDoubleClick(t)},this.mouseDown=t=>{this.clickable=!0,this.mouseInteraction.mouseDown(t)},this.mouseUp=t=>{this.disableMoveEvent=!0,this.mouseInteraction.mouseUp(t)},this.mouseMove=t=>{this.clickable=!1,this.disableMoveEvent?this.disableMoveEvent=!1:this.mouseInteraction.mouseMove(t)},this.appendEvent()}appendEvent(){const t=this.mouseInteraction.model.modelViewWrapper.div;t.style.pointerEvents="auto",t.addEventListener("click",this.mouseClick),t.addEventListener("dblclick",this.mouseDoubleClick),t.addEventListener("mousedown",this.mouseDown),t.addEventListener("mouseup",this.mouseUp),t.addEventListener("mousemove",this.mouseMove)}removeEvent(){const t=this.mouseInteraction.model.modelViewWrapper.div;t.removeEventListener("click",this.mouseClick),t.removeEventListener("dblclick",this.mouseDoubleClick),t.removeEventListener("mousedown",this.mouseDown),t.removeEventListener("mouseup",this.mouseUp),t.removeEventListener("mousemove",this.mouseMove)}}class g{constructor(t){this.mouseInteractionUI=void 0,this.mouseEventDataPre=void 0,this.model=void 0,this.isEnable=!0,this.isEnableZoomByDoubleClickValue=!0,this.click=!1,this.prevent=!1,this.delay=100,this.timer=void 0,this.down=!1,this.e=void 0,this.mouseEvent=void 0,this._stopPropagation=!1,this.model=t,this.mouseEventDataPre=new l.$,this.mouseEvent=new c(this),this.initNativeMouseWheelEvent(this.model.modelViewWrapper.div)}initNativeMouseWheelEvent(t){t.onwheel=t=>{this.mouseWheel(t,t.deltaY)}}mouseDown(t){if(!this.isInsideCropShape(t))return;this.click=!0,this.down=!0;const i=this.commonEventBuilder(t);i.CLICK_TYPE=s.uD.Down,i.isDown=!0,this.mouseEvenEmitting(i)}mouseClick(t){if(!this.isInsideCropShape(t))return;const i=this.commonEventBuilder(t);0===t.button?i.CLICK_TYPE=s.uD.Left:1===t.button?i.CLICK_TYPE=s.uD.Middle:2===t.button&&(i.CLICK_TYPE=s.uD.Right),this.mouseEvenEmitting(i)}mouseDoubleClick(t){if(!this.isInsideCropShape(t))return;const i=this.commonEventBuilder(t);i.CLICK_TYPE=s.uD.Double,this.mouseEvenEmitting(i)}mouseDrag(t){this.click=!1;const i=this.commonEventBuilder(t);i.CLICK_TYPE=s.uD.Drag,i.isDown=!0,1===t.buttons?i.CLICK_TYPE=s.uD.Drag:4===t.buttons?i.CLICK_TYPE=s.uD.DragMiddle:2===t.buttons&&(i.CLICK_TYPE=s.uD.DragRight),this.mouseEvenEmitting(i)}mouseMove(t){if(!this.isInsideCropShape(t))return;if(this.down)return void this.mouseDrag(t);const i=this.commonEventBuilder(t);i.CLICK_TYPE=s.uD.Move,i.isDown=!1,this.mouseEvenEmitting(i)}mouseUp(t){this.down=!1;const i=this.commonEventBuilder(t);i.CLICK_TYPE=s.uD.Up,i.isDown=!1,this.mouseEvenEmitting(i)}mouseWheel(t,i){if(!this.isInsideCropShape(t))return;const e=this.commonEventBuilder(t);e.wheel=i,e.CLICK_TYPE=s.uD.Wheel,this.mouseEvenEmitting(e)}appendDownEvent(t){}appendUpEvent(){document.onmouseup=t=>{const i=this.commonEventBuilder(t);0===t.button?i.CLICK_TYPE=s.uD.Left:1===t.button?i.CLICK_TYPE=s.uD.Middle:2===t.button&&(i.CLICK_TYPE=s.uD.Right),i.isDown=!1,i.CLICK_TYPE=s.uD.Up,this.mouseEvenEmitting(i)}}get isEnableZoomByDoubleClick(){return this.isEnableZoomByDoubleClickValue}set isEnableZoomByDoubleClick(t){t?this.timer=setTimeout((()=>{this.isEnableZoomByDoubleClickValue=t}),1e3):this.isEnableZoomByDoubleClickValue=t}commonEventBuilder(t){const i=new l.$;return i.preX=this.mouseEventDataPre.x,i.preY=this.mouseEventDataPre.y,i.pressedShift=t.shiftKey,i.pressedAlt=t.altKey,i.pressedCtrl=t.ctrlKey,i.x=t.offsetX,i.y=t.offsetY,i.preWheel=this.mouseEventDataPre.wheel,i.wheel=0,i.native=t,this.mouseEventDataPre=i,this.e=i,i}get stopPropagation(){return this._stopPropagation}set stopPropagation(t){this._stopPropagation=t}mouseEvenEmitting(t){this.model.appCoreWrapper.appControllerStatus.mode!==s.An.ObserveViewer&&(this.mouseEventEmittingForViewController(t),this._stopPropagation||this.mouseEventEmittingForModel(t))}mouseEventEmittingForViewController(t){this.mouseInteractionUI&&this.mouseInteractionUI.mouseInteractionMenu(t)}mouseEventEmittingForModel(t){this.model.controllerWrapper.mouseEventController(t)}destroy(){this.mouseEvent.removeEvent()}isInsideCropShape(t){return!!this.model.app.implementations.imageAnnoApp.scene.paramsEditing.isInsideCropShape(t.offsetX,t.offsetY)||(t.stopPropagation(),!1)}}var u=e(60190);class v{constructor(t){this.touchInteraction=void 0,this.touchInteraction=t}appendEvent(){}}class y extends v{constructor(t){super(t),this.appendEvent()}appendEvent(){this.touchInteraction.model.modelViewWrapper.div.ontouchstart=t=>{this.touchInteraction.model.app.implementations.imageAnnoApp;const i=this.touchInteraction.commonEventBuilder(t,s.wn.Start);this.touchInteraction.mouseEvent(i)},this.touchInteraction.model.modelViewWrapper.div.ontouchend=t=>{this.touchInteraction.model.app.implementations.imageAnnoApp;const i=this.touchInteraction.commonEventBuilder(t,s.wn.End);this.touchInteraction.mouseEvent(i)},this.touchInteraction.model.modelViewWrapper.div.ontouchmove=t=>{this.touchInteraction.model.app.implementations.imageAnnoApp;const i=this.touchInteraction.commonEventBuilder(t,s.wn.Move);this.touchInteraction.mouseEvent(i)},this.touchInteraction.model.modelViewWrapper.div.ontouchcancel=t=>{this.touchInteraction.model.app.implementations.imageAnnoApp;const i=this.touchInteraction.commonEventBuilder(t,s.wn.Cancel);this.touchInteraction.mouseEvent(i)}}}class w{constructor(t){this.touchEventDataPre=void 0,this.isEnable=!0,this.click=!1,this.prevent=!1,this.delay=100,this.timer=void 0,this.down=!1,this.e=void 0,this.preEvent=void 0,this.model=void 0,this.touchEvent=void 0,this.model=t,w.model=t,this.touchEvent=new y(this)}commonEventBuilder(t,i){const e=new u.f;return e.TOUCH_TYPE=i,e.build(t,i),this.touchEventDataPre=e,e}mouseEvent(t){this.model.controllerWrapper.touchEventController(t)}}w.model=void 0;class A{constructor(t){this.mouseInteraction=void 0,this.keyboardInteraction=void 0,this.touchInteraction=void 0,this.ioWrapper=void 0,this.ioWrapper=t,this.mouseInteraction=new g(this.ioWrapper.model),this.keyboardInteraction=new m(this.ioWrapper.model),this.touchInteraction=new w(this.ioWrapper.model)}set isEnableZoomByDoubleClick(t){this.mouseInteraction.isEnableZoomByDoubleClick=t}get isEnableZoomByDoubleClick(){return this.mouseInteraction.isEnableZoomByDoubleClick}destroy(){this.mouseInteraction.destroy()}}class C{constructor(t){this.model=void 0,this.model=t}pushAction(t){this.model.app.implementations.pushAction(t)}}class E{constructor(t){this.model=void 0,this.emitAction=void 0,this.stateProcessing=void 0,this.eventInteraction=void 0,this.model=t,this.emitAction=new h.R(this),this.stateProcessing=new C(this.model)}initPost(){this.initEventInteraction()}initEventInteraction(){this.eventInteraction=new A(this)}download(){}destroy(){this.eventInteraction.keyboardInteraction.destroy(),this.eventInteraction.mouseInteraction.destroy()}open(){}}class I{constructor(t,i){this.model=void 0,this.divHost=void 0,this.divNGraphicsHost=void 0,this.div=void 0,this.divWrapper=void 0,this.model=t,this.init(i),this.model.appCoreWrapper.appProperties.compileMode,s.ct.Production}init(t){const i=document.createElement("div");this.divNGraphicsHost=i,i.id="ExpressImageDrawing",i.style.width="100%",i.style.height="100%",this.divWrapper=document.createElement("div"),this.divWrapper.id="Annotation-image-wrapper".concat(this.model.app.CONFIG.VERSION_APP),this.divWrapper.style.width="100%",this.divWrapper.style.height="100%",this.divWrapper.style.pointerEvents="none",this.div=document.createElement("div"),this.div.id="Annotation-image-".concat(this.model.app.CONFIG.VERSION_APP),this.div.style.userSelect="none",this.div.style.width="100%",this.div.style.height="100%",this.div.style.zIndex="1",this.div.style.position="relative",this.divWrapper.appendChild(this.div),i.appendChild(this.divWrapper);const e=document.getElementById(t);e&&(this.divHost=e,this.divHost.parentNode&&this.divHost.appendChild(i))}removeDivImg(){this.model.modelViewWrapper.div.removeChild(this.model.modelViewWrapper.div.childNodes[2])}removeDiv(){try{this.model.modelViewWrapper.divNGraphicsHost.parentNode.removeChild(this.model.modelViewWrapper.divNGraphicsHost)}catch(t){console.debug(t)}}initPost(){}}class x{constructor(t){this.model=void 0,this.imgAppended=void 0,this.dataFilter="",this.img=void 0,this.imgString="",this.imgCroppingParam=void 0,this.imgOriginal=void 0,this.imgOriginalString="",this.imgOriginalCroppingParam=void 0,this.useModifiedImage=!0,this.croppingDataTemp=void 0,this.model=t}projectionToImageSpace(t,i){return[t*(this.img.width/this.imgAppended.width),i*(this.img.height/this.imgAppended.height)]}updateEffecting(t){this.dataFilter=t}initImageByImg(t,i,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#1D2730";this.img=t,this.imgString=t.src,this.imgOriginal=e,this.imgOriginalString=e.src,this.imgCroppingParam=JSON.parse(i),this.croppingDataTemp=this.imgCroppingParam,this.model.app.param.colorCover=n,this.model.app.isLoaded&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.croppingDataTemp),this.updateImg(t,n))}updateImg(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#1D2730";this.imgAppended=new Image,this.imgAppended.src=t.src,this.imgAppended.style.pointerEvents="none",this.imgAppended.style.width="100%",this.imgAppended.style.height="100%",this.imgAppended.onload=()=>{this.updateMaskForCroppingShape(t,i),this.model.modelViewWrapper.div.append(this.imgAppended);const e=.5*(t.width/this.imgAppended.width+t.height/this.imgAppended.height);this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.scaleScreenByRatioImageSize=e<1?1:e),this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(t.width,t.height),this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.isActive=!0),this.model.ioWrapper.emitAction.emitAction("ready@markup"),this.imgAppended.onload=()=>{}}}toCroppedImg(){this.useModifiedImage=!0,this.imgAppended.src=this.imgString,this.toModifiedImgCroppingParam(),this.model.ioWrapper.emitAction.emitAction("update-cropping@"+JSON.stringify(this.imgCroppingParam)),this.model.ioWrapper.emitAction.emitAction("update-effecting@"+JSON.stringify(this.dataFilter)),this.model.ioWrapper.emitAction.emitAction("update-container-size@")}toOriginalImg(){this.useModifiedImage=!1,this.imgAppended.src=this.imgOriginalString,this.toOriginalImgCroppingParam(),this.model.ioWrapper.emitAction.emitAction("update-cropping@"+JSON.stringify(this.imgOriginalCroppingParam)),this.model.ioWrapper.emitAction.emitAction("update-effecting@"+JSON.stringify({typePreset:"normal",filter:{interpolation:1,blur:0,sepia:0,contrast:1,brightness:1,saturate:1,hueRotate:0},tint:{}})),this.model.ioWrapper.emitAction.emitAction("update-container-size@original")}toOriginalImgCroppingParam(){this.imgOriginalCroppingParam={aspectRatio:"original",x:0,y:0,width:this.imgOriginal.width,height:this.imgOriginal.height,rotation:0,scale:1,shape:"rectangle"},this.img.width=this.imgOriginalCroppingParam.width,this.img.height=this.imgOriginalCroppingParam.height,this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.imgOriginalCroppingParam),this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(this.imgOriginal.width,this.imgOriginal.height)),this.croppingDataTemp=this.imgOriginalCroppingParam}toModifiedImgCroppingParam(){this.img.width=this.imgCroppingParam.width,this.img.height=this.imgCroppingParam.height,this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.imgCroppingParam),this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(this.imgCroppingParam.width,this.imgCroppingParam.height)),this.croppingDataTemp=this.imgCroppingParam}updateMaskForCroppingShape(t,i){const e=document.createElement("canvas");e.style.width="100%",e.style.height="100%",e.width=t.width,e.height=t.height,e.style.position="absolute",this.model.modelViewWrapper.div.append(e);const n=e.getContext("2d");n.fillStyle=i,n.beginPath(),n.rect(0,0,e.width,e.height),n.closePath(),n.fill(),(0,s.JY)(n,this.croppingDataTemp.shape,0,0,this.croppingDataTemp.width,this.croppingDataTemp.height,!1)}}class P{constructor(t){this.model=void 0,this.divUIWrapper=void 0,this.divSizeFrameBG=void 0,this.divWidth=void 0,this.divHeight=void 0,this.model=t;const i=document.createElement("div");this.divUIWrapper=i,this.divUIWrapper.id="ExpressUI",this.divUIWrapper.style.zIndex="3",this.divUIWrapper.style.position="relative",this.divUIWrapper.style.width="100%",this.divUIWrapper.style.padding=this.model.app.param.themeUI.top.padding,this.divUIWrapper.style.height=this.model.app.param.themeUI.top.height,this.divUIWrapper.style.background=this.model.app.param.themeUI.top.background,this.divUIWrapper.style.marginBottom=this.model.app.param.themeUI.top.marginBottom,this.model.modelViewWrapper.divNGraphicsHost.prepend(this.divUIWrapper);const e=document.createElement("p");e.textContent="Image Annotation App V1",e.style.fontSize="12px;",e.style.color="#afafaf",e.style.pointerEvents="none",e.style.top="0px",e.style.left="20px",this.divUIWrapper.append(e),this.Layer0(),this.Layer1()}destroy(){this.model.modelViewWrapper.divNGraphicsHost.removeChild(this.divUIWrapper)}updateStyle(t,i,e){this.divSizeFrameBG.style.backgroundColor="rgb(".concat(t,",").concat(e,",").concat(i,")")}Layer0(){let t=this.model.app.param.themeUI.top.iconFill,i=document.createElement("div");i.style.margin="5px",i.style.marginBottom="20px",this.divUIWrapper.append(i);let e=(0,s.sR)((()=>{this.model.app.api.onClickPlace()}),'\n            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z"/>\n            </svg>\n            '));e.style.transform="scale(".concat(1.7,")"),e.style.paddingRight="10px",i.append(e),i.append((0,s.sR)((()=>{this.model.app.api.onClickCancel()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>\n                </svg>\n                '),1.4)),i.append((0,s.sR)((()=>{this.model.app.api.onClickBlackhole()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n                <path d="M4.146.146A.5.5 0 0 1 4.5 0h7a.5.5 0 0 1 .5.5c0 .68-.342 1.174-.646 1.479-.126.125-.25.224-.354.298v4.431l.078.048c.203.127.476.314.751.555C12.36 7.775 13 8.527 13 9.5a.5.5 0 0 1-.5.5h-4v4.5c0 .276-.224 1.5-.5 1.5s-.5-1.224-.5-1.5V10h-4a.5.5 0 0 1-.5-.5c0-.973.64-1.725 1.17-2.189A5.921 5.921 0 0 1 5 6.708V2.277a2.77 2.77 0 0 1-.354-.298C4.342 1.674 4 1.179 4 .5a.5.5 0 0 1 .146-.354z"/>\n                </svg>\n                '),1.4)),i.append((0,s.sR)((()=>{}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n                <path fill-rule="evenodd" d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103zM10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8v12.98zm-6-.8V1.11l-4 .8v12.98l4-.8z"/>\n                </svg>\n                '),1.4)),i.append((0,s.sR)((()=>{this.model.app.api.onClickCropper()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n                <path d="M3.5.5A.5.5 0 0 1 4 1v13h13a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2H3.5a.5.5 0 0 1-.5-.5V4H1a.5.5 0 0 1 0-1h2V1a.5.5 0 0 1 .5-.5zm2.5 3a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4H6.5a.5.5 0 0 1-.5-.5z"/>\n                </svg>\n                '),1.4))}Layer1(){let t=document.createElement("div");this.divUIWrapper.append(t);let i="#000000";t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.SELECT)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onClickUndo()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onClickRedo()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.POINT_REGULAR)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.POINT_NUMBERED)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <circle cx="8" cy="8" r="8"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.POLYLINE_BENDING)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.POLYGON_GRAPH)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M8.5.134a1 1 0 0 0-1 0l-6 3.577a1 1 0 0 0-.5.866v6.846a1 1 0 0 0 .5.866l6 3.577a1 1 0 0 0 1 0l6-3.577a1 1 0 0 0 .5-.866V4.577a1 1 0 0 0-.5-.866L8.5.134z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.CIRCLE)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.RECTANGLE)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.ARROW_SINGLE)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M14 2.5a.5.5 0 0 0-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0v-6z"/>\n                </svg>\n                '))),t.append((0,s.sR)((()=>{this.model.app.api.onclickActiveCommand(s.uA.ARROW_DOUBLE)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(i,'" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707z"/>\n                </svg>\n                ')))}initPost(){this.divSizeFrameBG=document.createElement("div"),this.divSizeFrameBG.style.textAlign="center",this.divSizeFrameBG.style.padding="10px",this.divSizeFrameBG.textContent="Size ",this.divWidth=document.createElement("input"),this.divWidth.style.width="50px",this.divWidth.setAttribute("type","text"),this.divWidth.setAttribute("min","100"),this.divSizeFrameBG.append(this.divWidth),this.divWidth.oninput=()=>{},this.divHeight=document.createElement("input"),this.divHeight.style.width="50px",this.divHeight.setAttribute("type","text"),this.divHeight.setAttribute("min","100"),this.divSizeFrameBG.append(this.divHeight),this.divHeight.oninput=()=>{},this.divUIWrapper.append(this.divSizeFrameBG)}}class f{constructor(t,i){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.An.Drawing;this.app=void 0,this.assets=void 0,this.appCoreWrapper=void 0,this.modelViewWrapper=void 0,this.imageWrapper=void 0,this.controllerWrapper=void 0,this.ioWrapper=void 0,this.ui=void 0,this.app=t,this.app.model=this,this.assets=new a(this),this.ioWrapper=new E(this),this.appCoreWrapper=new o(this,e),this.modelViewWrapper=new I(this,i),this.imageWrapper=new x(this),this.controllerWrapper=new r(this),this.app.param.UI&&(this.ui=new P(this)),this.init()}resize(t,i){this.modelViewWrapper.div.style.width=t+"px",this.modelViewWrapper.div.style.height=i+"px"}initPost(){this.modelViewWrapper.initPost(),this.appCoreWrapper.initPost(),this.ioWrapper.initPost()}restart(){}destroy(){this.ui&&this.ui.destroy(),this.ioWrapper.destroy(),this.modelViewWrapper.removeDiv()}pushAction(t){this.ioWrapper.stateProcessing.pushAction(t)}pushTheme(t){this.app.implementations.pushTheme(t)}init(){}}class k{constructor(t){this.addon=void 0,this.appImageEditing=void 0,this.addon=t}async initCropping(){return e.e(86041).then(e.bind(e,86041)).then((t=>{let{AppImageEditing:i}=t})).catch((t=>{throw console.debug("Stop loading Mapticon Addon."),console.debug(t),t}))}async initMapticon(){}async initVisualizationJSAPI(){}async initVisualizationExternalGLJSAPI(){}async initDrawingBlock(){}async initMapfilter(){}async initQuickCommander(){}async initSmartCommander(){}async initSmartDrawing(){}async initVoiceController(){}}class z{constructor(t){this.app=void 0,this.dynamicImport=void 0,this.visualizationJSAPI=void 0,this.visualizationMapJSAPIExternal=void 0,this.drawingBlock=void 0,this.mapfilter=void 0,this.mapticon=void 0,this.tourTool=void 0,this.quickCommander=void 0,this.smartCommander=void 0,this.smartDrawing=void 0,this.voiceController=void 0,this._stopPropagation=!1,this._enablePan=!0,this.app=t,this.dynamicImport=new k(this)}get enablePan(){return this.mapticon&&(this._enablePan=this.mapticon.enablePan),this._enablePan}set enablePan(t){this._enablePan=t}get stopPropagation(){return this._stopPropagation}set stopPropagation(t){this._stopPropagation=t}MouseEventController(t){this.stopPropagation||(this.mapticon&&this.mapticon.MouseEventController(t),this.tourTool&&this.tourTool.MouseEventController(t))}KeyboardEventController(t){}TouchEventController(t){}Resize(t,i){this.mapfilter&&this.mapfilter.Resize(t,i)}async InitMapticon(){return this.dynamicImport.initMapticon()}async InitVisualizationJSAPI(){return this.dynamicImport.initVisualizationJSAPI()}async InitVisualizationExternalGLJSAPI(){return this.dynamicImport.initVisualizationExternalGLJSAPI()}async InitDrawingBlock(){return this.dynamicImport.initDrawingBlock()}async InitMapfilter(){return this.dynamicImport.initMapfilter()}async InitQuickCommander(){return this.dynamicImport.initQuickCommander()}async InitSmartCommander(){return this.dynamicImport.initSmartCommander()}async InitSmartDrawing(){return this.dynamicImport.initSmartDrawing()}async InitVoiceController(){return this.dynamicImport.initVoiceController()}}class D{constructor(t){this.app=void 0,this.app=t}needRevertBaseImage(){return!this.app.model.imageWrapper.useModifiedImage}onclickActiveCommand(t){this.app.implementations.imageAnnoApp&&this.app.implementations.imageAnnoApp.activeCommandController.setActiveCommand(t)}onClickDestroy(){this.app.destroy()}onClickPlace(){this.emitDataToExpressImageData(),this.onClickDestroy()}getAllGeometries(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()}shiftEnvironment(t){this.app.param.environment=t,this.app.implementations.imageAnnoApp.customization.themeRenderStyle.shiftEnvironment(t),this.app.implementations.imageAnnoApp.geometryCommon.gcmdSupporting.renderForce()}updateRPointPath(t){return this.app.implementations.imageAnnoApp.customization.themeRenderStyle.updateRPointPath(t),this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()}emitDataToExpressImageData(){this.app.implementations.imageAnnoApp.io.emitAction("update@".concat(JSON.stringify(this.getAllGeometries())))}onClickCancel(){this.onClickDestroy()}onClickBlackhole(){this.app.implementations.imageAnnoApp.apiWrapper.environment.shiftBlackholePos()}onClickReset(){}onClickUndo(){this.app.implementations.imageAnnoApp.scene.undo()}onClickRedo(){this.app.implementations.imageAnnoApp.scene.redo()}onClickDownload(){}onClickCapture(){}onClickSetColor(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.app.implementations.imageAnnoApp.activeCommandController.activeColorController.setActiveColor(t,i)}setScaleGraphics(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.app.implementations.imageAnnoApp.activeCommandController.setScaleGraphics(t,i,e)}updateEffecting(t){this.app.model.imageWrapper.updateEffecting(t)}getCanvas(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdAProcessing.getCanvas()}getDataGeometry(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()}getScaleFactor(){return this.app.implementations.imageAnnoApp.activeCommandController.scaleGlobal}onClickCropper(){}onClickRevertToOriginal(){this.app.implementations.imageAnnoApp&&(this.app.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.resetGeometryList(),this.emitDataToExpressImageData(),this.app.model.imageWrapper.toOriginalImgCroppingParam(),this.app.model.imageWrapper.toOriginalImg(),this.app.implementations.imageAnnoApp.scene.captureScene(),this.app.implementations.imageAnnoApp.io.emitAction("markup@resizeDiv"))}}const b={config:{BASE_URL:""},PATH_ADDON:"../../../../Addon",VERSION_APP:"2",HAS_ANIMATION:!1,LAB:!1};class M{static get id(){return this._id++}constructor(t,i){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.BQ.AnnotationMap;this.CONFIG=b,this.model=void 0,this.implementations=void 0,this.api=void 0,this.addon=void 0,this.param=void 0,this.APP=void 0,this.PRODUCTION=!0,this.INSPECTION=!1,this.instanceID=void 0,this.emitAction=void 0,this.getNumLayers=void 0,this.localizedString=void 0,this.isLoaded=!1,this.APP=e,this.param=t,this.INSPECTION&&(this.PRODUCTION=!1),this.CONFIG.config=t.config;const n=t.UI;t.features&&t.features.hasAnimation&&(this.CONFIG.HAS_ANIMATION=t.features.hasAnimation),t.isLab&&(this.CONFIG.LAB=t.isLab,this.CONFIG.HAS_ANIMATION=!1),this.instanceID=M.id,this.api=new D(this),this.model=new f(this,this.param.id,this.param.interactionMode),void 0===this.param.rendererActive||!0===this.param.rendererActive?this.param.rendererActive=!0:this.param.rendererActive=!1,this.addon=new z(this),this.initImplementations().then((()=>{if(this.param.renderer===s.g4.Svg?this.implementations.initAnnotationSVGInstance(this.CONFIG.HAS_ANIMATION,this.param.rendererActive,this.param.theme):(this.implementations.initAnnotationCanvasInstance(this.CONFIG.HAS_ANIMATION,this.param.rendererActive,this.param.theme),this.implementations.imageAnnoApp&&(this.implementations.imageAnnoApp.activeCommandController.acProperties.isActivateSnapping=!0)),n&&this.initViewController(),this.param.features&&this.param.features.mapFilter,this.initPost(),this.CONFIG.LAB&&this.initLab(),i.geometry&&i.geometry.length>0){this.implementations.imageAnnoApp&&(this.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.isActive=!1,this.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.DumpByIGeometriesFromImageDataModel(i.geometry));const t=!0,e=!1;this.api.setScaleGraphics(i.scale,t,e)}this.implementations.imageAnnoApp&&this.implementations.imageAnnoApp.scene.captureScene()}))}set setEnvironment(t){this.param.environment=t}async initImplementations(){return e.e(58968).then(e.bind(e,58968)).then((t=>{let{Implementations:i}=t;this.implementations||(this.implementations=new i(this,this.model.modelViewWrapper.divNGraphicsHost))})).catch((t=>{throw console.debug("Stop loading mapticon."),console.debug(t),t}))}initLab(){this.implementations.imageAnnoApp}initPost(){this.model.initPost(),this.implementations.initPost(),this.implementations.imageAnnoApp,this.param.renderer===s.g4.Svg&&(this.model.modelViewWrapper.divNGraphicsHost.style.pointerEvents="none"),this.model.imageWrapper.croppingDataTemp&&this.implementations.imageAnnoApp&&this.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.model.imageWrapper.croppingDataTemp),this.model.imageWrapper.img&&(this.param.colorCover?this.model.imageWrapper.updateImg(this.model.imageWrapper.img,this.param.colorCover):this.model.imageWrapper.updateImg(this.model.imageWrapper.img)),this.isLoaded=!0,this.initPostAppEnv()}initPostAppEnv(){this.implementations.imageAnnoApp&&(this.implementations.imageAnnoApp.activeCommandController.acProperties.isScaleDynamicRender=!0,this.implementations.imageAnnoApp.activeCommandController.acProperties.optimizerTextleaderline=s.Nv.Collision,this.param.features&&this.param.features.clustering&&this.implementations.imageAnnoApp.apiWrapper.environment.toggleClusteringPoint(this.param.features.clustering))}restart(){}toJson(){if(this.implementations.imageAnnoApp){const t=this.implementations.imageAnnoApp.renderer.saveDrawingGeometries();return Array.from(t).reduce(((t,i)=>{let[,e]=i;const{id:s,type:o,nodes:a,data:r,styles:h}=e;return t[s]=(0,n.Z)((0,n.Z)({id:s,type:o,nodes:a},h&&Object.keys(h).length&&{styles:h}),r&&Object.keys(r).length&&{data:r}),t}),{})}return{}}pause(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.implementations.Pause(t)}resume(){this.implementations.resume()}destroy(){this.implementations&&this.implementations.destroy(),this.model&&this.model.destroy()}pushAction(t){t&&this.model.pushAction(t)}pushTheme(t){this.model.pushTheme(t)}bindActionEmitting(t){this.emitAction=t}resize(t,i){this.model.resize(t,i),this.implementations.resize(t,i)}async initViewController(){}open(){this.model.ioWrapper.open()}initImageByImg(t,i,e,n){this.model.imageWrapper.initImageByImg(t,i,e,n)}updateEffecting(t){this.api.updateEffecting(t)}initCropping(){this.addon.dynamicImport.initCropping()}}M._id=0},22322:(t,i,e)=>{e.d(i,{$E:()=>n.$});var n=e(19207);e(60190)},38581:(t,i,e)=>{e.d(i,{Y4:()=>k,Us:()=>n.Us,uA:()=>o.uA,$b:()=>m.$,jp:()=>y,gj:()=>g,BQ:()=>n.BQ,Aq:()=>n.Aq,R7:()=>w,uD:()=>n.uD,ew:()=>a.e,$C:()=>a.$,ct:()=>n.ct,CF:()=>n.CF,mL:()=>A,QH:()=>I,qA:()=>r.qA,Nq:()=>n.Nq,iu:()=>n.iu,oU:()=>r.oU,zq:()=>o.zq,An:()=>n.An,cg:()=>n.cg,hO:()=>n.hO,h9:()=>vt,aX:()=>E,g:()=>n.g,xX:()=>n.xX,Nv:()=>n.Nv,oW:()=>n.oW,rO:()=>n.rO,g4:()=>n.g4,i$:()=>u.i,$u:()=>o.$u,PH:()=>n.PH,wn:()=>n.wn,fb:()=>p.f,c8:()=>ht,$5:()=>L,Lg:()=>Z,$z:()=>$,ir:()=>U,EW:()=>s.EW,Ds:()=>l.D,p$:()=>z,xs:()=>Q,Cv:()=>d.Cv,$$:()=>K,Cj:()=>X,HP:()=>et,F$:()=>it,sR:()=>l.s,dX:()=>x.dX,mI:()=>gt,Sm:()=>c.Sm,Sp:()=>T,Th:()=>V,CV:()=>R,iV:()=>_,fi:()=>G,nI:()=>B,$4:()=>O,aj:()=>d.vI,rv:()=>nt,nP:()=>x.nP,ee:()=>P.ee,yP:()=>d.yP,sI:()=>d.sI,kt:()=>c.kt,Ux:()=>d.Ux,kC:()=>d.kC,yH:()=>d.yH,VT:()=>x.VT,KF:()=>x.KF,vQ:()=>J,Fs:()=>d.Fs,Qi:()=>f,lh:()=>j,Wo:()=>c.Wo,rW:()=>c.rW,AR:()=>d.AR,xt:()=>ut,mp:()=>at,X0:()=>ot,vD:()=>rt,Hq:()=>c.Hq,JY:()=>s.JY,zQ:()=>W,Vt:()=>mt,Fv:()=>N,hW:()=>b,PD:()=>M,z1:()=>st,iC:()=>c.iC,Z3:()=>c.Z3,AJ:()=>c.AJ,DM:()=>dt,bA:()=>S,lu:()=>D});var n=e(22970),s=e(49384),o=e(6986),a=e(21015),r=e(64768);let h;!function(t){t.POINT_REGULAR="POINT_REGULAR",t.POINT_NUMBERED="POINT_NUMBERED",t.POINT_ICON="POINT_ICON",t.ARROW_SINGLE="ARROW_SINGLE",t.ARROW_DOUBLE="ARROW_DOUBLE",t.POLYLINE="POLYLINE",t.POLYGON="POLYGON",t.CIRCLE="CIRCLE",t.RECTANGLE="RECTANGLE",t.TEXT="TEXT"}(h||(h={}));var p=e(65450),m=(e(22322),e(95203)),l=e(81524),d=e(98537),c=e(8894);class g{constructor(){this.isStandalone=!1,this.compileMode=n.ct.Development}}var u=e(8742);class v{constructor(){this.clickLeft=void 0,this.clickMiddle=void 0,this.clickRight=void 0,this.clickDouble=void 0,this.mouseDown=void 0,this.mouseMove=void 0,this.mouseDrag=void 0,this.keyDown=void 0,this.clickLeft=!0,this.clickMiddle=!0,this.clickRight=!0,this.clickDouble=!0,this.mouseDown=!0,this.mouseMove=!0,this.mouseDrag=!0,this.keyDown=!0}}class y{constructor(t){this.currentControllerStatus=void 0,this.drawing=void 0,this.interactiveViewer=void 0,this.viewer=void 0,this._mode=void 0,this.currentControllerStatus=new v,this.drawing=new v,this.interactiveViewer=new v,this.viewer=new v,this.interactiveViewer.clickLeft=!0,this.interactiveViewer.clickMiddle=!1,this.interactiveViewer.clickRight=!1,this.interactiveViewer.clickDouble=!1,this.interactiveViewer.mouseDown=!0,this.interactiveViewer.mouseMove=!0,this.interactiveViewer.mouseDrag=!1,this.interactiveViewer.keyDown=!1,this.viewer.clickLeft=!1,this.viewer.clickMiddle=!1,this.viewer.clickRight=!1,this.viewer.clickDouble=!1,this.viewer.mouseDown=!1,this.viewer.mouseMove=!1,this.viewer.mouseDrag=!1,this.viewer.keyDown=!1,this.mode=t}set mode(t){this._mode=t,t===n.An.Drawing&&(this.currentControllerStatus=this.drawing),t===n.An.InteractiveViewer&&(this.currentControllerStatus=this.interactiveViewer),t===n.An.ObserveViewer&&(this.currentControllerStatus=this.viewer)}get mode(){return this._mode}setAccessibility(t,i){t===n.An.Drawing&&(this.drawing.clickLeft=i.clickLeft,this.drawing.clickMiddle=i.clickMiddle,this.drawing.clickRight=i.clickRight,this.drawing.clickDouble=i.clickDouble,this.drawing.mouseDown=i.mouseDown,this.drawing.mouseMove=i.mouseMove,this.drawing.mouseDrag=i.mouseDrag),t===n.An.InteractiveViewer&&(this.currentControllerStatus=this.interactiveViewer),t===n.An.ObserveViewer&&(this.currentControllerStatus=this.viewer)}}class w{constructor(){this._type=void 0,this._isMobile=void 0,this.detectBrowser(),this.detectIsMoile()}detectBrowser(){-1===navigator.userAgent.indexOf("Edge")?(-1!==(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))&&(this._type=n.Aq.Opera),-1===navigator.userAgent.indexOf("Chrome")?-1===navigator.userAgent.indexOf("Safari")?-1===navigator.userAgent.indexOf("Firefox")?(-1!==navigator.userAgent.indexOf("MSIE")&&(this._type=n.Aq.Ie),this._type=n.Aq.Unknown):this._type=n.Aq.Firefox:this._type=n.Aq.Safari:this._type=n.Aq.Chrome):this._type=n.Aq.Edge}detectIsMoile(){this._isMobile=!1,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)|plucker|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r|s)|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|comp|craw|dait|dbte|dc|devi|dica|dmob|doc|dopo|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly|g1 u|g560|gene|gf5|g-mo|go.w|good|grad|haie|hcit|hd(m|p|t)|hei|hpt|hip|hp i|hs-c|ht(c|tp)|hua|iac|ibro|idea|ig01|ikom|inno|ipaq|iris|jat|jemu|jigs|kddi|keji|kgt|klon|kpt|kwc|kyo(c|k)|leno|lexi|lg(g|50|54|a|l|u)|lynx|m1|m3ga|m50|mate|mc(01|21|ca)|mcr|merc|mi(o8|oa|ts)|mmef|mob(t|o|v)|mt(50|p1|v)|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(00|01|10)|ne(c|m|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|p800|pan(a|d|t)|pdxg|pg(13|[1-8]c)|phil|pire|play|pluc|pn2|pock|port|prox|psio|ptg|qa|qc(07|12|21|32|60)|qtek|r380|r600|rim9|rove|sa(ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk|sec(0|1|47|mc|nd|ri)|sgh|shar|sie(m)|sk(45|slid)|smart|sony|sp(h|v)|sy(01|mb)|t218|t6(00|10|18)|tcl|tdg|tel(i|m)|tmo|topl|tsh|ts70|tx9|up(b|g1|si)|utst|v400|v750|veri|virg|vk(40|50|53)|vx(52|53|60|61|70|80|81|83|85|98)|w3c|webc|whit|wi(g|nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(navigator.userAgent.substr(0,4)))&&(this._isMobile=!0)}get type(){return this._type}get isMobile(){return this._isMobile}}class A{static simplifyPath(t,i){let e=this.computeDouglasPeucker(t,i);return e.push(t[t.length-1]),e}static computeDouglasPeucker(t,i){if(t.length<=2)return[t[0]];let e,n=[],s=new C(t[0],t[t.length-1]),o=0,a=0;for(var r=1;r<=t.length-2;r++){var h=s.distanceToPoint(t[r]);h>o&&(o=h,a=r)}return o>=i?(e=t[a],s.distanceToPoint(e),n=n.concat(this.computeDouglasPeucker(t.slice(0,a+1),i)),n=n.concat(this.computeDouglasPeucker(t.slice(a,t.length),i))):(e=t[a],s.distanceToPoint(e),n=[t[0]]),n}constructor(){this.vs=void 0,this.ls=void 0}computeDouglasPeucker(t,i){if(t.length<=2)return[t[0]];let e,n=[],s=new C(t[0],t[t.length-1]),o=0,a=0;for(var r=1;r<=t.length-2;r++){var h=s.distanceToPoint(t[r]);h>o&&(o=h,a=r)}return o>=i?(e=t[a],s.distanceToPoint(e),n=n.concat(this.computeDouglasPeucker(t.slice(0,a+1),i)),n=n.concat(this.computeDouglasPeucker(t.slice(a,t.length),i))):(e=t[a],s.distanceToPoint(e),n=[t[0]]),n}}class C{constructor(t,i){this.p0=void 0,this.p1=void 0,this.p0=t,this.p1=i}distanceToPoint(t){let i=(this.p1.y-this.p0.y)/(this.p1.x-this.p0.x),e=this.p0.y-i*this.p0.x,n=[];return n.push(Math.abs(t.y-i*t.x-e)/Math.sqrt(Math.pow(i,2)+1)),n.push(Math.sqrt(Math.pow(t.x-this.p0.x,2)+Math.pow(t.y-this.p0.y,2))),n.push(Math.sqrt(Math.pow(t.x-this.p1.x,2)+Math.pow(t.y-this.p1.y,2))),n.sort(((t,i)=>t-i))[0]}}class E{constructor(){this.t=0}scale(t){return.2*(Math.sin(this.t)+5)*t}easeInElastic(t){return(.04-.04/t)*Math.sin(25*t)+1}easeOutElastic2(t){return Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}}class I{constructor(t,i){this.init(t,i)}init(t,i){if("undefined"===typeof document)return;var e=this.encode(JSON.stringify(t,null,4)),n=new Blob([e],{type:"esri/drawingTool"});let s=URL.createObjectURL(n);var o=document.createElement("a");o.setAttribute("href",s),o.setAttribute("download",i);var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(a)}encode(t){let i=[];for(let e=0;e<t.length;e++)i.push(t.charCodeAt(e));return new Uint8Array(i)}dummy(){}}var x=e(85523),P=e(20163);const f=(t,i,e,n,s,o,a,r)=>new vt(t,i,0),k=(t,i)=>{const e=t[0].x,n=t[1].x,s=i[0].x,o=i[1].x,a=t[0].y,r=t[1].y,h=i[0].y,p=i[1].y;return e<=o&&n>=s&&a<=p&&r>=h},z=t=>{const i=new vt(t.x,t.y,t.z);return i.alt=t.alt,i.d=t.d,i.isModified=t.isModified,i.parent=t.parent,i.w=t.w,i},D=(t,i)=>new vt(t.x-i.x,t.y-i.y,t.z-i.z),b=()=>new vt(0,0,0),M=(t,i)=>new vt(t.x+i.x,t.y+i.y,t.z+i.z),S=(t,i)=>new vt(t.x*i,t.y*i,t.z*i),W=(t,i)=>new vt(t.x+.5*(i.x-t.x),t.y+.5*(i.y-t.y),t.z+.5*(i.z-t.z)),L=(t,i)=>t.x===i.x&&t.y===i.y&&t.z===i.z,N=t=>{const i=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return i<1e-4?new vt(t.x,t.y,t.z):new vt(t.x/i,t.y/i,t.z/i)},O=t=>{let i=0;for(let e=0;e<t.length-1;e++)i+=(t[e].x-t[e+1].x)*(t[e].y+t[e+1].y);return i*=.5,Math.abs(i)},T=(t,i)=>Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)+(t.z-i.z)*(t.z-i.z)),_=(t,i,e,n)=>Math.sqrt((t-e)*(t-e)+(i-n)*(i-n)),R=(t,i)=>Math.sqrt((t[0]-i[0])*(t[0]-i[0])+(t[1]-i[1])*(t[1]-i[1])+(t[2]-i[2])*(t[2]-i[2])),V=(t,i)=>(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)+(t.z-i.z)*(t.z-i.z),B=(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,U=(t,i)=>new vt(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),G=function(t,i){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const n=[],s=(i.x-t.x)/e,o=(i.y-t.y)/e,a=(i.z-t.z)/e;for(let r=0;r<e;++r){const i=t.x+s*r,e=t.y+o*r,h=t.z+a*r;n.push(new vt(i,e,h))}return n},F=(t,i)=>{const e=i.y*Math.PI/180-t.y*Math.PI/180,n=i.x*Math.PI/180-t.x*Math.PI/180,s=Math.sin(e/2)*Math.sin(e/2)+Math.cos(t.y*Math.PI/180)*Math.cos(i.y*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 6378.137*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},Y=function(){const t=new vt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,0);let i=0;for(let e=0;e<1e4;++e){const e=F(t,new vt(t.x+i,t.y,t.z));if(1<e&&e<1.001)return t.x+i;i+=1e-5}return-1},H=function(){const t=new vt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,0);let i=0;for(let e=0;e<1e4;++e){const e=F(t,new vt(t.x,t.y+i,t.z));if(1<e&&e<1.001)return t.y+i;i+=1e-5}return-1},K=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const e=Y(t,i),n=H(t,i);return new vt(e,n,0)},q=(t,i)=>Math.acos(((t,i)=>B(N(t),N(i)))(t,i)),X=(t,i)=>180*q(t,i)/Math.PI,J=(t,i)=>{const e=i.Sub(t),n=new vt(1,0,0);return e.y>0?-1*X(n,e):X(n,e)},Z=t=>{const i=[];for(let e=0;e<t.length;++e)if(e<t.length-1){const n=new vt(t[e].x,t[e].y,t[e].z),s=new vt(t[e+1].x,t[e+1].y,t[e+1].z);s.x-=n.x,s.y-=n.y,s.z-=n.z;const o=B(new vt(1,0,0),N(s));i.push(o)}else{const n=new vt(t[e].x,t[e].y,t[e].z),s=new vt(t[0].x,t[0].y,t[0].z);s.x-=n.x,s.y-=n.y,s.z-=n.z;const o=B(new vt(1,0,0),N(s));i.push(o)}return i},$=t=>{const i=gt(t),e=[];for(let n=0;n<t.length;++n){let s,o;n<t.length-1?(s=new vt(t[n].x-i.x,t[n].y-i.y,t[n].z-i.z),o=new vt(t[n+1].x-i.x,t[n+1].y-i.y,t[n+1].z-i.z)):(s=new vt(t[n].x-i.x,t[n].y-i.y,t[n].z-i.z),o=new vt(t[0].x-i.x,t[0].y-i.y,t[0].z-i.z));const a=B(N(s),N(o));e.push(a)}return e},j=t=>{const i=gt(t);let e=0,n=0,s=t.length;for(let o=0;o<s;++o)e+=Math.abs(t[o].x-i.x),n+=Math.abs(t[o].y-i.y);return s+=2,[e/s,n/s]},Q=(t,i,e)=>{i.x+=1e-5,i.y+=1e-5;const n=it(i,e),s=tt(i,e,t.x,t.y,n,!0);return T(t,s)},tt=function(t,i,e,n,s){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=new vt(t.x,t.y,t.z),r=new vt(i.x,i.y,i.z).Sub(a),h=new vt(e,n,0).Sub(a);r.unitize();const p=a.Add(r.Mult(B(h,r)));return o?ot(p,s)?p:T(t,p)<T(i,p)?new vt(t.x,t.y,t.z):new vt(i.x,i.y,i.z):p},it=(t,i)=>{const e=[];let n=0,s=0,o=0;n=t.x<i.x?t.x:i.x,s=t.y<i.y?t.y:i.y,o=t.z<i.z?t.z:i.z;const a=new vt(n,s,o);n=t.x>i.x?t.x:i.x,s=t.y>i.y?t.y:i.y,o=t.z>i.z?t.z:i.z;const r=new vt(n,s,o);return e.push(new vt(a.x,a.y,a.z)),e.push(new vt(r.x,a.y,a.z)),e.push(new vt(r.x,r.y,a.z)),e.push(new vt(a.x,r.y,a.z)),e},et=t=>{const i=[];let e=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let h=0;h<t.length;++h)e>t[h].x&&(e=t[h].x),n>t[h].y&&(n=t[h].y),s>t[h].z&&(s=t[h].z),o<t[h].x&&(o=t[h].x),a<t[h].y&&(a=t[h].y),r<t[h].z&&(r=t[h].z);return i.push(new vt(e,n,s)),i.push(new vt(o,a,r)),i},nt=t=>{let i=Number.MAX_VALUE,e=Number.MAX_VALUE,n=Number.MAX_VALUE,s=Number.MIN_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE;for(const r of t)i>r.x&&(i=r.x),e>r.y&&(e=r.y),n>r.z&&(n=r.z),s<r.x&&(s=r.x),o<r.y&&(o=r.y),a<r.z&&(a=r.z);return[new vt(i,e,n),new vt(s,o,a)]},st=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const e=[];for(let n=0;n<t.length-1;++n){const e=t[n];if(!1!==e.d)for(let s=n+1;s<t.length;++s)T(e,t[s])<i&&(t[s].d=!1)}for(let n=0;n<t.length;++n)!0===t[n].d&&e.push(t[n]);return e},ot=(t,i)=>{const e=t.x,n=t.y;let s=!1;for(let o=0,a=i.length-1;o<i.length;a=o++){const t=i[o].x,r=i[o].y,h=i[a].x,p=i[a].y;r>n!==p>n&&e<(h-t)*(n-r)/(p-r)+t&&(s=!s)}return s},at=(t,i,e)=>{const n=t.x,s=t.y;return i.x<n&&n<e.x&&i.y<s&&s<e.y},rt=(t,i,e,n)=>!!ot(new vt(t.x-.5*i,t.y-.5*e),n)||(!!ot(new vt(t.x+.5*i,t.y-.5*e),n)||(!!ot(new vt(t.x+.5*i,t.y+.5*e),n)||!!ot(new vt(t.x-.5*i,t.y+.5*e),n))),ht=(t,i,e)=>{for(let n=0;n<t.length-1;++n)if(pt(t[n],t[n+1],i,e))return!0;return!1},pt=(t,i,e,n)=>{let s=0,o=0,a=0,r=0,h=0,p=!1,m=!1;s=(n.y-e.y)*(i.x-t.x)-(n.x-e.x)*(i.y-t.y);const l=new vt(0,0,0);if(0!==s)return o=t.y-e.y,a=t.x-e.x,r=(n.x-e.x)*o-(n.y-e.y)*a,h=(i.x-t.x)*o-(i.y-t.y)*a,o=r/s,a=h/s,l.x=t.x+o*(i.x-t.x),l.y=t.y+o*(i.y-t.y),o>0&&o<1&&(p=!0),a>0&&a<1&&(m=!0),p&&m?l:void 0},mt=(t,i)=>{const e=[];for(let n=0;n<t.length;++n)e.push(lt(t[n],i));return e},lt=(t,i)=>new vt(t.x+i.x,t.y+i.y,t.z+i.z),dt=(t,i)=>{const e=[];for(let n=0;n<t.length;++n)e.push(ct(t[n],i));return e},ct=(t,i)=>{const e=Math.cos(.017453292519943278*i),n=Math.sin(.017453292519943278*i),s=t.x*e-t.y*n,o=t.x*n+t.y*e;return new vt(s,o,t.z)},gt=t=>{const i=new vt(0,0,0);for(let e=0,n=t.length;e<n;++e)i.Add(t[e]);return i.Mult(1/t.length),i},ut=function(t,i,e,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;return Math.pow(i.x-t.x,2)/Math.pow(s+e,2)+Math.pow(i.y-t.y,2)/Math.pow(s+n,2)<=1};class vt{constructor(t,i){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.z=0,this.w=0,this.alt=0,this.d=!0,this.isModified=!1,this.parent=void 0,this.x=t,this.y=i,this.z=e}Mult(t){return this.x*=t,this.y*=t,this.z*=t,new vt(this.x,this.y,this.z)}divByVal(t){return this.x/=t,this.y/=t,this.z/=t,new vt(this.x,this.y,this.z)}Add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,new vt(this.x,this.y,this.z)}Sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,new vt(this.x,this.y,this.z)}unitize(){return this.normalize()}normalize(){const t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-4||(this.x=this.x/t,this.y=this.y/t,this.z=this.z/t),this}}},19207:(t,i,e)=>{e.d(i,{$:()=>s});var n=e(22970);class s{constructor(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.yGLPicking=void 0,this.CLICK_TYPE=n.uD.Move,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0,this.native=void 0}deepCopy(){const t=new s;return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.pressedAlt=this.pressedAlt,t.pressedShift=this.pressedShift,t.pressedCtrl=this.pressedCtrl,t.isDoubleClick=this.isDoubleClick,t.isDown=this.isDown,t.isMove=this.isMove,t.lat=this.lat,t.long=this.long,t.wheel=this.wheel,t.preWheel=this.preWheel,t.yGLPicking=this.yGLPicking,t.CLICK_TYPE=this.CLICK_TYPE,t.native=this.native,t}}},60190:(t,i,e)=>{e.d(i,{f:()=>s});var n=e(22970);class s{constructor(){this.native=void 0,this.eventList=void 0,this.TOUCH_TYPE=n.wn.Move,this.eventList=[]}build(t,i){for(let e=0;e<t.touches.length;++e){const n=new o;n.identifier=t.touches[e].identifier,n.TOUCH_TYPE=i,n.radiusX=t.touches[e].radiusX,n.radiusY=t.touches[e].radiusY,n.rotationAngle=t.touches[e].rotationAngle,n.x=t.touches[e].clientX,n.y=t.touches[e].clientY,n.force=t.touches[e].force,n.color=this.colorForTouch(t.touches[e]),this.eventList.push(n)}}deepCopy(){}colorForTouch(t){const i=t.identifier%16,e=Math.floor(t.identifier/3)%16,n=Math.floor(t.identifier/7)%16;return"#"+i.toString(16)+e.toString(16)+n.toString(16)}}class o{constructor(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.yGLPicking=void 0,this.TOUCH_TYPE=n.wn.Move,this.identifier=void 0,this.radiusX=void 0,this.radiusY=void 0,this.rotationAngle=void 0,this.force=void 0,this.color=void 0}deepCopy(){const t=new o;return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.yGLPicking=this.yGLPicking,t.TOUCH_TYPE=this.TOUCH_TYPE,t}}}}]);
//# sourceMappingURL=56756.6515c1d0.chunk.js.map
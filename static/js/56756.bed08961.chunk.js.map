{"version":3,"file":"static/js/56756.bed08961.chunk.js","mappings":"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","sources":["njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EmitAction/EmitAction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/AppCoreWrapper/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/AssetWrapper/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/ControllerWrapper/index.ts","njslab/Raster/AppImage/lib/EventData/KeyboardEventData.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EventInteraction/KeyboardInteraction/KeyboardInteraction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EventInteraction/MouseInteraction/Implementation/Base/MouseEventBase.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EventInteraction/MouseInteraction/Implementation/MouseEventNative.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EventInteraction/MouseInteraction/MouseInteraction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EventInteraction/TouchInteraction/Implementation/Base/TouchEventBase.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EventInteraction/TouchInteraction/Implementation/TouchEventNative.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EventInteraction/TouchInteraction/TouchInteraction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/EventInteraction/EventInteraction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/StateProcessing/StateProcessing.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/IOWrapper/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/ModelViewWrapper/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/ImageWrapper/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/UI/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Model/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Addon/Core/DynamicImport.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/Addon/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/API/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/lib/Extended/Enumeration.ts","njslab/Raster/AppImage/lib/App/AppUtility.ts","njslab/Raster/AppImage/lib/App/ControllerUtility.ts","njslab/Raster/AppImage/lib/Utility/BrowserUtility.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/lib/Extended/DouglasPeucker.ts","njslab/Raster/AppImage/lib/Utility/NumericalMotion.ts","njslab/Raster/AppImage/lib/Utility/JSONUtility.ts","njslab/Raster/AppImage/AppExpressImage/AppImageDrawing/lib/Extended/NVector3.ts","njslab/Raster/AppImage/lib/EventData/MouseEventData.ts","njslab/Raster/AppImage/lib/EventData/TouchEventData.ts"],"sourcesContent":["import { IOWrapper } from '..';\nexport const delimiter = '@';\nexport class EmitAction {\n  public ioWrapper: IOWrapper;\n  constructor(ioWrapper: IOWrapper) {\n    this.ioWrapper = ioWrapper;\n  }\n  public emitAction(data: string) {\n    if (!this.ioWrapper.model.app.emitAction) {\n      return;\n    }\n    this.ioWrapper.model.app.emitAction(data);\n  }\n  public getNumLayers() {\n    if (!this.ioWrapper.model.app.getNumLayers) {\n      return;\n    }\n    this.ioWrapper.model.app.getNumLayers();\n  }\n  public localizedString(data: string) {\n    if (!this.ioWrapper.model.app.localizedString) {\n      return;\n    }\n    this.ioWrapper.model.app.localizedString(data);\n  }\n}\n","import { AppControllerStatus, AppProperties, BrowserUtility, InteractionMode } from '../../lib';\nimport { Model } from '..';\nexport class AppCoreWrapper {\n  public model: Model;\n  public appProperties: AppProperties;\n  public appControllerStatus: AppControllerStatus;\n  public browserUtility: BrowserUtility;\n  constructor(model: Model, accessibilityMode: InteractionMode) {\n    this.model = model;\n    this.appProperties = new AppProperties();\n    this.appProperties.isStandalone = true;\n    this.appControllerStatus = new AppControllerStatus(accessibilityMode);\n    this.browserUtility = new BrowserUtility();\n  }\n  public initPost() {\n    // TODO:\n  }\n}\n","\nimport { getObjectFromSVGImporting, getCanvaseShapePathFromSVGXML } from '../../lib';\nimport { Model } from '..';\n\n// const theme = require('./theme');\n\nexport class Assets {\n  model: Model;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  theme: any;\n  constructor(model: Model) {\n    this.model = model;\n    this.importAssets();\n  }\n  async importAssets() {\n    // this.theme = theme;\n    // this.model.app.implementation.annotationInstance.renderer.preset.pointRegularPath = await this.ImportAsset(point);\n    // this.model.app.implementation.annotationInstance.renderer.preset.pointNumberedPath =  await this.ImportAsset(pointNumber);\n  }\n  async importAsset(svgPath: string) {\n    const json = await getObjectFromSVGImporting(svgPath);\n    return getCanvaseShapePathFromSVGXML(json);\n  }\n}\n","import { KeyboardEventData } from '../../../../lib/EventData/KeyboardEventData';\nimport { MouseEventData } from '../../../../lib/EventData/MouseEventData';\nimport { TouchEventDataList } from '../../../../lib/EventData/TouchEventData';\nimport { Model } from '..';\nexport class ControllerWrapper {\n  public model: Model;\n  constructor(model: Model) {\n    this.model = model;\n  }\n  public mouseEventController(m: MouseEventData): void {\n    if (this.model.app.implementations) {\n      this.model.app.implementations.mouseEventController(m);\n    }\n    if (this.model.app.addon) {\n      // this.model.app.addon.mouseEventController(m);\n    }\n  }\n  public keyboardEventController(k: KeyboardEventData): void {\n    if (this.model.app.implementations) {\n      this.model.app.implementations.keyboardEventController(k);\n    }\n    if (this.model.app.addon) {\n      // this.model.app.addon.keyboardEventController(k);\n    }\n  }\n  public keyboardEventControllerFromDocument(k: KeyboardEventData): void {\n    if (this.model.app.implementations) {\n      this.model.app.implementations.keyboardEventControllerFromDocument(k);\n    }\n  }\n  public touchEventController(t: TouchEventDataList): void {\n    if (this.model.app.implementations) {\n      this.model.app.implementations.touchEventController(t);\n    }\n  }\n}\n","import { PressType } from '../Enum/EnumCommon';\nexport class KeyboardEventData {\n  public preEvent: KeyboardEventData;\n  public key: string;\n  public hasAltKey: boolean;\n  public hasCtrlKey: boolean;\n  public hasShiftKey: boolean;\n  public hasMetaCommand: boolean;\n  public code: string;\n  public keyCode: number;\n  public PRESS_TYPE: PressType;\n  constructor() {\n    // TODO:\n  }\n}\n","import { EventListenerType, PressType } from '../../../../lib';\nimport { KeyboardEventData } from '../../../../../../lib/EventData/KeyboardEventData';\nimport { Model } from '../../..';\nexport class KeyboardInteraction {\n  public model: Model;\n  public MouseEventDataPre: KeyboardEventData;\n  public type: EventListenerType;\n  public isUp: boolean;\n  constructor(model: Model, type: EventListenerType = EventListenerType.JSAPI4X) {\n    // bind event listeners first\n    this.keyDown = this.keyDown.bind(this);\n    this.keyUp = this.keyUp.bind(this);\n    this.model = model;\n    this.type = type;\n    this.isUp = false;\n\n    this.init();\n    this.MouseEventDataPre = new KeyboardEventData();\n  }\n  public init() {\n    if (typeof document === 'undefined') {\n      return;\n    }\n    document.addEventListener('keydown', this.keyDown);\n    document.addEventListener('keyup', this.keyUp);\n  }\n  public destroy() {\n    if (typeof document === 'undefined') {\n      return;\n    }\n    document.removeEventListener('keydown', this.keyDown);\n    document.removeEventListener('keyup', this.keyUp);\n  }\n  public keyDown(k: KeyboardEvent) {\n    const kEventData: KeyboardEventData = this.commonEventBuilder(k);\n    kEventData.PRESS_TYPE = PressType.Down;\n    this.keyEventFromDocument(kEventData);\n  }\n  public keyUp(k: KeyboardEvent) {\n    const kEventData: KeyboardEventData = this.commonEventBuilder(k);\n    kEventData.PRESS_TYPE = PressType.Up;\n\n    // NOTE: Only respond to `shift` and `ctrl`\n    if (!kEventData.hasShiftKey || !kEventData.hasCtrlKey) {\n      this.keyEventFromDocument(kEventData);\n    }\n  }\n  // ............................................................. builder\n  public commonEventBuilder(k: KeyboardEvent): KeyboardEventData {\n    const kEvent: KeyboardEventData = new KeyboardEventData();\n    kEvent.preEvent = this.MouseEventDataPre;\n    kEvent.key = k.key;\n    kEvent.keyCode = k.keyCode;\n    kEvent.code = k.code;\n    kEvent.hasCtrlKey = k.ctrlKey;\n    kEvent.hasShiftKey = k.shiftKey;\n    kEvent.hasAltKey = k.altKey;\n    kEvent.hasMetaCommand = k.metaKey;\n    this.MouseEventDataPre = kEvent;\n    return kEvent;\n  }\n  public keyEvent(keyboardEventData: KeyboardEventData) {\n    this.model.controllerWrapper.keyboardEventController(keyboardEventData);\n  }\n  public keyEventFromDocument(keyboardEventData: KeyboardEventData) {\n    this.model.controllerWrapper.keyboardEventControllerFromDocument(keyboardEventData);\n  }\n}\n","import { MouseInteraction } from '../../MouseInteraction';\n\nexport class MouseEventBase {\n  mouseInteraction: MouseInteraction;\n  protected frame = 0;\n  protected frameSkip = 2;\n  constructor(mouseInteraction: MouseInteraction) {\n    this.mouseInteraction = mouseInteraction;\n  }\n  public removeEvent(): void {\n\n  }\n  protected appendEvent(): void {\n    //\n  }\n}\n","import { MouseInteraction } from '../MouseInteraction';\nimport { MouseEventBase } from './Base/MouseEventBase';\nexport class MouseEventNative extends MouseEventBase {\n\n  public clickable = true;\n  public disableMoveEvent = false;\n  constructor(mouseInteraction: MouseInteraction) {\n    super(mouseInteraction);\n    this.appendEvent();\n  }\n  protected appendEvent() {\n    const div = this.mouseInteraction.model.modelViewWrapper.div;\n    div.style.pointerEvents = 'auto';\n    div.addEventListener('click', this.mouseClick);\n    div.addEventListener('dblclick', this.mouseDoubleClick);\n    div.addEventListener('mousedown', this.mouseDown);\n    div.addEventListener('mouseup', this.mouseUp);\n    div.addEventListener('mousemove', this.mouseMove);\n\n  }\n  public removeEvent() {\n    const div = this.mouseInteraction.model.modelViewWrapper.div;\n    div.removeEventListener('click', this.mouseClick);\n    div.removeEventListener('dblclick', this.mouseDoubleClick);\n    div.removeEventListener('mousedown', this.mouseDown);\n    div.removeEventListener('mouseup', this.mouseUp);\n    div.removeEventListener('mousemove', this.mouseMove);\n  }\n  private mouseClick = (e: MouseEvent) => {\n    if (!this.clickable) {\n      this.clickable = true;\n      return;\n    }\n    this.mouseInteraction.mouseClick(e);\n  }\n  private mouseDoubleClick = (e: MouseEvent) => {\n    this.mouseInteraction.mouseDoubleClick(e);\n  }\n  private mouseDown = (e: MouseEvent) => {\n    this.clickable = true;\n    this.mouseInteraction.mouseDown(e);\n  }\n  private mouseUp = (e: MouseEvent) => {\n    this.disableMoveEvent = true;\n    this.mouseInteraction.mouseUp(e);\n  }\n  private mouseMove = (e: MouseEvent) => {\n    this.clickable = false;\n    if (this.disableMoveEvent) {\n      this.disableMoveEvent = false;\n      return\n    }\n    this.mouseInteraction.mouseMove(e);\n  }\n}\n\n\n\n/// reference\n/*\nimport { MouseInteraction } from '../MouseInteraction';\nimport { MouseEventBase } from './Base/MouseEventBase';\nexport class MouseEventNative extends MouseEventBase {\n  public prevent = false;\n  public delay = 100;\n  public timer: NodeJS.Timer | number;\n  constructor(mouseInteraction: MouseInteraction) {\n    super(mouseInteraction);\n    this.appendEvent();\n  }\n  protected appendEvent() {\n    const div = this.mouseInteraction.model.modelViewWrapper.div;\n    div.style.pointerEvents = 'auto';\n    if (div === undefined || div === null) {\n      document.onclick = (e: MouseEvent) => {\n        this.timer = setTimeout(() => {\n          if (!this.prevent) {\n            this.mouseInteraction.mouseClick(e);\n          }\n          this.prevent = false;\n        }, this.delay);\n      };\n      document.ondblclick = (e: MouseEvent) => {\n        clearTimeout(this.timer as NodeJS.Timer);\n        this.prevent = true;\n        this.mouseInteraction.mouseDoubleClick(e);\n      };\n      document.onmousedown = (e: MouseEvent) => {\n        this.mouseInteraction.mouseDown(e);\n      };\n      document.onmouseup = (e: MouseEvent) => {\n        this.mouseInteraction.mouseUp(e);\n      };\n      document.onmousemove = (e: MouseEvent) => {\n        this.mouseInteraction.mouseMove(e);\n      };\n    } else {\n      div.onclick = (e: MouseEvent) => {\n        this.timer = setTimeout(() => {\n          if (!this.prevent) {\n            this.mouseInteraction.mouseClick(e);\n          }\n          this.prevent = false;\n        }, this.delay);\n      };\n      div.ondblclick = (e: MouseEvent) => {\n        clearTimeout(this.timer as number);\n        this.prevent = true;\n        this.mouseInteraction.mouseDoubleClick(e);\n      };\n      div.onmousedown = (e: MouseEvent) => {\n        this.mouseInteraction.mouseDown(e);\n      };\n      div.onmouseup = (e: MouseEvent) => {\n        this.mouseInteraction.mouseUp(e);\n      };\n      div.onmousemove = (e: MouseEvent) => {\n        this.mouseInteraction.mouseMove(e);\n      };\n    }\n  }\n  */\n","import { ClickType, InteractionMode } from '../../../../lib';\nimport { MouseEventData } from '../../../../../../lib/EventData/MouseEventData';\nimport { Model } from '../../..';\nimport { MouseEventBase } from './Implementation/Base/MouseEventBase';\nimport { MouseEventNative } from './Implementation/MouseEventNative';\n\nexport interface IMouseInteractionMenu {\n  mouseInteractionMenu: (mouseEventData: MouseEventData) => void;\n}\n\nexport class MouseInteraction {\n  public mouseInteractionUI: IMouseInteractionMenu;\n  public mouseEventDataPre: MouseEventData; // = new MouseEventData();\n  public model: Model;\n  public isEnable = true;\n  public isEnableZoomByDoubleClickValue = true;\n\n  public click = false;\n  public prevent = false;\n  public delay = 100;\n  public timer: NodeJS.Timer | number;\n  public down = false;\n  public e: MouseEventData;\n  public mouseEvent: MouseEventBase;\n  private _stopPropagation = false;\n  constructor(model: Model) {\n    this.model = model;\n\n    this.mouseEventDataPre = new MouseEventData();\n\n    this.mouseEvent = new MouseEventNative(this);\n    this.initNativeMouseWheelEvent(this.model.modelViewWrapper.div);\n  }\n  // ................................................................ event from native\n  public initNativeMouseWheelEvent(div: HTMLElement) {\n    div.onwheel = (e: WheelEvent) => {\n      this.mouseWheel(e, e.deltaY);\n    };\n  }\n  public mouseDown(e: MouseEvent) {\n    if(!this.isInsideCropShape(e)) { return; }\n\n    this.click = true;\n    this.down = true;\n    const mEvent = this.commonEventBuilder(e);\n    mEvent.CLICK_TYPE = ClickType.Down;\n    mEvent.isDown = true;\n    this.mouseEvenEmitting(mEvent);\n  }\n  public mouseClick(e: MouseEvent) {\n    if(!this.isInsideCropShape(e)) { return; }\n\n    // if (!this.click) {\n    //   return;\n    // }\n    const mEvent = this.commonEventBuilder(e);\n    if (e.button === 0) {\n      mEvent.CLICK_TYPE = ClickType.Left;\n    } else if (e.button === 1) {\n      mEvent.CLICK_TYPE = ClickType.Middle;\n    } else if (e.button === 2) {\n      mEvent.CLICK_TYPE = ClickType.Right;\n    }\n    this.mouseEvenEmitting(mEvent);\n  }\n  public mouseDoubleClick(e: MouseEvent) {\n    if(!this.isInsideCropShape(e)) { return; }\n\n    const mEvent = this.commonEventBuilder(e);\n    mEvent.CLICK_TYPE = ClickType.Double;\n    this.mouseEvenEmitting(mEvent);\n  }\n  public mouseDrag(e: MouseEvent) {\n    this.click = false;\n    const mEvent = this.commonEventBuilder(e);\n    mEvent.CLICK_TYPE = ClickType.Drag;\n    mEvent.isDown = true;\n    if (e.buttons === 1) {\n      mEvent.CLICK_TYPE = ClickType.Drag;\n    } else if (e.buttons === 4) {\n      mEvent.CLICK_TYPE = ClickType.DragMiddle;\n    } else if (e.buttons === 2) {\n      mEvent.CLICK_TYPE = ClickType.DragRight;\n    }\n    this.mouseEvenEmitting(mEvent);\n  }\n  public mouseMove(e: MouseEvent) {\n    if(!this.isInsideCropShape(e)) { return; }\n\n    if (this.down) {\n      this.mouseDrag(e);\n      return;\n    }\n    const mEvent = this.commonEventBuilder(e);\n    mEvent.CLICK_TYPE = ClickType.Move;\n    mEvent.isDown = false;\n    this.mouseEvenEmitting(mEvent);\n  }\n  public mouseUp(e: MouseEvent) {\n    this.down = false;\n    const mEvent = this.commonEventBuilder(e);\n    mEvent.CLICK_TYPE = ClickType.Up;\n    mEvent.isDown = false;\n    this.mouseEvenEmitting(mEvent);\n  }\n  public mouseWheel(e: MouseEvent, v: number) {\n    if(!this.isInsideCropShape(e)) { return; }\n\n    const mEvent = this.commonEventBuilder(e);\n    mEvent.wheel = v;\n    mEvent.CLICK_TYPE = ClickType.Wheel;\n    this.mouseEvenEmitting(mEvent);\n  }\n  public appendDownEvent(e: MouseEvent) {\n    // const e: any = MouseEventListener.mouseClick;\n    // document.onmousedown = (e) => {\n    //   const mEvent = this.CommonEventBuilder(e);\n    //   if (e.button === 0) mEvent.CLICK_TYPE = ClickType.Left;\n    //   else if (e.button === 1) mEvent.CLICK_TYPE = ClickType.Middle;\n    //   else if (e.button === 2) mEvent.CLICK_TYPE = ClickType.Right;\n    //   mEvent.isDown = true;\n    //   //mEvent.FROM = FROM.NATIVE;\n    //   mEvent.CLICK_TYPE = ClickType.Down;\n    //\n    // };\n  }\n  public appendUpEvent() {\n    document.onmouseup = (e: MouseEvent) => {\n      const mEvent = this.commonEventBuilder(e);\n      if (e.button === 0) {\n        mEvent.CLICK_TYPE = ClickType.Left;\n      } else if (e.button === 1) {\n        mEvent.CLICK_TYPE = ClickType.Middle;\n      } else if (e.button === 2) {\n        mEvent.CLICK_TYPE = ClickType.Right;\n      }\n      mEvent.isDown = false;\n      // mEvent.FROM = FROM.NATIVE;\n      mEvent.CLICK_TYPE = ClickType.Up;\n      this.mouseEvenEmitting(mEvent);\n    };\n  }\n  get isEnableZoomByDoubleClick() {\n    return this.isEnableZoomByDoubleClickValue;\n  }\n  set isEnableZoomByDoubleClick(v: boolean) {\n    if (v) {\n      this.timer = setTimeout(() => {\n        this.isEnableZoomByDoubleClickValue = v;\n      }, 1000);\n    } else {\n      this.isEnableZoomByDoubleClickValue = v;\n    }\n  }\n  // // ................................................................ event from ArcGIS\n  // public mouseClickLeftArcGIS(e: __esri.MapViewClickEvent) {\n  //   const mEvent = this.commonEventBuilderArcGIS(e);\n  //   mEvent.CLICK_TYPE = ClickType.Left;\n  //   mEvent.isDown = true;\n  //   this.mouseEvenEmitting(mEvent);\n  // }\n  // public mouseClickMiddleArcGIS(e: __esri.MapViewClickEvent) {\n  //   const mEvent = this.commonEventBuilderArcGIS(e);\n  //   mEvent.CLICK_TYPE = ClickType.Middle;\n  //   mEvent.isDown = true;\n  //   this.mouseEvenEmitting(mEvent);\n  // }\n  // public mouseClickRightArcGIS(e: __esri.MapViewClickEvent) {\n  //   const mEvent = this.commonEventBuilderArcGIS(e);\n  //   mEvent.CLICK_TYPE = ClickType.Right;\n  //   mEvent.isDown = true;\n  //   this.mouseEvenEmitting(mEvent);\n  // }\n  // public mouseDoubleClickArcGIS(e: __esri.MapViewDoubleClickEvent) {\n  //   const mEvent = this.commonEventBuilderArcGIS(e);\n  //   mEvent.CLICK_TYPE = ClickType.Double;\n  //   mEvent.isDown = true;\n  //   this.mouseEvenEmitting(mEvent);\n  // }\n  // public mouseEnterLeaveGIS(e: __esri.MapViewPointerMoveEvent, isEnter: boolean) {\n  //   const mEvent = this.commonEventBuilderArcGIS(e);\n  //   mEvent.CLICK_TYPE = ClickType.Move;\n  //   mEvent.isMove = true;\n  //   if (isEnter) {\n  //     //  this.app.ACController.IsMouseEnterCanvas(mEvent);\n  //   } else {\n  //     //  this.app.ACController.IsMouseLeaveCanvas(mEvent);\n  //   }\n  // }\n  // public mouseDownArcGIS(e: __esri.MapViewPointerDownEvent) {\n  //   const mEvent = this.commonEventBuilderArcGIS(e);\n  //   if (e.native.button === 0) {\n  //     mEvent.CLICK_TYPE = ClickType.Down;\n  //     mEvent.isDown = true;\n  //     this.mouseEvenEmitting(mEvent);\n  //   } else if (e.native.button === 1) {\n  //     mEvent.CLICK_TYPE = ClickType.DownMiddle;\n  //     mEvent.isDown = true;\n  //     this.mouseEvenEmitting(mEvent);\n  //   } else {\n  //     mEvent.CLICK_TYPE = ClickType.DownnRight;\n  //     mEvent.isDown = true;\n  //     this.mouseEvenEmitting(mEvent);\n  //   }\n  // }\n  // public mouseUpArcGIS(e: __esri.MapViewPointerUpEvent) {\n  //   const mEvent = this.commonEventBuilderArcGIS(e);\n  //   mEvent.CLICK_TYPE = ClickType.Up;\n  //   mEvent.isDown = false;\n  //   this.mouseEvenEmitting(mEvent);\n  // }\n  // // .................................................................. builder\n  // public commonEventBuilderArcGIS(\n  //   e:\n  //     | __esri.MapViewClickEvent\n  //     | __esri.MapViewDoubleClickEvent\n  //     | __esri.MapViewPointerUpEvent\n  //     | __esri.MapViewPointerDownEvent\n  //     | __esri.MapViewPointerMoveEvent\n  //     | __esri.MapViewDragEvent\n  // ): MouseEventData {\n  //   const mEvent: MouseEventData = new MouseEventData();\n  //   mEvent.preX = this.mouseEventDataPre.x;\n  //   mEvent.preY = this.mouseEventDataPre.y;\n  //   // mEvent.premEvent = this.MouseEvenEmittingDataPre;\n  //   mEvent.x = e.x;\n  //   mEvent.y = e.y;\n  //   mEvent.yGLPicking = e.native.target.getBoundingClientRect().bottom - e.native.clientY;\n\n  //   mEvent.pressedShift = e.native.shiftKey;\n  //   mEvent.pressedAlt = e.native.altKey;\n  //   mEvent.pressedCtrl = e.native.ctrlKey;\n\n  //   mEvent.native = e.native;\n  //   // console.log(e.y, theY);\n\n  //   // mEvent.long = e.mapPoint.longitude;\n  //   // mEvent.lat = e.mapPoint.latitude;\n  //   // mEvent.screenPoint = e.screenPoint;\n  //   // mEvent.mapPoint = e.mapPoint;\n  //   this.mouseEventDataPre = mEvent;\n  //   this.e = mEvent;\n  //   return mEvent;\n  // }\n  public commonEventBuilder(e: MouseEvent): MouseEventData {\n    const mEvent: MouseEventData = new MouseEventData();\n    mEvent.preX = this.mouseEventDataPre.x;\n    mEvent.preY = this.mouseEventDataPre.y;\n    // mEvent.premEvent = this.mouseEventDataPre;\n\n    mEvent.pressedShift = e.shiftKey;\n    mEvent.pressedAlt = e.altKey;\n    mEvent.pressedCtrl = e.ctrlKey;\n\n    mEvent.x = e.offsetX;\n    mEvent.y = e.offsetY;\n    mEvent.preWheel = this.mouseEventDataPre.wheel;\n    mEvent.wheel = 0;\n    mEvent.native = e;\n    this.mouseEventDataPre = mEvent;\n    this.e = mEvent;\n    return mEvent;\n  }\n  get stopPropagation() {\n    return this._stopPropagation;\n  }\n  set stopPropagation(v: boolean) {\n    this._stopPropagation = v;\n  }\n  public mouseEvenEmitting(mouseEventData: MouseEventData) {\n    if (this.model.appCoreWrapper.appControllerStatus.mode === InteractionMode.ObserveViewer) {\n      return;\n    }\n    // this.stopPropagation = false;\n    this.mouseEventEmittingForViewController(mouseEventData);\n    if (this._stopPropagation) {\n      return;\n    }\n    this.mouseEventEmittingForModel(mouseEventData);\n  }\n  public mouseEventEmittingForViewController(mouseEventData: MouseEventData) {\n    if (this.mouseInteractionUI) {\n      this.mouseInteractionUI.mouseInteractionMenu(mouseEventData);\n    }\n  }\n  public mouseEventEmittingForModel(mouseEventData: MouseEventData) {\n    // if (mouseEventData.CLICK_TYPE === ClickType.Left) {\n    // console.log(mouseEventData.CLICK_TYPE)\n    // }\n    this.model.controllerWrapper.mouseEventController(mouseEventData);\n  }\n  public destroy() {\n    this.mouseEvent.removeEvent()\n  }\n  private isInsideCropShape(e: MouseEvent) {\n    if (!this.model.app.implementations.imageAnnoApp.scene.paramsEditing.isInsideCropShape(e.offsetX, e.offsetY)) {\n      e.stopPropagation();\n      return false;\n    } else {\n      return true;\n    }\n  }\n}\n","import { TouchInteraction } from '../../TouchInteraction';\nexport abstract class TouchEventBase {\n  touchInteraction: TouchInteraction;\n  constructor(touchInteraction: TouchInteraction) {\n    this.touchInteraction = touchInteraction;\n  }\n  protected appendEvent() {\n    //\n  }\n}\n","import { TouchType } from '../../../../../lib';\nimport { TouchInteraction } from '../TouchInteraction';\nimport { TouchEventBase,  } from './Base/TouchEventBase';\n\nexport { TouchType } from '../../../../../lib';\nexport class TouchEventNative extends TouchEventBase {\n  constructor(touchInteraction: TouchInteraction) {\n    super(touchInteraction);\n    this.appendEvent();\n  }\n  protected appendEvent() {\n    this.touchInteraction.model.modelViewWrapper.div.ontouchstart = (e: TouchEvent) => {\n      // alert('eve');s\n      // if (this.touchInteraction.model.appAnnotationModelTool) {\n      if (\n        this.touchInteraction.model.app.implementations.imageAnnoApp\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper\n      ) {\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper.log.LogUpdate =\n        //   'touch start';\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper.log.LogUpdate = `${e.touches[0].identifier}`;\n      }\n      // }\n      const mEvent = this.touchInteraction.commonEventBuilder(e, TouchType.Start);\n      this.touchInteraction.mouseEvent(mEvent);\n    };\n    this.touchInteraction.model.modelViewWrapper.div.ontouchend = (e: TouchEvent) => {\n      if (\n        this.touchInteraction.model.app.implementations.imageAnnoApp\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper\n      ) {\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper.log.LogUpdate =\n        //   'touch end';\n      }\n      const mEvent = this.touchInteraction.commonEventBuilder(e, TouchType.End);\n      this.touchInteraction.mouseEvent(mEvent);\n    };\n    this.touchInteraction.model.modelViewWrapper.div.ontouchmove = (e: TouchEvent) => {\n      // e.preventDefault(); //  it's common to call preventDefault() on touchmove rather than touchstart.\n      if (\n        this.touchInteraction.model.app.implementations.imageAnnoApp\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper\n      ) {\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper.log.LogUpdate =\n        //   'touch move';\n      }\n      const mEvent = this.touchInteraction.commonEventBuilder(e, TouchType.Move);\n      this.touchInteraction.mouseEvent(mEvent);\n    };\n    this.touchInteraction.model.modelViewWrapper.div.ontouchcancel = (\n      e: TouchEvent\n    ) => {\n      if (\n        this.touchInteraction.model.app.implementations.imageAnnoApp\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper\n      ) {\n        // this.touchInteraction.model.app.implementations.annotationCanvasInstance.uiWrapper.log.LogUpdate =\n        //   'touch cancel';\n      }\n      const mEvent = this.touchInteraction.commonEventBuilder(e, TouchType.Cancel);\n      this.touchInteraction.mouseEvent(mEvent);\n    };\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/API/Touch_events\nimport { TouchType } from './Implementation/TouchEventNative';\nimport { TouchEventData, TouchEventDataList } from '../../../../../../lib/EventData/TouchEventData';\nimport { Model } from '../../..';\nimport { TouchEventBase } from './Implementation/Base/TouchEventBase';\nimport { TouchEventNative } from './Implementation/TouchEventNative';\nexport class TouchInteraction {\n  public static model: Model;\n  public touchEventDataPre: TouchEventDataList; // = new MouseEventData();\n  public isEnable = true;\n  public click = false;\n  public prevent = false;\n  public delay = 100;\n  public timer: NodeJS.Timer | number;\n  public down = false;\n  public e: TouchEventData;\n  public preEvent: TouchInteraction | undefined;\n  public model: Model;\n  public touchEvent: TouchEventBase;\n\n  constructor(model: Model) {\n    this.model = model;\n    TouchInteraction.model = model;\n    this.touchEvent = new TouchEventNative(this);\n  }\n  public commonEventBuilder(e: TouchEvent, type: TouchType): TouchEventDataList {\n    const mEvent: TouchEventDataList = new TouchEventDataList();\n    mEvent.TOUCH_TYPE = type;\n    mEvent.build(e, type);\n    this.touchEventDataPre = mEvent;\n    return mEvent;\n  }\n  public mouseEvent(touchEventData: TouchEventDataList) {\n    this.model.controllerWrapper.touchEventController(touchEventData);\n  }\n}\n","import { IOWrapper } from '..';\nimport { KeyboardInteraction } from './KeyboardInteraction/KeyboardInteraction';\nimport { MouseInteraction } from './MouseInteraction/MouseInteraction';\nimport { TouchInteraction } from './TouchInteraction/TouchInteraction';\nexport class EventInteraction {\n  public mouseInteraction: MouseInteraction;\n  public keyboardInteraction: KeyboardInteraction;\n  public touchInteraction: TouchInteraction;\n  public ioWrapper: IOWrapper;\n  constructor(ioWrapper: IOWrapper) {\n    this.ioWrapper = ioWrapper;\n    this.mouseInteraction = new MouseInteraction(this.ioWrapper.model);\n    this.keyboardInteraction = new KeyboardInteraction(this.ioWrapper.model);\n    this.touchInteraction = new TouchInteraction(this.ioWrapper.model);\n  }\n  public set isEnableZoomByDoubleClick(v: boolean) {\n    this.mouseInteraction.isEnableZoomByDoubleClick = v;\n  }\n  public get isEnableZoomByDoubleClick() {\n    return this.mouseInteraction.isEnableZoomByDoubleClick;\n  }\n  public destroy() {\n    this.mouseInteraction.destroy()\n  }\n}\n","import { ActionType } from '../../../lib';\nimport { Model } from '../..';\nexport class StateProcessing {\n  public model: Model;\n  constructor(model: Model) {\n    this.model = model;\n  }\n  public pushAction(v: string | { type: ActionType | string; payload: unknown }) {\n    this.model.app.implementations.pushAction(v);\n  }\n}\n","// import { DownloadJSONShapes } from '../../lib';\n// import { IOGeometry } from '../../lib/Extended/GeometryUtility';\nimport { Model } from '../index';\nimport { EmitAction } from './EmitAction/EmitAction';\nimport { EventInteraction } from './EventInteraction/EventInteraction';\nimport { StateProcessing } from './StateProcessing/StateProcessing';\nexport class IOWrapper {\n  public model: Model;\n  public emitAction: EmitAction;\n  public stateProcessing: StateProcessing;\n  public eventInteraction: EventInteraction;\n  constructor(model: Model) {\n    this.model = model;\n    this.emitAction = new EmitAction(this);\n    this.stateProcessing = new StateProcessing(this.model);\n  }\n  public initPost() {\n    this.initEventInteraction();\n  }\n  public initEventInteraction() {\n    this.eventInteraction = new EventInteraction(this);\n  }\n  public download() {\n    // if (this.model.app.implementations && this.model.app.implementations.imageAnnoApp) {\n    //   const d: Map<\n    //     string,\n    //     IOGeometry\n    //   > = this.model.app.implementations.imageAnnoApp.renderer.saveDrawingGeometries();\n    //   if (d) {\n    //     new DownloadJSONShapes(d, 'AnnotationShapes.json');\n    //   }\n    // }\n  }\n  public destroy() {\n    this.eventInteraction.keyboardInteraction.destroy();\n    this.eventInteraction.mouseInteraction.destroy();\n  }\n  public open() {\n    // const drawings = JSON.stringify(this.model.assets.dummyShape);\n    // this.model.app.pushAction(`${ACTION_TYPE.Dump}@${drawings}`);\n  }\n}\n","import { CompileMode } from '../../lib';\nimport { Model } from '..';\nexport class ModelViewWrapper {\n  public model: Model;\n  public divHost: HTMLElement;\n  public divNGraphicsHost: HTMLElement;\n  public div: HTMLElement;\n  public divWrapper: HTMLElement;\n  constructor(model: Model, id: string) {\n    this.model = model;\n    this.init(id);\n    if (this.model.appCoreWrapper.appProperties.compileMode !== CompileMode.Production) {\n      // TODO: something needed for no production\n    }\n  }\n  private init(id: string) {\n\n    const divNgraphics = document.createElement('div');\n    this.divNGraphicsHost = divNgraphics;\n    // divNgraphics.style.position = 'absolute';\n    // divNgraphics.style.top = '0px';\n    // divNgraphics.style.pointerEvents = 'none';\n    divNgraphics.id = 'ExpressImageDrawing';\n    divNgraphics.style.width = '100%';\n    divNgraphics.style.height = '100%';\n    // divNgraphics.style.pointerEvents = 'none';\n\n    this.divWrapper = document.createElement('div');\n    this.divWrapper.id = `Annotation-image-wrapper${this.model.app.CONFIG.VERSION_APP}`;\n    this.divWrapper.style.width = '100%';\n    this.divWrapper.style.height = '100%';\n    this.divWrapper.style.pointerEvents = 'none';\n    // this.divWrapper.style.backgroundImage = 'radial-gradient(rgb(235, 235, 235), rgba(200, 200, 200, 1))';\n\n    this.div = document.createElement('div');\n    this.div.id = `Annotation-image-${this.model.app.CONFIG.VERSION_APP}`;\n    this.div.style.userSelect = 'none';\n    this.div.style.width = '100%';\n    this.div.style.height = '100%';\n    this.div.style.zIndex = '1';\n    this.div.style.position = 'relative';\n    this.divWrapper.appendChild(this.div);\n\n    divNgraphics.appendChild(this.divWrapper);\n\n    const divHost = document.getElementById(id);\n    if (divHost) {\n      this.divHost = divHost;\n      if (this.divHost.parentNode) {\n        this.divHost.appendChild(divNgraphics);\n      }\n    }\n  }\n  public removeDivImg() {\n    this.model.modelViewWrapper.div.removeChild(this.model.modelViewWrapper.div.childNodes[2]);\n  }\n  public removeDiv() {\n     try {\n       this.model.modelViewWrapper.divNGraphicsHost.parentNode.removeChild(this.model.modelViewWrapper.divNGraphicsHost);\n     } catch (error) {\n       console.debug(error);\n     }\n  }\n  public initPost() {\n    // TODO:\n  }\n}\n","import { maskOutContextByShape } from '../../lib';\nimport { Model } from '..';\nexport class ImageWrapper {\n  public model: Model;\n  public imgAppended: HTMLImageElement;\n  public dataFilter: any = '';\n  public img: HTMLImageElement;\n  public imgString: string = '';\n  public imgCroppingParam: any;\n\n  public imgOriginal: HTMLImageElement;\n  public imgOriginalString: string = '';\n  public imgOriginalCroppingParam: any;\n  public useModifiedImage: boolean = true;\n\n\n  public croppingDataTemp: any | undefined = undefined;\n  constructor(model: Model) {\n    this.model = model;\n  }\n  public projectionToImageSpace(x: number, y: number) {\n    // These are needed with image cropped by canvas.\n    /*\n    const bounding = this.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.aCanvas.canvasView.getBoundingClientRect();\n    e.x *= this.imageAnnoApp.implementations.app.model.imageWrapper.img.width / bounding.width;\n    e.y *= this.imageAnnoApp.implementations.app.model.imageWrapper.img.height / bounding.height;\n    */\n    return [\n      x * (this.img.width / this.imgAppended.width),\n      y * (this.img.height / this.imgAppended.height)\n    ];\n  }\n\n  public updateEffecting(d: any) {\n    this.dataFilter = d;\n  }\n  public initImageByImg(img: HTMLImageElement, dataCropping: string, imgOriginal: HTMLImageElement, colorCover = '#1D2730') {\n    this.img = img;\n    this.imgString = img.src;\n    this.imgOriginal = imgOriginal;\n    this.imgOriginalString = imgOriginal.src;\n    // console.log('img from anno',img, imgOriginal);\n\n    this.imgCroppingParam = JSON.parse(dataCropping);\n    this.croppingDataTemp = this.imgCroppingParam\n\n    this.model.app.param.colorCover = colorCover;\n\n    if (this.model.app.isLoaded) {\n      this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.croppingDataTemp);\n      this.updateImg(img, colorCover);\n    }\n  }\n  public updateImg(img: HTMLImageElement, colorCover = '#1D2730') {\n    this.imgAppended = new Image();\n    this.imgAppended.src = img.src;\n    this.imgAppended.style.pointerEvents = 'none';\n    this.imgAppended.style.width = '100%';\n    this.imgAppended.style.height = '100%';\n\n    // this.imgAppended.style.backgroundColor = 'rgba(255,255,255,0.5)';\n    // this.imgAppended.style.background = 'repeating-conic-gradient(#cccccc 0% 25%, #ffffff 0% 50%) 50% / 10px 10px';\n    // this.imageAppend.style.position = 'absolute';\n\n    /* These are code for cropping it by css.\n    // start\n    const { x, y, width, height } = this.croppingDataTemp;\n    const originalHeight = img.naturalHeight;\n    const originalWidth = img.naturalWidth;\n    const top = y;\n    const left = x;\n    const bottom = originalHeight - height - top;\n    const right = originalWidth - width - left;\n\n    // NOTE: use percent values.\n    // ????: cannot use pixel values: the container client rect value is not reliable, so cannot calculate update-to-date pixel values\n    const topInPercent = `${top / originalHeight * 100}%`;\n    const bottomInPercent = `${bottom / originalHeight * 100}%`;\n    const leftInPercent = `${left / originalWidth * 100}%`;\n    const rightInPercent = `${right / originalWidth * 100}%`;\n\n    // use CSS clip-path to crop the original image:\n    this.imgAppended.style.clipPath = `inset(${topInPercent} ${rightInPercent} ${bottomInPercent} ${leftInPercent})`;\n\n    const scaleX = originalWidth / width;\n    const scaleY = originalHeight / height;\n\n    // use CSS transform to pan and zoom to the cropped area:\n    this.imgAppended.style.transformOrigin = `${leftInPercent} ${topInPercent}`; // very important\n    this.imgAppended.style.transform = `translate(-${leftInPercent}, -${topInPercent}) scale(${scaleX}, ${scaleY})`;\n\n    // the original image takes extra space than the displayed area, which causes overflow. so hidden the extra area on parent:\n    this.model.modelViewWrapper.div.style.overflow = 'hidden';\n    // end\n    */\n\n    this.imgAppended.onload = () => {\n      this.updateMaskForCroppingShape(img, colorCover);\n\n      this.model.modelViewWrapper.div.append(this.imgAppended);\n\n      // compute the scale factor for node based on the ratio between actual size of image and the div displayed\n      const ratio = ((img.width / this.imgAppended.width) + (img.height / this.imgAppended.height)) * 0.5;\n      if (this.model.app.implementations.imageAnnoApp) {\n        this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.scaleScreenByRatioImageSize = ratio < 1 ? 1 : ratio;\n      }\n\n      // this.model.modelViewWrapper.divNGraphicsHost.style.background = '#0ff0f0';\n      // this.model.modelViewWrapper.divHost.style.background = '#ff0000';\n\n      // this.model.modelViewWrapper.divNGraphicsHost.style.display = 'flex';\n      // this.model.modelViewWrapper.divNGraphicsHost.style.position = 'relative';\n      // this.model.modelViewWrapper.divNGraphicsHost.style.justifyContent = 'center';\n\n      // These are needed with image cropped by canvas.\n      this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(img.width, img.height);\n\n      // These are needed with image cropped by css.\n      // this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(width, height);\n\n      // this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.aCanvas.divHost.style.width = `${width}px`;\n      // this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.aCanvas.divHost.style.height = `${height}px`;\n\n      // this.model.modelViewWrapper.div.style.textAlign = 'center';\n      // this.model.modelViewWrapper.div.style.width = '100vw';\n      // this.model.modelViewWrapper.div.style.height = '100vh';\n      // this.model.modelViewWrapper.div.style.position = 'absolute';\n\n      if (this.model.app.implementations.imageAnnoApp) {\n        this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.isActive = true;\n      }\n      this.model.ioWrapper.emitAction.emitAction('ready@markup');\n\n      // we do not need to execute it again after this initiation.\n      this.imgAppended.onload = () => { }\n    };\n  }\n  public toCroppedImg() {\n    this.useModifiedImage = true;\n    this.imgAppended.src  = this.imgString;\n    this.toModifiedImgCroppingParam();\n    this.model.ioWrapper.emitAction.emitAction('update-cropping@' + JSON.stringify(this.imgCroppingParam));\n    this.model.ioWrapper.emitAction.emitAction('update-effecting@' + JSON.stringify(this.dataFilter));\n    this.model.ioWrapper.emitAction.emitAction(`update-container-size@`);\n  }\n  public toOriginalImg() {\n    this.useModifiedImage = false;\n    this.imgAppended.src  = this.imgOriginalString;\n    this.toOriginalImgCroppingParam();\n    this.model.ioWrapper.emitAction.emitAction('update-cropping@' + JSON.stringify(this.imgOriginalCroppingParam));\n    this.model.ioWrapper.emitAction.emitAction('update-effecting@' +\n    JSON.stringify(\n      {\n        typePreset : 'normal',\n        filter : {\n          interpolation: 1.0,\n          blur: 0.0,\n          sepia : 0,\n          contrast : 1,\n          brightness : 1,\n          saturate : 1,\n          hueRotate : 0,\n        },\n        tint : { },\n      }\n      ));\n    this.model.ioWrapper.emitAction.emitAction(`update-container-size@original`);\n  }\n  public toOriginalImgCroppingParam() {\n    this.imgOriginalCroppingParam = {\n        aspectRatio: 'original',\n        x: 0,\n        y: 0,\n        width: this.imgOriginal.width,\n        height: this.imgOriginal.height,\n        rotation: 0,\n        scale: 1,\n        shape: 'rectangle',\n    };\n\n    this.img.width = this.imgOriginalCroppingParam.width;\n    this.img.height = this.imgOriginalCroppingParam.height;\n    if (this.model.app.implementations.imageAnnoApp) {\n      this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.imgOriginalCroppingParam);\n      this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(this.imgOriginal.width, this.imgOriginal.height);\n    }\n\n    this.croppingDataTemp = this.imgOriginalCroppingParam;\n  }\n  public toModifiedImgCroppingParam() {\n    this.img.width = this.imgCroppingParam.width;\n    this.img.height = this.imgCroppingParam.height;\n\n    if (this.model.app.implementations.imageAnnoApp) {\n      this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.imgCroppingParam);\n      this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(this.imgCroppingParam.width, this.imgCroppingParam.height);\n    }\n    this.croppingDataTemp = this.imgCroppingParam;\n\n  }\n  private updateMaskForCroppingShape(img: HTMLImageElement, colorCover: string) {\n    const canvas = document.createElement('canvas');\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n    canvas.width = img.width;\n    canvas.height = img.height;\n    canvas.style.position = 'absolute';\n    this.model.modelViewWrapper.div.append(canvas);\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n    ctx.fillStyle = colorCover;\n    ctx.beginPath();\n    ctx.rect(0, 0, canvas.width, canvas.height);\n    ctx.closePath();\n    ctx.fill();\n    maskOutContextByShape(ctx, this.croppingDataTemp.shape, 0, 0, this.croppingDataTemp.width, this.croppingDataTemp.height, false);\n  }\n}\n","// https://icons.getbootstrap.com/\n// import {   } from \"@@esri/calcite-ui-icons/js/\";\n// import { ArrowRight } from 'react-bootstrap-icons';\nimport { ActiveCommandMode, getBtnBySVGPath  } from '../../lib';\nimport {  Model } from '..';\nexport class UI {\n    public model: Model;\n    public divUIWrapper: HTMLElement;\n    public divSizeFrameBG: HTMLElement;\n    public divWidth: HTMLElement;\n    public divHeight: HTMLElement;\n    constructor(model: Model) {\n        this.model = model;\n\n        // console.log(this.model.app.param);\n\n        const divUIWrapper = document.createElement('div') as HTMLElement;\n        this.divUIWrapper = divUIWrapper;\n        this.divUIWrapper.id = 'ExpressUI';\n        this.divUIWrapper.style.zIndex = '3';\n        this.divUIWrapper.style.position = 'relative';\n        this.divUIWrapper.style.width = '100%';\n        this.divUIWrapper.style.padding = this.model.app.param.themeUI.top.padding;\n        this.divUIWrapper.style.height = this.model.app.param.themeUI.top.height;\n        this.divUIWrapper.style.background = this.model.app.param.themeUI.top.background; //'#ff00f0';\n        this.divUIWrapper.style.marginBottom = this.model.app.param.themeUI.top.marginBottom;\n        this.model.modelViewWrapper.divNGraphicsHost.prepend(this.divUIWrapper);\n       \n        const txt = document.createElement('p');\n        txt.textContent = 'Image Annotation App V1';\n        txt.style.fontSize = '12px;';\n        txt.style.color = '#afafaf';\n        // txt.style.position = 'absolute';\n        txt.style.pointerEvents = 'none';\n        txt.style.top = '0px';\n        txt.style.left = '20px';\n        this.divUIWrapper.append(txt);\n\n        // this.initPost();\n\n        this.Layer0();\n        this.Layer1();\n    }\n    public destroy() {\n        this.model.modelViewWrapper.divNGraphicsHost.removeChild(this.divUIWrapper);\n    }\n    public updateStyle(r: number, g: number, b: number) {\n        this.divSizeFrameBG.style.backgroundColor = `rgb(${r},${b},${g})`;\n        \n    }\n    public Layer0() {\n\n        let colorFill = this.model.app.param.themeUI.top.iconFill;\n\n        let divLayer0 = document.createElement('div');\n        // divLayer0.style.background = '#ff0000';\n        divLayer0.style.margin = '5px';\n        divLayer0.style.marginBottom = '20px';\n        this.divUIWrapper.append(divLayer0);\n\n        let div =  getBtnBySVGPath(\n            () => {\n                this.model.app.api.onClickPlace();\n            },         `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n            <path d=\"M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z\"/>\n            </svg>\n            `\n        )\n        div.style.transform = `scale(${1.7})`;\n        div.style.paddingRight = '10px';\n        divLayer0.append(div);\n\n        divLayer0.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onClickCancel();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n                <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z\"/>\n                </svg>\n                `\n                , 1.4\n            )\n        );\n\n        divLayer0.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onClickBlackhole();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n                <path d=\"M4.146.146A.5.5 0 0 1 4.5 0h7a.5.5 0 0 1 .5.5c0 .68-.342 1.174-.646 1.479-.126.125-.25.224-.354.298v4.431l.078.048c.203.127.476.314.751.555C12.36 7.775 13 8.527 13 9.5a.5.5 0 0 1-.5.5h-4v4.5c0 .276-.224 1.5-.5 1.5s-.5-1.224-.5-1.5V10h-4a.5.5 0 0 1-.5-.5c0-.973.64-1.725 1.17-2.189A5.921 5.921 0 0 1 5 6.708V2.277a2.77 2.77 0 0 1-.354-.298C4.342 1.674 4 1.179 4 .5a.5.5 0 0 1 .146-.354z\"/>\n                </svg>\n                `\n                , 1.4\n            )\n        );\n\n        divLayer0.append(            \n            getBtnBySVGPath(\n                () => {\n                    // this.model.app.api.onClickBlackhole();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n                <path fill-rule=\"evenodd\" d=\"M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103zM10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8v12.98zm-6-.8V1.11l-4 .8v12.98l4-.8z\"/>\n                </svg>\n                `\n                , 1.4\n            )\n        );\n\n        divLayer0.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onClickCropper();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n                <path d=\"M3.5.5A.5.5 0 0 1 4 1v13h13a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2H3.5a.5.5 0 0 1-.5-.5V4H1a.5.5 0 0 1 0-1h2V1a.5.5 0 0 1 .5-.5zm2.5 3a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4H6.5a.5.5 0 0 1-.5-.5z\"/>\n                </svg>\n                `\n                , 1.4\n            )\n        );\n    }\n    public Layer1() {\n        let divLayer1 = document.createElement('div');\n        // divLayer1.style.background = '#ff00f0';\n        this.divUIWrapper.append(divLayer1);\n\n        let colorFill = '#000000'; //this.model.app.param.themeUI.top.iconFill;\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.SELECT);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onClickUndo();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onClickRedo();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.POINT_REGULAR);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/>\n                </svg>\n                `\n            )\n        );\n     \n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.POINT_NUMBERED);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <circle cx=\"8\" cy=\"8\" r=\"8\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.POLYLINE_BENDING);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.POLYGON_GRAPH);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path fill-rule=\"evenodd\" d=\"M8.5.134a1 1 0 0 0-1 0l-6 3.577a1 1 0 0 0-.5.866v6.846a1 1 0 0 0 .5.866l6 3.577a1 1 0 0 0 1 0l6-3.577a1 1 0 0 0 .5-.866V4.577a1 1 0 0 0-.5-.866L8.5.134z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.CIRCLE);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.RECTANGLE);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.ARROW_SINGLE);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path fill-rule=\"evenodd\" d=\"M14 2.5a.5.5 0 0 0-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0v-6z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(            \n            getBtnBySVGPath(\n                () => {\n                    this.model.app.api.onclickActiveCommand(ActiveCommandMode.ARROW_DOUBLE);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path fill-rule=\"evenodd\" d=\"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707z\"/>\n                </svg>\n                `\n            )\n        );\n\n    }\n    public initPost() {\n        this.divSizeFrameBG = document.createElement('div');\n        this.divSizeFrameBG.style.textAlign = 'center';\n        // this.divSizeFrameBG.style.backgroundColor = '#afafaf';\n        this.divSizeFrameBG.style.padding = '10px';\n        this.divSizeFrameBG.textContent = 'Size ';\n\n        this.divWidth = document.createElement('input');\n        this.divWidth.style.width = '50px';\n        this.divWidth.setAttribute('type', 'text');\n        this.divWidth.setAttribute('min', '100');\n        // this.divWidth.setAttribute('max', '500');\n        // this.divWidth.setAttribute('value', '300');\n        this.divSizeFrameBG.append(this.divWidth);\n        this.divWidth.oninput = () => {\n            // this.model.pushAction(`setDrawingMode@${ActiveCommandMode.POINT_REGULAR}`);\n            // const value = Number.parseFloat(this.divWidth.value);\n            // if (value) {\n            //     // this.core.exprssImageApp.core.common.updateWidthByInput(value);\n            // }\n        };\n\n        this.divHeight = document.createElement('input');\n        this.divHeight.style.width = '50px';\n        this.divHeight.setAttribute('type', 'text');\n        this.divHeight.setAttribute('min', '100');\n        // this.divHeight.setAttribute('max', '50');\n        // this.divHeight.setAttribute('value', '10');\n        this.divSizeFrameBG.append(this.divHeight);\n        this.divHeight.oninput = () => {\n            // const value = Number.parseFloat(this.divHeight.value);\n            // if (value) {\n            //     // this.core.exprssImageApp.core.common.updateHeightByInput(value);\n            // }\n        };\n\n        this.divUIWrapper.append(this.divSizeFrameBG);\n\n\n        // let slider = document.createElement('input');\n        // slider.type = 'range';\n        // slider.min = '-3.13';\n        // slider.max = '3.13';\n        // slider.step = '0.01';\n        // slider.value = '0';\n        // slider.oninput = () => {\n        //     // console.log(slider.value);\n        //     // this.core.exprssImageApp.core.common.rotate(+slider.value);\n        //     // this.core.exprssImageApp.io.emitAction(slider.value);\n        // };\n        // this.divUI.append(slider);\n\n\n        // const divURL = document.createElement('input');\n        // // divURL.textContent = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png';\n        // divURL.setAttribute('type', 'text');\n        // divURL.setAttribute('value', 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png');\n        // this.divUI.append(divURL);\n        // divURL.oninput = () => {\n        //     console.log(divURL);\n        //     // this.core.exprssImageApp.core.common.reset();\n        //     // this.core.exprssImageApp.core.importImage(divURL.textContent as string);\n        // };\n        // divURL.addEventListener('keyup', (event: KeyboardEvent) => {\n        //     if (event.keyCode === 13) { // Enter\n        //         event.preventDefault();\n        //         // this.core.exprssImageApp.core.common.reset();\n        //         // this.core.exprssImageApp.core.importImage(divURL.value as string);\n        //     }\n        // });\n\n\n        // var x = document.createElement('INPUT');\n        // x.setAttribute('type', 'text');\n        // x.setAttribute('value', 'Hello World!');\n\n        /*\n        let divTitle = document.createElement('div');\n        divTitle.textContent = 'Offset: ';\n        divTitle.style.padding = '10px';\n\n        let divInput = document.createElement('input');\n        divInput.style.width = '30px';\n        divInput.setAttribute('type', 'text');\n        divInput.setAttribute('min', '-50');\n        divInput.setAttribute('max', '50');\n        divInput.setAttribute('value', '10');\n\n        // divInput.\n        // divInput.setAttribute('min', '10');\n        divTitle.append(divInput);\n        this.divUI.append(divTitle);\n        divInput.addEventListener('keyup', (event: KeyboardEvent) => {\n            if (event.keyCode === 13) { // Enter\n                event.preventDefault();\n                console.log('divInput.value', divInput.value);\n\n                // let value = Number.parseFloat(divInput.value);\n\n                // this.core.exprssImageApp.core.common.offsetByInput(value);\n                // console.log(value);\n                // if(divInput.value.includes('-')) {\n                //     console.log('-', divInput.value.includes('-'));\n\n                //     this.expreeImageTool.core.controller.offsetByInput(Number.parseFloat(divInput.value) * -1);\n                // } else {\n                //     this.expreeImageTool.core.controller.offsetByInput(Number.parseFloat(divInput.value));\n                //     console.log('+', divInput.value.includes('-'));\n                // }\n            }\n        });\n*/\n\n //AppNamne@Command@Parameter \n\n        // let divRatio = document.createElement('div');\n        // divRatio.textContent = 'ddddd: ';\n        // divRatio.style.padding = '10px';\n        // this.divUI.append(divRatio)\n\n\n        /*\n        btn = document.createElement('button');\n        btn.textContent = 'dd';\n        // btn.style.float = 'left';\n        this.divUI.append(btn);\n        btn.onclick = () => {\n            // const img = this.core.exprssImageApp.core.canvas.capture();\n            // // console.log(img);\n            // this.divUI.append(img);\n        };\n\n        */\n\n        // // .............................................\n        // divTitle = document.createElement('div');\n        // // divTitle.style.float =\n        // // divTitle.textContent = 'Offset: '\n\n        // let divText= document.createElement('div');\n        // divText.textContent = 'x: ';\n        // divText.style.padding = '10px';\n        // divTitle.append(divText);\n\n        // divInput = document.createElement('input');\n        // // divInput.style.borderLeft = '10px';\n        // divInput.setAttribute('type', 'text');\n        // divInput.setAttribute('value', '5');\n        // divTitle.append(divInput);\n        // this.divUI.append(divTitle);\n        // divInput.addEventListener('keyup', (event: KeyboardEvent) => {\n        //     if (event.keyCode === 13) { // Enter\n        //         event.preventDefault();\n        //         this.expreeImageTool.core.controller.offsetByInput(+divInput.value);\n        //     }\n        // });\n\n        // divInput = document.createElement('input');\n        // divInput.style.borderLeft = '10px';\n        // divInput.setAttribute('type', 'text');\n        // divInput.setAttribute('value', '5');\n        // this.divUI.append(divInput);\n        // divInput.addEventListener('keyup', (event: KeyboardEvent) => {\n        //     if (event.keyCode === 13) { // Enter\n        //         event.preventDefault();\n        //         this.expreeImageTool.core.controller.offsetByInput(+divInput.value);\n        //     }\n        // });\n\n    }\n}\n","import { ActionType, InteractionMode } from '../lib';\nimport { AppImageDrawing } from '..';\nimport { AppCoreWrapper } from './AppCoreWrapper';\nimport { Assets } from './AssetWrapper';\nimport { ControllerWrapper } from './ControllerWrapper';\nimport { IOWrapper } from './IOWrapper';\nimport { ModelViewWrapper } from './ModelViewWrapper';\nimport { ImageWrapper } from './ImageWrapper';\nimport { UI } from './UI';\n\n/*\nThis Model class is a wrapper for binding necessary functions and HTML element with the Annotation Image implementation.\nAll data or command pipeline should go through here Model wrapper as a gateway.\nAsset which has something to do with external data should be here.\nIO is like a middle man for communication between IO and the Annotation Image implementation\nModel View is a place for div (possibly UI) which come from outside\n*/\nexport class Model {\n  public app: AppImageDrawing;\n  public assets: Assets;\n  public appCoreWrapper: AppCoreWrapper;\n  public modelViewWrapper: ModelViewWrapper;\n  public imageWrapper: ImageWrapper;\n  public controllerWrapper: ControllerWrapper;\n  public ioWrapper: IOWrapper;\n  public ui: UI;\n  constructor(app: AppImageDrawing, id: string, accessibilityMode: InteractionMode = InteractionMode.Drawing) {\n    this.app = app;\n    this.app.model = this;\n    this.assets = new Assets(this);\n    this.ioWrapper = new IOWrapper(this);\n    this.appCoreWrapper = new AppCoreWrapper(this, accessibilityMode);\n    this.modelViewWrapper = new ModelViewWrapper(this, id);\n    this.imageWrapper = new ImageWrapper(this);\n    this.controllerWrapper = new ControllerWrapper(this);\n    if (this.app.param.UI) {\n      this.ui = new UI(this);\n    }\n    this.init();\n  }\n  public resize(width: number, height: number) {\n    this.modelViewWrapper.div.style.width = width + 'px';\n    this.modelViewWrapper.div.style.height = height + 'px';\n  }\n  public initPost() {\n    this.modelViewWrapper.initPost();\n    this.appCoreWrapper.initPost();\n    this.ioWrapper.initPost();\n  }\n  public restart() {\n    // TODO:\n  }\n  public destroy() {\n    if (this.ui) {\n      this.ui.destroy();\n    }\n    this.ioWrapper.destroy();\n    this.modelViewWrapper.removeDiv();\n  }\n  public pushAction(v: string | { type: ActionType | string; payload: unknown }) {\n    this.ioWrapper.stateProcessing.pushAction(v);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public pushTheme(v: any) {\n    this.app.implementations.pushTheme(v);\n  }\n  private init() {\n    // TODO:\n  }\n}\n","import { AppImageEditing } from '../../../AppImageEditing';\nimport { Addon } from '..';\nexport class DynamicImport {\n  addon: Addon;\n  appImageEditing: AppImageEditing;\n  constructor(addon: Addon) {\n    this.addon = addon;\n  }\n  public async initCropping() {\n    return import(`../../../AppImageEditing`)\n      .then(({ AppImageEditing }) => {\n        // console.trace();\n        // this.appImageEditing = new AppImageEditing(this.addon.app.model.modelViewWrapper.div);\n        // this.appImageEditing.initByImageDrawingApp(this.addon.app);\n        // // this.appImageEditing.initImageByImg(this.implementation.imageWrapper.view.imgOrigin, this.implementation.imageWrapper.dataSet.paramCropping.toString());\n        // this.appImageEditing.emitAction = (data: any) => {\n        //     // this.implementation.imageWrapper.binder.fromEditing(data);\n        // }\n\n        // if (this.implementation.imageWrapper.dataSet.paramCropping.isModified) {\n        //     const param = this.implementation.imageWrapper.getParamCrop();\n        //     this.appImageEditing.core.frame.updateFrame(param.x, param.y, param.width, param.height, param.scale, param.rotation);\n        // }\n        // if (this.implementation.imageWrapper.dataSet.paramDrawing) {\n        //     this.appImageEditing.core.frame.updateGeometries(this.implementation.imageWrapper.dataSet.paramDrawing);\n        // }\n\n      })\n      .catch((err) => {\n        console.debug('Stop loading Mapticon Addon.');\n        console.debug(err);\n        throw err;\n      });\n  }\n  public async initMapticon() {\n    // return import(`../../../../Addon/Mapticon`)\n    //   .then(({ Mapticon }) => {\n    //     if (\n    //       this.addon.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView &&\n    //       this.addon.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mPoint\n    //     ) {\n    //       this.addon.mapticon = new Mapticon(\n    //         this.addon.app.model.modelViewWrapper.viewWrapper.div,\n    //         this.addon.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mapView,\n    //         this.addon.app.model.appCoreWrapper.arcGISWrapper.mapViewCore.mPoint\n    //       );\n    //       this.addon.app.viewController.nUIWrapper.PushUI(\n    //         'Mapticon',\n    //         this.addon.mapticon.mapticonInstance.core.activeCommandController\n    //       );\n    //     }\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading Mapticon Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public async initVisualizationJSAPI() {\n    // return import(`../../../../Addon/VisualizationJSAPI`)\n    //   .then(({ VisualizationJSAPI }) => {\n    //     const jsapi = this.addon.app.model.appCoreWrapper.arcGISWrapper.mapViewCore;\n    //     if (jsapi.map && jsapi.mapView) {\n    //       this.addon.visualizationJSAPI = new VisualizationJSAPI(jsapi.map, jsapi.mapView);\n    //       this.addon.app.viewController.nUIWrapper.PushUI(\n    //         'JSAPIMap',\n    //         this.addon.visualizationJSAPI.activeCommandController\n    //       );\n    //     }\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading VisualizationJSAPI Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public async initVisualizationExternalGLJSAPI() {\n    // return import(`../../../../Addon/VisualizationMapJSAPIExternal`)\n    //   .then(({ VisualizationMapJSAPIExternal }) => {\n    //     const jsapi = this.addon.app.model.appCoreWrapper.arcGISWrapper.mapViewCore;\n    //     if (jsapi.map && jsapi.mapView) {\n    //       this.addon.visualizationMapJSAPIExternal = new VisualizationMapJSAPIExternal(\n    //         jsapi.map,\n    //         jsapi.mapView\n    //       );\n    //       this.addon.app.viewController.nUIWrapper.PushUI(\n    //         'JSAPIMapExternalGL',\n    //         this.addon.visualizationMapJSAPIExternal.activeCommandController\n    //       );\n    //     }\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading Visualization External GL JSAPI Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public async initDrawingBlock() {\n    // return import(`../../../../Addon/DrawingBlock`)\n    //   .then(({ DrawingBlock }) => {\n    //     this.addon.drawingBlock = new DrawingBlock(\n    //       this.addon.app.model.modelViewWrapper.viewWrapper.div\n    //     );\n    //     this.addon.app.viewController.nUIWrapper.PushUI(\n    //       'DrawingBlock',\n    //       this.addon.drawingBlock.activeCommandController\n    //     );\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading Drawing Block Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public async initMapfilter() {\n    // return import(`../../../../Addon/Mapfilter`)\n    //   .then(({ Mapfilter }) => {\n    //     this.addon.mapfilter = new Mapfilter(this.addon.app.model.modelViewWrapper.viewWrapper.div);\n    //     this.addon.app.viewController.nUIWrapper.PushUI(\n    //       'Mapfilter',\n    //       this.addon.mapfilter.activeCommandController\n    //     );\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading Mapfilter Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public async initQuickCommander() {\n    // return import(`../../../../Addon/QuickCommander`)\n    //   .then(({ QuickCommander }) => {\n    //     this.addon.quickCommander = new QuickCommander(\n    //       this.addon.app.model.modelViewWrapper.viewWrapper.div\n    //     );\n    //     this.addon.app.viewController.nUIWrapper.PushUI(\n    //       'QuickCommander',\n    //       this.addon.quickCommander.activeCommandController\n    //     );\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading QuickCommander Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public async initSmartCommander() {\n    // return import(`../../../../Addon/SmartCommander`)\n    //   .then(({ SmartCommander }) => {\n    //     this.addon.smartCommander = new SmartCommander(\n    //       this.addon.app.model.modelViewWrapper.viewWrapper.div\n    //     );\n    //     this.addon.app.viewController.nUIWrapper.PushUI(\n    //       'SmartCommander',\n    //       this.addon.smartCommander.activeCommandController\n    //     );\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading SmartCommander Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public async initSmartDrawing() {\n    // return import(`../../../../Addon/SmartDrawing`)\n    //   .then(({ SmartDrawing }) => {\n    //     this.addon.smartDrawing = new SmartDrawing();\n    //     this.addon.app.viewController.nUIWrapper.PushUI(\n    //       'SmartDrawing',\n    //       this.addon.smartDrawing.activeCommandController\n    //     );\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading SmartDrawing Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public async initVoiceController() {\n    // return import(`../../../../Addon/VoiceController`)\n    //   .then(({ VoiceController }) => {\n    //     if (!this.addon.app.implementations.annotationCanvasInstance) {\n    //       return;\n    //     }\n    //     this.addon.voiceController = new VoiceController(\n    //       this.addon.app.model.modelViewWrapper.viewWrapper.div,\n    //       this.addon.app.implementations.annotationCanvasInstance.activeCommandController\n    //     );\n    //     this.addon.app.viewController.nUIWrapper.PushUI(\n    //       'VoiceController',\n    //       this.addon.voiceController.activeCommandController\n    //     );\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading VoiceController Addon.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n}\n","import { MouseEventData, KeyboardEventData, TouchEventDataList } from '../lib';\nimport { DynamicImport } from './Core/DynamicImport';\nimport { AppImageDrawing } from '..';\nexport class Addon {\n  app: AppImageDrawing;\n  dynamicImport: DynamicImport;\n  // eslint:disable-next-line:no-any\n  visualizationJSAPI: any;\n  // eslint:disable-next-line:no-any\n  visualizationMapJSAPIExternal: any;\n  // eslint:disable-next-line:no-any\n  drawingBlock: any;\n  // eslint:disable-next-line:no-any\n  mapfilter: any;\n  // eslint:disable-next-line:no-any\n  mapticon: any;\n  // eslint:disable-next-line:no-any\n  tourTool: any;\n  // eslint:disable-next-line:no-any\n  quickCommander: any;\n  // eslint:disable-next-line:no-any\n  smartCommander: any;\n  // eslint:disable-next-line:no-any\n  smartDrawing: any;\n  // eslint:disable-next-line:no-any\n  voiceController: any;\n  private _stopPropagation: boolean = false;\n  private _enablePan: boolean = true;\n  constructor(app: AppImageDrawing) {\n    this.app = app;\n    this.dynamicImport = new DynamicImport(this);\n  }\n  public get enablePan() {\n    if (this.mapticon) {\n      this._enablePan = this.mapticon.enablePan;\n    }\n    return this._enablePan;\n  }\n  public set enablePan(v: boolean) {\n    this._enablePan = v;\n  }\n  public get stopPropagation() {\n    return this._stopPropagation;\n  }\n  public set stopPropagation(v: boolean) {\n    this._stopPropagation = v;\n  }\n  public MouseEventController(m: MouseEventData): void {\n    if (!this.stopPropagation) {\n      if (this.mapticon) {\n        this.mapticon.MouseEventController(m);\n      }\n      if (this.tourTool) {\n        this.tourTool.MouseEventController(m);\n      }\n    }\n    // if (this.model.app.implementation ) {this.model.app.implementation.MouseEventController(m); }\n  }\n  public KeyboardEventController(k: KeyboardEventData): void {\n    //\n  }\n  public TouchEventController(t: TouchEventDataList): void {\n    //\n  }\n  // public GestureEventController(j: GestureEventData): void {\n  //   //\n  // }\n  public Resize(width: number, height: number) {\n    if (this.mapfilter) {\n      this.mapfilter.Resize(width, height);\n    }\n  }\n  // ......................................................................\n  public async InitMapticon() {\n    return this.dynamicImport.initMapticon();\n  }\n  public async InitVisualizationJSAPI() {\n    return this.dynamicImport.initVisualizationJSAPI();\n  }\n  public async InitVisualizationExternalGLJSAPI() {\n    return this.dynamicImport.initVisualizationExternalGLJSAPI();\n  }\n  public async InitDrawingBlock() {\n    return this.dynamicImport.initDrawingBlock();\n  }\n  public async InitMapfilter() {\n    return this.dynamicImport.initMapfilter();\n  }\n  public async InitQuickCommander() {\n    return this.dynamicImport.initQuickCommander();\n  }\n  public async InitSmartCommander() {\n    return this.dynamicImport.initSmartCommander();\n  }\n  public async InitSmartDrawing() {\n    return this.dynamicImport.initSmartDrawing();\n  }\n  public async InitVoiceController() {\n    return this.dynamicImport.initVoiceController();\n  }\n}\n","import { ActiveCommandMode, Environment, ISvgPin } from '../lib';\nimport { AppImageDrawing } from '..';\nexport class API {\n    public app: AppImageDrawing;\n    constructor(app: AppImageDrawing) {\n        this.app = app;\n    }\n    public needRevertBaseImage() {\n        return !this.app.model.imageWrapper.useModifiedImage;\n    }\n    public onclickActiveCommand(ac: ActiveCommandMode) {\n        if (this.app.implementations.imageAnnoApp) {\n            this.app.implementations.imageAnnoApp.activeCommandController.setActiveCommand(ac);\n        }\n    }\n    public onClickDestroy() {\n        this.app.destroy();\n    }\n    public onClickPlace() {\n        this.emitDataToExpressImageData();\n        this.onClickDestroy();\n    }\n    public getAllGeometries() {\n        return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries();\n    }\n    public shiftEnvironment(v: Environment) {\n        this.app.param.environment = v;\n        this.app.implementations.imageAnnoApp.customization.themeRenderStyle.shiftEnvironment(v);\n        this.app.implementations.imageAnnoApp.geometryCommon.gcmdSupporting.renderForce();\n    }\n    public updateRPointPath(path: ISvgPin) {\n        this.app.implementations.imageAnnoApp.customization.themeRenderStyle.updateRPointPath(path);\n        return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()\n    }\n    public emitDataToExpressImageData() {\n        this.app.implementations.imageAnnoApp.io.emitAction(`update@${JSON.stringify(this.getAllGeometries())}`);\n    }\n    public onClickCancel() {\n        this.onClickDestroy();\n    }\n    public onClickBlackhole() {\n        this.app.implementations.imageAnnoApp.apiWrapper.environment.shiftBlackholePos();\n    }\n    public onClickReset() {\n        // TODO:\n    }\n    public onClickUndo() {\n        this.app.implementations.imageAnnoApp.scene.undo();\n        // TODO:\n    }\n    public onClickRedo() {\n        this.app.implementations.imageAnnoApp.scene.redo();\n    }\n    public onClickDownload() {\n        // TODO:\n    }\n    public onClickCapture() {\n        // TODO:\n    }\n    public onClickSetColor(color: string, undoNeeded: boolean = true) {\n        this.app.implementations.imageAnnoApp.activeCommandController.activeColorController.setActiveColor(color, undoNeeded);\n    }\n    public setScaleGraphics(value: number, absolute: boolean = true, undoNeeded: boolean = true) {\n        this.app.implementations.imageAnnoApp.activeCommandController.setScaleGraphics(value, absolute, undoNeeded);\n    }\n    public updateEffecting(d: any) {\n        this.app.model.imageWrapper.updateEffecting(d);\n    }\n    public getCanvas() {\n        return this.app.implementations.imageAnnoApp.geometryCommon.gcmdAProcessing.getCanvas();\n    }\n    public getDataGeometry() {\n        return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries();\n    }\n    public getScaleFactor() {\n        return this.app.implementations.imageAnnoApp.activeCommandController.scaleGlobal;\n    }\n    public onClickCropper() {\n        // TODO:\n    }\n    public onClickRevertToOriginal() {\n        // console.log(img, paramCropping)\n        // this.app.updateImage(img, paramCropping);\n\n        // console.log(this.app.implementations.imageAnnoApp.renderer.croppingMaskParm);\n\n        // this.app.implementations.imageAnnoApp.scene.captureScene(false, parma );\n        // this.app.implementations.imageAnnoApp.scene.isModifiedImage = false;\n        // this.app.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.removeAll(false);\n        if (this.app.implementations.imageAnnoApp) {\n            this.app.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.resetGeometryList()\n            this.emitDataToExpressImageData();\n\n            // this.app.implementations.imageAnnoApp.scene.paramsEditing revertOriginalCroppingParam();\n            // this.app.model.modelViewWrapper.useModifiedImage = false;\n            this.app.model.imageWrapper.toOriginalImgCroppingParam();\n            this.app.model.imageWrapper.toOriginalImg();\n\n            // this.app.implementations.imageAnnoApp.\n            // this.app.core.activeCommand.revertToOriginal();\n            this.app.implementations.imageAnnoApp.scene.captureScene();\n            this.app.implementations.imageAnnoApp.io.emitAction('markup@resizeDiv');\n        }\n    }\n}\n","\nimport {\n  ActionType,\n  Apps,\n  InteractionMode,\n  OptimizerTextleaderline,\n  RendererType,\n  Environment,\n} from './lib';\nimport { Implementations } from './Implementations';\nimport { Model } from './Model';\nimport { Addon } from './Addon';\nimport { API } from './API';\nexport { InteractionMode } from './lib';\nexport interface IAnnotationImageParam {\n  id: string;\n  interactionMode: InteractionMode;\n  UI: boolean;\n  // eslint:disable-next-line:no-any\n  theme?: unknown;\n  themeUI?: any;\n  renderer?: RendererType;\n  rendererActive?: boolean;\n  isLab?: boolean;\n  environment: Environment;\n  colorCover?: string;\n  config: {\n    BASE_URL: string;\n  };\n  features?: {\n    mapFilter?: boolean;\n    /** Point clustering feature */\n    clustering?: boolean;\n    hasAnimation?: boolean;\n  };\n}\nexport const CONFIG = {\n  config: {\n    BASE_URL: '', // placeholder value\n  },\n  PATH_ADDON: '../../../../Addon',\n  VERSION_APP: '2',\n  HAS_ANIMATION: false,\n  LAB: false,\n};\nexport class AppImageDrawing {\n  private static _id = 0;\n  public static get id() {\n    return this._id++;\n  }\n  public CONFIG = CONFIG;\n  public model: Model;\n  public implementations: Implementations;\n  public api: API;\n  public addon: Addon;\n  public param: IAnnotationImageParam;\n  public APP: Apps;\n  public PRODUCTION = true;\n  public INSPECTION = false;\n  // eslint:disable-next-line:no-any\n  // viewController: any;\n  public instanceID: number;\n  public emitAction: (data: string) => void;\n  public getNumLayers: () => number;\n  public localizedString: (data: string) => string;\n  public isLoaded = false;\n  constructor(param: IAnnotationImageParam, dataDrawing: any, APP = Apps.AnnotationMap) {\n    this.APP = APP;\n    this.param = param;\n\n    // console.log(this.param);\n    if (this.INSPECTION) {\n      this.PRODUCTION = false;\n    }\n    this.CONFIG.config = param.config;\n    const needViewController = param.UI;\n    if (param.features && param.features.hasAnimation) {\n      this.CONFIG.HAS_ANIMATION = param.features.hasAnimation;\n    }\n    if (param.isLab) {\n      this.CONFIG.LAB = param.isLab;\n      this.CONFIG.HAS_ANIMATION = false;\n    }\n    this.instanceID = AppImageDrawing.id;\n\n    this.api = new API(this);\n    this.model = new Model(this, this.param.id, this.param.interactionMode);\n    if (this.param.rendererActive === undefined || this.param.rendererActive === true) {\n      this.param.rendererActive = true;\n    } else {\n      this.param.rendererActive = false;\n    }\n    this.addon = new Addon(this);\n\n    this.initImplementations().then( () => {\n      // this.param.renderer = RendererType.SVG;\n      if (this.param.renderer === RendererType.Svg) {\n        this.implementations.initAnnotationSVGInstance(\n          this.CONFIG.HAS_ANIMATION,\n          this.param.rendererActive as boolean,\n          this.param.theme\n        );\n      } else {\n        this.implementations.initAnnotationCanvasInstance(\n          this.CONFIG.HAS_ANIMATION,\n          this.param.rendererActive as boolean,\n          this.param.theme\n        );\n        if (this.implementations.imageAnnoApp) {\n          this.implementations.imageAnnoApp.activeCommandController.acProperties.isActivateSnapping = true;\n        }\n      }\n\n      if (needViewController) {\n        this.initViewController();\n      }\n      if (this.param.features && this.param.features.mapFilter) {\n        // this.addon.initMapfilter();\n      }\n\n      this.initPost();\n\n      // this.CONFIG.LAB = true;\n      if (this.CONFIG.LAB) {\n        this.initLab();\n      }\n\n      // console.log('dataDrawing', dataDrawing);\n      if (dataDrawing.geometry && dataDrawing.geometry.length > 0) {\n        // console.log(dataDrawing)\n        if (this.implementations.imageAnnoApp) {\n          this.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.isActive = false;\n          this.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.DumpByIGeometriesFromImageDataModel(dataDrawing.geometry);\n        }\n        const absolute = true;\n        const undoNeeded = false;\n        this.api.setScaleGraphics(dataDrawing.scale, absolute, undoNeeded);\n      }\n        if (this.implementations.imageAnnoApp) {\n          this.implementations.imageAnnoApp.scene.captureScene();\n        }\n     } );\n\n     // for debugging test\n    //  setTimeout(() => {\n    //   this.implementations.imageAnnoApp?.activeCommandController.setActiveCommand(ActiveCommandMode.POINT_REGULAR);\n    // }, 1000);\n  }\n  set setEnvironment(v: Environment) {\n    this.param.environment = v;\n  }\n  async initImplementations() {\n    return import('./Implementations').then(({ Implementations }) => {\n        if (this.implementations) {return; }\n        this.implementations =  new Implementations(\n          this,\n          this.model.modelViewWrapper.divNGraphicsHost\n        );\n        // this.viewController.nUIWrapper.nUI.ShiftTheme('black');\n    }).catch(err => {\n        console.debug('Stop loading mapticon.'); console.debug(err); throw err;\n    });\n}\n  private initLab() {\n    if (this.implementations.imageAnnoApp) {\n      // this.implementations.annotationCanvasInstance.activeCommandController.ToggleCollisionDetection();\n      // console.log('klklk');\n      // this.implementations.annotationCanvasInstance.activeCommandController.acProperties.isActivateSnapping = true;\n      // console.log(this.implementations.annotationCanvasInstance.activeCommandController.acProperties.isActivateSnapping);\n    }\n    // this.addon.InitMapticon();\n    // this.addon.InitMapfilter();\n    // this.addon.InitSmartDrawing();\n    // this.addon.InitTourTool();\n  }\n  private initPost() {\n    this.model.initPost();\n    this.implementations.initPost();\n\n    if (this.implementations.imageAnnoApp) {\n      // this.implementation.annotationCanvasInstance.activeCommandController.ShiftLog();\n    }\n\n    if (this.param.renderer === RendererType.Svg) {\n      // double check for the point event\n      this.model.modelViewWrapper.divNGraphicsHost.style.pointerEvents = 'none';\n    }\n\n    if (this.model.imageWrapper.croppingDataTemp && this.implementations.imageAnnoApp) {\n      this.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.model.imageWrapper.croppingDataTemp);\n    }\n    if (this.model.imageWrapper.img) {\n      if (this.param.colorCover) {\n        this.model.imageWrapper.updateImg(this.model.imageWrapper.img, this.param.colorCover);\n      } else {\n        this.model.imageWrapper.updateImg(this.model.imageWrapper.img);\n      }\n    }\n    this.isLoaded = true;\n\n    this.initPostAppEnv();\n  }\n  private initPostAppEnv() {\n    if (this.implementations.imageAnnoApp) {\n      this.implementations.imageAnnoApp.activeCommandController.acProperties.isScaleDynamicRender = true;\n      this.implementations.imageAnnoApp.activeCommandController.acProperties.optimizerTextleaderline = OptimizerTextleaderline.Collision;\n\n      if (this.param.features && this.param.features.clustering) {\n        this.implementations.imageAnnoApp.apiWrapper.environment.toggleClusteringPoint(this.param.features.clustering);\n      }\n    }\n  }\n  public restart() {\n    // console.log('re start!!');\n  }\n  public toJson(): Record<string, unknown> {\n    if (this.implementations.imageAnnoApp) {\n      // this is a Map\n      const geometries = this.implementations.imageAnnoApp.renderer.saveDrawingGeometries();\n      // convert it to object literal\n      return Array.from(geometries).reduce((obj, [, geometry]) => {\n        const { id, type, nodes, data, styles } = geometry;\n        obj[id] = {\n          // required fields\n          id, type, nodes,\n          // optional fields\n          ...(styles && Object.keys(styles).length && { styles }),\n          ...(data && Object.keys(data).length && { data }),\n        };\n        return obj;\n      }, {});\n    }\n    return {};\n  }\n  public pause(t = 0) {\n    this.implementations.Pause(t);\n  }\n  public resume() {\n    this.implementations.resume();\n  }\n  public destroy() {\n    if (this.implementations) {\n      this.implementations.destroy();\n    }\n    if (this.model) {\n      this.model.destroy();\n    }\n    // this.emitAction(`destroy`);\n    // this.emitAction(this.core.canvas.capture());\n    // this. divHost.removeChild(this.core.div);\n  }\n  // { type: ActionTypeEnum; payload: unknown }\n  public pushAction(v: string | { type: ActionType | string; payload: unknown }) {\n    // console.log('v', v);\n    // checking empty string and null value\n    if (!v) {\n      return;\n    }\n    this.model.pushAction(v);\n  }\n  // eslint:disable-next-line:no-any\n  public pushTheme(v: unknown) {\n    // console.log('pushTheme', v);\n    this.model.pushTheme(v);\n  }\n  public bindActionEmitting(fn: (data: string) => void) {\n    this.emitAction = fn;\n  }\n  public resize(width: number, height: number) {\n    // this.graphicsCoreWrapper.ResizeCanvas(width, height);\n\n    this.model.resize(width, height);\n    this.implementations.resize(width, height);\n    // if (this.viewController) {\n    //   this.viewController.Resize(width, height);\n    // }\n  }\n  async initViewController() {\n    // return import('./ViewController')\n    //   .then(({ ViewController }) => {\n    //     if (this.viewController) {\n    //       return;\n    //     }\n    //     this.viewController = new ViewController(this);\n    //     this.viewController.nUIWrapper.nUI.ShiftTheme('black');\n    //   })\n    //   .catch((err) => {\n    //     console.debug('Stop loading Annotation2D ViewController.');\n    //     console.debug(err);\n    //     throw err;\n    //   });\n  }\n  public open() {\n    this.model.ioWrapper.open();\n  }\n  // public updateImage(img: HTMLImageElement, dataCropping: string) {\n  //   // document.append(img, dataCropping)\n  //   this.model.modelViewWrapper.removeDivImg();\n  //   // this.initImageByImg(img, dataCropping);\n  // }\n  public initImageByImg(img: HTMLImageElement, dataCropping: string, imgOriginal: HTMLImageElement, colorCover: string) {\n    this.model.imageWrapper.initImageByImg(img, dataCropping, imgOriginal, colorCover);\n  }\n  public updateEffecting(d: any) {\n    this.api.updateEffecting(d);\n  }\n  public initCropping() {\n    this.addon.dynamicImport.initCropping();\n  }\n}\n","export { ActionType } from '../../../../lib/Enum/EnumCommon';\n\nexport enum GeometryType {\n    POINT_REGULAR = 'POINT_REGULAR',\n    POINT_NUMBERED = 'POINT_NUMBERED',\n    POINT_ICON = 'POINT_ICON',\n    ARROW_SINGLE = 'ARROW_SINGLE',\n    ARROW_DOUBLE = 'ARROW_DOUBLE',\n    POLYLINE = 'POLYLINE',\n    POLYGON = 'POLYGON',\n    CIRCLE = 'CIRCLE',\n    RECTANGLE = 'RECTANGLE',\n    TEXT = 'TEXT',\n};\n","import { CompileMode } from '../Enum/EnumCommon';\nexport class AppProperties {\n    public isStandalone: boolean = false;\n    public compileMode: CompileMode = CompileMode.Development;\n    constructor() {\n        // TODO:\n    }\n}\nexport interface RendererInterface {\n    render(ctx: CanvasRenderingContext2D): void;\n}\n","import { InteractionMode } from '../Enum/EnumCommon';\nexport class InputControllerStatus {\n    public clickLeft: boolean;\n    public clickMiddle: boolean;\n    public clickRight: boolean;\n    public clickDouble: boolean;\n    public mouseDown: boolean;\n    public mouseMove: boolean;\n    public mouseDrag: boolean;\n    public keyDown: boolean;\n    constructor() {\n        this.clickLeft = true;\n        this.clickMiddle = true;\n        this.clickRight = true;\n        this.clickDouble = true;\n        this.mouseDown = true;\n        this.mouseMove = true;\n        this.mouseDrag = true;\n        this.keyDown = true;\n    }\n}\nexport class AppControllerStatus {\n    public currentControllerStatus: InputControllerStatus;\n    public drawing: InputControllerStatus;\n    public interactiveViewer: InputControllerStatus;\n    public viewer: InputControllerStatus;\n    private _mode: InteractionMode;\n    constructor(mode: InteractionMode) {\n        this.currentControllerStatus = new InputControllerStatus();\n        this.drawing = new InputControllerStatus();\n        this.interactiveViewer = new InputControllerStatus();\n        this.viewer = new InputControllerStatus();\n\n        this.interactiveViewer.clickLeft = true;\n        this.interactiveViewer.clickMiddle = false;\n        this.interactiveViewer.clickRight = false;\n        this.interactiveViewer.clickDouble = false;\n        this.interactiveViewer.mouseDown = true;\n        this.interactiveViewer.mouseMove = true;\n        this.interactiveViewer.mouseDrag = false;\n        this.interactiveViewer.keyDown = false;\n\n        this.viewer.clickLeft = false;\n        this.viewer.clickMiddle = false;\n        this.viewer.clickRight = false;\n        this.viewer.clickDouble = false;\n        this.viewer.mouseDown = false;\n        this.viewer.mouseMove = false;\n        this.viewer.mouseDrag = false;\n        this.viewer.keyDown = false;\n        this.mode = mode;\n    }\n    public set mode(interactionMode: InteractionMode) {\n        this._mode = interactionMode;\n        if (interactionMode === InteractionMode.Drawing) { this.currentControllerStatus = this.drawing; }\n        if (interactionMode === InteractionMode.InteractiveViewer) { this.currentControllerStatus = this.interactiveViewer; }\n        if (interactionMode === InteractionMode.ObserveViewer) { this.currentControllerStatus = this.viewer; }\n    }\n    public get mode() {\n        return this._mode;\n    }\n    public setAccessibility(interactionMode: InteractionMode, accessibility: InputControllerStatus) {\n        if (interactionMode === InteractionMode.Drawing) {\n            this.drawing.clickLeft = accessibility.clickLeft;\n            this.drawing.clickMiddle = accessibility.clickMiddle;\n            this.drawing.clickRight = accessibility.clickRight;\n            this.drawing.clickDouble = accessibility.clickDouble;\n            this.drawing.mouseDown = accessibility.mouseDown;\n            this.drawing.mouseMove = accessibility.mouseMove;\n            this.drawing.mouseDrag = accessibility.mouseDrag;\n        }\n        if (interactionMode === InteractionMode.InteractiveViewer) {\n            this.currentControllerStatus = this.interactiveViewer;\n        }\n        if (interactionMode === InteractionMode.ObserveViewer) {\n            this.currentControllerStatus = this.viewer;\n        }\n    }\n}\n","import { BrowserType } from '../Enum/EnumCommon';\nexport class BrowserUtility {\n    private _type: BrowserType;\n    private _isMobile: boolean;\n    constructor() {\n        this.detectBrowser();\n        this.detectIsMoile();\n        // console.debug(this.type, ', isMobile', this.isMobile);\n    }\n    private detectBrowser() {\n        if ((navigator.userAgent.indexOf('Edge') !== -1)) {\n            this._type = BrowserType.Edge;\n            return;\n        }\n        if ((navigator.userAgent.indexOf('Opera') || navigator.userAgent.indexOf('OPR')) !== -1) {\n            this._type = BrowserType.Opera;\n        }\n        if (navigator.userAgent.indexOf('Chrome') !== -1) {\n            this._type = BrowserType.Chrome;\n            return;\n        }\n        if (navigator.userAgent.indexOf('Safari') !== -1) {\n            this._type = BrowserType.Safari;\n            return;\n        }\n        if (navigator.userAgent.indexOf('Firefox') !== -1) {\n            this._type = BrowserType.Firefox;\n            return;\n            // } else if ((navigator.userAgent.indexOf('MSIE') !== -1) || (!!document.documentMode === true)) { // IF IE > 10\n        }\n        if ((navigator.userAgent.indexOf('MSIE') !== -1)) { // IF IE > 10\n            this._type = BrowserType.Ie;\n        }\n\n        // else {\n        this._type = BrowserType.Unknown;\n        // }\n    }\n    private detectIsMoile() {\n        this._isMobile = false; // initiate as false\n        // device detection\n\n        //@ts-nocheck\n        if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)|| /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0, 4))) {\n            this._isMobile = true;\n        }\n    }\n    public get type() {\n        return this._type;\n    }\n    public get isMobile() {\n        return this._isMobile;\n    }\n}\n","import { NVector3, isOverlap } from './NVector3';\n// // https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\n// // reference https://gist.github.com/adammiller/826148 /\nexport class DouglasPeucker {\n    public vs: NVector3[];\n    public ls: NLine[];\n    public static simplifyPath(vs: NVector3[], tolerance: number) {\n        let arr: NVector3[] = this.computeDouglasPeucker(vs, tolerance);\n        // always have to push the very last point on so it doesn't get left off\n        arr.push(vs[vs.length - 1]);\n        return arr;\n\n    }\n    private static computeDouglasPeucker(vs: NVector3[], tolerance: number) {\n        if (vs.length <= 2) {\n            return [vs[0]];\n        }\n        let returnPoints: NVector3[] = [],\n            // make line from start to end\n            ln = new Line(  vs[0], vs[vs.length - 1]),\n            // find the largest distance from intermediate poitns to this line\n            maxDistance = 0,\n            maxDistanceIndex = 0,\n            p;\n        for (var i = 1; i <= vs.length - 2; i++) {\n            var distance = ln.distanceToPoint(vs[i]);\n            if (distance > maxDistance) {\n                maxDistance = distance;\n                maxDistanceIndex = i;\n            }\n        }\n        // check if the max distance is greater than our tollerance allows\n        if (maxDistance >= tolerance) {\n            p = vs[maxDistanceIndex];\n            ln.distanceToPoint(p);\n            // include this point in the output\n            returnPoints = returnPoints.concat(this.computeDouglasPeucker(vs.slice(0, maxDistanceIndex + 1), tolerance));\n            // returnPoints.push( points[maxDistanceIndex] );\n            returnPoints = returnPoints.concat(this.computeDouglasPeucker(vs.slice(maxDistanceIndex, vs.length), tolerance));\n        } else {\n            // ditching this point\n            p = vs[maxDistanceIndex];\n            ln.distanceToPoint(p);\n            returnPoints = [vs[0]];\n        }\n        return returnPoints;\n    }\n    constructor() {\n        /* */\n    }\n    public computeDouglasPeucker(vs: NVector3[], tolerance: number) {\n        if (vs.length <= 2) {\n            return [vs[0]];\n        }\n        let returnPoints: NVector3[] = [],\n            // make line from start to end\n            ln = new Line(vs[0], vs[vs.length - 1]),\n            // find the largest distance from intermediate poitns to this line\n            maxDistance = 0,\n            maxDistanceIndex = 0,\n            p;\n        for (var i = 1; i <= vs.length - 2; i++) {\n            var distance = ln.distanceToPoint(vs[i]);\n            if (distance > maxDistance) {\n                maxDistance = distance;\n                maxDistanceIndex = i;\n            }\n        }\n        // check if the max distance is greater than our tollerance allows\n        if (maxDistance >= tolerance) {\n            p = vs[maxDistanceIndex];\n            ln.distanceToPoint(p);\n            // include this point in the output\n            returnPoints = returnPoints.concat(this.computeDouglasPeucker(vs.slice(0, maxDistanceIndex + 1), tolerance));\n            // returnPoints.push( points[maxDistanceIndex] );\n            returnPoints = returnPoints.concat(this.computeDouglasPeucker(vs.slice(maxDistanceIndex, vs.length), tolerance));\n        } else {\n            // ditching this point\n            p = vs[maxDistanceIndex];\n            ln.distanceToPoint(p);\n            returnPoints = [vs[0]];\n        }\n        return returnPoints;\n    }\n\n}\nclass Line {\n    public p0: NVector3;\n    public p1: NVector3;\n    constructor(p0: NVector3, p1: NVector3) {\n        this.p0 = p0;\n        this.p1 = p1;\n    }\n    public distanceToPoint(p: NVector3) {\n        // slope\n        let m = (this.p1.y - this.p0.y) / (this.p1.x - this.p0.x),\n            // y offset\n            b = this.p0.y - (m * this.p0.x),\n            d = [];\n        // distance to the linear equation\n        d.push(Math.abs(p.y - (m * p.x) - b) / Math.sqrt(Math.pow(m, 2) + 1));\n        // distance to p0\n        d.push(Math.sqrt(Math.pow((p.x - this.p0.x), 2) + Math.pow((p.y - this.p0.y), 2)));\n        // distance to p1\n        d.push(Math.sqrt(Math.pow((p.x - this.p1.x), 2) + Math.pow((p.y - this.p1.y), 2)));\n        // return the smallest distance\n        return d.sort((aa, bb) => { return (aa - bb); })[0]; // causes an array to be sorted numerically and ascending;\n    }\n}\nexport class NLine {\n    public p0: NVector3;\n    public p1: NVector3;\n    public static isOverlap(ln: NLine, other: NLine): boolean {\n        if (isOverlap(ln.p0, other.p0) && isOverlap(ln.p1, other.p1)) {\n            return true;\n        } else if (isOverlap(ln.p0, other.p1) && isOverlap(ln.p1, other.p0)) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    constructor(p0: NVector3, p1: NVector3) {\n        this.p0 = p0; this.p1 = p1;\n    }\n}\n","export class NumericalMotion {\n    public t: number = 0.0;\n    constructor() {\n        //\n    }\n    public scale(r: number) { return (Math.sin(this.t) + 5.0) * 0.2 * r; }\n    // elastic bounce effect at the beginning\n    public easeInElastic(t: number) { return (.04 - .04 / t) * Math.sin(25 * t) + 1; }\n    // https://joshondesign.com/2013/03/01/improvedEasingEquations\n    public easeOutElastic2(t: number) { var p = 0.3; return Math.pow(2, -10 * t) * Math.sin((t - p / 4) * (2 * Math.PI) / p) + 1; }\n}\n","// import { IOGeometry } from './GeometryUtility';\n// export class DownloadJSONShapes {\n//     constructor(d: Map<string, IOGeometry>, name: string) {\n//         this.init(d, name)\n//     }\n//     private init(d: Map<string, IOGeometry>, name: string) {\n//         if (typeof document === 'undefined') { return; }\n//         let dic = {};\n//         d.forEach((v, k, m) => { dic[k] = v; });\n\n//         // reference : http://jsfiddle.net/soulwire/4ooupev9/\n//         var data = this.encode((JSON.stringify(dic, null, 4)));\n//         // console.log(data)\n//         var blob = new Blob([data], { type: 'esri/drawingTool' });\n//         let url = URL.createObjectURL(blob);\n//         var link = document.createElement('a');\n//         link.setAttribute('href', url);\n//         link.setAttribute('download', name);\n//         var event = document.createEvent('MouseEvents');\n//         event.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n//         link.dispatchEvent(event);\n//     }\n//     public encode(s: string) {\n//         let out: number[] = [];\n//         for (let i = 0; i < s.length; i++) { out.push(s.charCodeAt(i)); }\n//         return new Uint8Array(out);\n//     }\n//     public dummy() { /* */ }\n// }\nexport class DownloadJSON {\n    constructor(d: string, name: string) {\n        this.init(d, name);\n    }\n    private init (d: string, name: string) {\n        if (typeof document === 'undefined') { return; }\n        // reference : http://jsfiddle.net/soulwire/4ooupev9/\n        var data = this.encode((JSON.stringify(d, null, 4)));\n        // console.log(data)\n        var blob = new Blob([data], { type: 'esri/drawingTool' });\n        let url = URL.createObjectURL(blob);\n        var link = document.createElement('a');\n        link.setAttribute('href', url);\n        link.setAttribute('download', name);\n        var event = document.createEvent('MouseEvents');\n        event.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n        link.dispatchEvent(event);\n    }\n    public encode(s: string) {\n        let out: number[] = [];\n        for (let i = 0; i < s.length; i++) { out.push(s.charCodeAt(i)); }\n        return new Uint8Array(out);\n    }\n    public dummy() { /* */ }\n}\n","export const eps = 0.0000001;\nexport const getVecforGraphicApp = (\n  x: number,\n  y: number,\n  long: number,\n  lat: number,\n  ele: number,\n  proX: number,\n  proY: number,\n  proZ: number\n) => {\n  return new NVector3(x, y, 0);\n};\nexport const getAngle = (x: number, y: number): number => {\n  return Math.atan2(y, x);\n};\nexport const AABBintersect2D = (v0: NVector3[], v1: NVector3[]): boolean => {\n  const v0minX = v0[0].x;\n  const v0maxX = v0[1].x;\n  const v1minX = v1[0].x;\n  const v1maxX = v1[1].x;\n\n  const v0minY = v0[0].y;\n  const v0maxY = v0[1].y;\n  const v1minY = v1[0].y;\n  const v1maxY = v1[1].y;\n\n  // const v0minZ = 0;\n  // const v0maxZ = 0;\n  // const v1minZ = 0;\n  // const v1maxZ = 0;\n\n  return v0minX <= v1maxX && v0maxX >= v1minX && v0minY <= v1maxY && v0maxY >= v1minY; // &&\n  //  (v0minZ <= v1maxZ && v0maxZ >= v1minZ);\n};\nexport const deepCopy = (v: NVector3): NVector3 => {\n  const out = new NVector3(v.x, v.y, v.z);\n  out.alt = v.alt;\n  out.d = v.d;\n  out.isModified = v.isModified;\n  out.parent = v.parent;\n  out.w = v.w;\n  return out;\n};\nexport const dot = (a: NVector3, b: NVector3) => {\n  return a.x * b.x + a.y * b.y + a.z * b.z;\n};\nexport const add = (v0: NVector3, v1: NVector3): NVector3 => {\n  return new NVector3(v0.x + v1.x, v0.y + v1.y, v0.z + v1.z);\n};\nexport const sub = (v0: NVector3, v1: NVector3): NVector3 => {\n  return new NVector3(v0.x - v1.x, v0.y - v1.y, v0.z - v1.z);\n};\nexport const clone = (v: NVector3): NVector3 => {\n  return deepCopy(v);\n};\nexport const ZAxis = (): NVector3 => {\n  return new NVector3(0, 0, 1);\n};\nexport const YAxis = (): NVector3 => {\n  return new NVector3(0, 1, 0);\n};\nexport const Zero = (): NVector3 => {\n  return new NVector3(0, 0, 0);\n};\nexport const origin = (): NVector3 => {\n  return new NVector3(0, 0, 0);\n};\nexport const plus = (v1: NVector3, v2: NVector3): NVector3 => {\n  return new NVector3(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z);\n};\nexport const scale = (v: NVector3, s: number): NVector3 => {\n  return new NVector3(v.x * s, v.y * s, v.z * s);\n};\nexport const midVec = (v1: NVector3, v2: NVector3): NVector3 => {\n  return new NVector3(\n    v1.x + (v2.x - v1.x) * 0.5,\n    v1.y + (v2.y - v1.y) * 0.5,\n    v1.z + (v2.z - v1.z) * 0.5\n  );\n};\nexport const compareTwoVectors = (v0: NVector3, v1: NVector3): boolean => {\n  if (v0.x !== v1.x || v0.y !== v1.y || v0.z !== v1.z) {\n    return false;\n  }\n  return true;\n};\nexport const getLength = (v: NVector3): number => {\n  return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n};\nexport const normalize = (v: NVector3): NVector3 => {\n  const len: number = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n  if (len < 0.0001) {\n    return new NVector3(v.x, v.y, v.z);\n  }\n  return new NVector3(v.x / len, v.y / len, v.z / len);\n};\n// https://web.archive.org/web/20090214201206/http://valis.cs.uiuc.edu:80/~sariel/research/CG/compgeom/msg00827.html\nexport const getArea = (vs: NVector3[]) => {\n  let area = 0;\n  // // double center2dx = 0;\n  // // double center2dy = 0;\n  // for (let i = 0; i < vs.length - 1; i++) {\n  //   // tmreal t = 2 * vs[i].X * vs[i + 0].Y + vs[i].Y * vs[i + 1].X + vs[i].X * vs[i + 1].Y + 2 * vs[i + 1].X * vs[i + 1].Y;\n  //   area += (vs[i].x - vs[i + 1].x) * (vs[i].y + vs[i + 1].y);\n  //   // center2d.x += (+vs[i].X - vs[i + 1].X) * t;\n  //   // center2d.y += (-vs[i].Y + vs[i + 1].Y) * t;\n  // }\n  // area *= 0.5;\n  // // center2dx *= 1 / (6 * area);\n  // // center2dy *= 1 / (6 * area);\n  // return area;\n\n  for (let i = 0, l = vs.length; i < l; i++) {\n    const addX = vs[i].x;\n    const addY = vs[i === vs.length - 1 ? 0 : i + 1].y;\n    const subX = vs[i === vs.length - 1 ? 0 : i + 1].x;\n    const subY = vs[i].y;\n\n    area += addX * addY * 0.5;\n    area -= subX * subY * 0.5;\n  }\n\n  return Math.abs(area);\n};\nexport const getGeoArea = (vs: NVector3[]) => {\n  let area = 0;\n  for (let i = 0; i < vs.length - 1; i++) {\n    area += (vs[i].x - vs[i + 1].x) * (vs[i].y + vs[i + 1].y);\n  }\n  area *= 0.5;\n  return Math.abs(area);\n};\nexport const getIndexByShortDistance = (v: NVector3, vs: NVector3[]): number[] => {\n  let index = -1;\n  let dis = Number.MAX_SAFE_INTEGER;\n  for (let i = 0; i < vs.length; ++i) {\n    const distance = getDistance(v, vs[i]);\n    if (distance < dis) {\n      dis = distance;\n      index = i;\n    }\n  }\n  return [index, dis];\n};\nexport const getDistance = (v0: NVector3, v1: NVector3): number => {\n  return Math.sqrt(\n    (v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z)\n  );\n  // return NWebassemblyController.ctrller.Distance(v0.x, v0.y, v0.z, v1.x, v1.y, v1.z);\n};\nexport const getDistanceByNum = (x0: number, y0: number, x1: number, y1: number): number => {\n  return Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));\n  // return NWebassemblyController.ctrller.Distance(x0, v0.y, v0.z, v1.x, v1.y, v1.z);\n};\nexport const getDistanceByArray = (v0: number[], v1: number[]): number => {\n  return Math.sqrt(\n    (v0[0] - v1[0]) * (v0[0] - v1[0]) +\n      (v0[1] - v1[1]) * (v0[1] - v1[1]) +\n      (v0[2] - v1[2]) * (v0[2] - v1[2])\n  );\n};\nexport const getDistance2 = (v1: NVector3, v2: NVector3): number => {\n  const d: number =\n    (v1.x - v2.x) * (v1.x - v2.x) + (v1.y - v2.y) * (v1.y - v2.y) + (v1.z - v2.z) * (v1.z - v2.z);\n  return d;\n};\nexport const getDotProduct = (v1: NVector3, v2: NVector3): number => {\n  return v1.x * v2.x + v1.y * v2.y + v1.z * v2.z;\n};\nexport const crossProduct = (v1: NVector3, v2: NVector3): NVector3 => {\n  return new NVector3(\n    v1.y * v2.z - v1.z * v2.y,\n    v1.z * v2.x - v1.x * v2.z,\n    v1.x * v2.y - v1.y * v2.x\n  );\n};\nexport const getDivideByNum = (v0: NVector3, v1: NVector3, n = 5): NVector3[] => {\n  const vs: NVector3[] = [];\n  const xOff = (v1.x - v0.x) / n;\n  const yOff = (v1.y - v0.y) / n;\n  const zOff = (v1.z - v0.z) / n;\n  for (let j = 0; j < n; ++j) {\n    const x = v0.x + xOff * j;\n    const y = v0.y + yOff * j;\n    const z = v0.z + zOff * j;\n    vs.push(new NVector3(x, y, z));\n  }\n  return vs;\n};\n// static DistancefromGeoV(v0: NVector3, v1: NVector3, unit: UNIT = CGeometry.appDrawing.activeCommands.unit): number {\n//   let dis = KMeterFromGeoGPSPos(v0, v1);\n//   if (unit === UNIT.METER) { return dis * 1000; }\n//   if (unit === UNIT.KM) { return dis; }\n//   if (unit === UNIT.MILE) { return MathUtility.MilesFromKM(dis); }\n//   return -1;\n// }\nexport const KMeterFromGPSPos = (gV0: NVector3, gV1: NVector3): number => {\n  const R = 6378.137; // Radius of earth in KM // a = Equatorial radius (6,378.1370 km) // b = Polar radius (6,356.7523 km)\n  const dLat = (gV1.y * Math.PI) / 180 - (gV0.y * Math.PI) / 180;\n  const dLon = (gV1.x * Math.PI) / 180 - (gV0.x * Math.PI) / 180;\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos((gV0.y * Math.PI) / 180) *\n      Math.cos((gV1.y * Math.PI) / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const d = R * c;\n  return d; // * 1000; // meters\n};\n// eslint:disable-next-line:variable-name\nexport const get1KMLongByGeoUnit = (long = 0, lat = 0): number => {\n  const v = new NVector3(long, lat, 0);\n  let addition = 0.0;\n  for (let i = 0; i < 10000; ++i) {\n    const dis = KMeterFromGPSPos(v, new NVector3(v.x + addition, v.y, v.z));\n    if (1 < dis && dis < 1.001) {\n      // console.log('result long', i, dis);\n      return v.x + addition;\n    }\n    addition += 0.00001;\n  }\n  return -1;\n};\n// eslint:disable-next-line:variable-name\nexport const get1KMLatByGeoUnit = (long = 0, lat = 0): number => {\n  const v = new NVector3(long, lat, 0);\n  let addition = 0.0;\n  for (let i = 0; i < 10000; ++i) {\n    const dis = KMeterFromGPSPos(v, new NVector3(v.x, v.y + addition, v.z));\n    if (1 < dis && dis < 1.001) {\n      // console.log('result lat', i, dis);\n      return v.y + addition;\n    }\n    addition += 0.00001;\n  }\n  return -1;\n};\n// eslint:disable-next-line:variable-name\nexport const get1KMLatLongGeoUnit = (long = 0, lat = 0): NVector3 => {\n  const lng = get1KMLongByGeoUnit(long, lat);\n  const la = get1KMLatByGeoUnit(long, lat);\n  return new NVector3(lng, la, 0);\n};\n// ............................................................................ vec compute\n// static CalculateFalloff(pts: NVector3[], pt: NVector3, s: number, f: number): number {\n//   let newValue = 0.0;\n//   for (let i = 0; i < pts.length; ++i) {\n//     // let v = NJS.PointUtils.CalculateFalloff(pt, pts[i], s, f);\n//     // newValue += v;\n//   }\n//   return newValue;\n// }\n// ............................................................................ vec angle\nexport const getAngleBetween = (v0: NVector3, v1: NVector3) => {\n  return Math.atan2(v1.x - v0.x, v1.y - v0.y);\n};\n// .................................................\nexport const getCosAngleByTwoVectors = (v0: NVector3, v1: NVector3): number => {\n  return getDotProduct(normalize(v0), normalize(v1));\n};\nexport const getAngleByTwoVectorsRadian = (v0: NVector3, v1: NVector3): number => {\n  return Math.acos(getCosAngleByTwoVectors(v0, v1));\n};\nexport const getAngleByTwoVectors = (v0: NVector3, v1: NVector3): number => {\n  return (getAngleByTwoVectorsRadian(v0, v1) * 180.0) / Math.PI;\n};\nexport const GetRotationByWorldCoordinate = (v: NVector3): number => {\n  const origin = new NVector3(1, 0, 0);\n  return getAngleByTwoVectors(origin, v);\n};\nexport const getRotationByWorldCoordinateByTwo = (v0: NVector3, v1: NVector3): number => {\n  // mercator ctx\n  const v = v1.Sub(v0);\n  const origin = new NVector3(1, 0, 0);\n  if (v.y > 0) {\n    return getAngleByTwoVectors(origin, v) * -1;\n  }\n  return getAngleByTwoVectors(origin, v);\n};\n// ............................................................................\n// static ToJSon(v) {\n// var p = {\n//             'point': [],\n//             'primitive': 'point',\n//             'units': {\n//             'point': 'meters'\n//         }\n// }\n// p.point = [v.x , v.y, v.z];\n// return p;\n// }\nexport const computeDotProducts = (vs: NVector3[]) => {\n  const out = [];\n  for (let i = 0; i < vs.length; ++i) {\n    // let v0: NVector3 = Origin();\n    // let v1: NVector3;\n    if (i < vs.length - 1) {\n      const v0 = new NVector3(vs[i].x, vs[i].y, vs[i].z);\n      const v1 = new NVector3(vs[i + 1].x, vs[i + 1].y, vs[i + 1].z);\n\n      v1.x -= v0.x;\n      v1.y -= v0.y;\n      v1.z -= v0.z;\n\n      const dot = getDotProduct(new NVector3(1, 0, 0), normalize(v1));\n      out.push(dot);\n    } else {\n      const v0 = new NVector3(vs[i].x, vs[i].y, vs[i].z);\n      const v1 = new NVector3(vs[0].x, vs[0].y, vs[0].z);\n\n      v1.x -= v0.x;\n      v1.y -= v0.y;\n      v1.z -= v0.z;\n\n      const dot = getDotProduct(new NVector3(1, 0, 0), normalize(v1));\n      out.push(dot);\n    }\n  }\n  return out;\n};\nexport const computeDotProductsWithCenter = (vs: NVector3[]) => {\n  const cp = getCenterVecFromVecs(vs);\n  const out = [];\n  for (let i = 0; i < vs.length; ++i) {\n    let v0: NVector3;\n    let v1: NVector3;\n    if (i < vs.length - 1) {\n      v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\n      v1 = new NVector3(vs[i + 1].x - cp.x, vs[i + 1].y - cp.y, vs[i + 1].z - cp.z);\n    } else {\n      v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\n      v1 = new NVector3(vs[0].x - cp.x, vs[0].y - cp.y, vs[0].z - cp.z);\n    }\n    const dot = getDotProduct(normalize(v0), normalize(v1));\n    out.push(dot);\n  }\n  return out;\n};\nexport const getXYDimForCircle = (vs: NVector3[]) => {\n  const cp = getCenterVecFromVecs(vs);\n  // let out = [];\n  let xx = 0;\n  let yy = 0;\n  let len = vs.length;\n  for (let i = 0; i < len; ++i) {\n    // if (i < vs.length - 1) {\n    xx += Math.abs(vs[i].x - cp.x);\n    yy += Math.abs(vs[i].y - cp.y);\n    // v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\n    // v1 = new NVector3(vs[i + 1].x - cp.x, vs[i + 1].y - cp.y, vs[i + 1].z - cp.z);\n    // } else {\n    // v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\n    // v1 = new NVector3(vs[0].x - cp.x, vs[0].y - cp.y, vs[0].z - cp.z);\n    // }\n    // let dot = DotProduct(Normalize(v0), Normalize(v1));\n    // out.push(dot);\n  }\n  len += 2;\n  return [xx / len, yy / len];\n};\nexport const isOverlap = (v0: NVector3, v1: NVector3, tor = 0.1) => {\n  if (getDistance(v0, v1) < tor) {\n    return true;\n  }\n  return false;\n};\nexport const distanceMouseWithTwoVecs = (m: NVector3, v0: NVector3, v1: NVector3): number => {\n  v0.x += 0.00001;\n  v0.y += 0.00001;\n  const boundary = getBoundingVecs(v0, v1);\n  const vec = GetCloseVec(v0, v1, m.x, m.y, boundary, true);\n  return getDistance(m, vec);\n};\nexport const GetCloseVec = (\n  p0: NVector3,\n  p1: NVector3,\n  x: number,\n  y: number,\n  vecsBound: NVector3[],\n  OnLine = true\n): NVector3 => {\n  const pp1: NVector3 = new NVector3(p0.x, p0.y, p0.z);\n  const pp2: NVector3 = new NVector3(p1.x, p1.y, p1.z);\n  const v1: NVector3 = pp2.Sub(pp1);\n  const p: NVector3 = new NVector3(x, y, 0);\n  const v2: NVector3 = p.Sub(pp1);\n  v1.unitize();\n  const cp = pp1.Add(v1.Mult(getDotProduct(v2, v1)));\n  if (OnLine) {\n    if (isInsideOfVecs(cp, vecsBound)) {\n      return cp;\n    }\n    if (getDistance(p0, cp) < getDistance(p1, cp)) {\n      return new NVector3(p0.x, p0.y, p0.z);\n    }\n    return new NVector3(p1.x, p1.y, p1.z);\n  }\n  return cp;\n};\nexport const getBoundingVecs = (v0: NVector3, v1: NVector3): NVector3[] => {\n  const listOfVec: NVector3[] = [];\n  let x = 0;\n  let y = 0;\n  let z = 0;\n  if (v0.x < v1.x) {\n    x = v0.x;\n  } else {\n    x = v1.x;\n  }\n  if (v0.y < v1.y) {\n    y = v0.y;\n  } else {\n    y = v1.y;\n  }\n  if (v0.z < v1.z) {\n    z = v0.z;\n  } else {\n    z = v1.z;\n  }\n  const nv0 = new NVector3(x, y, z);\n  if (v0.x > v1.x) {\n    x = v0.x;\n  } else {\n    x = v1.x;\n  }\n  if (v0.y > v1.y) {\n    y = v0.y;\n  } else {\n    y = v1.y;\n  }\n  if (v0.z > v1.z) {\n    z = v0.z;\n  } else {\n    z = v1.z;\n  }\n  const nv1 = new NVector3(x, y, z);\n  listOfVec.push(new NVector3(nv0.x, nv0.y, nv0.z));\n  listOfVec.push(new NVector3(nv1.x, nv0.y, nv0.z));\n  listOfVec.push(new NVector3(nv1.x, nv1.y, nv0.z));\n  listOfVec.push(new NVector3(nv0.x, nv1.y, nv0.z));\n  return listOfVec;\n};\nexport const getBoundingVecsWithScale = (v0: NVector3, v1: NVector3, scale = 1): NVector3[] => {\n  const listOfVec: NVector3[] = [];\n  let x = 0;\n  let y = 0;\n  let z = 0;\n  if (v0.x < v1.x) {\n    x = v0.x;\n  } else {\n    x = v1.x;\n  }\n  if (v0.y < v1.y) {\n    y = v0.y;\n  } else {\n    y = v1.y;\n  }\n  if (v0.z < v1.z) {\n    z = v0.z;\n  } else {\n    z = v1.z;\n  }\n  const nv0 = new NVector3(x, y, z);\n  if (v0.x > v1.x) {\n    x = v0.x;\n  } else {\n    x = v1.x;\n  }\n  if (v0.y > v1.y) {\n    y = v0.y;\n  } else {\n    y = v1.y;\n  }\n  if (v0.z > v1.z) {\n    z = v0.z;\n  } else {\n    z = v1.z;\n  }\n  const nv1 = new NVector3(x, y, z);\n  listOfVec.push(new NVector3(nv0.x, nv0.y, nv0.z));\n  listOfVec.push(new NVector3(nv0.x + Math.abs(nv1.x - nv0.x) * scale, nv0.y, nv0.z));\n  listOfVec.push(new NVector3(nv0.x + Math.abs(nv1.x - nv0.x) * scale, nv0.y + nv1.y, nv0.z));\n  listOfVec.push(new NVector3(nv0.x, nv0.y + nv1.y, nv0.z));\n  return listOfVec;\n};\nexport const getBoundingByVecs = (vs: NVector3[]): NVector3[] => {\n  const listOfVec: NVector3[] = [];\n  let xMin: number = Number.MAX_SAFE_INTEGER;\n  let yMin: number = Number.MAX_SAFE_INTEGER;\n  let zMin: number = Number.MAX_SAFE_INTEGER;\n\n  let xMax: number = Number.MIN_SAFE_INTEGER;\n  let yMax: number = Number.MIN_SAFE_INTEGER;\n  let zMax: number = Number.MIN_SAFE_INTEGER;\n  for (let i = 0; i < vs.length; ++i) {\n    if (xMin > vs[i].x) {\n      xMin = vs[i].x;\n    }\n    if (yMin > vs[i].y) {\n      yMin = vs[i].y;\n    }\n    if (zMin > vs[i].z) {\n      zMin = vs[i].z;\n    }\n\n    if (xMax < vs[i].x) {\n      xMax = vs[i].x;\n    }\n    if (yMax < vs[i].y) {\n      yMax = vs[i].y;\n    }\n    if (zMax < vs[i].z) {\n      zMax = vs[i].z;\n    }\n  }\n  listOfVec.push(new NVector3(xMin, yMin, zMin));\n  listOfVec.push(new NVector3(xMax, yMax, zMax));\n  return listOfVec;\n};\nexport const getMinMaxVecFromVecs = (vec: NVector3[]): NVector3[] => {\n  let minX = Number.MAX_VALUE,\n    minY = Number.MAX_VALUE,\n    minZ = Number.MAX_VALUE;\n  let maxX = Number.MIN_VALUE,\n    maxY = Number.MIN_VALUE,\n    maxZ = Number.MIN_VALUE;\n  for (const v of vec) {\n    if (minX > v.x) {\n      minX = v.x;\n    }\n    if (minY > v.y) {\n      minY = v.y;\n    }\n    if (minZ > v.z) {\n      minZ = v.z;\n    }\n    if (maxX < v.x) {\n      maxX = v.x;\n    }\n    if (maxY < v.y) {\n      maxY = v.y;\n    }\n    if (maxZ < v.z) {\n      maxZ = v.z;\n    }\n  }\n  return [new NVector3(minX, minY, minZ), new NVector3(maxX, maxY, maxZ)];\n};\nexport const removeVecsWithinDis = (vs: NVector3[], tor = 10): NVector3[] => {\n  const vecs: NVector3[] = [];\n  for (let i = 0; i < vs.length - 1; ++i) {\n    const v0 = vs[i];\n    if (v0.d === false) {\n      continue;\n    }\n    for (let j = i + 1; j < vs.length; ++j) {\n      if (getDistance(v0, vs[j]) < tor) {\n        vs[j].d = false;\n      }\n    }\n  }\n  for (let i = 0; i < vs.length; ++i) {\n    if (vs[i].d === true) {\n      vecs.push(vs[i]);\n    }\n  }\n  // vecs.push(vs[vs.length - 1]);\n  return vecs;\n};\n// ...............................................................................\nexport const isInsideOfVecsWtihVecs = (vs: NVector3[], vecs: NVector3[]): boolean => {\n  let inside = true;\n  for (let i = 0; i < vs.length; i++) {\n    inside = isInsideOfVecs(vs[i], vecs);\n    if (!inside) {\n      return false;\n    }\n  }\n  return true;\n};\nexport const isInsideOfVecs = (v: NVector3, vecs: NVector3[]): boolean => {\n  // ray-casting algorithm based on https://github.com/substack/point-in-polygon\n  // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n  const x = v.x,\n    y = v.y;\n  let inside = false;\n  for (let i = 0, j = vecs.length - 1; i < vecs.length; j = i++) {\n    const xi = vecs[i].x,\n      yi = vecs[i].y;\n    const xj = vecs[j].x,\n      yj = vecs[j].y;\n    const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n    if (intersect) {\n      inside = !inside;\n    }\n  }\n  return inside;\n};\nexport const isInsideOfTwoVecs = (v: NVector3, v0: NVector3, v1: NVector3): boolean => {\n  // ray-casting algorithm based on https://github.com/substack/point-in-polygon\n  // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n  const x = v.x,\n    y = v.y;\n\n  if (v0.x < x && x < v1.x && v0.y < y && y < v1.y) {\n    return true;\n  }\n  return false;\n};\nexport const isInsideOfVecsByCrossing = (v: NVector3, w: number, h: number, vs: NVector3[]) => {\n  if (isInsideOfVecs(new NVector3(v.x - w * 0.5, v.y - h * 0.5), vs)) {\n    return true;\n  }\n  if (isInsideOfVecs(new NVector3(v.x + w * 0.5, v.y - h * 0.5), vs)) {\n    return true;\n  }\n  if (isInsideOfVecs(new NVector3(v.x + w * 0.5, v.y + h * 0.5), vs)) {\n    return true;\n  }\n  if (isInsideOfVecs(new NVector3(v.x - w * 0.5, v.y + h * 0.5), vs)) {\n    return true;\n  }\n  return false;\n};\nexport const ConvexHull = (vs: NVector3[]): NVector3[] => {\n  vs.sort(function (a: NVector3, b: NVector3) {\n    return a.x === b.x ? a.y - b.y : a.x - b.x;\n  });\n  const lower: NVector3[] = [];\n  for (let i = 0; i < vs.length; i++) {\n    while (\n      lower.length >= 2 &&\n      Cross(lower[lower.length - 2], lower[lower.length - 1], vs[i]) <= 0\n    ) {\n      lower.pop();\n    }\n    lower.push(vs[i]);\n  }\n  const upper: NVector3[] = [];\n  for (let i = vs.length - 1; i >= 0; i--) {\n    while (\n      upper.length >= 2 &&\n      Cross(upper[upper.length - 2], upper[upper.length - 1], vs[i]) <= 0\n    ) {\n      upper.pop();\n    }\n    upper.push(vs[i]);\n  }\n  upper.pop();\n  lower.pop();\n  for (let i = 0; i < upper.length; ++i) {\n    lower.push(upper[i]);\n  }\n  return lower;\n};\nexport const Cross = (O: NVector3, A: NVector3, B: NVector3): number => {\n  return (A.x - O.x) * (B.y - O.y) - (A.y - O.y) * (B.x - O.x);\n};\nexport const checkBoundIntersection = (vs: NVector3[], p0: NVector3, p1: NVector3) => {\n  for (let i = 0; i < vs.length - 1; ++i) {\n    if (checkLineIntersection(vs[i], vs[i + 1], p0, p1)) {\n      return true;\n    }\n  }\n  return false;\n};\n// http://jsfiddle.net/justin_c_rounds/Gd2S2/light/\nexport const checkLineIntersection = (p0: NVector3, p1: NVector3, p2: NVector3, p3: NVector3) => {\n  // if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\n  let denominator = 0,\n    a = 0,\n    b = 0,\n    numerator1 = 0,\n    numerator2 = 0;\n  let onLine0 = false,\n    onLine1 = false;\n  denominator = (p3.y - p2.y) * (p1.x - p0.x) - (p3.x - p2.x) * (p1.y - p0.y);\n  const result: NVector3 = new NVector3(0, 0, 0);\n  if (denominator === 0) {\n    return undefined;\n  }\n  a = p0.y - p2.y;\n  b = p0.x - p2.x;\n  numerator1 = (p3.x - p2.x) * a - (p3.y - p2.y) * b;\n  numerator2 = (p1.x - p0.x) * a - (p1.y - p0.y) * b;\n  a = numerator1 / denominator;\n  b = numerator2 / denominator;\n\n  // if we cast these lines infinitely in both directions, they intersect here:\n  result.x = p0.x + a * (p1.x - p0.x);\n  result.y = p0.y + a * (p1.y - p0.y);\n  /*\n  // it is worth noting that this should be the same as:\n  x = p2.x + (b * (p3.x - p2.x));\n  y = p2.x + (b * (p3.y - p2.y));\n  */\n  // if line1 is a segment and line2 is infinite, they intersect if:\n  if (a > 0 && a < 1) {\n    onLine0 = true;\n  }\n  // if line2 is a segment and line1 is infinite, they intersect if:\n  if (b > 0 && b < 1) {\n    onLine1 = true;\n  }\n  // if line1 and line2 are segments, they intersect if both of the above are true\n  if (onLine0 && onLine1) {\n    return result;\n  }\n  return undefined;\n};\n//////////////////////////////////////////////////////////////////////////////// translation Utility\nexport const moveVecs = (vecs: NVector3[], dir: NVector3): NVector3[] => {\n  const temp: NVector3[] = [];\n  for (let i = 0; i < vecs.length; ++i) {\n    temp.push(moveVec(vecs[i], dir));\n  }\n  return temp;\n};\nexport const moveVec = (v: NVector3, dir: NVector3): NVector3 => {\n  return new NVector3(v.x + dir.x, v.y + dir.y, v.z + dir.z);\n};\nexport const rotateVecs = (vecs: NVector3[], angle: number) => {\n  const temp: NVector3[] = [];\n  for (let i = 0; i < vecs.length; ++i) {\n    temp.push(RotateVec(vecs[i], angle));\n  }\n  return temp;\n};\nexport const RotateVec = (v: NVector3, angle: number): NVector3 => {\n  const cos = Math.cos(angle * (3.14159265358979 / 180.0));\n  const sin = Math.sin(angle * (3.14159265358979 / 180.0));\n  const x = v.x * cos - v.y * sin;\n  const y = v.x * sin + v.y * cos;\n  return new NVector3(x, y, v.z);\n};\nexport const getCenterVecFromVecs = (vecs: NVector3[]): NVector3 => {\n  const nv = new NVector3(0, 0, 0);\n  for (let i = 0, c = vecs.length; i < c; ++i) {\n    nv.Add(vecs[i]);\n  }\n  nv.Mult(1.0 / vecs.length);\n  return nv;\n};\n\n// intersection // https://gist.github.com/gordonwoodhull/50eb65d2f048789f9558\n// https://stackoverflow.com/questions/563198/whats-the-most-efficent-way-to-calculate-where-two-line-segments-intersect/1968345#1968345\nexport const getVecFromIntersection = (vs: NVector3[]): NVector3[] | undefined => {\n  const newVes: NVector3[] = [];\n  for (let j = 0; j < vs.length - 1; ++j) {\n    for (let k = j + 1; k < vs.length - 1; ++k) {\n      const v = checkLineIntersection(vs[j], vs[j + 1], vs[k], vs[k + 1]);\n      if (v) {\n        newVes.push(v);\n      }\n    }\n  }\n  if (newVes.length === 0) {\n    return undefined;\n  }\n  return newVes;\n};\nexport const between = (a: number, b: number, c: number) => {\n  return a - eps <= b && b <= c + eps;\n};\n// eslint:disable-next-line:variable-name\nexport const segmentIntersection = (v0: NVector3, v1: NVector3, v2: NVector3, v3: NVector3) => {\n  const x =\n    ((v0.x * v1.y - v0.y * v1.x) * (v2.x - v3.x) - (v0.x - v1.x) * (v2.x * v3.y - v2.y * v3.x)) /\n    ((v0.x - v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x - v3.x));\n  const y =\n    ((v0.x * v1.y - v0.y * v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x * v3.y - v2.y * v3.x)) /\n    ((v0.x - v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x - v3.x));\n  if (isNaN(x) || isNaN(y)) {\n    return false;\n  }\n  if (v0.x >= v1.x) {\n    if (!between(v1.x, x, v0.x)) {\n      return false;\n    }\n  } else {\n    if (!between(v0.x, x, v1.x)) {\n      return false;\n    }\n  }\n  if (v0.y >= v1.y) {\n    if (!between(v1.y, y, v0.y)) {\n      return false;\n    }\n  } else {\n    if (!between(v0.y, y, v1.y)) {\n      return false;\n    }\n  }\n  if (v2.x >= v3.x) {\n    if (!between(v3.x, x, v2.x)) {\n      return false;\n    }\n  } else {\n    if (!between(v2.x, x, v3.x)) {\n      return false;\n    }\n  }\n  if (v2.y >= v3.y) {\n    if (!between(v3.y, y, v2.y)) {\n      return false;\n    }\n  } else {\n    if (!between(v2.y, y, v3.y)) {\n      return false;\n    }\n  }\n\n  return new NVector3(x, y);\n};\nexport const isInsideEllipse = (cv: NVector3, m: NVector3, r0: number, r1: number, threshold = 5) => {\n  const x = Math.pow((m.x - cv.x),2) / Math.pow(threshold + r0, 2);\n  const y = Math.pow((m.y - cv.y),2) / Math.pow(threshold + r1, 2);\n  if(x + y <= 1) {\n      return true;\n  }\n  return false;\n}\nexport class NVector3 {\n  x = 0.0;\n  y = 0.0;\n  z = 0.0;\n  w = 0.0;\n  alt = 0.0;\n  d = true;\n  isModified = false;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  parent: any;\n  constructor(x: number, y: number, z = 0) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  public Mult(v: number): NVector3 {\n    this.x *= v;\n    this.y *= v;\n    this.z *= v;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  public divByVal(v: number): NVector3 {\n    this.x /= v;\n    this.y /= v;\n    this.z /= v;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  // public DivByVec(v: NVector3): NVector3 {\n  //   this.x /= v.x;\n  //   this.y /= v.y;\n  //   this.z /= v.z;\n  //   return new NVector3(this.x, this.y, this.z);\n  // }\n  public Add(v: NVector3): NVector3 {\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  public Sub(v: NVector3): NVector3 {\n    this.x -= v.x;\n    this.y -= v.y;\n    this.z -= v.z;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  public unitize(): NVector3 {\n    return this.normalize();\n  }\n  public normalize(): NVector3 {\n    const len: number = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    if (len < 0.0001) {\n      return this;\n    }\n    this.x = this.x / len;\n    this.y = this.y / len;\n    this.z = this.z / len;\n    return this;\n  }\n}\n","import { ClickType } from '../Enum/EnumCommon';\nexport class MouseEventData {\n  public x = -1;\n  public y = -1;\n  public z = -1;\n  public preX = -1;\n  public preY = -1;\n  public preZ = -1;\n  public yGLPicking: number;\n  // public command: ActiveCommandBase; // = new CActiveCommandNone(this.app.activeCommands);\n  public CLICK_TYPE: ClickType = ClickType.Move;\n  public isDown = false;\n  public isDoubleClick = false;\n  public isMove = false;\n  public pressedShift = false;\n  public pressedAlt = false;\n  public pressedCtrl = false;\n  public lat = -1;\n  public long = -1;\n  public wheel = 0;\n  public preWheel = 0;\n  public isActive = true;\n  public native: MouseEvent;\n  constructor() {\n    //\n  }\n  public deepCopy() {\n    const mEvent = new MouseEventData();\n    mEvent.x = this.x;\n    mEvent.y = this.y;\n    mEvent.z = this.z;\n    mEvent.preX = this.preX;\n    mEvent.preY = this.preY;\n    mEvent.preZ = this.preZ;\n    mEvent.pressedAlt = this.pressedAlt;\n    mEvent.pressedShift = this.pressedShift;\n    mEvent.pressedCtrl = this.pressedCtrl;\n    mEvent.isDoubleClick = this.isDoubleClick;\n    mEvent.isDown = this.isDown;\n    mEvent.isMove = this.isMove;\n    mEvent.lat = this.lat;\n    mEvent.long = this.long;\n    mEvent.wheel = this.wheel;\n    mEvent.preWheel = this.preWheel;\n    mEvent.yGLPicking = this.yGLPicking;\n    mEvent.CLICK_TYPE = this.CLICK_TYPE;\n    mEvent.native = this.native;\n    return mEvent;\n  }\n}\n","import { TouchType } from '../Enum/EnumCommon';\nexport class TouchEventDataList {\n  public native: MouseEvent;\n  public eventList: TouchEventData[];\n  public TOUCH_TYPE: TouchType = TouchType.Move;\n  constructor() {\n    this.eventList = [];\n  }\n  // Build(e: TouchEvent) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public build(e: any, tType: TouchType) {\n    for (let i = 0; i < e.touches.length; ++i) {\n      const tEvent = new TouchEventData();\n      tEvent.identifier = e.touches[i].identifier;\n\n      tEvent.TOUCH_TYPE = tType;\n\n      tEvent.radiusX = e.touches[i].radiusX;\n      tEvent.radiusY = e.touches[i].radiusY;\n\n      tEvent.rotationAngle = e.touches[i].rotationAngle;\n      tEvent.x = e.touches[i].clientX;\n      tEvent.y = e.touches[i].clientY;\n      tEvent.force = e.touches[i].force;\n\n      tEvent.color = this.colorForTouch(e.touches[i]);\n      this.eventList.push(tEvent);\n    }\n  }\n  public deepCopy() {\n    // return\n  }\n  private colorForTouch(touch: Touch) {\n    const r = touch.identifier % 16;\n    const g = Math.floor(touch.identifier / 3) % 16;\n    const b = Math.floor(touch.identifier / 7) % 16;\n    const rs = r.toString(16); // make it a hex digit\n    const gs = g.toString(16); // make it a hex digit\n    const bs = b.toString(16); // make it a hex digit\n    const color = '#' + rs + gs + bs;\n    // console.log('color for touch with identifier ' + touch.identifier + ' = ' + color);\n    return color;\n  }\n}\nexport class TouchEventData {\n  public x = -1;\n  public y = -1;\n  public z = -1;\n  public preX = -1;\n  public preY = -1;\n  public preZ = -1;\n  public yGLPicking: number;\n  public TOUCH_TYPE: TouchType = TouchType.Move;\n  public identifier: number;\n  public radiusX: number;\n  public radiusY: number;\n  public rotationAngle: number;\n  public force: number;\n  public color: string;\n\n  constructor() {\n    //\n  }\n  public deepCopy() {\n    const mEvent = new TouchEventData();\n    mEvent.x = this.x;\n    mEvent.y = this.y;\n    mEvent.z = this.z;\n    mEvent.preX = this.preX;\n    mEvent.preY = this.preY;\n    mEvent.preZ = this.preZ;\n\n    mEvent.yGLPicking = this.yGLPicking;\n    mEvent.TOUCH_TYPE = this.TOUCH_TYPE;\n    // mEvent.command = this.command;\n    // mEvent.native = this.native;\n    return mEvent;\n  }\n}\n"],"names":["delimiter","EmitAction","constructor","ioWrapper","this","emitAction","data","model","app","getNumLayers","localizedString","AppCoreWrapper","accessibilityMode","appProperties","appControllerStatus","browserUtility","AppProperties","isStandalone","AppControllerStatus","BrowserUtility","initPost","Assets","theme","importAssets","async","svgPath","json","getObjectFromSVGImporting","getCanvaseShapePathFromSVGXML","ControllerWrapper","mouseEventController","m","implementations","addon","keyboardEventController","k","keyboardEventControllerFromDocument","touchEventController","t","KeyboardEventData","preEvent","key","hasAltKey","hasCtrlKey","hasShiftKey","hasMetaCommand","code","keyCode","PRESS_TYPE","KeyboardInteraction","type","EventListenerType","MouseEventDataPre","isUp","keyDown","bind","keyUp","init","document","addEventListener","destroy","removeEventListener","kEventData","commonEventBuilder","PressType","keyEventFromDocument","kEvent","ctrlKey","shiftKey","altKey","metaKey","keyEvent","keyboardEventData","controllerWrapper","MouseEventBase","mouseInteraction","frame","frameSkip","removeEvent","appendEvent","MouseEventNative","super","clickable","disableMoveEvent","mouseClick","e","mouseDoubleClick","mouseDown","mouseUp","mouseMove","div","modelViewWrapper","style","pointerEvents","MouseInteraction","mouseInteractionUI","mouseEventDataPre","isEnable","isEnableZoomByDoubleClickValue","click","prevent","delay","timer","down","mouseEvent","_stopPropagation","MouseEventData","initNativeMouseWheelEvent","onwheel","mouseWheel","deltaY","isInsideCropShape","mEvent","CLICK_TYPE","ClickType","isDown","mouseEvenEmitting","button","mouseDrag","buttons","v","wheel","appendDownEvent","appendUpEvent","onmouseup","isEnableZoomByDoubleClick","setTimeout","preX","x","preY","y","pressedShift","pressedAlt","pressedCtrl","offsetX","offsetY","preWheel","native","stopPropagation","mouseEventData","appCoreWrapper","mode","InteractionMode","mouseEventEmittingForViewController","mouseEventEmittingForModel","mouseInteractionMenu","imageAnnoApp","scene","paramsEditing","TouchEventBase","touchInteraction","TouchEventNative","ontouchstart","TouchType","ontouchend","ontouchmove","ontouchcancel","TouchInteraction","touchEventDataPre","touchEvent","TouchEventDataList","TOUCH_TYPE","build","touchEventData","EventInteraction","keyboardInteraction","StateProcessing","pushAction","IOWrapper","stateProcessing","eventInteraction","initEventInteraction","download","open","ModelViewWrapper","id","divHost","divNGraphicsHost","divWrapper","compileMode","CompileMode","divNgraphics","createElement","width","height","CONFIG","VERSION_APP","userSelect","zIndex","position","appendChild","getElementById","parentNode","removeDivImg","removeChild","childNodes","removeDiv","error","console","debug","ImageWrapper","imgAppended","dataFilter","img","imgString","imgCroppingParam","imgOriginal","imgOriginalString","imgOriginalCroppingParam","useModifiedImage","croppingDataTemp","undefined","projectionToImageSpace","updateEffecting","d","initImageByImg","dataCropping","colorCover","src","JSON","parse","param","isLoaded","updateDataCropping","updateImg","Image","onload","updateMaskForCroppingShape","append","ratio","graphicsCoreWrapper","scaleScreenByRatioImageSize","resizeCanvas","canvasWrapper","isActive","toCroppedImg","toModifiedImgCroppingParam","stringify","toOriginalImg","toOriginalImgCroppingParam","typePreset","filter","interpolation","blur","sepia","contrast","brightness","saturate","hueRotate","tint","aspectRatio","rotation","scale","shape","canvas","ctx","getContext","fillStyle","beginPath","rect","closePath","fill","maskOutContextByShape","UI","divUIWrapper","divSizeFrameBG","divWidth","divHeight","padding","themeUI","top","background","marginBottom","prepend","txt","textContent","fontSize","color","left","Layer0","Layer1","updateStyle","r","g","b","backgroundColor","colorFill","iconFill","divLayer0","margin","getBtnBySVGPath","api","onClickPlace","transform","paddingRight","onClickCancel","onClickBlackhole","onClickCropper","divLayer1","onclickActiveCommand","ActiveCommandMode","onClickUndo","onClickRedo","textAlign","setAttribute","oninput","Model","assets","imageWrapper","ui","resize","restart","pushTheme","DynamicImport","appImageEditing","then","AppImageEditing","catch","err","Addon","dynamicImport","visualizationJSAPI","visualizationMapJSAPIExternal","drawingBlock","mapfilter","mapticon","tourTool","quickCommander","smartCommander","smartDrawing","voiceController","_enablePan","enablePan","MouseEventController","KeyboardEventController","TouchEventController","Resize","initMapticon","initVisualizationJSAPI","initVisualizationExternalGLJSAPI","initDrawingBlock","initMapfilter","initQuickCommander","initSmartCommander","initSmartDrawing","initVoiceController","API","needRevertBaseImage","ac","activeCommandController","setActiveCommand","onClickDestroy","emitDataToExpressImageData","getAllGeometries","geometryCommon","gcmdSelecting","shiftEnvironment","environment","customization","themeRenderStyle","gcmdSupporting","renderForce","updateRPointPath","path","io","apiWrapper","shiftBlackholePos","onClickReset","undo","redo","onClickDownload","onClickCapture","onClickSetColor","undoNeeded","activeColorController","setActiveColor","setScaleGraphics","value","absolute","getCanvas","gcmdAProcessing","getDataGeometry","getScaleFactor","scaleGlobal","onClickRevertToOriginal","gcmdProcessing","resetGeometryList","captureScene","config","BASE_URL","PATH_ADDON","HAS_ANIMATION","LAB","AppImageDrawing","_id","dataDrawing","APP","Apps","PRODUCTION","INSPECTION","instanceID","needViewController","features","hasAnimation","isLab","interactionMode","rendererActive","initImplementations","renderer","RendererType","initAnnotationSVGInstance","initAnnotationCanvasInstance","acProperties","isActivateSnapping","initViewController","mapFilter","initLab","geometry","length","DumpByIGeometriesFromImageDataModel","setEnvironment","Implementations","initPostAppEnv","isScaleDynamicRender","optimizerTextleaderline","OptimizerTextleaderline","clustering","toggleClusteringPoint","toJson","geometries","saveDrawingGeometries","Array","from","reduce","obj","nodes","styles","Object","keys","pause","Pause","resume","bindActionEmitting","fn","initCropping","GeometryType","InputControllerStatus","clickLeft","clickMiddle","clickRight","clickDouble","currentControllerStatus","drawing","interactiveViewer","viewer","_mode","setAccessibility","accessibility","_type","_isMobile","detectBrowser","detectIsMoile","navigator","userAgent","indexOf","BrowserType","test","substr","isMobile","DouglasPeucker","vs","tolerance","arr","computeDouglasPeucker","push","p","returnPoints","ln","Line","maxDistance","maxDistanceIndex","i","distance","distanceToPoint","concat","slice","ls","p0","p1","Math","abs","sqrt","pow","sort","aa","bb","NumericalMotion","sin","easeInElastic","easeOutElastic2","PI","DownloadJSON","name","encode","blob","Blob","url","URL","createObjectURL","link","event","createEvent","initMouseEvent","window","dispatchEvent","s","out","charCodeAt","Uint8Array","dummy","getVecforGraphicApp","long","lat","ele","proX","proY","proZ","NVector3","AABBintersect2D","v0","v1","v0minX","v0maxX","v1minX","v1maxX","v0minY","v0maxY","v1minY","v1maxY","deepCopy","z","alt","isModified","parent","w","sub","origin","plus","v2","midVec","compareTwoVectors","normalize","len","getGeoArea","area","getDistance","getDistanceByNum","x0","y0","x1","y1","getDistanceByArray","getDistance2","getDotProduct","crossProduct","getDivideByNum","n","xOff","yOff","zOff","j","KMeterFromGPSPos","gV0","gV1","dLat","dLon","a","cos","atan2","get1KMLongByGeoUnit","addition","dis","get1KMLatByGeoUnit","get1KMLatLongGeoUnit","lng","la","getAngleByTwoVectorsRadian","acos","getCosAngleByTwoVectors","getAngleByTwoVectors","getRotationByWorldCoordinateByTwo","Sub","computeDotProducts","dot","computeDotProductsWithCenter","cp","getCenterVecFromVecs","getXYDimForCircle","xx","yy","distanceMouseWithTwoVecs","boundary","getBoundingVecs","vec","GetCloseVec","vecsBound","OnLine","pp1","unitize","Add","Mult","isInsideOfVecs","listOfVec","nv0","nv1","getBoundingByVecs","xMin","Number","MAX_SAFE_INTEGER","yMin","zMin","xMax","MIN_SAFE_INTEGER","yMax","zMax","getMinMaxVecFromVecs","minX","MAX_VALUE","minY","minZ","maxX","MIN_VALUE","maxY","maxZ","removeVecsWithinDis","tor","vecs","inside","xi","yi","xj","yj","isInsideOfTwoVecs","isInsideOfVecsByCrossing","h","checkBoundIntersection","checkLineIntersection","p2","p3","denominator","numerator1","numerator2","onLine0","onLine1","result","moveVecs","dir","temp","moveVec","rotateVecs","angle","RotateVec","nv","c","isInsideEllipse","cv","r0","r1","threshold","divByVal","preZ","yGLPicking","isDoubleClick","isMove","eventList","tType","touches","tEvent","TouchEventData","identifier","radiusX","radiusY","rotationAngle","clientX","clientY","force","colorForTouch","touch","floor","toString"],"sourceRoot":""}
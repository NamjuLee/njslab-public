{"version":3,"file":"static/js/58195.4b5e1425.chunk.js","mappings":"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","sources":["njslab/LabStarter/Starter-Mapbox/MapboxGLWrapper/index.ts","njslab/LabStarter/Starter-Mapbox/index.ts"],"sourcesContent":["import mapboxgl from 'mapbox-gl';\r\n\r\nexport class MapboxGLWrapper {\r\n    public map: mapboxgl.Map\r\n    constructor(id: string) {\r\n        this.initMap(id);\r\n    }\r\n    private initMap(id: string) {\r\n        // https://account.mapbox.com\r\n        // mapboxgl.accessToken = process.env.REACT_APP_MAPBOX;\r\n        mapboxgl.accessToken = process.env.REACT_APP_MAPBOX\r\n        this.map = new mapboxgl.Map({\r\n            container: id,\r\n            zoom: 15,\r\n            // minZoom: 10,\r\n            center: [-71.093161, 42.358871],\r\n            style: 'mapbox://styles/mapbox/dark-v10' // 'mapbox://styles/mapbox/streets-v11'\r\n        });\r\n        this.map.dragRotate.disable();\r\n\r\n        // https://docs.mapbox.com/mapbox-gl-js/api/events/#mapmouseevent#type\r\n        this.map.on('mousemove', (e) => { this.mouseMove(e); });\r\n        this.map.on('click', (e) => { this.mouseClick(e); });\r\n        this.map.on('mousedown', (e) => { this.mouseDown(e); });\r\n        this.map.on('dblclick', (e) => { this.mouseDClick(e); });\r\n        this.map.on('mouseup', (e) => { this.mouseUp(e); });\r\n\r\n        let div = document.getElementsByClassName('mapboxgl-canvas')[0] as HTMLDivElement;\r\n        div.style.position = 'absolute';\r\n        \r\n        div = document.getElementsByClassName('mapboxgl-control-container')[0] as HTMLDivElement;\r\n        div.style.display = 'none';\r\n\r\n    }\r\n    public center = (lng: number = -99.292649, lat: number = 39.043903) => {\r\n        // const v = new mapboxgl.LngLat(lon, lat);\r\n        // console.log(v);\r\n        this.map.setCenter({ lat, lng })\r\n    }\r\n    public toMap = (x: number, y: number) => {\r\n        const p = this.map.unproject({x, y} as any)\r\n        return [p.lng, p.lat];\r\n    }\r\n    public toScreen = (lon: number, lat: number) => {\r\n        const p = this.map.project([lon, lat])\r\n        return [p.x, p.y];\r\n    }\r\n    public mouseDown = (e) => {\r\n        // console.log(this.toScreen(-71.093161, 42.358871))\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseUp = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseMove = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseClick = (e) => {\r\n        // console.log(e)\r\n        \r\n        // console.log(this.toMap(100, 100));\r\n        // console.log(e.point)\r\n        // this.center()\r\n        // this.map.zoomTo(0)\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseDClick = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n}\r\n\r\n\r\n","import { MapboxGLWrapper } from './MapboxGLWrapper';\r\nimport { RendererCanvas } from '../../../lib'\r\n\r\nexport class Solution {\r\n    public divHost: HTMLDivElement;\r\n    public mapboxWrapper: MapboxGLWrapper;\r\n    public renderer: Renderer;\r\n    constructor(id: string) {\r\n        this.divHost = document.getElementById(id) as HTMLDivElement;\r\n        this.divHost.style.position = 'relative';\r\n\r\n        this.mapboxWrapper = new MapboxGLWrapper(this.divHost.id);\r\n        this.mapboxWrapper.mouseDown = this.mouseDown\r\n        this.mapboxWrapper.mouseUp = this.mouseUp\r\n        this.mapboxWrapper.mouseClick = this.mouseClick\r\n        this.mapboxWrapper.mouseMove = this.mouseMove\r\n\r\n        setTimeout(() => {\r\n            this.renderer = new Renderer(this.divHost, this);\r\n        }, 100);\r\n\r\n    }\r\n    public mouseDown = (e) => {\r\n        // TODO\r\n    }\r\n    public mouseUp = (e) => {\r\n        // TODO\r\n    }\r\n    public mouseDrag = (e) => {\r\n        // TODO\r\n    }\r\n    public mouseClick = (e) => {\r\n        // TODO\r\n        // console.log(e);\r\n        // console.log(e['lngLat']);\r\n        this.renderer.pts.push([e['lngLat']['lng'], e['lngLat']['lat']])\r\n    }\r\n    public mouseMove = (e)  =>{\r\n        // TODO\r\n    }\r\n    public keyDown(k: KeyboardEvent) {\r\n        // TODO\r\n    }\r\n    public destroy() {\r\n        this.renderer?.destroy();\r\n        while (this.divHost.lastElementChild) {\r\n            this.divHost.removeChild(this.divHost.lastElementChild);\r\n        }\r\n    }\r\n}\r\n\r\nexport class Renderer extends RendererCanvas {\r\n    public app: Solution\r\n    public time: number = 0.0;\r\n    public pts: number[][] = [];\r\n    constructor(div: any, app: Solution) {\r\n        super(div);\r\n        this.app = app;\r\n        this.canvas.id = 'mapboxCustom'\r\n        this.canvas.style.position = 'absolute';\r\n        this.canvas.style.width = '100%';\r\n        this.canvas.style.height = '100%';\r\n        this.canvas.style.pointerEvents = 'none';\r\n\r\n        // TODO\r\n        // You code goes here for one time operation\r\n        this.pts.push([-71.093161, 42.358871]);\r\n\r\n        this.start();\r\n    }\r\n    public mouseDown = (x: number, y: number): void => {\r\n\r\n    }\r\n    public mouseUp = (x: number, y: number): void => {\r\n\r\n    }\r\n    public mouseDrag = (x: number, y: number): void => {\r\n\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        this.time += 0.1;\r\n\r\n        for(let i = 0 ; i < this.pts.length; ++i) {\r\n            const pt = this.pts[i];\r\n            const p = this.app.mapboxWrapper.toScreen(pt[0], pt[1]);\r\n            // const p = this.app.mapboxWrapper.map.unproject({x: 10, y: 10})\r\n    \r\n            ctx.beginPath();\r\n            ctx.arc(p[0], p[1], Math.sin(this.time) * 3 + 15, 0, Math.PI * 2);\r\n            ctx.closePath();\r\n            ctx.fillStyle = '#0f0';\r\n            ctx.fill();\r\n        }\r\n\r\n    }\r\n}"],"names":["MapboxGLWrapper","constructor","id","map","center","lng","lat","setCenter","toMap","x","y","p","this","unproject","toScreen","lon","project","mouseDown","e","mouseUp","mouseMove","mouseClick","mouseDClick","initMap","mapboxgl","process","container","zoom","style","dragRotate","disable","on","div","document","getElementsByClassName","position","display","Solution","divHost","mapboxWrapper","renderer","mouseDrag","pts","push","getElementById","setTimeout","Renderer","keyDown","k","destroy","lastElementChild","removeChild","RendererCanvas","app","super","time","canvas","width","height","pointerEvents","start","render","ctx","i","length","pt","beginPath","arc","Math","sin","PI","closePath","fillStyle","fill"],"sourceRoot":""}
{"version":3,"file":"static/js/62228.b30bd690.chunk.js","mappings":"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","sources":["njslab/Project/Project_04_Water/P-1-water/Renderer/index.ts","njslab/Project/Project_04_Water/P-1-water/UI/index.ts","njslab/Project/Project_04_Water/P-1-water/Core/ActiveCommand.ts","njslab/Project/Project_04_Water/P-1-water/Core/Common.ts","njslab/Project/Project_04_Water/P-1-water/Core/Scene.ts","njslab/Project/Project_04_Water/P-1-water/Core/index.ts","njslab/Project/Project_04_Water/P-1-water/Project/Site/Agent/Agent.ts","njslab/Project/Project_04_Water/P-1-water/Project/Site/Agent/BoidContollerWander0.ts","njslab/Project/Project_04_Water/P-1-water/Project/Site/Boundary/index.ts","njslab/Project/Project_04_Water/P-1-water/Project/Site/index.ts","njslab/Project/Project_04_Water/P-1-water/Project/index.ts","njslab/Project/Project_04_Water/P-1-water/index.ts"],"sourcesContent":["import { WaterHyacinth } from '../';\r\nimport { RendererJSAPI, getFalseColor, distanceTo } from '../../../../../lib'\r\n\r\nexport class Renderer extends RendererJSAPI {\r\n    public app: WaterHyacinth;\r\n\r\n    colorArray: number[][] = [];\r\n    colorArray2: number[][] = [];\r\n\r\n\r\n    constructor(app: WaterHyacinth, id: any) {\r\n        super(id);\r\n        this.app = app;\r\n\r\n\r\n\r\n        this.colorArray = [];\r\n        for (let i = 0; i < 255; ++i) {\r\n            const result = getFalseColor(i / 255);\r\n            this.colorArray.push(result);\r\n        }\r\n\r\n        this.colorArray2 = [];\r\n\r\n    }\r\n    public initPost(): void {\r\n        this.app.initPost();\r\n    }\r\n    public init(){\r\n        this.zoom(3);\r\n        this.center(-98.292649, 39.043903)\r\n        this.start();\r\n    }\r\n\r\n    render(ctx: CanvasRenderingContext2D) {\r\n        ctx.globalCompositeOperation = 'screen'; //'lighten';\r\n\r\n        const xOff = ctx.canvas.width - 300;\r\n        const yOff = ctx.canvas.height - 50;\r\n        const w = 1;\r\n        const h = 10;\r\n        for (let i = 0; i < this.colorArray.length; ++i) {\r\n            ctx.beginPath();\r\n            ctx.rect(i * w + xOff, yOff, w, h)\r\n            ctx.closePath();\r\n            ctx.fillStyle = `rgba(${this.colorArray[i][0]}, ${this.colorArray[i][1]}, ${this.colorArray[i][2]}, 1)`;\r\n            ctx.fill();\r\n        }\r\n\r\n        this.app.core.scene.render(ctx);\r\n\r\n    }\r\n    keyDown(k: KeyboardEvent): void {\r\n        //     console.log('key pressed', k);\r\n    }\r\n    mouseDown(x: number, y: number): void {\r\n        this.app.core.activeCommand.mouseDown(x, y);\r\n    }\r\n    mouseUp(x: number, y: number): void {\r\n        this.app.core.activeCommand.mouseUp(x, y);\r\n    }\r\n    mouseClick(x: number, y: number): void {\r\n        this.app.core.activeCommand.mouseClick(x, y);\r\n    }\r\n    mouseMove(x: number, y: number) {\r\n        this.app.core.activeCommand.mouseMove(x, y);\r\n    }\r\n }","import { WaterHyacinth } from '../';\r\nexport class UI {\r\n    solution: WaterHyacinth;\r\n\r\n    constructor(solution: WaterHyacinth) {\r\n        this.solution = solution;\r\n\r\n        let container = document.createElement('div');\r\n        container.style.position = 'absolute';\r\n        container.style.width = '200px';\r\n        container.style.height = '100%';\r\n        container.style.padding = '10px';\r\n        container.style.background = 'rgba(40, 40, 40, 1)';\r\n        this.solution.renderer.hostDiv.append(container);\r\n\r\n        let title = document.createElement('div');\r\n        title.textContent = 'map'\r\n        container.appendChild(title);\r\n\r\n        let divContainer = document.createElement('div');\r\n        // divContainer.style.position = 'absolute';\r\n        container.appendChild(divContainer);\r\n\r\n        let div = document.createElement('div')\r\n        divContainer.appendChild(div);\r\n        div.textContent = 'tracing mode';\r\n        // div.style.position = 'absolute';\r\n        div.onclick = () => {\r\n            // this.solution.renderer.startCapture();\r\n        }\r\n\r\n        div = document.createElement('div')\r\n        divContainer.appendChild(div);\r\n        div.textContent = 'log';\r\n        // div.style.position = 'absolute';\r\n        div.onclick = () => {\r\n            // this.solution.renderer.endCapture();\r\n        }\r\n    }\r\n}","import { Core } from './';\r\n\r\nexport class ActiveCommand {\r\n    core: Core;\r\n    constructor(core: Core) {\r\n        this.core = core;\r\n    }\r\n    mouseDown(x: number, y: number) {\r\n\r\n    }\r\n    mouseUp(x: number, y: number) {\r\n        \r\n    }\r\n    mouseDrag(x: number, y: number) {\r\n        \r\n    }\r\n    mouseMove(x: number, y: number) {\r\n        this.core.common.checkHover(x, y);\r\n    }\r\n    mouseClick(x: number, y: number) {\r\n        if(this.core.scene.capture) {\r\n            this.core.scene.capture.click(x,y)\r\n            return \r\n        }\r\n\r\n\r\n        const site = this.core.common.getCloseSite(x, y);\r\n        if (site !== undefined) {\r\n            this.core.scene.capture = site;\r\n        }\r\n        // const mapProjected = this.toMap(x, y);\r\n        // // this.pts.push(mapProjected);\r\n        // if (this.ptsGeoTracing !== undefined) {\r\n        //     this.ptsGeoTracing.push(mapProjected[0], mapProjected[1])\r\n        // }\r\n\r\n        // if (this.app.siteFocused === undefined) {\r\n        //     const selSite = this.app.core.getCloseSite(x, y);\r\n\r\n        //     if (selSite) {\r\n        //         selSite.focus();\r\n        //         this.app.siteFocused = selSite;\r\n        //     }\r\n\r\n        // } else {\r\n        //     this.app.siteFocused.click(x, y);\r\n        // }\r\n    }\r\n}","import { distanceTo } from '../lib';\r\nimport { Core } from './';\r\nexport class Common {\r\n    core: Core;\r\n    constructor(core: Core) {\r\n        this.core = core;\r\n    }\r\n    public getCloseSite(x: number, y: number) {\r\n        for (let i = 0; i < this.core.app.project.sites.length; ++i) {\r\n            const site = this.core.app.project.sites[i];\r\n            const dis = distanceTo(site.vec.x, site.vec.y, 0, x, y, 0);\r\n            if (dis < site.r) {\r\n                // console.log(dis, site.r);\r\n                return site;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    public toScreen(lon: number, lat: number) {\r\n        return this.core.app.renderer.toScreen(lon, lat);\r\n    }\r\n    public toMap(x: number, y: number) {\r\n        return this.core.app.renderer.toMap(x, y);\r\n    }\r\n    get zoom() {\r\n        return this.core.app.renderer.mView.zoom;\r\n    }\r\n    set zoom(v) {\r\n        this.core.app.renderer.mView.zoom = v;\r\n    }\r\n    public center(lon: number, lat: number) {\r\n        return this.core.app.renderer.center(lon, lat);\r\n    }\r\n\r\n    public checkHover(x: number, y: number) {\r\n        this.core.app.project.sites.forEach((site) => {\r\n            site.isHover(x, y)\r\n        });\r\n    }\r\n}","\r\nimport { Core } from './';\r\nimport { Site } from '../Project/Site';\r\n\r\nexport class Scene {\r\n    public core: Core;\r\n    public scene: Scene;\r\n    private _capture: Site | undefined;\r\n    constructor(core: Core) {\r\n        this.core = core;\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // if (this._capture !== undefined) {\r\n        //     this._capture.render(ctx);\r\n        // } else {\r\n        this.core.app.project.sites.forEach((site) => {\r\n            site.renderDot(ctx);\r\n        });\r\n        // }\r\n\r\n        if (this._capture !== undefined) {\r\n            this._capture.render(ctx);\r\n        }\r\n    }\r\n    public set capture(v: Site | undefined) {\r\n        // console.trace();\r\n        if (this._capture !== undefined) {\r\n            this._capture.isActivated = false;\r\n        }\r\n\r\n        this._capture = v;\r\n        if (this._capture !== undefined) {\r\n            this._capture.isActivated = true;\r\n            this._capture.focus();\r\n        } \r\n        // console.log(this._capture)\r\n\r\n    }\r\n    public get capture(): Site | undefined {\r\n        return this._capture;\r\n    }\r\n}","\r\nimport { WaterHyacinth } from '../';\r\nimport { ActiveCommand } from './ActiveCommand'\r\nimport { Common } from './Common'\r\nimport { Scene } from './Scene'\r\n// import { ActiveCommand } from '../Core/ActiveCommand'\r\n\r\n\r\nexport class Core {\r\n    public app: WaterHyacinth;\r\n    public activeCommand: ActiveCommand;\r\n    public common: Common;\r\n    public scene: Scene;\r\n\r\n    constructor(app: WaterHyacinth) {\r\n        this.app = app;\r\n        this.activeCommand = new ActiveCommand(this);\r\n        this.common = new Common(this);\r\n        this.scene = new Scene(this);\r\n    }\r\n\r\n}","// import { MathUtility, NVector3 } from '../../../../../../lib/NJSCore';\r\n\r\nimport { Vector3, isInsideOfVecs } from '../../../lib';\r\n// import { Vector3, MathUtility } from '../../../../../lib';\r\nimport { BoidContollerWander0 } from './BoidContollerWander0';\r\nexport class Boid {\r\n\r\n    static list: Boid[] = [];\r\n    BoidContollerWander0: BoidContollerWander0;\r\n    maxForce = 0.0001; // 1; // 5;\r\n    maxVelocity = 0.0001; // 1; // 8;\r\n    maxSpeed = 0.0001; // 1; // 13.0;\r\n    mass = 10;\r\n\r\n    isRenderable = true;\r\n\r\n    p: Vector3;\r\n\r\n    targets: Vector3[];\r\n    target: Vector3;\r\n    targetID = 0;\r\n\r\n    col: boolean = false;\r\n    desiredVelocity: Vector3;\r\n    steering: Vector3;\r\n    velocity: Vector3 = new Vector3(0, 0, 0);\r\n\r\n    // .......................\r\n    wanderAngle: number = 0;\r\n    CIRCLE_DISTANCE = 50;\r\n    CIRCLE_RADIUS = 50;\r\n    ANGLE_CHANGE = 15;\r\n\r\n    t: number = 0.0;\r\n\r\n    MAX_QUEUE_AHEAD = 15;\r\n    MAX_QUEUE_RADIUS = 10;\r\n    trajectory: Vector3[] = [];\r\n    timerTrajectory = 0.0;\r\n\r\n    scaleBounding = 0.0;\r\n    boundary: Vector3[];\r\n\r\n    constructor(BoidContollerWander0: BoidContollerWander0, p: Vector3, boundary: Vector3[]) {\r\n        this.BoidContollerWander0 = BoidContollerWander0;\r\n        Boid.list.push(this);\r\n        this.p = p;\r\n\r\n        if (boundary) {\r\n            this.boundary = boundary;\r\n        }\r\n        this.UpdateTarget();\r\n    }\r\n    public Update() {\r\n        // this.UpdateVec0();\r\n        this.UpdateVec1();\r\n        // this.UpdateVecSlowDown1();\r\n        // this.UpdateVecSlowDown2();\r\n\r\n    }\r\n    public UpdateTarget() {\r\n        \r\n\r\n            this.target = this.BoidContollerWander0.site.boundary.getRandomSpot();\r\n    }\r\n    public UpdateVec1() {\r\n        this.desiredVelocity = new Vector3(this.target.x - this.p.x, this.target.y - this.p.y, this.target.z - this.p.z);\r\n        this.desiredVelocity.unitize();\r\n        this.desiredVelocity.x *= this.maxVelocity;\r\n        this.desiredVelocity.y *= this.maxVelocity;\r\n        this.desiredVelocity.z *= this.maxVelocity;\r\n\r\n        let x = (this.desiredVelocity.x - this.velocity.x) < this.maxForce ? this.desiredVelocity.x - this.velocity.x : this.maxForce;\r\n        let y = (this.desiredVelocity.y - this.velocity.y) < this.maxForce ? this.desiredVelocity.y - this.velocity.y : this.maxForce;\r\n        let z = (this.desiredVelocity.z - this.velocity.z) < this.maxForce ? this.desiredVelocity.z - this.velocity.z : this.maxForce;\r\n\r\n        this.steering = new Vector3(x / this.mass, y / this.mass, z / this.mass);\r\n\r\n        this.velocity.x = (this.velocity.x + this.steering.x) < this.maxSpeed ? this.velocity.x + this.steering.x : this.maxSpeed;\r\n        this.velocity.y = (this.velocity.y + this.steering.y) < this.maxSpeed ? this.velocity.y + this.steering.y : this.maxSpeed;\r\n        this.velocity.z = (this.velocity.z + this.steering.z) < this.maxSpeed ? this.velocity.z + this.steering.z : this.maxSpeed;\r\n\r\n        this.Queue();\r\n\r\n        this.p.x += this.velocity.x;\r\n        this.p.y += this.velocity.y;\r\n        this.p.z += this.velocity.z;\r\n        this.t += 0.01;\r\n        if (this.t > 3) {\r\n            this.t = 0.0;\r\n            this.UpdateTarget();\r\n        }\r\n    }\r\n    public UpdateVec0() {\r\n        // this.desiredVelocity = new Vector3(this.target.x - this.p.x, this.target.y - this.p.y, this.target.z - this.p.z);\r\n        // this.desiredVelocity.Unitize();\r\n        // this.desiredVelocity.x *= this.maxVelocity;\r\n        // this.desiredVelocity.y *= this.maxVelocity;\r\n        // this.desiredVelocity.z *= this.maxVelocity;\r\n\r\n        // let x = (this.desiredVelocity.x - this.velocity.x) < this.maxForce ? this.desiredVelocity.x - this.velocity.x : this.maxForce;\r\n        // let y = (this.desiredVelocity.y - this.velocity.y) < this.maxForce ? this.desiredVelocity.y - this.velocity.y : this.maxForce;\r\n        // let z = (this.desiredVelocity.z - this.velocity.z) < this.maxForce ? this.desiredVelocity.z - this.velocity.z : this.maxForce;\r\n\r\n        // this.steering = ;\r\n\r\n        this.steering = this.Wander(new Vector3(this.velocity.x, this.velocity.y, this.velocity.z));\r\n\r\n        this.steering.x = this.steering.x < this.maxForce ? this.steering.x : this.maxForce;\r\n        this.steering.y = this.steering.y < this.maxForce ? this.steering.y : this.maxForce;\r\n        this.steering.z = this.steering.z < this.maxForce ? this.steering.z : this.maxForce;\r\n\r\n        this.steering.x /= this.mass;\r\n        this.steering.y /= this.mass;\r\n        this.steering.z /= this.mass;\r\n\r\n        if (this.velocity.x + this.steering.x < this.maxSpeed) {\r\n            this.velocity.x = this.velocity.x + this.steering.x;\r\n        } else {\r\n            this.velocity.x = this.maxSpeed;\r\n        }\r\n        if (this.velocity.y + this.steering.y < this.maxSpeed) {\r\n            this.velocity.y = this.velocity.y + this.steering.y;\r\n        } else {\r\n            this.velocity.y = this.maxSpeed;\r\n        }\r\n        if (this.velocity.z + this.steering.z < this.maxSpeed) {\r\n            this.velocity.z = this.velocity.z + this.steering.z;\r\n        } else {\r\n            this.velocity.z = this.maxSpeed;\r\n        }\r\n        // this.velocity.x = this.velocity.x + this.steering.x < this.maxSpeed ? this.velocity.x + this.steering.x : this.maxSpeed;\r\n        // this.velocity.y = this.velocity.y + this.steering.y < this.maxSpeed ? this.velocity.y + this.steering.y : this.maxSpeed;\r\n        // this.velocity.z = this.velocity.z + this.steering.z < this.maxSpeed ? this.velocity.z + this.steering.z : this.maxSpeed;\r\n\r\n        // steering = wander()\r\n        // steering = truncate (steering, max_force)\r\n        // steering = steering / mass\r\n        // velocity = truncate (velocity + steering , max_speed)\r\n        // position = position + velocity\r\n        this.Queue();\r\n\r\n        console.log(this.maxSpeed);\r\n\r\n        this.p.x += this.velocity.x;\r\n        this.p.y += this.velocity.y;\r\n        this.p.z += this.velocity.z;\r\n\r\n    }\r\n    public Wander(velocity: Vector3) {\r\n        // Calculate the circle center\r\n        let circleCenter = new Vector3(velocity.x, velocity.y, velocity.z);\r\n        circleCenter.normalize();\r\n        circleCenter.scale(this.CIRCLE_DISTANCE);\r\n        //\r\n        // Calculate the displacement force\r\n        let displacement = new Vector3(0, -1);\r\n        displacement.scale(this.CIRCLE_RADIUS);\r\n        //\r\n        // Randomly change the vector direction\r\n        // by making it change its current angle\r\n        displacement = this.setAngle(displacement, this.wanderAngle);\r\n        //\r\n        // Change wanderAngle just a bit, so it\r\n        // won't have the same value in the\r\n        // next game frame.\r\n        this.wanderAngle += Math.random() * this.ANGLE_CHANGE - this.ANGLE_CHANGE * .5;\r\n        //\r\n        // Finally calculate and return the wander force\r\n        var wanderForce: Vector3;\r\n        wanderForce = circleCenter.add(displacement);\r\n        return wanderForce;\r\n    }\r\n    public setAngle(v: Vector3, value: number) {\r\n        let len: number = v.length();\r\n        v.x = Math.cos(value) * len;\r\n        v.y = Math.sin(value) * len;\r\n        return v;\r\n    }\r\n    public GetNeighborAhead() {\r\n        // var i:int;\r\n        var ret: Boid | undefined = undefined;\r\n        var qa: Vector3 = this.velocity.clone();\r\n\r\n        qa.normalize();\r\n        qa.scale(this.MAX_QUEUE_AHEAD);\r\n\r\n        let ahead = this.p.clone().add(qa);\r\n\r\n        for (let i = 0; i < Boid.list.length; i++) {\r\n            let neighbor: Boid = Boid.list[i];\r\n            let d = Vector3.distanceTo(ahead, neighbor.p);\r\n            if (neighbor !== this && d <= this.MAX_QUEUE_RADIUS) {\r\n                ret = neighbor;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    }\r\n    public Queue() {\r\n        var neighbor = this.GetNeighborAhead();\r\n\r\n        if (neighbor !== undefined) {\r\n            this.velocity.scale(0.3);\r\n        }\r\n\r\n        return new Vector3(0, 0);\r\n    }\r\n\r\n    // .......................................................................................................................\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        // this.RenderDesiredVelocity(ctx);\r\n        // this.RenderCurrentVelocity(ctx);\r\n        this.RenderCircle(ctx);\r\n    }\r\n    public RenderDesiredVelocity(ctx: CanvasRenderingContext2D) {\r\n        // let scale = 20;\r\n        // ctx.lineWidth = 0.5;\r\n        // ctx.strokeStyle = '#00ff00';\r\n        // ctx.beginPath();\r\n        // ctx.moveTo(this.p.x, this.p.y);\r\n        // ctx.lineTo(this.p.x + this.desiredVelocity.x * scale, this.p.y + this.desiredVelocity.y * scale);\r\n        // ctx.closePath();\r\n        // ctx.stroke();\r\n    }\r\n    public RenderCurrentVelocity(ctx: CanvasRenderingContext2D) {\r\n        // let scale = 20;\r\n        // ctx.lineWidth = 0.5;\r\n        // ctx.strokeStyle = '#ff0000';\r\n        // ctx.beginPath();\r\n        // ctx.moveTo(this.p.x, this.p.y);\r\n        // ctx.lineTo(this.p.x + this.velocity.x * scale, this.p.y + this.velocity.y * scale);\r\n        // ctx.closePath();\r\n        // ctx.stroke();\r\n    }\r\n    public RenderCircle(ctx: CanvasRenderingContext2D) {\r\n        // console.log(this.p)\r\n\r\n        const vec = this.BoidContollerWander0.site.project.app.core.common.toScreen(this.p.x, this.p.y);\r\n        // console.log(vec)\r\n\r\n        this.t += 0.05\r\n        this.timerTrajectory += 1;\r\n        if (this.timerTrajectory % 5 === 0) {\r\n            if (this.trajectory.length > 30) {\r\n                this.trajectory.shift();\r\n            }\r\n            this.trajectory.push(new Vector3(this.p.x, this.p.y));\r\n\r\n            this.timerTrajectory = 0;\r\n        }\r\n        for (let i = 0; i < this.trajectory.length; ++i) {\r\n            ctx.fillStyle = 'rgba(100, 100, 100 ,0.1)';\r\n            ctx.beginPath();\r\n            ctx.arc(this.trajectory[i].x, this.trajectory[i].y, (i) * 0.2, 0, 3.14 * 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n\r\n        ctx.strokeStyle = '#000000';\r\n        ctx.lineWidth = 0.5;\r\n        // ctx.beginPath();\r\n        // ctx.moveTo(this.targets[0].x , this.targets[0].y);\r\n        // for (let i = 1 ; i < this.targets.length; ++i) {\r\n        //   ctx.lineTo(this.targets[i].x , this.targets[i].y);\r\n        // }\r\n        // ctx.closePath();\r\n        // ctx.stroke();\r\n\r\n        // const target = this.BoidContollerWander0.site.project.app.core.common.toScreen(this.target.x, this.target.y);\r\n\r\n        // ctx.beginPath();\r\n        // ctx.moveTo(vec[0], vec[1]);\r\n        // ctx.lineTo(target[0], target[1]);\r\n        // ctx.stroke();\r\n  \r\n        // ctx.fillStyle = '#000000';\r\n        // ctx.beginPath();\r\n        // ctx.arc(this.target.x, this.target.y, 2.5, 0, 3.14 * 2);\r\n        // ctx.closePath();\r\n        // ctx.fill();\r\n\r\n\r\n\r\n        ctx.fillStyle = '#000000';\r\n        ctx.beginPath();\r\n        ctx.arc(this.target.x, this.target.y, 2.5, 0, 3.14 * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n\r\n\r\n        ctx.fillStyle = '#fff';\r\n        ctx.beginPath();\r\n        ctx.arc(vec[0], vec[1], 2.5, 0, 3.14 * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.beginPath();\r\n        ctx.arc(vec[0], vec[1], 10 + Math.sin(this.t) * 5, 0, 3.14 * 2);\r\n        ctx.closePath();\r\n        // ctx.fill();\r\n        ctx.stroke();\r\n\r\n        // animation\r\n        ctx.lineWidth = 0.5;\r\n        ctx.strokeStyle = `rgba(${255}, ${255}, ${0}, ${1 - this.scaleBounding * 0.07})`;\r\n        ctx.fillStyle = `rgba(${255}, ${255}, ${0}, ${1 - this.scaleBounding * 0.07})`;\r\n        ctx.beginPath();\r\n        ctx.arc(vec[0], vec[1], this.scaleBounding, 0, 3.14 * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.stroke();\r\n        this.scaleBounding += 0.2;\r\n        if (1 - this.scaleBounding * 0.07 < 0) {\r\n            this.scaleBounding = 0;\r\n        }\r\n\r\n\r\n    }\r\n}\r\n","// import { MathUtility, NVector3 } from '../../../../../../lib/NJSCore';\r\n\r\nimport { Vector3, isInsideOfVecs } from '../../../lib';\r\n// import { Vector3, MathUtility } from '../../../../../lib';\r\nimport { Boid } from './Agent';\r\nimport { Site } from '../';\r\n\r\nexport class BoidContollerWander0 {\r\n  site: Site;\r\n  boids: Boid[] = [];\r\n\r\n  vsBoundary: Vector3[];\r\n\r\n  constructor(site: Site) {\r\n    this.site = site;\r\n    this.boids = [];\r\n    this.vsBoundary = site.boundary.vsBoundary;\r\n\r\n  }\r\n  public AddAgent(x: number, y: number) {\r\n    const geoPos = this.site.project.app.core.common.toMap(x, y);\r\n    console.log(geoPos)\r\n    let boid = new Boid(this, new Vector3(geoPos[0], geoPos[1]), this.vsBoundary);\r\n    this.boids.push(boid);\r\n  }\r\n  public Update() {\r\n    for (let b of this.boids) {\r\n      b.Update();\r\n    }\r\n\r\n  }\r\n  public GetPoint() {\r\n    let pts: Vector3[] = [];\r\n    for (let b of this.boids) {\r\n      if (b.isRenderable) {\r\n        pts.push(b.p);\r\n      }\r\n    }\r\n    return pts;\r\n  }\r\n\r\n  // .......................................................................................................................\r\n\r\n  public Render(ctx: CanvasRenderingContext2D) {\r\n    // console.log(this.boids)\r\n    this.boids.forEach((b) => { b.Render(ctx); });\r\n\r\n\r\n\r\n    ctx.beginPath()\r\n    ctx.moveTo(this.vsBoundary[0].x, this.vsBoundary[0].y)\r\n    for (let i = 1; i < this.vsBoundary.length; ++i) {\r\n      ctx.lineTo(this.vsBoundary[i].x, this.vsBoundary[i].y)\r\n    }\r\n    ctx.stroke();\r\n  }\r\n}\r\n\r\n","\r\nimport { remap, Vector3, isInsideOfVecs } from '../../../lib';\r\n// import { MathUtility, NVector3 } from '../../../../../lib/NJSCore';\r\n\r\nimport { Site } from '../'\r\n\r\nexport class Boundary {\r\n    site: Site;\r\n    lon: number;\r\n    lat: number;\r\n\r\n    vsBoundary: Vector3[] = [];\r\n\r\n    pMin: Vector3 = new Vector3(180, 90, 0);\r\n    pMax: Vector3 = new Vector3(-180, -90, 0);\r\n    pCenter: Vector3 = new Vector3(0, 0, 0);\r\n\r\n    constructor(site: Site, boundary: number[]) {\r\n        this.site = site;\r\n\r\n        for (let i = 0; i < boundary.length; i += 2) {\r\n\r\n            this.pCenter.x += boundary[i];\r\n            this.pCenter.y += boundary[i+1];\r\n\r\n            if (boundary[i] < this.pMin.x) { this.pMin.x = boundary[i]; }\r\n            if (boundary[i + 1] < this.pMin.y) { this.pMin.y = boundary[i + 1]; }\r\n\r\n            if (boundary[i] > this.pMax.x) { this.pMax.x = boundary[i]; }\r\n            if (boundary[i + 1] > this.pMax.y) { this.pMax.y = boundary[i + 1]; }\r\n\r\n            this.vsBoundary.push(new Vector3(boundary[i], boundary[i + 1], 0))\r\n        }\r\n\r\n        this.pCenter.x /= boundary.length * 0.2\r\n        this.pCenter.y /= boundary.length * 0.2\r\n\r\n    }\r\n    getRandomSpot() {\r\n        let x = remap(Math.random(), 0, 1, this.pMin.x, this.pMax.x);\r\n        let y = remap(Math.random(), 0, 1, this.pMin.y, this.pMax.y);\r\n        let vec = new Vector3(x, y);\r\n        let i = 0\r\n        while (!isInsideOfVecs(vec, this.vsBoundary)) {\r\n            vec.x = remap(Math.random(), 0, 1, this.pMin.x, this.pMax.x);\r\n            vec.y = remap(Math.random(), 0, 1, this.pMin.y, this.pMax.y);\r\n            if (i++ > 1000) {\r\n                break\r\n            }\r\n        }\r\n        // console.trace();\r\n        return vec;\r\n    }\r\n    render(ctx: CanvasRenderingContext2D) {\r\n\r\n        let pos = this.site.project.app.core.common.toScreen(this.vsBoundary[0].x, this.vsBoundary[0].y)\r\n        ctx.moveTo(pos[0], pos[1])\r\n        for (let i = 1; i < this.vsBoundary.length; i += 1) {\r\n            pos = this.site.project.app.core.common.toScreen(this.vsBoundary[i].x, this.vsBoundary[i].y)\r\n            ctx.lineTo(pos[0], pos[1])\r\n        }\r\n        ctx.lineWidth = 2;\r\n        ctx.strokeStyle = '#000000';\r\n        ctx.stroke();\r\n    }\r\n}","import { Project } from '../';\r\nimport { distanceTo, Vector3, isInsideOfVecs, remap, renderPoint } from '../../lib';\r\nimport { BoidContollerWander0 } from './Agent/BoidContollerWander0';\r\n// import { MathUtility, NVector3 } from '../../../../../lib/NJSCore';\r\n\r\nimport { Boundary } from './Boundary';\r\n\r\nclass Properties {\r\n    probability: number = 0.0;\r\n    lon: number;\r\n    lat: number;\r\n    zoom: number;\r\n    name: string;\r\n}\r\n\r\nexport class Site {\r\n    project: Project;\r\n\r\n    properties: Properties;\r\n\r\n    vec: Vector3 = new Vector3(0, 0, 0);\r\n    r: number = 15;\r\n\r\n    boundary: Boundary;\r\n    // boundary: Vector3[] = [];\r\n\r\n    pMin: Vector3 = new Vector3(180, 90, 0);\r\n    pMax: Vector3 = new Vector3(-180, -90, 0);\r\n\r\n    BoidContollerWander0: BoidContollerWander0;\r\n    needAgent = false;\r\n\r\n    isActivated = false;\r\n\r\n    hover: boolean = false;\r\n\r\n    constructor(solution: Project, properties) {\r\n        this.project = solution;\r\n\r\n        this.properties = new Properties();\r\n        this.properties.lon = properties.loc[0];\r\n        this.properties.lat = properties.loc[1];\r\n        this.properties.zoom = properties.zoom;\r\n        this.properties.name = properties.name;\r\n        this.properties.probability = properties.probability;\r\n\r\n        this.r = 15;\r\n\r\n        this.boundary = new Boundary(this, properties.boundary);\r\n\r\n\r\n    }\r\n    initAgent() {\r\n        this.BoidContollerWander0 = new BoidContollerWander0(this)\r\n        this.needAgent = true;\r\n    }\r\n    focus() {\r\n        this.project.app.core.common.center(this.properties.lon, this.properties.lat);\r\n        this.project.app.core.common.zoom = this.properties.zoom;\r\n    }\r\n    blur() {\r\n\r\n    }\r\n    click(x: number, y: number) {\r\n        console.log(x, y)\r\n\r\n        if (this.BoidContollerWander0 === undefined) {\r\n            this.initAgent();\r\n            this.BoidContollerWander0.AddAgent(this.vec.x, this.vec.y)\r\n        }\r\n\r\n        // const dis = distanceTo(x, y, 0, this.sx, this.sy, 0);\r\n        // if (dis < this.r) {\r\n        //     this.isActivate = true;\r\n        //     this.focus();\r\n        // this.initAgent();\r\n        // } else {\r\n        //     this.isActivate = false;\r\n        // }\r\n\r\n\r\n        // if(!this.isActivate) { return; }\r\n\r\n\r\n        // console.log(dis, this.r)\r\n\r\n        if (this.BoidContollerWander0 && this.needAgent) {\r\n            // let pos = this.project.app.core.common.toMap(x, y)\r\n            // console.log(pos)\r\n            this.BoidContollerWander0.AddAgent(x, y)\r\n        }\r\n\r\n        // console.log(this.getRandomSpot())\r\n    }\r\n    public isHover(x: number, y: number) {\r\n        if (distanceTo(x, y, 0, this.vec.x, this.vec.y, 0) < this.r) {\r\n            this.hover = true;\r\n        } else {\r\n            this.hover = false;\r\n        }\r\n    }\r\n    public renderDot(ctx: CanvasRenderingContext2D) {\r\n        let pos = this.project.app.core.common.toScreen(this.properties.lon, this.properties.lat);\r\n        this.vec.x = pos[0];\r\n        this.vec.y = pos[1];\r\n\r\n        if (this.project.app.core.common.zoom < this.properties.zoom - 2) {\r\n            let col = '#ff0000'\r\n            if (this.properties.probability < 0.3) {\r\n                col = '#00ff00'\r\n            }\r\n\r\n            let t = 1;\r\n            ctx.fillStyle = col;\r\n            ctx.beginPath();\r\n            ctx.arc(this.vec.x, this.vec.y, (Math.sin(t * 0.8) + 4) * 2, 0, Math.PI * 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n\r\n            if (this.hover) {\r\n                ctx.lineWidth = 3\r\n                ctx.strokeStyle = '#ffffff';\r\n                ctx.stroke();\r\n            }\r\n        }\r\n\r\n\r\n        if (this.project.app.core.common.zoom < this.properties.zoom - 2) {\r\n            if (this.project.app.core.scene.capture === this) {\r\n                this.project.app.core.scene.capture = undefined;\r\n            }\r\n        }\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // console.log(this.isActivated)\r\n        if (!this.isActivated) { return; }\r\n        // if (this.project.app.core.common.zoom < this.properties.zoom - 2) {\r\n        //     let col = '#ff0000'\r\n        //     if (this.properties.probability < 0.3) {\r\n        //         col = '#00ff00'\r\n        //     }\r\n\r\n        //     let t = 1;\r\n        //     ctx.fillStyle = col;\r\n        //     ctx.beginPath();\r\n        //     ctx.arc(this.vec.x, this.vec.y, (Math.sin(t * 0.8) + 4) * 2, 0, Math.PI * 2);\r\n        //     ctx.closePath();\r\n        //     ctx.fill();\r\n\r\n        //     if (this.hover) {\r\n        //         ctx.lineWidth = 3\r\n        //         ctx.strokeStyle = '#ffffff';\r\n        //         ctx.stroke();\r\n        //     }\r\n\r\n        //     if (this.project.app.core.scene.capture === this){\r\n        //         this.project.app.core.scene.capture = undefined;\r\n        //     }\r\n\r\n        // }\r\n\r\n        // console.log(this.project.app.core.common.getZoomLevel())\r\n\r\n        // if(!this.isActivate) { return; }\r\n\r\n        // if (this.needAgent === false) {\r\n        //     this.initAgent();\r\n        // }\r\n\r\n        if (this.project.app.core.common.zoom >= this.properties.zoom - 2) {\r\n            ctx.beginPath();\r\n            let pos = this.project.app.core.common.toScreen(this.boundary.vsBoundary[0].x, this.boundary.vsBoundary[0].y)\r\n            ctx.moveTo(pos[0], pos[1])\r\n            for (let i = 1; i < this.boundary.vsBoundary.length; i += 1) {\r\n                pos = this.project.app.core.common.toScreen(this.boundary.vsBoundary[i].x, this.boundary.vsBoundary[i].y)\r\n                ctx.lineTo(pos[0], pos[1])\r\n            }\r\n            ctx.lineWidth = 2;\r\n            ctx.strokeStyle = '#000000';\r\n            ctx.stroke();\r\n\r\n        }\r\n        // console.log(this.BoidContollerWander0)\r\n        if (this.BoidContollerWander0) {\r\n            this.BoidContollerWander0.Update();\r\n            this.BoidContollerWander0.Render(ctx);\r\n        }\r\n    }\r\n}","import { WaterHyacinth  } from '../';\r\nimport { Site } from './Site';\r\n\r\nexport class Project {\r\n    rawSiteData: any\r\n    app: WaterHyacinth;\r\n    sites: Site[] = [];\r\n    constructor(app: WaterHyacinth, siteData: any) {\r\n        this.app = app;\r\n        this.initSite(siteData)\r\n    }\r\n    public initSite(siteData: any) {\r\n        this.rawSiteData = siteData;\r\n        for (let i = 0; i < siteData.length; ++i) {\r\n            const siteObj = new Site(this, siteData[i]);\r\n            this.sites.push(siteObj);\r\n        }\r\n    }\r\n}","import MapView from '@arcgis/core/views/MapView';\r\nimport Map from '@arcgis/core/Map';\r\nimport Zoom from '@arcgis/core/widgets/Zoom';\r\n\r\nimport { Renderer } from './Renderer';\r\nimport { UI } from './UI';\r\nimport { Core } from './Core';\r\nimport { Project } from './Project';\r\n// import { PARAM } from 'App';\r\n\r\nconst PARAM = undefined;\r\n\r\nconst siteData = [\r\n  {\r\n    name: 'Fresh Pond, MA',\r\n    loc: [-71.149732, 42.384607],\r\n    zoom: 15,\r\n    boundary: [\r\n      -71.1471427741205, 42.38369829310599, -71.1454147151241, 42.3832249146333,\r\n      -71.14483106749, 42.3832249146333, -71.144361859028, 42.3833770728034,\r\n      -71.1441215328383, 42.383732105164675, -71.14404142410845,\r\n      42.383918074064034, -71.14333189076628, 42.38393498100385,\r\n      -71.14304578890791, 42.38390962107612, -71.14250791563302,\r\n      42.38439990023337, -71.14218748071345, 42.38483100457135,\r\n      -71.14194715583345, 42.385515693014376, -71.1419242679991,\r\n      42.38611584616517, -71.14195859975062, 42.38675825758481,\r\n      -71.14258802305322, 42.38719779779073, -71.14291990319965,\r\n      42.38732458778373, -71.14453352040498, 42.386800521078975,\r\n      -71.14480817834618, 42.386682182643234, -71.1458152574639,\r\n      42.386614560234314, -71.14628446723574, 42.38642014715624,\r\n      -71.14731443549749, 42.386310260185624, -71.1480583005912,\r\n      42.386825879355264, -71.14865339345197, 42.38736685138028,\r\n      -71.14920271064405, 42.38786555599473, -71.14972913869208,\r\n      42.38809377527334, -71.15045011595143, 42.38839806619294,\r\n      -71.150770550871, 42.38855866418817, -71.15119398235481,\r\n      42.38851640139403, -71.15201795748807, 42.38808532284766,\r\n      -71.152601605122, 42.387831745678575, -71.1531280344797,\r\n      42.38768805126903, -71.15357435379786, 42.38762888291559,\r\n      -71.15443266068266, 42.38764578837241, -71.15494764481353,\r\n      42.387510546041405, -71.15566862272772, 42.38729077717622,\r\n      -71.15596616784842, 42.38674135140531, -71.15580595169831,\r\n      42.38591297834076, -71.15579450647148, 42.38537199330331,\r\n      -71.15533674389097, 42.38487326936299, -71.15510786096365,\r\n      42.38474647441903, -71.15506208529494, 42.38436608756697,\r\n      -71.15518797034836, 42.38398569889383, -71.1550048643994,\r\n      42.383698293105994, -71.15437543978712, 42.38314883589375,\r\n      -71.15383756651222, 42.382548654862966, -71.15368879427928,\r\n      42.382109081622424, -71.15355146596352, 42.381661052013705,\r\n      -71.152897722045, 42.38158391447455, -71.15219963196516, 42.3816473151721,\r\n      -71.1516159836764, 42.38149092663678, -71.1510380566914,\r\n      42.38128804386745, -71.15056884888406, 42.38108515995885,\r\n      -71.1502713024538, 42.380882275394804, -71.15031135681876,\r\n      42.38053990659923, -71.1502713024538, 42.380205989424546,\r\n      -71.15002525430553, 42.37991856585079, -71.14973915179233,\r\n      42.37980021492652, -71.1489151773139, 42.379817122007765,\r\n      -71.1484173590588, 42.380003102503316, -71.1477135476752,\r\n      42.38003691703571, -71.14716995244171, 42.380015782773704,\r\n      -71.14683807425982, 42.380176401728896, -71.14592826974774,\r\n      42.380844234617186, -71.14588249276937, 42.381038665446106,\r\n      -71.14597976737502, 42.3811739212357, -71.14702690151253,\r\n      42.381672675046346, -71.14758194000835, 42.381985450580224,\r\n      -71.14785087664579, 42.38231935829161, -71.14782798881144,\r\n      42.382619450861974, -71.14754188629824, 42.383080153525164,\r\n      -71.14754188629824, 42.383342202953166, -71.14743888907917,\r\n      42.38349858687732, -71.14730156010857, 42.38364651714675,\r\n      -71.1471427741205, 42.38369829310599,\r\n    ],\r\n    probability: 0.8,\r\n  },\r\n  {\r\n    name: 'Lake, Atkinson County',\r\n    loc: [-82.716073, 31.205917], // 31.205917,-82.716073\r\n    zoom: 18,\r\n    boundary: [1, 18],\r\n    probability: 0.2,\r\n  },\r\n];\r\n\r\nexport class WaterHyacinth {\r\n  public core: Core;\r\n  public renderer: Renderer;\r\n  public ui: UI;\r\n  public project: Project;\r\n  constructor(id: string) {\r\n    if (PARAM['demo'] === true) {\r\n      this.init(id);\r\n    }\r\n  }\r\n  private init(id: string) {\r\n    // const map = new Map({\r\n    //     basemap: 'dark-gray-vector' // topo, dark-gray-vector, streets, streets-night-vector\r\n    // });\r\n    // const view = new MapView({\r\n    //     container: id,\r\n    //     map,\r\n    //     zoom: 15,\r\n    //     center: [-71.0933575, 42.3591654],\r\n    //     ui: { components: [] } // do display any widgets\r\n    // });\r\n    // view.when(() => {\r\n    //     view.ui.add({\r\n    //         component: new Zoom({ view }),\r\n    //         position: 'top-right'\r\n    //     })\r\n    //     // param.view = view;\r\n    //     // this.app = new ControllerLabs(param);\r\n\r\n    //     console.log(view)\r\n    // })\r\n\r\n    this.renderer = new Renderer(this, id);\r\n  }\r\n  initPost() {\r\n    this.core = new Core(this);\r\n    this.project = new Project(this, siteData);\r\n    this.ui = new UI(this);\r\n    this.renderer.init();\r\n  }\r\n  public destroy() {\r\n    if (this.renderer) {\r\n      this.renderer.destroy();\r\n    }\r\n    // while (this.divHost.lastElementChild) {\r\n    //     this.divHost.removeChild(this.divHost.lastElementChild);\r\n    // }\r\n  }\r\n}\r\n\r\nexport class Solution {\r\n  public divHost: HTMLElement;\r\n\r\n  constructor(id: string) {\r\n      this.divHost = document.getElementById(id) as HTMLDivElement;\r\n\r\n      new WaterHyacinth(id)\r\n  }\r\n  public destroy() {\r\n      if (this.divHost) {\r\n          try {\r\n              while (this.divHost.firstChild) {\r\n                  this.divHost.removeChild(this.divHost.firstChild);\r\n              }\r\n          } catch (error) {\r\n              console.error('Error in destroy method:', error);\r\n          }\r\n      } else {\r\n          console.warn('divHost is undefined in destroy method');\r\n      }\r\n  }\r\n}"],"names":["Renderer","RendererJSAPI","constructor","app","id","super","colorArray","colorArray2","this","i","result","getFalseColor","push","initPost","init","zoom","center","start","render","ctx","globalCompositeOperation","xOff","canvas","width","yOff","height","length","beginPath","rect","closePath","fillStyle","fill","core","scene","keyDown","k","mouseDown","x","y","activeCommand","mouseUp","mouseClick","mouseMove","UI","solution","container","document","createElement","style","position","padding","background","renderer","hostDiv","append","title","textContent","appendChild","divContainer","div","onclick","ActiveCommand","mouseDrag","common","checkHover","capture","click","site","getCloseSite","undefined","Common","project","sites","distanceTo","vec","r","toScreen","lon","lat","toMap","mView","v","forEach","isHover","Scene","_capture","renderDot","isActivated","focus","Core","Boid","BoidContollerWander0","p","boundary","maxForce","maxVelocity","maxSpeed","mass","isRenderable","targets","target","targetID","col","desiredVelocity","steering","velocity","Vector3","wanderAngle","CIRCLE_DISTANCE","CIRCLE_RADIUS","ANGLE_CHANGE","t","MAX_QUEUE_AHEAD","MAX_QUEUE_RADIUS","trajectory","timerTrajectory","scaleBounding","list","UpdateTarget","Update","UpdateVec1","getRandomSpot","z","unitize","Queue","UpdateVec0","Wander","console","log","circleCenter","normalize","scale","displacement","setAngle","Math","random","add","value","len","cos","sin","GetNeighborAhead","ret","qa","clone","ahead","neighbor","d","Render","RenderCircle","RenderDesiredVelocity","RenderCurrentVelocity","shift","arc","strokeStyle","lineWidth","stroke","boids","vsBoundary","AddAgent","geoPos","boid","b","GetPoint","pts","moveTo","lineTo","Boundary","pMin","pMax","pCenter","remap","isInsideOfVecs","pos","Properties","probability","name","Site","properties","needAgent","hover","loc","initAgent","blur","PI","Project","siteData","rawSiteData","initSite","siteObj","WaterHyacinth","ui","destroy","Solution","divHost","getElementById","firstChild","removeChild","error","warn"],"sourceRoot":""}
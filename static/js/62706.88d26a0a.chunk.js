/*! For license information please see 62706.88d26a0a.chunk.js.LICENSE.txt */
(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[62706],{4097:(t,e,i)=>{var n;!function(r,s,o,a){"use strict";var c,l=["","webkit","Moz","MS","ms","o"],h=s.createElement("div"),u="function",d=Math.round,p=Math.abs,f=Date.now;function _(t,e,i){return setTimeout(A(t,i),e)}function g(t,e,i){return!!Array.isArray(t)&&(E(t,i[e],i),!0)}function E(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function m(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,n,i),t.apply(this,arguments)}}c="function"!==typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var v=m((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===a)&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),T=m((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function R(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&c(n,i)}function A(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return typeof t==u?t.apply(e&&e[0]||a,e):t}function S(t,e){return t===a?e:t}function w(t,e,i){E(P(e),(function(e){t.addEventListener(e,i,!1)}))}function y(t,e,i){E(P(e),(function(e){t.removeEventListener(e,i,!1)}))}function M(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function P(t){return t.trim().split(/\s+/g)}function I(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function L(t){return Array.prototype.slice.call(t,0)}function O(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];I(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function N(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<l.length;){if((n=(i=l[s])?i+r:e)in t)return n;s++}return a}var D=1;function F(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var x="ontouchstart"in r,B=N(r,"PointerEvent")!==a,U=x&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),k="touch",G="mouse",Z=25,V=1,W=2,j=4,H=8,z=1,X=2,Y=4,K=8,q=16,Q=X|Y,J=K|q,$=Q|J,tt=["x","y"],et=["clientX","clientY"];function it(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&i.handler(e)},this.init()}function nt(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&V&&n-r===0,o=e&(j|H)&&n-r===0;i.isFirst=!!s,i.isFinal=!!o,s&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=rt(e));r>1&&!i.firstMultiple?i.firstMultiple=rt(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,c=o?o.center:s.center,l=e.center=st(n);e.timeStamp=f(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=lt(c,l),e.distance=ct(c,l),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==V&&s.eventType!==j||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=at(e.deltaX,e.deltaY);var h=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=p(h.x)>p(h.y)?h.x:h.y,e.scale=o?(u=o.pointers,d=n,ct(d[0],d[1],et)/ct(u[0],u[1],et)):1,e.rotation=o?function(t,e){return lt(e[1],e[0],et)+lt(t[1],t[0],et)}(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,s,o=t.lastInterval||e,c=e.timeStamp-o.timeStamp;if(e.eventType!=H&&(c>Z||o.velocity===a)){var l=e.deltaX-o.deltaX,h=e.deltaY-o.deltaY,u=ot(c,l,h);n=u.x,r=u.y,i=p(u.x)>p(u.y)?u.x:u.y,s=at(l,h),t.lastInterval=e}else i=o.velocity,n=o.velocityX,r=o.velocityY,s=o.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=s}(i,e);var u,d;var _=t.element;M(e.srcEvent.target,_)&&(_=e.srcEvent.target);e.target=_}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function rt(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:d(t.pointers[i].clientX),clientY:d(t.pointers[i].clientY)},i++;return{timeStamp:f(),pointers:e,center:st(e),deltaX:t.deltaX,deltaY:t.deltaY}}function st(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:d(i/e),y:d(n/e)}}function ot(t,e,i){return{x:e/t||0,y:i/t||0}}function at(t,e){return t===e?z:p(t)>=p(e)?t<0?X:Y:e<0?K:q}function ct(t,e,i){i||(i=tt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function lt(t,e,i){i||(i=tt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}it.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(F(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(F(this.element),this.evWin,this.domHandler)}};var ht={mousedown:V,mousemove:W,mouseup:j},ut="mousedown",dt="mousemove mouseup";function pt(){this.evEl=ut,this.evWin=dt,this.pressed=!1,it.apply(this,arguments)}R(pt,it,{handler:function(t){var e=ht[t.type];e&V&&0===t.button&&(this.pressed=!0),e&W&&1!==t.which&&(e=j),this.pressed&&(e&j&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:G,srcEvent:t}))}});var ft={pointerdown:V,pointermove:W,pointerup:j,pointercancel:H,pointerout:H},_t={2:k,3:"pen",4:G,5:"kinect"},gt="pointerdown",Et="pointermove pointerup pointercancel";function mt(){this.evEl=gt,this.evWin=Et,it.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(gt="MSPointerDown",Et="MSPointerMove MSPointerUp MSPointerCancel"),R(mt,it,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ft[n],s=_t[t.pointerType]||t.pointerType,o=s==k,a=I(e,t.pointerId,"pointerId");r&V&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(j|H)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:V,touchmove:W,touchend:j,touchcancel:H},Tt="touchstart",Rt="touchstart touchmove touchend touchcancel";function At(){this.evTarget=Tt,this.evWin=Rt,this.started=!1,it.apply(this,arguments)}function bt(t,e){var i=L(t.touches),n=L(t.changedTouches);return e&(j|H)&&(i=O(i.concat(n),"identifier",!0)),[i,n]}R(At,it,{handler:function(t){var e=vt[t.type];if(e===V&&(this.started=!0),this.started){var i=bt.call(this,t,e);e&(j|H)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:k,srcEvent:t})}}});var St={touchstart:V,touchmove:W,touchend:j,touchcancel:H},wt="touchstart touchmove touchend touchcancel";function yt(){this.evTarget=wt,this.targetIds={},it.apply(this,arguments)}function Mt(t,e){var i=L(t.touches),n=this.targetIds;if(e&(V|W)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=L(t.changedTouches),a=[],c=this.target;if(s=i.filter((function(t){return M(t.target,c)})),e===V)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(j|H)&&delete n[o[r].identifier],r++;return a.length?[O(s.concat(a),"identifier",!0),a]:void 0}R(yt,it,{handler:function(t){var e=St[t.type],i=Mt.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:k,srcEvent:t})}});var Ct=2500,Pt=25;function It(){it.apply(this,arguments);var t=A(this.handler,this);this.touch=new yt(this.manager,t),this.mouse=new pt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Lt(t,e){t&V?(this.primaryTouch=e.changedPointers[0].identifier,Ot.call(this,e)):t&(j|H)&&Ot.call(this,e)}function Ot(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),Ct)}}function Nt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=Pt&&o<=Pt)return!0}return!1}R(It,it,{handler:function(t,e,i){var n=i.pointerType==k,r=i.pointerType==G;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)Lt.call(this,e,i);else if(r&&Nt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Dt=N(h.style,"touchAction"),Ft=Dt!==a,xt="compute",Bt="auto",Ut="manipulation",kt="none",Gt="pan-x",Zt="pan-y",Vt=function(){if(!Ft)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||r.CSS.supports("touch-action",i)})),t}();function Wt(t,e){this.manager=t,this.set(e)}Wt.prototype={set:function(t){t==xt&&(t=this.compute()),Ft&&this.manager.element.style&&Vt[t]&&(this.manager.element.style[Dt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return E(this.manager.recognizers,(function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(C(t,kt))return kt;var e=C(t,Gt),i=C(t,Zt);if(e&&i)return kt;if(e||i)return e?Gt:Zt;if(C(t,Ut))return Ut;return Bt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=C(n,kt)&&!Vt[kt],s=C(n,Zt)&&!Vt[Zt],o=C(n,Gt)&&!Vt[Gt];if(r){var a=1===t.pointers.length,c=t.distance<2,l=t.deltaTime<250;if(a&&c&&l)return}if(!o||!s)return r||s&&i&Q||o&&i&J?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var jt=1,Ht=2,zt=4,Xt=8,Yt=Xt,Kt=16,qt=32;function Qt(t){this.options=c({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=jt,this.simultaneous={},this.requireFail=[]}function Jt(t){return t&Kt?"cancel":t&Xt?"end":t&zt?"move":t&Ht?"start":""}function $t(t){return t==q?"down":t==K?"up":t==X?"left":t==Y?"right":""}function te(t,e){var i=e.manager;return i?i.get(t):t}function ee(){Qt.apply(this,arguments)}function ie(){ee.apply(this,arguments),this.pX=null,this.pY=null}function ne(){ee.apply(this,arguments)}function re(){Qt.apply(this,arguments),this._timer=null,this._input=null}function se(){ee.apply(this,arguments)}function oe(){ee.apply(this,arguments)}function ae(){Qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ce(t,e){return(e=e||{}).recognizers=S(e.recognizers,ce.defaults.preset),new le(t,e)}Qt.prototype={defaults:{},set:function(t){return c(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=te(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=te(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===I(e,t=te(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=te(t,this);var e=I(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Xt&&n(e.options.event+Jt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Xt&&n(e.options.event+Jt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=qt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(qt|jt)))return!1;t++}return!0},recognize:function(t){var e=c({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=qt);this.state&(Yt|Kt|qt)&&(this.state=jt),this.state=this.process(e),this.state&(Ht|zt|Xt|Kt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},R(ee,Qt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Ht|zt),r=this.attrTest(t);return n&&(i&H||!r)?e|Kt:n||r?i&j?e|Xt:e&Ht?e|zt:Ht:qt}}),R(ie,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:$},getTouchAction:function(){var t=this.options.direction,e=[];return t&Q&&e.push(Zt),t&J&&e.push(Gt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&Q?(r=0===s?z:s<0?X:Y,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?z:o<0?K:q,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return ee.prototype.attrTest.call(this,t)&&(this.state&Ht||!(this.state&Ht)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=$t(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),R(ne,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ht)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),R(re,Qt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Bt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(j|H)&&!r)this.reset();else if(t.eventType&V)this.reset(),this._timer=_((function(){this.state=Yt,this.tryEmit()}),e.time,this);else if(t.eventType&j)return Yt;return qt},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Yt&&(t&&t.eventType&j?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),R(se,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ht)}}),R(oe,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Q|J,pointers:1},getTouchAction:function(){return ie.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Q|J)?e=t.overallVelocity:i&Q?e=t.overallVelocityX:i&J&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&t.eventType&j},emit:function(t){var e=$t(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),R(ae,Qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ut]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&V&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=j)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||ct(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=_((function(){this.state=Yt,this.tryEmit()}),e.interval,this),Ht):Yt}return qt},failTimeout:function(){return this._timer=_((function(){this.state=qt}),this.options.interval,this),qt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Yt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ce.VERSION="2.0.7",ce.defaults={domEvents:!1,touchAction:xt,enable:!0,inputTarget:null,inputClass:null,preset:[[se,{enable:!1}],[ne,{enable:!1},["rotate"]],[oe,{direction:Q}],[ie,{direction:Q},["swipe"]],[ae],[ae,{event:"doubletap",taps:2},["tap"]],[re]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function le(t,e){var i;this.options=c({},ce.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(B?mt:U?yt:x?It:pt))(i,nt),this.touchAction=new Wt(this,this.options.touchAction),he(this,!0),E(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function he(t,e){var i,n=t.element;n.style&&(E(t.options.cssProps,(function(r,s){i=N(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}le.prototype={set:function(t){return c(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Yt)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Ht|zt|Xt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof Qt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=I(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return E(P(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return E(P(t),(function(t){e?i[t]&&i[t].splice(I(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=s.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&he(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(ce,{INPUT_START:V,INPUT_MOVE:W,INPUT_END:j,INPUT_CANCEL:H,STATE_POSSIBLE:jt,STATE_BEGAN:Ht,STATE_CHANGED:zt,STATE_ENDED:Xt,STATE_RECOGNIZED:Yt,STATE_CANCELLED:Kt,STATE_FAILED:qt,DIRECTION_NONE:z,DIRECTION_LEFT:X,DIRECTION_RIGHT:Y,DIRECTION_UP:K,DIRECTION_DOWN:q,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:J,DIRECTION_ALL:$,Manager:le,Input:it,TouchAction:Wt,TouchInput:yt,MouseInput:pt,PointerEventInput:mt,TouchMouseInput:It,SingleTouchInput:At,Recognizer:Qt,AttrRecognizer:ee,Tap:ae,Pan:ie,Swipe:oe,Pinch:ne,Rotate:se,Press:re,on:w,off:y,each:E,merge:T,extend:v,assign:c,inherit:R,bindFn:A,prefixed:N}),("undefined"!==typeof r?r:"undefined"!==typeof self?self:{}).Hammer=ce,(n=function(){return ce}.call(e,i,e,t))===a||(t.exports=n)}(window,document)},5578:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o,z:()=>s});var n=i(95674);let r={};function s(t){r=t}function o(t,e,i,s){n.Z.level>0&&r[t]&&r[t].call(null,e,i,s)}},6955:(t,e,i)=>{"use strict";i.d(e,{Df:()=>r,FP:()=>a,iI:()=>o,zG:()=>s});var n=i(95674);const r={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(r,"IDENTITY",{get:()=>(n.Z.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const s={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},o={common:0,meters:1,pixels:2},a={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},62835:(t,e,i)=>{"use strict";i.d(e,{Z:()=>Ms});var n=i(18489),r=i(39827);let s=1,o=1;class a{constructor(){(0,r.Z)(this,"time",0),(0,r.Z)(this,"channels",new Map),(0,r.Z)(this,"animations",new Map),(0,r.Z)(this,"playing",!1),(0,r.Z)(this,"lastEngineTime",-1)}addChannel(t){const{delay:e=0,duration:i=Number.POSITIVE_INFINITY,rate:n=1,repeat:r=1}=t,o=s++,a={time:0,delay:e,duration:i,rate:n,repeat:r};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(t){this.channels.delete(t);for(const[e,i]of this.animations)i.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const n of e)this._setChannelTime(n,this.time);const i=this.animations.values();for(const n of i){const{animation:t,channel:e}=n;t.setTime(this.getTime(e))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const i=o++;return this.animations.set(i,{animation:t,channel:e}),t.setTime(this.getTime(e)),i}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const i=e-t.delay;i>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,i)%t.duration,t.time*=t.rate)}}var c=i(15572),l=i(35485);const h=[l.Z],u=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function d(){const t=c.q.getDefaultShaderAssembler();for(const e of h)t.addDefaultModule(e);for(const e of u)t.addShaderHook(e);return t}var p=i(23029),f=i(95674),_=i(5578),g=i(22612);function E(){let t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class m{constructor(t,e){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=t,this.type=e,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=E(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(E()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class v{constructor(t){this.stats={},this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t of Object.values(this.stats))t.reset();return this}forEach(t){for(const e of Object.values(this.stats))t(e)}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){const{name:e,type:i}=t;let n=this.stats[e];return n||(n=t instanceof m?t:new m(e,i),this.stats[e]=n),n}}var T=i(82903);class R{constructor(t,e,i){this._loadCount=0,this._subscribers=new Set,this.id=t,this.context=i,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const i=++this._loadCount;let n=t;"string"===typeof t&&(n=(0,T.z)(t)),n instanceof Promise?(this.isLoaded=!1,this._loader=n.then((t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const r of this._subscribers)r.onChange(this.getData())}}class A{constructor(t){var e;this.protocol=t.protocol||"resource://",this._context={device:t.device,gl:null===(e=t.device)||void 0===e?void 0:e.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add(t){let{resourceId:e,data:i,forceUpdate:n=!1,persistent:r=!0}=t,s=this._resources[e];s?s.setData(i,n):(s=new R(e,i,this._context),this._resources[e]=s),s.persistent=r}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe(t){let{consumerId:e}=t;const i=this._consumers[e];if(i){for(const t in i){const e=i[t],n=this._resources[e.resourceId];n&&n.unsubscribe(e)}delete this._consumers[e],this.prune()}}subscribe(t){let{resourceId:e,onChange:i,consumerId:n,requestId:r="default"}=t;const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(n,r,a,i),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,i,n){const r=this._consumers,s=r[t]=r[t]||{};let o=s[e];const a=o&&o.resourceId&&this._resources[o.resourceId];a&&(a.unsubscribe(o),this.prune()),i&&(o?(o.onChange=n,o.resourceId=i.id):o={onChange:n,resourceId:i.id},s[e]=o,i.subscribe(o))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}var b=i(55108);class S{constructor(t,e){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=t=>{(0,_.Z)("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)};const{deck:i,stats:n,viewport:r,timeline:s}=e||{};this.layers=[],this.resourceManager=new A({device:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:t,gl:null===t||void 0===t?void 0:t.gl,deck:i,shaderAssembler:d(),defaultShaderModules:[],renderPass:void 0,stats:n||new v({id:"deck.gl"}),viewport:r||new b.Z({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new a,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const n=i.getNeedsRedraw(t);e=e||n}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers(){let{layerIds:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){(0,_.Z)("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const i=(0,g.x)(t,Boolean);for(const n of i)n.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}addDefaultShaderModule(t){const{defaultShaderModules:e}=this.context;e.find((e=>e.name===t.name))||(e.push(t),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(t){const{defaultShaderModules:e}=this.context,i=e.findIndex((e=>e.name===t.name));i>=0&&(e.splice(i,1),this._defaultShaderModulesChanged=!0)}_handleError(t,e,i){i.raiseError(e,"".concat(t," of ").concat(i))}_updateLayers(t,e){const i={};for(const s of t)i[s.id]?f.Z.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;if(this._defaultShaderModulesChanged){for(const e of t)e.setNeedsUpdate(),e.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const n=[];this._updateSublayersRecursively(e,i,n),this._finalizeOldLayers(i);let r=!1;for(const s of n)if(s.hasUniformTransition()){r="Uniform transition in ".concat(s);break}this._needsUpdate=r,this.layers=n}_updateSublayersRecursively(t,e,i){for(const r of t){r.context=this.context;const t=e[r.id];null===t&&f.Z.warn("Multiple new layers with same id ".concat(r.id))(),e[r.id]=null;let s=null;try{this._debug&&t!==r&&r.validateProps(),t?(this._transferLayerState(t,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(n){this._handleError("matching",n,r)}s&&this._updateSublayersRecursively(s,e,i)}}_finalizeOldLayers(t){for(const e in t){const i=t[e];i&&this._finalizeLayer(i)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=p.dt.INITIALIZED}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=p.dt.MATCHED,e!==t&&(t.lifecycle=p.dt.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=p.dt.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=p.dt.FINALIZED}catch(e){this._handleError("finalization",e,t)}}}var w=i(70898);class y{constructor(t){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"===typeof t?this.getView(t):t,i=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(i):i}getViewport(t){return this._viewportMap[t]}unproject(t,e){const i=this.getViewports(),n={x:t[0],y:t[1]};for(let r=i.length-1;r>=0;--r){const s=i[r];if(s.containsPixel(n)){const i=t.slice();return i[0]-=s.x,i[1]-=s.y,s.unproject(i,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=(0,g.x)(t,Boolean);this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){!(0,w.v)(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else f.Z.warn("missing `viewState` or `initialViewState`")()}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var i;return null===(i=this.getView(t.id))||void 0===i?void 0:i.makeViewport({viewState:e,width:this.width,height:this.height})}})}_updateController(t,e,i,r){const s=t.controller;if(s&&i){const o=(0,n.Z)((0,n.Z)((0,n.Z)({},e),s),{},{id:t.id,x:i.x,y:i.y,width:i.width,height:i.height});return r&&r.constructor===s.type||(r=this._createController(t,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let n=t.length;n--;){const r=t[n],s=this.getViewState(r),o=r.makeViewport({viewState:s,width:this.width,height:this.height});let a=e[r.id];const c=Boolean(r.controller);c&&!a&&(i=!0),!i&&c||!a||(a.finalize(),a=null),this.controllers[r.id]=this._updateController(r,s,o,a),o&&this._viewports.unshift(o)}for(const n in e){const t=e[n];t&&!this.controllers[n]&&t.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((i,n)=>!t[n].equals(e[n])))}}var M=i(2518);const C=[255,255,255],P=1;let I=0;class L{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="ambient";const{color:e=C}=t,{intensity:i=P}=t;this.id=t.id||"ambient-".concat(I++),this.color=e,this.intensity=i}}var O=i(90227);const N=[255,255,255],D=1,F=[0,0,-1];let x=0;class B{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="directional";const{color:e=N}=t,{intensity:i=D}=t,{direction:n=F}=t,{_shadow:r=!1}=t;this.id=t.id||"directional-".concat(x++),this.color=e,this.intensity=i,this.type="directional",this.direction=new O.P(n).normalize().toArray(),this.shadow=r}getProjectedLight(t){return this}}var U=i(60669);class k{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};const{id:i}=e;this.id=i,this.device=t,this.props=(0,n.Z)({},e)}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class G extends k{constructor(){super(...arguments),this._lastRenderIndex=-1}render(t){var e,i,n;const[r,s]=this.device.canvasContext.getDrawingBufferSize(),o=null===(e=t.clearCanvas)||void 0===e||e,a=null!==(i=t.clearColor)&&void 0!==i?i:!!o&&[0,0,0,0],c=!!o&&1,l=!!o&&0,h=null!==(n=t.colorMask)&&void 0!==n?n:15,u={viewport:[0,0,r,s]};t.colorMask&&(u.colorMask=h),t.scissorRect&&(u.scissorRect=t.scissorRect);const d=this.device.beginRenderPass({framebuffer:t.target,parameters:u,clearColor:a,clearDepth:c,clearStencil:l});try{return this._drawLayers(d,t)}finally{d.end()}}_drawLayers(t,e){const{target:i,moduleParameters:n,viewports:r,views:s,onViewportActive:o,clearStack:a=!0}=e;e.pass=e.pass||"unknown",a&&(this._lastRenderIndex=-1);const c=[];for(const l of r){const r=s&&s[l.id];null===o||void 0===o||o(l);const a=this._getDrawLayerParams(l,e),h=l.subViewports||[l];for(const s of h){const o=this._drawLayersInViewport(t,{target:i,moduleParameters:n,viewport:s,view:r,pass:e.pass,layers:e.layers},a);c.push(o)}}return c}_getDrawLayerParams(t,e){let{layers:i,pass:r,isPicking:s=!1,layerFilter:o,cullRect:a,effects:c,moduleParameters:l}=e,h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=[],d=Z(this._lastRenderIndex+1),p={layer:i[0],viewport:t,isPicking:s,renderPass:r,cullRect:a},f={};for(let g=0;g<i.length;g++){const e=i[g],s=this._shouldDrawLayer(e,p,o,f),a={shouldDrawLayer:s};var _;if(s&&!h)a.layerRenderIndex=d(e,s),a.moduleParameters=this._getModuleParameters(e,c,r,l),a.layerParameters=(0,n.Z)((0,n.Z)({},null===(_=e.context.deck)||void 0===_?void 0:_.props.parameters),this.getLayerParameters(e,g,t));u[g]=a}return u}_drawLayersInViewport(t,e,i){let{layers:n,moduleParameters:r,pass:s,target:o,viewport:a,view:c}=e;const l=function(t,e){let{moduleParameters:i,target:n,viewport:r}=e;const s=i&&i.devicePixelRatio||t.canvasContext.cssToDeviceRatio(),[,o]=t.canvasContext.getDrawingBufferSize(),a=n?n.height:o,c=r;return[c.x*s,a-(c.y+c.height)*s,c.width*s,c.height*s]}(this.device,{moduleParameters:r,target:o,viewport:a});if(c&&c.props.clear){const t=!0===c.props.clear?{color:!0,depth:!0}:c.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:l},(()=>this.device.clearWebGL(t)))}const h={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};t.setParameters({viewport:l});for(let d=0;d<n.length;d++){const e=n[d],{shouldDrawLayer:r,layerRenderIndex:o,moduleParameters:c,layerParameters:l}=i[d];if(r&&e.props.pickable&&h.pickableCount++,e.isComposite)h.compositeCount++;else if(r){h.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,o),c.viewport=a,e.context.renderPass=t;try{e._drawLayer({renderPass:t,moduleParameters:c,uniforms:{layerIndex:o},parameters:l})}catch(u){e.raiseError(u,"drawing ".concat(e," to ").concat(s))}}}return h}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,i){return t.props.parameters}_shouldDrawLayer(t,e,i,n){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let r=t.parent;for(;r;){if(!r.props.visible||!r.filterSubLayer(e))return!1;e.layer=r,r=r.parent}if(i){const t=e.layer.id;if(t in n||(n[t]=i(e)),!n[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,i,n){var r;const s=this.device.canvasContext.cssToDeviceRatio(),o=Object.assign(Object.create((null===(r=t.internalState)||void 0===r?void 0:r.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,picking:{isActive:0},devicePixelRatio:s});if(e)for(const c of e){var a;Object.assign(o,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,t))}return Object.assign(o,this.getModuleParameters(t,e),n)}}function Z(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={},n=(r,s)=>{const o=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&n(r.parent,!1),c in i){const t=i[c]=i[c]||Z(e[c],e);l=t(r,s),i[a]=t}else Number.isFinite(o)?(l=o+(e[c]||0),i[a]=null):l=t;return s&&l>=t&&(t=l+1),e[a]=l,l};return n}class V extends G{constructor(t,e){super(t,e),this.shadowMap=t.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=t.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=t.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(t){const e=this.fbo,i=this.device.canvasContext.cssToDeviceRatio(),r=t.viewports[0],s=r.width*i,o=r.height*i;s===e.width&&o===e.height||e.resize({width:s,height:o}),super.render((0,n.Z)((0,n.Z)({},t),{},{clearColor:[1,1,1,1],target:e,pass:"shadow"}))}getLayerParameters(t,e,i){return(0,n.Z)((0,n.Z)({},t.props.parameters),{},{blend:!1,depthRange:[0,1],depthTest:!0})}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}var W=i(6955),j=i(96926),H=i(91960);const z=(0,j.Z)((function(t){let{viewport:e,center:i}=t;return new U.y(e.viewProjectionMatrix).invert().transform(i)})),X=(0,j.Z)((function(t){let{viewport:e,shadowMatrices:i}=t;const n=[],r=e.pixelUnprojectionMatrix,s=e.isGeospatial?void 0:1,o=[[0,0,s],[e.width,0,s],[0,e.height,s],[e.width,e.height,s],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((t=>function(t,e){const[i,n,r]=t,s=(0,H.CT)([i,n,r],e);if(Number.isFinite(r))return s;return[s[0],s[1],0]}(t,r)));for(const a of i){const t=a.clone().translate(new O.P(e.center).negate()),i=o.map((e=>t.transform(e))),r=(new U.y).ortho({left:Math.min(...i.map((t=>t[0]))),right:Math.max(...i.map((t=>t[0]))),bottom:Math.min(...i.map((t=>t[1]))),top:Math.max(...i.map((t=>t[1]))),near:Math.min(...i.map((t=>-t[2]))),far:Math.max(...i.map((t=>-t[2])))});n.push(r.multiplyRight(a))}return n})),Y=[0,0,0,1],K=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const q={name:"shadow",dependencies:[l.Z],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nout vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nin vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:i=!0}=t;if(!i||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const n={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Y,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=z({viewport:t.viewport,center:e.project_uCenter}),s=[],o=X({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const i=o[a],n=i.clone().translate(new O.P(t.viewport.center).negate());e.project_uCoordinateSystem===W.Df.LNGLAT&&e.project_uProjectionMode===W.zG.WEB_MERCATOR?(o[a]=n,s[a]=r):(o[a]=i.clone().multiplyRight(K),s[a]=n.transform(r))}for(let a=0;a<o.length;a++)n["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],n["shadow_uProjectCenters[".concat(a,"]")]=s[a];for(let a=0;a<2;a++)n["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps[a]||t.dummyShadowMap;return n}(t,e):{}}},Q={color:[255,255,255],intensity:1},J=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],$=[0,0,0,200/255];class tt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id="lighting-effect",this.shadowColor=$,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(t)}setup(t){this.context=t;const{device:e,deck:i}=t;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(e),i._addDefaultShaderModule(q),this.dummyShadowMap=e.createTexture({width:1,height:1}))}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const i=t[e];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow)),this.context&&this.setup(this.context),this.props=t}preRender(t){let{layers:e,layerFilter:i,viewports:n,onViewportActive:r,views:s}=t;if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:e,layerFilter:i,viewports:n,onViewportActive:r,views:s,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(t){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,t.deck._removeDefaultShaderModule(q))}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const i=(new U.y).lookAt({eye:new O.P(e.direction).negate()});t.push(i)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const i=new V(t);this.shadowPasses[e]=i,this.shadowMaps[e]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:i}=this;t||0!==e.length||0!==i.length||(this.ambientLight=new L(Q),this.directionalLights.push(new B(J[0]),new B(J[1])))}}const et=new tt;class it{constructor(t){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=t,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const e=this._defaultEffects;if(!e.find((e=>e.id===t.id))){const i=e.findIndex((e=>function(t,e){var i,n;return(null!==(i=t.order)&&void 0!==i?i:1/0)-(null!==(n=e.order)&&void 0!==n?n:1/0)}(e,t)>0));i<0?e.push(t):e.splice(i,0,t),t.setup(this._context),this._setEffects(this.effects)}}setProps(t){"effects"in t&&((0,w.v)(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){const e={};for(const n of this.effects)e[n.id]=n;const i=[];for(const n of t){const t=e[n.id];let r=n;t&&t!==n?t.setProps?(t.setProps(n.props),r=t):t.cleanup(this._context):t||n.setup(this._context),i.push(r),delete e[n.id]}for(const n in e)e[n].cleanup(this._context);this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),t.some((t=>t instanceof tt))||this._resolvedEffects.push(et),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class nt extends G{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}const rt={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class st extends G{constructor(){super(...arguments),this._colorEncoderState=null}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer(t){let{layers:e,layerFilter:i,views:n,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:h},cullRect:u,effects:d,pass:p="picking",pickZ:f,moduleParameters:_}=t;this.pickZ=f;const g=this._resetColorEncoder(f),E=[a,c,l,h],m=super.render({target:o,layers:e,layerFilter:i,views:n,viewports:r,onViewportActive:s,cullRect:u,effects:null===d||void 0===d?void 0:d.filter((t=>t.useInPicking)),pass:p,isPicking:!0,moduleParameters:_,clearColor:[0,0,0,0],colorMask:15,scissorRect:E});this._colorEncoderState=null;return{decodePickingColor:g&&ot.bind(null,g),stats:m}}shouldDrawLayer(t){const{pickable:e,operation:i}=t.props;return e&&i.includes("draw")||i.includes("terrain")||i.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(t,e,i){const r=(0,n.Z)({depthMask:!0,depthTest:!0,depthRange:[0,1]},t.props.parameters),{pickable:s,operation:o}=t.props;return!this._colorEncoderState||o.includes("terrain")?r.blend=!1:s&&o.includes("draw")&&(Object.assign(r,rt),r.blend=!0,r.blendColor=function(t,e,i){const{byLayer:n,byAlpha:r}=t;let s,o=n.get(e);o?(o.viewports.push(i),s=o.a):(s=n.size+1,s<=255?(o={a:s,layer:e,viewports:[i]},n.set(e,o),r[s]=o):(f.Z.warn("Too many pickable layers, only picking the first 255")(),s=0));return[0,0,0,s/255]}(this._colorEncoderState,t,i)),r}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function ot(t,e){const i=t.byAlpha[e[3]];return i&&{pickedLayer:i.layer,pickedViewports:i.viewports,pickedObjectIndex:i.layer.decodePickingColor(e)}}class at{constructor(t){this.device=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new nt(t),this.pickLayersPass=new st(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i=(0,n.Z)({layerFilter:this.layerFilter,isPicking:this.drawPickingColors},t);i.effects&&this._preRender(i.effects,i);const r=this.lastPostProcessEffect?this.renderBuffers[0]:i.target;this.lastPostProcessEffect&&(i.clearColor=[0,0,0,0],i.clearCanvas=!0);const s=e.render((0,n.Z)((0,n.Z)({},i),{},{target:r}));i.effects&&this._postRender(i.effects,i),this.renderCount++,(0,_.Z)("deckRenderer.renderLayers",this,s,t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{};for(const i of t)e.preRenderStats[i.id]=i.preRender(e),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this,e=this.device.canvasContext.getDrawingBufferSize();0===t.length&&[0,1].map((e=>{const i=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});t.push(this.device.createFramebuffer({id:"deck-renderbuffer-".concat(e),colorAttachments:[i]}))}));for(const i of t)i.resize(e)}_postRender(t,e){const{renderBuffers:i}=this,r=(0,n.Z)((0,n.Z)({},e),{},{inputBuffer:i[0],swapBuffer:i[1]});for(const n of t)if(n.postRender){r.target=n.id===this.lastPostProcessEffect?e.target:void 0;const t=n.postRender(r);r.inputBuffer=t,r.swapBuffer=t===i[0]?i[1]:i[0]}}}const ct={pickedColor:null,pickedObjectIndex:-1};function lt(t){let{pickedColors:e,decodePickingColor:i,deviceX:r,deviceY:s,deviceRadius:o,deviceRect:a}=t;const{x:c,y:l,width:h,height:u}=a;let d=o*o,p=-1,_=0;for(let n=0;n<u;n++){const t=n+l-s,i=t*t;if(i>d)_+=4*h;else for(let n=0;n<h;n++){if(e[_+3]-1>=0){const t=n+c-r,e=t*t+i;e<=d&&(d=e,p=_)}_+=4}}if(p>=0){const t=e.slice(p,p+4),r=i(t);if(r){const e=Math.floor(p/4/h),i=p/4-e*h;return(0,n.Z)((0,n.Z)({},r),{},{pickedColor:t,pickedX:c+i,pickedY:l+e})}f.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}return ct}function ht(t){let e,{pickInfo:i,viewports:n,pixelRatio:r,x:s,y:o,z:a}=t,c=n[0];if(n.length>1&&(c=function(t,e){for(let i=t.length-1;i>=0;i--){const n=t[i];if(n.containsPixel(e))return n}return t[0]}((null===i||void 0===i?void 0:i.pickedViewports)||n,{x:s,y:o})),c){const t=[s-c.x,o-c.y];void 0!==a&&(t[2]=a),e=c.unproject(t)}return{color:null,layer:null,viewport:c,index:-1,picked:!1,x:s,y:o,pixel:[s,o],coordinate:e,devicePixel:i&&"pickedX"in i?[i.pickedX,i.pickedY]:void 0,pixelRatio:r}}function ut(t){const{pickInfo:e,lastPickedInfo:i,mode:r,layers:s}=t,{pickedColor:o,pickedLayer:a,pickedObjectIndex:c}=e,l=a?[a]:[];if("hover"===r){const t=i.index,e=i.layerId,n=a?a.props.id:null;if(n!==e||c!==t){if(n!==e){const t=s.find((t=>t.props.id===e));t&&l.unshift(t)}i.layerId=n,i.index=c,i.info=null}}const h=ht(t),u=new Map;return u.set(null,h),l.forEach((t=>{let e=(0,n.Z)({},h);t===a&&(e.color=o,e.index=c,e.picked=!0),e=dt({layer:t,info:e,mode:r});const s=e.layer;t===a&&"hover"===r&&(i.info=e),u.set(s.id,e),"hover"===r&&s.updateAutoHighlight(e)})),u}function dt(t){let{layer:e,info:i,mode:n}=t;for(;e&&i;){const t=i.layer||null;i.sourceLayer=t,i.layer=e,i=e.getPickingInfo({info:i,mode:n,sourceLayer:t}),e=e.parent}return i}class pt{constructor(t){this._pickable=!0,this.device=t,this.pickLayersPass=new st(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject(t){let{x:e,y:i,layers:r,viewports:s}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const a=o&&o.layer&&o.layer.id,c=o&&o.viewport&&o.viewport.id,l=a?r.find((t=>t.id===a)):null,h=c&&s.find((t=>t.id===c))||s[0],u=h&&h.unproject([e-h.x,i-h.y]),d={x:e,y:i,viewport:h,coordinate:u,layer:l};return(0,n.Z)((0,n.Z)({},o),d)}_resizeBuffer(){var t,e;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const t=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=t}const{canvas:i}=this.device.getCanvasContext();null===(t=this.pickingFBO)||void 0===t||t.resize({width:i.width,height:i.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:i.width,height:i.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite));return e.length?e:null}_pickClosestObject(t){let{layers:e,views:i,viewports:r,x:s,y:o,radius:a=0,depth:c=1,mode:l="query",unproject3D:h,onViewportActive:u,effects:d}=t;const p=this.device.canvasContext.cssToDeviceRatio(),f=this._getPickable(e);if(!f||0===r.length)return{result:[],emptyInfo:ht({viewports:r,x:s,y:o,pixelRatio:p})};this._resizeBuffer();const _=this.device.canvasContext.cssToDevicePixels([s,o],!0),g=[_.x+Math.floor(_.width/2),_.y+Math.floor(_.height/2)],E=Math.round(a*p),{width:m,height:v}=this.pickingFBO,T=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:E,deviceWidth:m,deviceHeight:v}),R={x:s-a,y:o-a,width:2*a+1,height:2*a+1};let A;const b=[],S=new Set;for(let w=0;w<c;w++){let t,e;if(T){const e=this._drawAndSample({layers:f,views:i,viewports:r,onViewportActive:u,deviceRect:T,cullRect:R,effects:d,pass:"picking:".concat(l)});t=lt((0,n.Z)((0,n.Z)({},e),{},{deviceX:g[0],deviceY:g[1],deviceRadius:E,deviceRect:T}))}else t={pickedColor:null,pickedObjectIndex:-1};if(t.pickedLayer&&h&&this.depthFBO){const{pickedColors:n}=this._drawAndSample({layers:[t.pickedLayer],views:i,viewports:r,onViewportActive:u,deviceRect:{x:t.pickedX,y:t.pickedY,width:1,height:1},cullRect:R,effects:d,pass:"picking:".concat(l,":z")},!0);n[3]&&(e=n[0])}t.pickedLayer&&w+1<c&&(S.add(t.pickedLayer),t.pickedLayer.disablePickingIndex(t.pickedObjectIndex)),A=ut({pickInfo:t,lastPickedInfo:this.lastPickedInfo,mode:l,layers:f,viewports:r,x:s,y:o,z:e,pixelRatio:p});for(const i of A.values())i.layer&&b.push(i);if(!t.pickedColor)break}for(const n of S)n.restorePickingColors();return{result:b,emptyInfo:A.get(null)}}_pickVisibleObjects(t){let{layers:e,views:i,viewports:r,x:s,y:o,width:a=1,height:c=1,mode:l="query",maxObjects:h=null,onViewportActive:u,effects:d}=t;const p=this._getPickable(e);if(!p||0===r.length)return[];this._resizeBuffer();const _=this.device.canvasContext.cssToDeviceRatio(),g=this.device.canvasContext.cssToDevicePixels([s,o],!0),E=g.x,m=g.y+g.height,v=this.device.canvasContext.cssToDevicePixels([s+a,o+c],!0),T=v.x+v.width,R=v.y,A={x:E,y:R,width:T-E,height:m-R},b=function(t){let{pickedColors:e,decodePickingColor:i}=t;const r=new Map;if(e)for(let s=0;s<e.length;s+=4)if(e[s+3]-1>=0){const t=e.slice(s,s+4),o=t.join(",");if(!r.has(o)){const e=i(t);e?r.set(o,(0,n.Z)((0,n.Z)({},e),{},{color:t})):f.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:p,views:i,viewports:r,onViewportActive:u,deviceRect:A,cullRect:{x:s,y:o,width:a,height:c},effects:d,pass:"picking:".concat(l)})),S=new Map,w=[],y=Number.isFinite(h);for(let n=0;n<b.length;n++){var M;if(y&&w.length>=h)break;const t=b[n];let e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:s,y:o,pixelRatio:_};e=dt({layer:t.pickedLayer,info:e,mode:l});const i=e.layer.id;S.has(i)||S.set(i,new Set);const r=S.get(i),a=null!==(M=e.object)&&void 0!==M?M:e.index;r.has(a)||(r.add(a),w.push(e))}return w}_drawAndSample(t){let{layers:e,views:i,viewports:n,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:c}=t,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const h=l?this.depthFBO:this.pickingFBO,u={layers:e,layerFilter:this.layerFilter,views:i,viewports:n,onViewportActive:r,pickingFBO:h,deviceRect:s,cullRect:o,effects:a,pass:c,pickZ:l,preRenderStats:{}};for(const m of a)m.useInPicking&&(u.preRenderStats[m.id]=m.preRender(u));const{decodePickingColor:d}=this.pickLayersPass.render(u),{x:p,y:f,width:_,height:g}=s,E=new(l?Float32Array:Uint8Array)(_*g*4);return this.device.readPixelsToArrayWebGL(h,{sourceX:p,sourceY:f,sourceWidth:_,sourceHeight:g,target:E}),{pickedColors:E,decodePickingColor:d}}_getPickingRect(t){let{deviceX:e,deviceY:i,deviceRadius:n,deviceWidth:r,deviceHeight:s}=t;const o=Math.max(0,e-n),a=Math.max(0,i-n),c=Math.min(r,e+n+1)-o,l=Math.min(s,i+n+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const ft={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},_t="top-left",gt="__root";class Et{constructor(t){let{deck:e,parentElement:i}=t;this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=i}getWidgets(){return this.resolvedWidgets}setProps(t){t.widgets&&!(0,w.v)(t.widgets,this.widgets,1)&&this._setWidgets(t.widgets)}finalize(){for(const t of this.getWidgets())this._remove(t);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const t in this.containers)this.containers[t].remove()}addDefault(t){this.defaultWidgets.find((e=>e.id===t.id))||(this._add(t),this.defaultWidgets.push(t),this._setWidgets(this.widgets))}_setWidgets(t){const e={};for(const i of this.resolvedWidgets)e[i.id]=i;this.resolvedWidgets.length=0;for(const i of this.defaultWidgets)e[i.id]=null,this.resolvedWidgets.push(i);for(let i of t){const t=e[i.id];t?t.viewId!==i.viewId||t.placement!==i.placement?(this._remove(t),this._add(i)):i!==t&&(t.setProps(i.props),i=t):this._add(i),e[i.id]=null,this.resolvedWidgets.push(i)}for(const i in e){const t=e[i];t&&this._remove(t)}this.widgets=t}_add(t){const{viewId:e=null,placement:i=_t}=t,n=t.onAdd({deck:this.deck,viewId:e});n&&this._getContainer(e,i).append(n),t._element=n}_remove(t){t.onRemove(),t._element&&t._element.remove(),t._element=void 0}_getContainer(t,e){const i=t||gt;let n=this.containers[i];var r;n||(n=document.createElement("div"),n.style.pointerEvents="none",n.style.position="absolute",n.style.overflow="hidden",null===(r=this.parentElement)||void 0===r||r.append(n),this.containers[i]=n);let s=n.querySelector(".".concat(e));return s||(s=document.createElement("div"),s.className=e,s.style.position="absolute",s.style.zIndex="2",Object.assign(s.style,ft[e]),n.append(s)),s}_updateContainers(){const t=this.deck.width,e=this.deck.height;for(const i in this.containers){const n=this.lastViewports[i]||null,r=i===gt||n,s=this.containers[i];r?(s.style.display="block",s.style.left="".concat(n?n.x:0,"px"),s.style.top="".concat(n?n.y:0,"px"),s.style.width="".concat(n?n.width:t,"px"),s.style.height="".concat(n?n.height:e,"px")):s.style.display="none"}}onRedraw(t){let{viewports:e,layers:i}=t;const n=e.reduce(((t,e)=>(t[e.id]=e,t)),{}),{lastViewports:r}=this;for(const a of this.getWidgets()){const{viewId:t}=a;if(t){const e=n[t];var s;if(e)a.onViewportChange&&!e.equals(r[t])&&a.onViewportChange(e),null===(s=a.onRedraw)||void 0===s||s.call(a,{viewports:[e],layers:i})}else{var o;if(a.onViewportChange)for(const t of e)t.equals(r[t.id])||a.onViewportChange(t);null===(o=a.onRedraw)||void 0===o||o.call(a,{viewports:e,layers:i})}}this.lastViewports=n,this._updateContainers()}onHover(t,e){for(const r of this.getWidgets()){var i;const{viewId:s}=r;var n;if(!s||s===(null===(i=t.viewport)||void 0===i?void 0:i.id))null===(n=r.onHover)||void 0===n||n.call(r,t,e)}}onEvent(t,e){const i=W.FP[e.type];if(i)for(const s of this.getWidgets()){var n;const{viewId:o}=s;var r;if(!o||o===(null===(n=t.viewport)||void 0===n?void 0:n.id))null===(r=s[i.handler])||void 0===r||r.call(s,t,e)}}}const mt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class vt{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd(t){let{deck:e}=t;const i=document.createElement("div");return i.className="deck-tooltip",Object.assign(i.style,mt),this.deck=e,this.element=i,i}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(t){var e;this.isVisible&&t.id===(null===(e=this.lastViewport)||void 0===e?void 0:e.id)&&t!==this.lastViewport&&this.setTooltip(null)}onHover(t){const{deck:e}=this,i=e&&e.props.getTooltip;if(!i)return;const n=i(t);this.lastViewport=t.viewport,this.setTooltip(n,t.x,t.y)}setTooltip(t,e,i){const n=this.element;if(n){if("string"===typeof t)n.innerText=t;else{if(!t)return this.isVisible=!1,void(n.style.display="none");t.text&&(n.innerText=t.text),t.html&&(n.innerHTML=t.html),t.className&&(n.className=t.className)}this.isVisible=!0,n.style.display="block",n.style.transform="translate(".concat(e,"px, ").concat(i,"px)"),t&&"object"===typeof t&&"style"in t&&Object.assign(n.style,t.style)}}}var Tt=i(93170),Rt=i(68224);var At,bt=i(75499),St=i(63914);const wt=null===(At=globalThis.loaders)||void 0===At?void 0:At.parseImageNode,yt="undefined"!==typeof Image,Mt="undefined"!==typeof ImageBitmap,Ct=Boolean(wt),Pt=!!St.jU||Ct;function It(t){const e=Ot(t);if(!e)throw new Error("Not an image");return e}function Lt(t){switch(It(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),i=e.getContext("2d");if(!i)throw new Error("getImageData");return e.width=t.width,e.height=t.height,i.drawImage(t,0,0),i.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Ot(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&t instanceof Image?"image":t&&"object"===typeof t&&t.data&&t.width&&t.height?"data":null}const Nt=/^data:image\/svg\+xml/,Dt=/\.svg((\?|#).*)?$/;function Ft(t){return t&&(Nt.test(t)||Dt.test(t))}function xt(t,e){if(Ft(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Bt(t,e,i){const n=function(t,e){if(Ft(e)){let e=(new TextDecoder).decode(t);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(i){throw new Error(i.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return xt(t,e)}(t,i),r=self.URL||self.webkitURL,s="string"!==typeof n&&r.createObjectURL(n);try{return await async function(t,e){const i=new Image;if(i.src=t,e.image&&e.image.decode&&i.decode)return await i.decode(),i;return await new Promise(((t,e)=>{try{i.onload=()=>t(i),i.onerror=t=>{const i=t instanceof Error?t.message:"error";e(new Error(i))}}catch(n){e(n)}}))}(s||n,e)}finally{s&&r.revokeObjectURL(s)}}const Ut={};let kt=!0;async function Gt(t,e,i){let n;if(Ft(i)){n=await Bt(t,e,i)}else n=xt(t,i);const r=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t){for(const e in t||Ut)return!1;return!0}(e)&&kt||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(i){console.warn(i),kt=!1}return await createImageBitmap(t)}(n,r)}function Zt(t){return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=(r=e,[...r].map((t=>t.charCodeAt(0))));var r;for(let s=0;s<n.length;++s)if(n[s]!==t[s+i])return!1;return!0}(t,"ftyp",4)?0===(96&t[8])?null:function(t){switch((e=t,i=8,n=12,String.fromCharCode(...e.slice(i,n))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var e,i,n}(t):null}const Vt=!1,Wt=!0;function jt(t){const e=Ht(t);return function(t){const e=Ht(t),i=e.byteLength>=24&&2303741511===e.getUint32(0,Vt);if(!i)return null;return{mimeType:"image/png",width:e.getUint32(16,Vt),height:e.getUint32(20,Vt)}}(e)||function(t){const e=Ht(t),i=e.byteLength>=3&&65496===e.getUint16(0,Vt)&&255===e.getUint8(2);if(!i)return null;const{tableMarkers:n,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let i=65504;i<65520;++i)t.add(i);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let s=2;for(;s+9<e.byteLength;){const t=e.getUint16(s,Vt);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Vt),width:e.getUint16(s+7,Vt)};if(!n.has(t))return null;s+=2,s+=e.getUint16(s,Vt)}return null}(e)||function(t){const e=Ht(t),i=e.byteLength>=10&&1195984440===e.getUint32(0,Vt);if(!i)return null;return{mimeType:"image/gif",width:e.getUint16(6,Wt),height:e.getUint16(8,Wt)}}(e)||function(t){const e=Ht(t),i=e.byteLength>=14&&16973===e.getUint16(0,Vt)&&e.getUint32(2,Wt)===e.byteLength;if(!i)return null;return{mimeType:"image/bmp",width:e.getUint32(18,Wt),height:e.getUint32(22,Wt)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),i=Zt(e);if(!i)return null;return{mimeType:i.mimeType,width:0,height:0}}(e)}function Ht(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const zt={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:"4.2.2",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,i){const n=((e=e||{}).image||{}).type||"auto",{url:r}=i||{};let s;switch(function(t){switch(t){case"auto":case"data":return function(){if(Mt)return"imagebitmap";if(yt)return"image";if(Pt)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return Mt||yt||Pt;case"imagebitmap":return Mt;case"image":return yt;case"data":return Pt;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(n)){case"imagebitmap":s=await Gt(t,e,r);break;case"image":s=await Bt(t,e,r);break;case"data":s=await async function(t,e){var i;const{mimeType:n}=jt(t)||{},r=null===(i=globalThis.loaders)||void 0===i?void 0:i.parseImageNode;return(0,bt.h)(r),await r(t,n)}(t);break;default:(0,bt.h)(!1)}return"data"===n&&(s=Lt(s)),s},tests:[t=>Boolean(jt(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};const Xt={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],i=t[t.length-1];return"{"===e&&"}"===i||"["===e&&"]"===i},parseTextSync:JSON.parse};const Yt=function(){const t="9.0.38",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(f.Z.log(1,"deck.gl ".concat(t))(),globalThis.deck=(0,n.Z)((0,n.Z)({},globalThis.deck),{},{VERSION:t,version:t,log:f.Z,_registerLoggers:_.z}),(0,Rt.fh)([Xt,[zt,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();var Kt=i(91233),qt=i(78032);const Qt=new class{constructor(){(0,r.Z)(this,"stats",new Map)}getStats(t){return this.get(t)}get(t){return this.stats.has(t)||this.stats.set(t,new v({id:t})),this.stats.get(t)}};const Jt=function(){const t="9.0.27";if(globalThis.luma&&globalThis.luma.VERSION!==t)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(t));return globalThis.luma||((0,Kt.j)()&&qt.c.log(1,"".concat(t," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:t,version:t,log:qt.c,stats:Qt}),t}();var $t=i(92631),te=i(64092),ee=i(33328);const ie=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],ne=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function re(t){const e=ne.exec(t);if(e){const[,t,i,r,s,o]=e;if(t){const e="".concat(r).concat(i),a=(0,ee.e)(e);return(0,n.Z)({format:t,components:t.length,srgb:"-srgb"===s,unsized:"-unsized"===o,webgl:"-webgl"===o},a)}}return function(t){var e;const i=se[t];if(!i)throw new Error("Unknown format ".concat(t));return{format:i.format||"",components:i.components||(null===(e=i.format)||void 0===e?void 0:e.length)||1,byteLength:i.bpp||1,srgb:!1,unsized:!1}}(t)}const se={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};let oe,ae;class ce{}oe=Symbol.iterator;class le{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;(0,r.Z)(this,"features",void 0),(0,r.Z)(this,"disabledFeatures",void 0),this.features=new Set(t),this.disabledFeatures=e||{}}*[oe](){yield*this.features}has(t){return!this.disabledFeatures[t]&&this.features.has(t)}}ae=Symbol.toStringTag;class he{get[ae](){return"Device"}constructor(t){(0,r.Z)(this,"id",void 0),(0,r.Z)(this,"props",void 0),(0,r.Z)(this,"userData",{}),(0,r.Z)(this,"statsManager",Qt),(0,r.Z)(this,"_lumaData",{}),(0,r.Z)(this,"timestamp",0),this.props=(0,n.Z)((0,n.Z)({},he.defaultProps),t),this.id=this.props.id||(0,$t.h)(this[Symbol.toStringTag].toLowerCase())}isTextureFormatCompressed(t){return e=t,ie.some((t=>e.startsWith(t)));var e}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(t){return(t instanceof Promise||"string"===typeof t)&&(t={data:t}),this._createTexture(t)}createCommandEncoder(){throw new Error("not implemented")}readPixelsToArrayWebGL(t,e){throw new Error("not implemented")}readPixelsToBufferWebGL(t,e){throw new Error("not implemented")}setParametersWebGL(t){throw new Error("not implemented")}getParametersWebGL(t){throw new Error("not implemented")}withParametersWebGL(t,e){throw new Error("not implemented")}clearWebGL(t){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(t){this.props.onError(t)}_getBufferProps(t){(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=(0,n.Z)({},t);return(t.usage||0)&te.l.INDEX&&!t.indexType&&(t.data instanceof Uint32Array?e.indexType="uint32":t.data instanceof Uint16Array?e.indexType="uint16":qt.c.warn("indices buffer content must be of integer type")()),e}}(0,r.Z)(he,"defaultProps",{id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:Boolean(qt.c.get("debug")),spector:Boolean(qt.c.get("spector")||qt.c.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:t=>qt.c.error(t.message)}),(0,r.Z)(he,"VERSION",Jt);var ue=i(3540);const de=new Map;class pe{static registerDevices(t){for(const e of t)(0,ue.h)(e.type&&e.isSupported&&e.create),de.set(e.type,e)}static getAvailableDevices(){return Array.from(de).map((t=>t.type))}static getSupportedDevices(){return Array.from(de).filter((t=>t.isSupported())).map((t=>t.type))}static setDefaultDeviceProps(t){Object.assign(he.defaultProps,t)}static async attachDevice(t){const e=fe(t.devices)||de;if(t.handle instanceof WebGL2RenderingContext){const i=e.get("webgl");if(i)return await i.attach(t.handle)}if(null===t.handle){const t=e.get("unknown");if(t)return await t.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(){var t,e,i,r;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=(0,n.Z)((0,n.Z)({},pe.defaultProps),s),s.gl&&(s.type="webgl");const o=fe(s.devices)||de;let a,c;switch(s.type){case"webgpu":if(a=o.get("webgpu"),a)return await a.create(s);break;case"webgl":if(c=o.get("webgl"),c)return await c.create(s);break;case"unknown":const n=o.get("unknown");if(n)return await n.create(s);break;case"best-available":if(a=o.get("webgpu"),null!==(t=a)&&void 0!==t&&null!==(e=t.isSupported)&&void 0!==e&&e.call(t))return await a.create(s);if(c=o.get("webgl"),null!==(i=c)&&void 0!==i&&null!==(r=i.isSupported)&&void 0!==r&&r.call(i))return await c.create(s)}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext)return e.getContext=e.originalGetContext,void(e.originalGetContext=void 0);e.originalGetContext=e.getContext,e.getContext=function(t,e){return"webgl"===t||"experimental-webgl"===t?this.originalGetContext("webgl2",e):this.originalGetContext(t,e)}}}function fe(t){if(!t||0===(null===t||void 0===t?void 0:t.length))return null;const e=new Map;for(const i of t)e.set(i.type,i);return e}(0,r.Z)(pe,"defaultProps",(0,n.Z)((0,n.Z)({},he.defaultProps),{},{type:"best-available",devices:void 0})),(0,r.Z)(pe,"stats",Qt),(0,r.Z)(pe,"log",qt.c);const _e=(0,Kt.j)()&&"undefined"!==typeof document,ge=()=>_e&&"complete"===document.readyState,Ee={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class me{static get isPageLoaded(){return ge()}constructor(t){if((0,r.Z)(this,"id",void 0),(0,r.Z)(this,"props",void 0),(0,r.Z)(this,"canvas",void 0),(0,r.Z)(this,"htmlCanvas",void 0),(0,r.Z)(this,"offscreenCanvas",void 0),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"width",1),(0,r.Z)(this,"height",1),(0,r.Z)(this,"resizeObserver",void 0),(0,r.Z)(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1}),this.props=(0,n.Z)((0,n.Z)({},Ee),t),t=this.props,!(0,Kt.j)())return this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,void(this.canvas=null);if(t.canvas)"string"===typeof t.canvas?this.canvas=function(t){const e=document.getElementById(t);if(!e&&!ge())throw new Error("Accessing '".concat(t,"' before page was loaded"));if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}(t.canvas):this.canvas=t.canvas;else{var e,i;const n=function(t){const{width:e,height:i}=t,n=document.createElement("canvas");return n.id="lumagl-auto-created-canvas",n.width=e||1,n.height=i||1,n.style.width=Number.isFinite(e)?"".concat(e,"px"):"100%",n.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",n}(t),r=function(t){if("string"===typeof t){const e=document.getElementById(t);if(!e&&!ge())throw new Error("Accessing '".concat(t,"' before page was loaded"));if(!e)throw new Error("".concat(t," is not an HTML element"));return e}if(t)return t;return document.body}((null===(e=t)||void 0===e?void 0:e.container)||null);r.insertBefore(n,r.firstChild),this.canvas=n,null!==(i=t)&&void 0!==i&&i.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&t.autoResize&&(this.resizeObserver=new ResizeObserver((t=>{for(const e of t)e.target===this.canvas&&this.update()})),this.resizeObserver.observe(this.canvas))}getDevicePixelRatio(t){if("undefined"!==typeof OffscreenCanvas&&this.canvas instanceof OffscreenCanvas)return 1;if(!(t=void 0===t?this.props.useDevicePixels:t)||t<=0)return 1;if(!0===t){return"undefined"!==typeof window&&window.devicePixelRatio||1}return t}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const t=this.getDevicePixelRatio(),e=this.canvas;return e.parentElement?[e.clientWidth*t,e.clientHeight*t]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[t,e]=this.getPixelSize();return t/e}cssToDeviceRatio(){try{const[t]=this.getDrawingBufferSize(),{clientWidth:e}=this._canvasSizeInfo;return e?t/e:1}catch(t){return 1}}cssToDevicePixels(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.cssToDeviceRatio(),[n,r]=this.getDrawingBufferSize();return function(t,e,i,n,r){const s=t,o=ve(s[0],e,i);let a=Te(s[1],e,n,r),c=ve(s[0]+1,e,i);const l=c===i-1?c:c-1;let h;c=Te(s[1]+1,e,n,r),r?(c=0===c?c:c+1,h=a,a=c):h=c===n-1?c:c-1;return{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(h-a+1,1)}}(t,i,n,r,e)}setDevicePixelRatio(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.htmlCanvas)return;let i="width"in e?e.width:this.htmlCanvas.clientWidth,n="height"in e?e.height:this.htmlCanvas.clientHeight;i&&n||(qt.c.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,i=this.htmlCanvas.width||1,n=this.htmlCanvas.height||1);const r=this._canvasSizeInfo;if(r.clientWidth!==i||r.clientHeight!==n||r.devicePixelRatio!==t){let e=t;const r=Math.floor(i*e),s=Math.floor(n*e);this.htmlCanvas.width=r,this.htmlCanvas.height=s;const[o,a]=this.getDrawingBufferSize();o===r&&a===s||(e=Math.min(o/i,a/n),this.htmlCanvas.width=Math.floor(i*e),this.htmlCanvas.height=Math.floor(n*e),qt.c.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=i,this._canvasSizeInfo.clientHeight=n,this._canvasSizeInfo.devicePixelRatio=t}}getDrawingBufferSize(){const t=this.device.gl;if(!t)throw new Error("canvas size");return[t.drawingBufferWidth,t.drawingBufferHeight]}_setAutoCreatedCanvasId(t){var e;"lumagl-auto-created-canvas"===(null===(e=this.htmlCanvas)||void 0===e?void 0:e.id)&&(this.htmlCanvas.id=t)}}function ve(t,e,i){return Math.min(Math.round(t*e),i-1)}function Te(t,e,i,n){return n?Math.max(0,i-1-Math.round(t*e)):Math.min(Math.round(t*e),i-1)}(0,r.Z)(me,"pageLoaded",function(){if(ge()||"undefined"===typeof window)return Promise.resolve();return new Promise((t=>{window.addEventListener("load",(()=>t()))}))}());const Re={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Ae=(t,e,i)=>e?t.enable(i):t.disable(i),be=(t,e,i)=>t.hint(i,e),Se=(t,e,i)=>t.pixelStorei(i,e),we=(t,e,i)=>{const n=36006===i?36009:36008;return t.bindFramebuffer(n,e)},ye=(t,e,i)=>{const n={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[i];t.bindBuffer(n,e)};function Me(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const Ce={3042:Ae,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Ae,2885:(t,e)=>t.cullFace(e),2929:Ae,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Ae,35723:be,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var i;return null===(i=t.bindTransformFeedback)||void 0===i?void 0:i.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:we,36010:we,34964:ye,36662:ye,36663:ye,35053:ye,35055:ye,2886:(t,e)=>t.frontFace(e),33170:be,2849:(t,e)=>t.lineWidth(e),32823:Ae,32824:"polygonOffset",10752:"polygonOffset",35977:Ae,32926:Ae,32928:Ae,32938:"sampleCoverage",32939:"sampleCoverage",3089:Ae,3088:(t,e)=>t.scissor(...e),2960:Ae,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:Ae,10754:Ae,12288:Ae,12289:Ae,12290:Ae,12291:Ae,12292:Ae,12293:Ae,12294:Ae,12295:Ae,3333:Se,3317:Se,37440:Se,37441:Se,37443:Se,3330:Se,3332:Se,3331:Se,3314:Se,32878:Se,3316:Se,3315:Se,32877:Se,framebuffer:(t,e)=>{const i=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,i)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const i="number"===typeof e?[e,e]:e;t.blendEquationSeparate(...i)},blendFunc:(t,e)=>{const i=2===(null===e||void 0===e?void 0:e.length)?[...e,...e]:e;t.blendFuncSeparate(...i)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Me(e)?e:[e,e];const[i,n]=e;t.stencilMaskSeparate(1028,i),t.stencilMaskSeparate(1029,n)},stencilFunc:(t,e)=>{e=Me(e)&&3===e.length?[...e,...e]:e;const[i,n,r,s,o,a]=e;t.stencilFuncSeparate(1028,i,n,r),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=Me(e)&&3===e.length?[...e,...e]:e;const[i,n,r,s,o,a]=e;t.stencilOpSeparate(1028,i,n,r),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Pe(t,e,i){return void 0!==e[t]?e[t]:i[t]}const Ie={blendEquation:(t,e,i)=>t.blendEquationSeparate(Pe(32777,e,i),Pe(34877,e,i)),blendFunc:(t,e,i)=>t.blendFuncSeparate(Pe(32969,e,i),Pe(32968,e,i),Pe(32971,e,i),Pe(32970,e,i)),polygonOffset:(t,e,i)=>t.polygonOffset(Pe(32824,e,i),Pe(10752,e,i)),sampleCoverage:(t,e,i)=>t.sampleCoverage(Pe(32938,e,i),Pe(32939,e,i)),stencilFuncFront:(t,e,i)=>t.stencilFuncSeparate(1028,Pe(2962,e,i),Pe(2967,e,i),Pe(2963,e,i)),stencilFuncBack:(t,e,i)=>t.stencilFuncSeparate(1029,Pe(34816,e,i),Pe(36003,e,i),Pe(36004,e,i)),stencilOpFront:(t,e,i)=>t.stencilOpSeparate(1028,Pe(2964,e,i),Pe(2965,e,i),Pe(2966,e,i)),stencilOpBack:(t,e,i)=>t.stencilOpSeparate(1029,Pe(34817,e,i),Pe(34818,e,i),Pe(34819,e,i))},Le={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,i)=>t({[e]:i}),hint:(t,e,i)=>t({[e]:i}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,i)=>t({36007:i}),bindTransformFeedback:(t,e,i)=>t({36389:i}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,i)=>{switch(e){case 36160:return t({36006:i,36010:i});case 36009:return t({36006:i});case 36008:return t({36010:i});default:return null}},bindBuffer:(t,e,i)=>{const n={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return n?t({[n]:i}):{valueChanged:!0}},blendColor:(t,e,i,n,r)=>t({32773:new Float32Array([e,i,n,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,i)=>t({32777:e,34877:i}),blendFunc:(t,e,i)=>t({32969:e,32968:i,32971:e,32970:i}),blendFuncSeparate:(t,e,i,n,r)=>t({32969:e,32968:i,32971:n,32970:r}),clearColor:(t,e,i,n,r)=>t({3106:new Float32Array([e,i,n,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,i,n,r)=>t({3107:[e,i,n,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,i)=>t({2928:new Float32Array([e,i])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,i)=>t({32824:e,10752:i}),sampleCoverage:(t,e,i)=>t({32938:e,32939:i}),scissor:(t,e,i,n,r)=>t({3088:new Int32Array([e,i,n,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,i)=>t({[1028===e?2968:36005]:i}),stencilFunc:(t,e,i,n)=>t({2962:e,2967:i,2963:n,34816:e,36003:i,36004:n}),stencilFuncSeparate:(t,e,i,n,r)=>t({[1028===e?2962:34816]:i,[1028===e?2967:36003]:n,[1028===e?2963:36004]:r}),stencilOp:(t,e,i,n)=>t({2964:e,2965:i,2966:n,34817:e,34818:i,34819:n}),stencilOpSeparate:(t,e,i,n,r)=>t({[1028===e?2964:34817]:i,[1028===e?2965:34818]:n,[1028===e?2966:34819]:r}),viewport:(t,e,i,n,r)=>t({2978:[e,i,n,r]})},Oe=(t,e)=>t.isEnabled(e),Ne={3042:Oe,2884:Oe,2929:Oe,3024:Oe,32823:Oe,32926:Oe,32928:Oe,3089:Oe,2960:Oe,35977:Oe},De=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Fe(t,e){if(function(t){for(const e in t)return!1;return!0}(e))return;const i={};for(const r in e){const n=Number(r),s=Ce[r];s&&("string"===typeof s?i[s]=!0:s(t,e[r],n))}const n=t.state&&t.state.cache;if(n)for(const r in i){(0,Ie[r])(t,e,n)}}function xe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Re;if("number"===typeof e){const i=e,n=Ne[i];return n?n(t,i):t.getParameter(i)}const i=Array.isArray(e)?e:Object.keys(e),n={};for(const r of i){const e=Ne[r];n[r]=e?e(t,Number(r)):t.getParameter(Number(r))}return n}function Be(t,e){if(t===e)return!0;const i=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(i&&n&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}class Ue{constructor(t){let{copyState:e=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"program",null),(0,r.Z)(this,"stateStack",[]),(0,r.Z)(this,"enable",!0),(0,r.Z)(this,"cache",void 0),(0,r.Z)(this,"log",void 0),this.gl=t,this.cache=e?xe(t):Object.assign({},Re),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){(0,ue.h)(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];Fe(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,i=!1;const n=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const r in t){(0,ue.h)(void 0!==r);const s=t[r],o=this.cache[r];Be(s,o)||(i=!0,e=o,n&&!(r in n)&&(n[r]=o),this.cache[r]=s)}return{valueChanged:i,oldValue:e}}}function ke(t){return t.state}function Ge(t,e){const{enable:i=!0,copyState:n}=e;if((0,ue.h)(void 0!==n),!t.state){t.state=new Ue(t,{copyState:n}),function(t){const e=t.useProgram.bind(t);t.useProgram=function(i){const n=ke(t);n.program!==i&&(e(i),n.program=i)}}(t);for(const e in Le){je(t,e,Le[e])}We(t,"getParameter"),We(t,"isEnabled")}return ke(t).enable=i,t}function Ze(t){let e=ke(t);e||(Ge(t,{copyState:!1}),e=ke(t)),e.push()}function Ve(t){const e=ke(t);(0,ue.h)(e),e.pop()}function We(t,e){const i=t[e].bind(t);t[e]=function(e){if(void 0===e||De.has(e))return i(e);const n=ke(t);return e in n.cache||(n.cache[e]=i(e)),n.enable?n.cache[e]:i(e)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function je(t,e,i){if(!t[e])return;const n=t[e].bind(t);t[e]=function(){const e=ke(t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];const{valueChanged:a,oldValue:c}=i(e._updateCache,...s);return a&&n(...s),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}const He={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function ze(t,e,i){return void 0===i[e]&&(i[e]=t.getExtension(e)||null),i[e]}function Xe(t,e){const i=t.getParameter(7936),n=t.getParameter(7937);ze(t,"WEBGL_debug_renderer_info",e);const r=e.WEBGL_debug_renderer_info,s=t.getParameter(r?r.UNMASKED_VENDOR_WEBGL:7936)||i,o=t.getParameter(r?r.UNMASKED_RENDERER_WEBGL:7937)||n,a=t.getParameter(7938),c=Ye(s,o),l=function(t,e){if(/Metal/i.exec(t)||/Metal/i.exec(e))return"metal";if(/ANGLE/i.exec(t)||/ANGLE/i.exec(e))return"opengl";return"unknown"}(s,o),h=function(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(Ye(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}(s,o);return{type:"webgl",gpu:c,gpuType:h,gpuBackend:l,vendor:s,renderer:o,version:a,shadingLanguage:"glsl",shadingLanguageVersion:300}}function Ye(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function Ke(t){switch(t){case"uint8":case"unorm8":return 5121;case"sint8":case"snorm8":return 5120;case"uint16":case"unorm16":return 5123;case"sint16":case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const qe="texture-compression-bc",Qe="texture-compression-astc",Je="texture-compression-etc2",$e="texture-compression-pvrtc-webgl",ti="texture-compression-atc-webgl",ei="float32-renderable-webgl",ii="float16-renderable-webgl",ni="snorm8-renderable-webgl",ri="norm16-renderable-webgl",si="snorm16-renderable-webgl",oi="float32-filterable",ai="float16-filterable-webgl",ci="WEBGL_compressed_texture_s3tc",li="WEBGL_compressed_texture_s3tc_srgb",hi="EXT_texture_compression_rgtc",ui="EXT_texture_compression_bptc",di="EXT_texture_norm16",pi="EXT_render_snorm",fi={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[pi],"norm16-renderable-webgl":[di],"snorm16-renderable-webgl":[di,pi],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[ci,li,hi,ui],"texture-compression-bc5-webgl":[hi],"texture-compression-bc7-webgl":[ui],"texture-compression-etc2":["WEBGL_compressed_texture_etc"],"texture-compression-astc":["WEBGL_compressed_texture_astc"],"texture-compression-etc1-webgl":["WEBGL_compressed_texture_etc1"],"texture-compression-pvrtc-webgl":["WEBGL_compressed_texture_pvrtc"],"texture-compression-atc-webgl":["WEBGL_compressed_texture_atc"]};function _i(t,e,i){return(fi[e]||[]).every((e=>ze(t,e,i)))}const gi={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:ni},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:ni},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:ii,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:ri,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:si},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:ni},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:ii,filter:ai,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:ri},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:si},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:ei,filter:oi},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:"rgb9e5ufloat_renderable-webgl"},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:ei,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:ri},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:ri},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:ei,filter:oi,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:ii,filter:ai},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:ri,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:si},"rgb32float-webgl":{gl:34837,render:ei,filter:oi,gl2ext:"EXT_color_buffer_float",dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:ei,filter:oi,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:ci,f:qe},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:li,f:qe},"bc1-rgba-unorm":{gl:33777,x:ci,f:qe},"bc1-rgba-unorm-srgb":{gl:35916,x:li,f:qe},"bc2-rgba-unorm":{gl:33778,x:ci,f:qe},"bc2-rgba-unorm-srgb":{gl:35918,x:li,f:qe},"bc3-rgba-unorm":{gl:33779,x:ci,f:qe},"bc3-rgba-unorm-srgb":{gl:35919,x:li,f:qe},"bc4-r-unorm":{gl:36283,x:hi,f:qe},"bc4-r-snorm":{gl:36284,x:hi,f:qe},"bc5-rg-unorm":{gl:36285,x:hi,f:qe},"bc5-rg-snorm":{gl:36286,x:hi,f:qe},"bc6h-rgb-ufloat":{gl:36495,x:ui,f:qe},"bc6h-rgb-float":{gl:36494,x:ui,f:qe},"bc7-rgba-unorm":{gl:36492,x:ui,f:qe},"bc7-rgba-unorm-srgb":{gl:36493,x:ui,f:qe},"etc2-rgb8unorm":{gl:37492,f:Je},"etc2-rgb8unorm-srgb":{gl:37494,f:Je},"etc2-rgb8a1unorm":{gl:37496,f:Je},"etc2-rgb8a1unorm-srgb":{gl:37497,f:Je},"etc2-rgba8unorm":{gl:37493,f:Je},"etc2-rgba8unorm-srgb":{gl:37495,f:Je},"eac-r11unorm":{gl:37488,f:Je},"eac-r11snorm":{gl:37489,f:Je},"eac-rg11unorm":{gl:37490,f:Je},"eac-rg11snorm":{gl:37491,f:Je},"astc-4x4-unorm":{gl:37808,f:Qe},"astc-4x4-unorm-srgb":{gl:37840,f:Qe},"astc-5x4-unorm":{gl:37809,f:Qe},"astc-5x4-unorm-srgb":{gl:37841,f:Qe},"astc-5x5-unorm":{gl:37810,f:Qe},"astc-5x5-unorm-srgb":{gl:37842,f:Qe},"astc-6x5-unorm":{gl:37811,f:Qe},"astc-6x5-unorm-srgb":{gl:37843,f:Qe},"astc-6x6-unorm":{gl:37812,f:Qe},"astc-6x6-unorm-srgb":{gl:37844,f:Qe},"astc-8x5-unorm":{gl:37813,f:Qe},"astc-8x5-unorm-srgb":{gl:37845,f:Qe},"astc-8x6-unorm":{gl:37814,f:Qe},"astc-8x6-unorm-srgb":{gl:37846,f:Qe},"astc-8x8-unorm":{gl:37815,f:Qe},"astc-8x8-unorm-srgb":{gl:37847,f:Qe},"astc-10x5-unorm":{gl:37819,f:Qe},"astc-10x5-unorm-srgb":{gl:37851,f:Qe},"astc-10x6-unorm":{gl:37817,f:Qe},"astc-10x6-unorm-srgb":{gl:37849,f:Qe},"astc-10x8-unorm":{gl:37818,f:Qe},"astc-10x8-unorm-srgb":{gl:37850,f:Qe},"astc-10x10-unorm":{gl:37819,f:Qe},"astc-10x10-unorm-srgb":{gl:37851,f:Qe},"astc-12x10-unorm":{gl:37820,f:Qe},"astc-12x10-unorm-srgb":{gl:37852,f:Qe},"astc-12x12-unorm":{gl:37821,f:Qe},"astc-12x12-unorm-srgb":{gl:37853,f:Qe},"pvrtc-rgb4unorm-webgl":{gl:35840,f:$e},"pvrtc-rgba4unorm-webgl":{gl:35842,f:$e},"pvrtc-rbg2unorm-webgl":{gl:35841,f:$e},"pvrtc-rgba2unorm-webgl":{gl:35843,f:$e},"etc1-rbg-unorm-webgl":{gl:36196,f:"texture-compression-etc1-webgl"},"atc-rgb-unorm-webgl":{gl:35986,f:ti},"atc-rgba-unorm-webgl":{gl:35986,f:ti},"atc-rgbai-unorm-webgl":{gl:34798,f:ti}},Ei={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},mi={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function vi(t,e,i){const n=gi[e];if(!n)return!1;if(void 0===n.gl)return!1;const r=n.x||n.gl2ext;return!r||Boolean(ze(t,r,i))}function Ti(t){const e=gi[t],i=null===e||void 0===e?void 0:e.gl;if(void 0===i)throw new Error("Unsupported texture format ".concat(t));return i}function Ri(t){var e;const i=gi[t],n=Ti(t),r=re(t);return{format:n,dataFormat:(null===i||void 0===i?void 0:i.dataFormat)||bi(r.format,r.integer,r.normalized,n),type:r.dataType?Ke(r.dataType):(null===i||void 0===i||null===(e=i.types)||void 0===e?void 0:e[0])||5121,compressed:r.compressed}}function Ai(t){const e=Ri(t);return(Ei[e.dataFormat]||4)*(mi[e.type]||1)}function bi(t,e,i,n){if(6408===n||6407===n)return n;switch(t){case"r":return e&&!i?36244:6403;case"rg":return e&&!i?33320:33319;case"rgb":return e&&!i?36248:6407;case"rgba":return e&&!i?36249:6408;default:return 6408}}let Si;const wi={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};Si=Symbol.iterator;class yi extends le{constructor(t,e,i){super([],i),(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"extensions",void 0),(0,r.Z)(this,"testedFeatures",new Set),this.gl=t,this.extensions=e,ze(t,"EXT_color_buffer_float",e)}*[Si](){const t=this.getFeatures();for(const e of t)this.has(e)&&(yield e);return[]}has(t){return!this.disabledFeatures[t]&&(this.testedFeatures.has(t)||(this.testedFeatures.add(t),function(t){return t in fi}(t)&&_i(this.gl,t,this.extensions)&&this.features.add(t),this.getWebGLFeature(t)&&this.features.add(t)),this.features.has(t))}initializeFeatures(){const t=this.getFeatures().filter((t=>"polygon-mode-webgl"!==t));for(const e of t)this.has(e)}getFeatures(){return[...Object.keys(wi),...Object.keys(fi)]}getWebGLFeature(t){const e=wi[t];return"string"===typeof e?Boolean(ze(this.gl,e,this.extensions)):Boolean(e)}}class Mi extends ce{get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}constructor(t){super(),(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"limits",{}),this.gl=t}getParameter(t){return void 0===this.limits[t]&&(this.limits[t]=this.gl.getParameter(t)),this.limits[t]}}var Ci=i(17302),Pi=i(92310);let Ii;Ii=Symbol.toStringTag;class Li extends Ci._{get[Ii](){return"Framebuffer"}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Li.defaultProps),(0,r.Z)(this,"width",void 0),(0,r.Z)(this,"height",void 0),(0,r.Z)(this,"colorAttachments",[]),(0,r.Z)(this,"depthStencilAttachment",null),this.width=this.props.width,this.height=this.props.height}resize(t){let e=!t;if(t){const[i,n]=Array.isArray(t)?t:[t.width,t.height];e=e||n!==this.height||i!==this.width,this.width=i,this.height=n}e&&(qt.c.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(this.width,"x").concat(this.height))(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(0===this.props.colorAttachments.length&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((t=>{if("string"===typeof t){const e=this.createColorTexture(t);return this.attachResource(e),e.view}return t instanceof Pi.x?t.view:t}));const t=this.props.depthStencilAttachment;if(t)if("string"===typeof t){const e=this.createDepthStencilTexture(t);this.attachResource(e),this.depthStencilAttachment=e.view}else t instanceof Pi.x?this.depthStencilAttachment=t.view:this.depthStencilAttachment=t}createColorTexture(t){return this.device.createTexture({id:"color-attachment",usage:Pi.x.RENDER_ATTACHMENT,format:t,width:this.width,height:this.height})}createDepthStencilTexture(t){return this.device.createTexture({id:"depth-stencil-attachment",usage:Pi.x.RENDER_ATTACHMENT,format:t,width:this.width,height:this.height})}resizeAttachments(t,e){for(let i=0;i<this.colorAttachments.length;++i)if(this.colorAttachments[i]){const r=this.device._createTexture((0,n.Z)((0,n.Z)({},this.colorAttachments[i].props),{},{width:t,height:e}));this.destroyAttachedResource(this.colorAttachments[i]),this.colorAttachments[i]=r.view,this.attachResource(r.view)}if(this.depthStencilAttachment){const i=this.device._createTexture((0,n.Z)((0,n.Z)({},this.depthStencilAttachment.props),{},{width:t,height:e}));this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}}}(0,r.Z)(Li,"defaultProps",(0,n.Z)((0,n.Z)({},Ci._.defaultProps),{},{width:1,height:1,colorAttachments:[],depthStencilAttachment:null}));let Oi="";async function Ni(t,e){return await new Promise(((i,n)=>{try{const r=new Image;r.onload=()=>i(r),r.onerror=()=>n(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=(null===e||void 0===e?void 0:e.crossOrigin)||"anonymous",r.src=t.startsWith("http")?t:Oi+t}catch(r){n(r)}}))}async function Di(t,e){const i=document.getElementsByTagName("head")[0];if(!i)throw new Error("loadScript");const n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",t),e&&(n.id=e),new Promise(((e,r)=>{n.onload=e,n.onerror=e=>r(new Error("Unable to load script '".concat(t,"': ").concat(e))),i.appendChild(n)}))}function Fi(t,e,i){if(function(t){for(const e in t)return!1;return!0}(e))return i(t);const{nocatch:n=!0}=e;let r;if(Ze(t),Fe(t,e),n)r=i(t),Ve(t);else try{r=i(t)}finally{Ve(t)}return r}function xi(t,e){const i=t,{gl:n}=i;if(e.cullMode)switch(e.cullMode){case"none":n.disable(2884);break;case"front":n.enable(2884),n.cullFace(1028);break;case"back":n.enable(2884),n.cullFace(1029)}if(e.frontFace&&n.frontFace(Zi("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&n.enable(34383),void 0!==e.depthBias&&(n.enable(32823),n.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const t=i.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,n=Zi("provokingVertex",e.provokingVertex,{first:36429,last:36430});null===t||void 0===t||t.provokingVertexWEBGL(n)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const t=i.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,n=Zi("polygonMode",e.polygonMode,{fill:6914,line:6913});null===t||void 0===t||t.polygonModeWEBGL(1028,n),null===t||void 0===t||t.polygonModeWEBGL(1029,n)}e.polygonOffsetLine&&n.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&n.enable(12288),e.clipDistance1&&n.enable(12289),e.clipDistance2&&n.enable(12290),e.clipDistance3&&n.enable(12291),e.clipDistance4&&n.enable(12292),e.clipDistance5&&n.enable(12293),e.clipDistance6&&n.enable(12294),e.clipDistance7&&n.enable(12295)),void 0!==e.depthWriteEnabled&&n.depthMask(e.depthWriteEnabled),e.depthCompare&&("always"!==e.depthCompare?n.enable(2929):n.disable(2929),n.depthFunc(Bi("depthCompare",e.depthCompare))),e.stencilWriteMask){const t=e.stencilWriteMask;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,t)}if(e.stencilReadMask&&qt.c.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const t=e.stencilReadMask||4294967295,i=Bi("depthCompare",e.stencilCompare);"always"!==e.stencilCompare?n.enable(2960):n.disable(2960),n.stencilFuncSeparate(1028,i,0,t),n.stencilFuncSeparate(1029,i,0,t)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const t=Ui("stencilPassOperation",e.stencilPassOperation),i=Ui("stencilFailOperation",e.stencilFailOperation),r=Ui("stencilDepthFailOperation",e.stencilDepthFailOperation);n.stencilOpSeparate(1028,i,r,t),n.stencilOpSeparate(1029,i,r,t)}if(e.blendColorOperation||e.blendAlphaOperation){n.enable(3042);const t=ki("blendColorOperation",e.blendColorOperation||"add"),i=ki("blendAlphaOperation",e.blendAlphaOperation||"add");n.blendEquationSeparate(t,i);const r=Gi("blendColorSrcFactor",e.blendColorSrcFactor||"one"),s=Gi("blendColorDstFactor",e.blendColorDstFactor||"zero"),o=Gi("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),a=Gi("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");n.blendFuncSeparate(r,s,o,a)}}function Bi(t,e){return Zi(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Ui(t,e){return Zi(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function ki(t,e){return Zi(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function Gi(t,e){return Zi(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function Zi(t,e,i){if(!(e in i))throw new Error(function(t,e){return"Illegal parameter ".concat(e," for ").concat(t)}(t,e));return i[e]}function Vi(t){const e={};return t.addressModeU&&(e[10242]=Wi(t.addressModeU)),t.addressModeV&&(e[10243]=Wi(t.addressModeV)),t.addressModeW&&(e[32882]=Wi(t.addressModeW)),t.magFilter&&(e[10240]=ji(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=function(t,e){if(!e)return ji(t);switch(t){case"nearest":return"nearest"===e?9984:9986;case"linear":return"nearest"===e?9985:9987}}(t.minFilter||"linear",t.mipmapFilter)),void 0!==t.lodMinClamp&&(e[33082]=t.lodMinClamp),void 0!==t.lodMaxClamp&&(e[33083]=t.lodMaxClamp),"comparison-sampler"===t.type&&(e[34892]=34894),t.compare&&(e[34893]=Bi("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function Wi(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function ji(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}class Hi extends te.l{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"glTarget",void 0),(0,r.Z)(this,"glUsage",void 0),(0,r.Z)(this,"glIndexType",5123),(0,r.Z)(this,"byteLength",void 0),(0,r.Z)(this,"bytesUsed",void 0),this.device=t,this.gl=this.device.gl;const i="object"===typeof e?e.handle:void 0;this.handle=i||this.gl.createBuffer(),t.setSpectorMetadata(this.handle,(0,n.Z)((0,n.Z)({},this.props),{},{data:typeof this.props.data})),this.glTarget=function(t){if(t&te.l.INDEX)return 34963;if(t&te.l.VERTEX)return 34962;if(t&te.l.UNIFORM)return 35345;return 34962}(this.props.usage),this.glUsage=function(t){if(t&te.l.INDEX)return 35044;if(t&te.l.VERTEX)return 35044;if(t&te.l.UNIFORM)return 35048;return 35044}(this.props.usage),this.glIndexType="uint32"===this.props.indexType?5125:5123,e.data?this._initWithData(e.data,e.byteOffset,e.byteLength):this._initWithByteLength(e.byteLength||0)}_initWithData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;const n=this.glTarget;this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,i,this.glUsage),this.gl.bufferSubData(n,e,t),this.gl.bindBuffer(n,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(t,e,i),this.trackAllocatedMemory(i)}_initWithByteLength(t){(0,ue.h)(t>=0);let e=t;0===t&&(e=new Float32Array(0));const i=this.glTarget;return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,e,this.glUsage),this.gl.bindBuffer(i,null),this.bytesUsed=t,this.byteLength=t,this._setDebugData(null,0,t),this.trackAllocatedMemory(t),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=36663;this.gl.bindBuffer(i,this.handle),this.gl.bufferSubData(i,e,t),this.gl.bindBuffer(i,null),this._setDebugData(t,e,t.byteLength)}async readAsync(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return this.readSyncWebGL(t,e)}readSyncWebGL(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;i=null!==(t=i)&&void 0!==t?t:this.byteLength-e;const n=new Uint8Array(i);return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,n,0,i),this.gl.bindBuffer(36662,null),this._setDebugData(n,e,i),n}}var zi=i(31502);class Xi extends zi.Z{constructor(t,e){super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"parameters",void 0),this.device=t,this.parameters=Vi(e),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return"Sampler(".concat(this.id,",").concat(JSON.stringify(this.props),")")}_setSamplerParameters(t){for(const[e,i]of Object.entries(t)){const t=Number(e);switch(t){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,t,i);break;default:this.device.gl.samplerParameteri(this.handle,t,i)}}}}var Yi=i(13014);class Ki extends Yi.s{constructor(t,e){super(t,(0,n.Z)((0,n.Z)({},Pi.x.defaultProps),e)),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"texture",void 0),this.device=t,this.gl=this.device.gl,this.handle=null,this.texture=e.texture}}const qi={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0};class Qi extends Pi.x{constructor(t,e){var i;super(t,(0,n.Z)((0,n.Z)({},qi),{},{format:"rgba8unorm"},e)),(0,r.Z)(this,"MAX_ATTRIBUTES",void 0),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"sampler",void 0),(0,r.Z)(this,"view",void 0),(0,r.Z)(this,"glFormat",void 0),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"dataFormat",void 0),(0,r.Z)(this,"mipmaps",void 0),(0,r.Z)(this,"target",void 0),(0,r.Z)(this,"textureUnit",void 0),(0,r.Z)(this,"loaded",!1),(0,r.Z)(this,"_video",void 0),this.device=t,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,(0,n.Z)((0,n.Z)({},this.props),{},{data:typeof this.props.data})),this.glFormat=6408,this.target=function(t){switch(t.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;default:throw new Error(t.dimension)}}(this.props),this.loaded=!1,"string"===typeof(null===(i=this.props)||void 0===i?void 0:i.data)&&Object.assign(this.props,{data:Ni(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}createView(t){return new Ki(this.device,(0,n.Z)((0,n.Z)({},t),{},{texture:this}))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("cube"===this.props.dimension)return this.initializeCube(t);let e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const i="undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(i&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{parameters:r={}}=t,{pixels:s=null,pixelStore:o={},textureUnit:a,mipmaps:c=!0}=t;e||(e=s);let{width:l,height:h,dataFormat:u,type:d,compressed:p=!1}=t;const{depth:f=0}=t,_=Ti(t.format);return({width:l,height:h,compressed:p,dataFormat:u,type:d}=this._deduceParameters({format:t.format,type:d,dataFormat:u,compressed:p,data:e,width:l,height:h})),this.width=l,this.height=h,this.glFormat=_,this.type=d,this.dataFormat=u,this.textureUnit=a,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=c,this.setImageData({data:e,width:l,height:h,depth:f,format:t.format,type:d,dataFormat:u,parameters:o,compressed:p}),this.setSampler(t.sampler),this._setSamplerParameters(r),this.view=this.createView((0,n.Z)((0,n.Z)({},this.props),{},{mipLevelCount:1,arrayLayerCount:1})),c&&this.device.isTextureFormatFilterable(t.format)&&this.generateMipmap(),i&&(this._video={video:e,parameters:r,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}initializeCube(t){const{mipmaps:e=!0,parameters:i={}}=t;return this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setSampler(t.sampler),this._setSamplerParameters(i)})),this}setSampler(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e instanceof Xi?(this.sampler=e,t=e.props):(this.sampler=new Xi(this.device,e),t=e);const i=Vi(t);return this._setSamplerParameters(i),this}resize(t){const{height:e,width:i,mipmaps:n=!1}=t;return i!==this.width||e!==this.height?this.initialize({width:i,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:n}):this}update(){if(this._video){const{video:t,parameters:e,lastTime:i}=this._video;if(i===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Fi(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this}setImageData(t){if("3d"===this.props.dimension||"2d-array"===this.props.dimension)return this.setImageData3D(t);this.trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:i=null,level:n=0,glFormat:r=this.glFormat,offset:s=0,parameters:o={}}=t;let{data:a=null,type:c=this.type,width:l=this.width,height:h=this.height,dataFormat:u=this.dataFormat,compressed:d=!1}=t;a||(a=i),({type:c,dataFormat:u,compressed:d,width:l,height:h}=this._deduceParameters({format:this.props.format,type:c,dataFormat:u,compressed:d,data:a,width:l,height:h}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let f=null;if(({data:a,dataType:f}=this._getDataType({data:a,compressed:d})),Fi(this.gl,o,(()=>{switch(f){case"null":case"browser-object":p.texImage2D(e,n,r,l,h,0,u,c,a);break;case"typed-array":p.texImage2D(e,n,r,l,h,0,u,c,a,s);break;case"buffer":this.device.gl.bindBuffer(35052,a.handle||a),this.device.gl.texImage2D(e,n,r,l,h,0,u,c,s),this.device.gl.bindBuffer(35052,null);break;case"compressed":for(const[t,i]of a.entries())p.compressedTexImage2D(e,t,i.format,i.width,i.height,0,i.data);break;default:(0,ue.h)(!1,"Unknown image data type")}})),a&&a.byteLength)this.trackAllocatedMemory(a.byteLength,"Texture");else{const t=Ai(this.props.format);this.trackAllocatedMemory(this.width*this.height*t,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:i=null,data:n=null,x:r=0,y:s=0,width:o=this.width,height:a=this.height,level:c=0,glFormat:l=this.glFormat,type:h=this.type,dataFormat:u=this.dataFormat,compressed:d=!1,offset:p=0,parameters:f={}}=t;if(({type:h,dataFormat:u,compressed:d,width:o,height:a}=this._deduceParameters({format:this.props.format,type:h,dataFormat:u,compressed:d,data:n,width:o,height:a})),(0,ue.h)(1===this.depth,"texSubImage not supported for 3D textures"),n||(n=i),n&&n.data){const t=n;n=t.data,o=t.shape[0],a=t.shape[1]}n instanceof Hi&&(n=n.handle),this.gl.bindTexture(this.target,this.handle),Fi(this.gl,f,(()=>{d?this.gl.compressedTexSubImage2D(e,c,r,s,o,a,l,n):null===n?this.gl.texSubImage2D(e,c,r,s,o,a,u,h,null):ArrayBuffer.isView(n)?this.gl.texSubImage2D(e,c,r,s,o,a,u,h,n,p):"undefined"!==typeof WebGLBuffer&&n instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,n),this.device.gl.texSubImage2D(e,c,r,s,o,a,u,h,p),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(e,c,r,s,o,a,u,h,n)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return qt.c.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:i=!1}=t;return i?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Hi?{data:e.handle,dataType:"buffer"}:"undefined"!==typeof WebGLBuffer&&e instanceof WebGLBuffer?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:i}=t;let{width:n,height:r,dataFormat:s,type:o,compressed:a}=t;const c=Ri(e);return s=s||c.dataFormat,o=o||c.type,a=a||c.compressed,({width:n,height:r}=this._deduceImageSize(i,n,r)),{dataFormat:s,type:o,compressed:a,width:n,height:r,format:e,data:i}}_deduceImageSize(t,e,i){let n;return n="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:i}:{width:e>=0?e:1,height:i>=0?i:1},(0,ue.h)(n,"Could not deduced texture size"),(0,ue.h)(void 0===e||n.width===e,"Deduced texture width does not match supplied width"),(0,ue.h)(void 0===i||n.height===i,"Deduced texture height does not match supplied height"),n}async setCubeMapImageData(t){const{gl:e}=this,{width:i,height:n,pixels:r,data:s,format:o=6408,type:a=5121}=t,c=r||s,l=await Promise.all(Qi.FACES.map((t=>{const e=c[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),Qi.FACES.forEach(((t,r)=>{l[r].length>1&&!1!==this.props.mipmaps&&qt.c.warn("".concat(this.id," has mipmap and multiple LODs."))(),l[r].forEach(((r,s)=>{i&&n?e.texImage2D(t,s,o,i,n,0,o,a,r):e.texImage2D(t,s,o,o,a,r)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:i,height:n,pixels:r,data:s,format:o=6408,type:a=5121}=t,{gl:c}=this,l=r||s;return this.bind(),l instanceof Promise?l.then((i=>this.setImageDataForFace(Object.assign({},t,{face:e,data:i,pixels:i})))):this.width||this.height?c.texImage2D(e,0,o,i,n,0,o,a,l):c.texImage2D(e,0,o,o,a,l),this}setImageData3D(t){const{level:e=0,dataFormat:i,format:n,type:r,width:s,height:o,depth:a=1,offset:c=0,data:l,parameters:h={}}=t;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const u=Ri(n);if(Fi(this.gl,h,(()=>{ArrayBuffer.isView(l)&&this.gl.texImage3D(this.target,e,u.format,s,o,a,0,u.dataFormat,u.type,l),l instanceof Hi&&(this.gl.bindBuffer(35052,l.handle),this.gl.texImage3D(this.target,e,i,s,o,a,0,n,r,c))})),l&&l.byteLength)this.trackAllocatedMemory(l.byteLength,"Texture");else{const t=Ai(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*t,"Texture")}return this.loaded=!0,this}_setSamplerParameters(t){if(!(0,$t.n)(t)){!function(t){qt.c.log(1,"texture sampler parameters",t)()}(t),this.gl.bindTexture(this.target,this.handle);for(const[e,i]of Object.entries(t)){const t=Number(e),n=i;switch(t){case 33082:case 33083:this.gl.texParameterf(this.target,t,n);break;default:this.gl.texParameteri(this.target,t,n)}}this.gl.bindTexture(this.target,null)}}}(0,r.Z)(Qi,"FACES",[34069,34070,34071,34072,34073,34074]);class Ji extends Li{get texture(){return this.colorAttachments[0]}constructor(t,e){super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"handle",void 0);const i=null===e.handle;if(this.device=t,this.gl=t.gl,this.handle=this.props.handle||i?this.props.handle:this.gl.createFramebuffer(),!i){t.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const i=this.gl.bindFramebuffer(36160,this.handle);for(let t=0;t<this.colorAttachments.length;++t){const e=this.colorAttachments[t],i=36064+t;e&&this._attachOne(i,e)}if(this.depthStencilAttachment&&this._attachOne(function(t){const e=gi[t];if(null===e||void 0===e||!e.attachment)throw new Error("".concat(t," is not a depth stencil format"));return e.attachment}(this.depthStencilAttachment.props.format),this.depthStencilAttachment),!1!==e.check){const t=this.gl.checkFramebufferStatus(36160);if(36053!==t)throw new Error("Framebuffer ".concat(function(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return"".concat(t)}}(t)))}this.gl.bindFramebuffer(36160,i)}}destroy(){super.destroy(),this.destroyed||null===this.handle||this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(t){return new Qi(this.device,{id:"".concat(this.id,"-depth-stencil"),format:t,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(t,e){if(null===this.handle)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===e&&(e=this.gl.drawingBufferHeight);for(const i of this.colorAttachments)i.texture.resize({width:t,height:e});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:t,height:e}),this}_attachOne(t,e){if(Array.isArray(e)){const[i,n=0,r=0]=e;return this._attachTexture(t,i,n,r),i}if(e instanceof Qi)return this._attachTexture(t,e,0,0),e;if(e instanceof Ki){const i=e;return this._attachTexture(t,i.texture,i.props.baseMipLevel,i.props.baseArrayLayer),e.texture}throw new Error("attach")}_attachTexture(t,e,i,n){const{gl:r}=this.device;switch(r.bindTexture(e.target,e.handle),e.target){case 35866:case 32879:r.framebufferTextureLayer(36160,t,e.target,n,i);break;case 34067:const s=function(t){return t<34069?t+34069:t}(i);r.framebufferTexture2D(36160,t,s,e.handle,n);break;case 3553:r.framebufferTexture2D(36160,t,3553,e.handle,n);break;default:(0,ue.h)(!1,"Illegal texture type")}r.bindTexture(e.target,null)}}class $i extends me{constructor(t,e){super(e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"presentationSize",void 0),(0,r.Z)(this,"_framebuffer",null),this.device=t,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId("".concat(this.device.id,"-canvas")),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Ji(this.device,{handle:null}),this._framebuffer}update(){const t=this.getPixelSize();(t[0]!==this.presentationSize[0]||t[1]!==this.presentationSize[1])&&(this.presentationSize=t,this.resize())}resize(t){if(this.device.gl)if(this.canvas){const e=this.getDevicePixelRatio(null===t||void 0===t?void 0:t.useDevicePixels);this.setDevicePixelRatio(e,t)}else;}commit(){}}const tn={spector:qt.c.get("spector")||qt.c.get("spectorjs")},en="https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",nn=1;let rn=null,sn=!1;var on;!function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"}(on||(on={}));const an="https://unpkg.com/webgl-debug@2.0.1/index.js";function cn(t){return t.luma=t.luma||{},t.luma}function ln(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?e.debug?function(t,e){if(!globalThis.WebGLDebugUtils)return qt.c.warn("webgl-debug not loaded")(),t;const i=cn(t);if(i.debugContext)return i.debugContext;globalThis.WebGLDebugUtils.init((0,n.Z)((0,n.Z)({},on),t));const r=globalThis.WebGLDebugUtils.makeDebugContext(t,un.bind(null,e),dn.bind(null,e));for(const n in on)n in r||"number"!==typeof on[n]||(r[n]=on[n]);class s{}Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.setPrototypeOf(s,r);const o=Object.create(s);return i.realContext=t,i.debugContext=o,o.debug=!0,o}(t,e):function(t){const e=cn(t);return e.realContext?e.realContext:t}(t):null}function hn(t,e){e=Array.from(e).map((t=>void 0===t?"undefined":t));let i=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return i="".concat(i.slice(0,100)).concat(i.length>100?"...":""),"gl.".concat(t,"(").concat(i,")")}function un(t,e,i,n){n=Array.from(n).map((t=>void 0===t?"undefined":t));const r=globalThis.WebGLDebugUtils.glEnumToString(e),s=globalThis.WebGLDebugUtils.glFunctionArgsToString(i,n),o="".concat(r," in gl.").concat(i,"(").concat(s,")");if(qt.c.error(o)(),t.throwOnError)throw new Error(o)}function dn(t,e,i){let n="";if(qt.c.level>=1&&(n=hn(e,i),qt.c.log(1,n)()),t.break&&t.break.length>0){n=n||hn(e,i);t.break.every((t=>-1!==n.indexOf(t)))}for(const r of i)if(void 0===r){if(n=n||hn(e,i),t.throwOnError)throw new Error("Undefined argument: ".concat(n));qt.c.error("Undefined argument: ".concat(n))()}}var pn=i(33750);function fn(t){const e=t.toLowerCase();return["warning","error","info"].includes(e)?e:"info"}class _n extends pn.e{constructor(t,e){switch(super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"handle",void 0),this.device=t,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){return function(t){const e=t.split(/\r?\n/),i=[];for(const n of e){if(n.length<=1)continue;const t=n.split(":");if(2===t.length){const[e,n]=t;i.push({message:n.trim(),type:fn(e),lineNum:0,linePos:0});continue}const[e,r,s,...o]=t;let a=parseInt(s,10);isNaN(a)&&(a=0);let c=parseInt(r,10);isNaN(c)&&(c=0),i.push({message:o.join(":").trim(),type:fn(e),lineNum:a,linePos:c})}return i}(this.device.gl.getShaderInfoLog(this.handle))}getTranslatedSource(){const t=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return null===t||void 0===t?void 0:t.getTranslatedShaderSource(this.handle)}async _compile(t){t=(t=>t.startsWith("#version ")?t:"#version 100\n".concat(t))(t);const{gl:e}=this.device;if(e.shaderSource(this.handle,t),e.compileShader(this.handle),0!==qt.c.level){if(this.device.features.has("compilation-status-async-webgl"))qt.c.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),qt.c.info(2,"Shader ".concat(this.id," - async compilation complete: ").concat(this.compilationStatus))(),this._getCompilationStatus(),this.debugShader();else if(this._getCompilationStatus(),this.debugShader(),"error"===this.compilationStatus)throw new Error("GLSL compilation errors in ".concat(this.props.stage," shader ").concat(this.props.id))}else this.compilationStatus="pending"}async _waitForCompilationComplete(){const t=async t=>await new Promise((e=>setTimeout(e,t)));if(!this.device.features.has("compilation-status-async-webgl"))return void await t(10);const{gl:e}=this.device;for(;;){if(e.getShaderParameter(this.handle,37297))return;await t(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}let gn;gn=Symbol.toStringTag;class En extends Ci._{get[gn](){return"RenderPass"}constructor(t,e){super(t,e,En.defaultProps)}}(0,r.Z)(En,"defaultProps",(0,n.Z)((0,n.Z)({},Ci._.defaultProps),{},{framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0}));const mn=6144,vn=[1,2,4,8];class Tn extends En{constructor(t,e){super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"glParameters",void 0),this.device=t,Ze(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){Ve(this.device.gl)}pushDebugGroup(t){}popDebugGroup(){}insertDebugMarker(t){}setParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=(0,n.Z)({},this.glParameters);this.props.framebuffer&&(e.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(e.depthMask=!this.props.depthReadOnly),e.stencilMask=this.props.stencilReadOnly?0:1,e[35977]=this.props.discard,t.viewport&&(t.viewport.length>=6?(e.viewport=t.viewport.slice(0,4),e.depthRange=[t.viewport[4],t.viewport[5]]):e.viewport=t.viewport),t.scissorRect&&(e.scissorTest=!0,e.scissor=t.scissorRect),t.blendConstant&&(e.blendColor=t.blendConstant),t.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),t[2967]=t.stencilReference),t.colorMask&&(e.colorMask=vn.map((e=>Boolean(e&t.colorMask)))),this.glParameters=e,Fe(this.device.gl,e)}beginOcclusionQuery(t){const e=this.props.occlusionQuerySet;null===e||void 0===e||e.beginOcclusionQuery()}endOcclusionQuery(){const t=this.props.occlusionQuerySet;null===t||void 0===t||t.endOcclusionQuery()}clear(){const t=(0,n.Z)({},this.glParameters);let e=0;!1!==this.props.clearColor&&(e|=16384,t.clearColor=this.props.clearColor),!1!==this.props.clearDepth&&(e|=256,t.clearDepth=this.props.clearDepth),!1!==this.props.clearStencil&&(e|=1024,t.clearStencil=this.props.clearStencil),0!==e&&Fi(this.device.gl,t,(()=>{this.device.gl.clear(e)}))}clearColorBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];Fi(this.device.gl,{framebuffer:this.props.framebuffer},(()=>{switch(e.constructor){case Int32Array:this.device.gl.clearBufferiv(mn,t,e);break;case Uint32Array:this.device.gl.clearBufferuiv(mn,t,e);break;case Float32Array:default:this.device.gl.clearBufferfv(mn,t,e)}}))}}var Rn=i(2200);var An=i(35460),bn=i(91586);const Sn="Failed to deduce GL constant from typed array";function wn(t,e){const{clamped:i=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return i?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const yn={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Mn={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Cn{static getBytesPerElement(t){return wn(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){(0,ue.h)(t.size);return wn(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new Cn(...[yn,...e])}constructor(){(0,r.Z)(this,"offset",void 0),(0,r.Z)(this,"stride",void 0),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"size",void 0),(0,r.Z)(this,"divisor",void 0),(0,r.Z)(this,"normalized",void 0),(0,r.Z)(this,"integer",void 0),(0,r.Z)(this,"buffer",void 0),(0,r.Z)(this,"index",void 0);for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Cn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Cn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=function(t,e,i){const{removedProps:n={},deprecatedProps:r={},replacedProps:s={}}=i;for(const a in n)if(a in e){const e=n[a]?"".concat(t,".").concat(n[a]):"N/A";qt.c.removed("".concat(t,".").concat(a),e)()}for(const a in r)if(a in e){const e=r[a];qt.c.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(e))()}let o=null;for(const[a,c]of Object.entries(s))a in e&&(qt.c.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]);return o||e}("Accessor",t,Mn),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalize&&(this.normalized=t.normalize),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),void 0===this.offset&&delete this.offset,void 0===this.stride&&delete this.stride,void 0===this.type&&delete this.type,void 0===this.size&&delete this.size,void 0===this.divisor&&delete this.divisor,void 0===this.normalized&&delete this.normalized,void 0===this.integer&&delete this.integer,void 0===this.buffer&&delete this.buffer,void 0===this.index&&delete this.index,this}}const Pn=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],In={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function Ln(t){const e=In[t];if(!e)throw new Error("uniform");const[i,n,,r]=e;return{format:r,components:n,glType:i}}function On(t){const e=In[t];if(!e)throw new Error("attribute");const[,i,,n,r]=e;return{attributeType:n,vertexFormat:r,components:i}}function Nn(t,e){const i={attributes:[],bindings:[]};i.attributes=function(t,e){const i=[],n=t.getProgramParameter(e,35721);for(let r=0;r<n;r++){const n=t.getActiveAttrib(e,r);if(!n)throw new Error("activeInfo");const{name:s,type:o}=n,a=t.getAttribLocation(e,s);if(a>=0){const{attributeType:t}=On(o),e=/instance/i.test(s)?"instance":"vertex";i.push({name:s,location:a,stepMode:e,type:t})}}return i.sort(((t,e)=>t.location-e.location)),i}(t,e);const r=function(t,e){const i=(i,n)=>t.getActiveUniformBlockParameter(e,i,n),n=[],r=t.getProgramParameter(e,35382);for(let s=0;s<r;s++){const r={name:t.getActiveUniformBlockName(e,s)||"",location:i(s,35391),byteLength:i(s,35392),vertex:i(s,35396),fragment:i(s,35398),uniformCount:i(s,35394),uniforms:[]},o=i(s,35395)||[],a=t.getActiveUniforms(e,o,35383),c=t.getActiveUniforms(e,o,35384),l=t.getActiveUniforms(e,o,35387),h=t.getActiveUniforms(e,o,35388);for(let i=0;i<r.uniformCount;++i){const n=t.getActiveUniform(e,o[i]);if(!n)throw new Error("activeInfo");r.uniforms.push({name:n.name,format:Ln(a[i]).format,type:a[i],arrayLength:c[i],byteOffset:l[i],byteStride:h[i]})}n.push(r)}return n.sort(((t,e)=>t.location-e.location)),n}(t,e);for(const n of r){const t=n.uniforms.map((t=>({name:t.name,format:t.format,byteOffset:t.byteOffset,byteStride:t.byteStride,arrayLength:t.arrayLength})));i.bindings.push({type:"uniform",name:n.name,location:n.location,visibility:(n.vertex?1:0)&(n.fragment?2:0),minBindingSize:n.byteLength,uniforms:t})}const s=function(t,e){const i=[],r=t.getProgramParameter(e,35718);for(let s=0;s<r;s++){const r=t.getActiveUniform(e,s);if(!r)throw new Error("activeInfo");const{name:o,size:a,type:c}=r,{name:l,isArray:h}=xn(o);let u=t.getUniformLocation(e,l);const d={location:u,name:l,size:a,type:c,isArray:h};if(i.push(d),d.size>1)for(let s=0;s<d.size;s++){const r="".concat(l,"[").concat(s,"]");u=t.getUniformLocation(e,r);const o=(0,n.Z)((0,n.Z)({},d),{},{name:r,location:u});i.push(o)}}return i}(t,e);let o=0;for(const n of s)if(a=n.type,Pn.includes(a)){const{viewDimension:t,sampleType:e}=Fn(n.type);i.bindings.push({type:"texture",name:n.name,location:o,viewDimension:t,sampleType:e}),n.textureUnit=o,o+=1}var a;s.length&&(i.uniforms=s);const c=function(t,e){const i=[],n=t.getProgramParameter(e,35971);for(let r=0;r<n;r++){const n=t.getTransformFeedbackVarying(e,r);if(!n)throw new Error("activeInfo");const{name:s,type:o,size:a}=n,{glType:c,components:l}=Ln(o),h={location:r,name:s,accessor:new Cn({type:c,size:a*l})};i.push(h)}return i.sort(((t,e)=>t.location-e.location)),i}(t,e);return null!==c&&void 0!==c&&c.length&&(i.varyings=c),i}const Dn={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function Fn(t){const e=Dn[t];if(!e)throw new Error("sampler");const[i,n]=e;return{viewDimension:i,sampleType:n}}function xn(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]?1:0,isArray:Boolean(e[2])}}function Bn(t,e,i,n){const r=t;let s=n;!0===s&&(s=1),!1===s&&(s=0);const o="number"===typeof s?[s]:s;switch(i){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if("number"!==typeof n)throw new Error("samplers must be set to integers");return t.uniform1i(e,n);case 5126:return t.uniform1fv(e,o);case 35664:return t.uniform2fv(e,o);case 35665:return t.uniform3fv(e,o);case 35666:return t.uniform4fv(e,o);case 5124:case 35670:return t.uniform1iv(e,o);case 35667:case 35671:return t.uniform2iv(e,o);case 35668:case 35672:return t.uniform3iv(e,o);case 35669:case 35673:return t.uniform4iv(e,o);case 5125:return r.uniform1uiv(e,o,1);case 36294:return r.uniform2uiv(e,o,2);case 36295:return r.uniform3uiv(e,o,3);case 36296:return r.uniform4uiv(e,o,4);case 35674:return t.uniformMatrix2fv(e,!1,o);case 35675:return t.uniformMatrix3fv(e,!1,o);case 35676:return t.uniformMatrix4fv(e,!1,o);case 35685:return r.uniformMatrix2x3fv(e,!1,o);case 35686:return r.uniformMatrix2x4fv(e,!1,o);case 35687:return r.uniformMatrix3x2fv(e,!1,o);case 35688:return r.uniformMatrix3x4fv(e,!1,o);case 35689:return r.uniformMatrix4x2fv(e,!1,o);case 35690:return r.uniformMatrix4x3fv(e,!1,o)}throw new Error("Illegal uniform")}class Un extends Rn.h{constructor(t,e){super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"vs",void 0),(0,r.Z)(this,"fs",void 0),(0,r.Z)(this,"introspectedLayout",void 0),(0,r.Z)(this,"uniforms",{}),(0,r.Z)(this,"bindings",{}),(0,r.Z)(this,"varyings",null),(0,r.Z)(this,"_uniformCount",0),(0,r.Z)(this,"_uniformSetters",{}),this.device=t,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=e.vs,this.fs=e.fs;const{varyings:i,bufferMode:n=35981}=e;switch(i&&i.length>0&&(this.varyings=i,this.device.gl.transformFeedbackVaryings(this.handle,i,n)),this._linkShaders(),qt.c.time(1,"RenderPipeline ".concat(this.id," - shaderLayout introspection"))(),this.introspectedLayout=Nn(this.device.gl,this.handle),qt.c.timeEnd(1,"RenderPipeline ".concat(this.id," - shaderLayout introspection"))(),this.shaderLayout=(0,bn.uX)(this.introspectedLayout,e.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":qt.c.warn("Primitive topology ".concat(this.props.topology," is deprecated and will be removed in v9.1"))}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(t,e){for(const[i,n]of Object.entries(t)){const t=this.shaderLayout.bindings.find((t=>t.name===i))||this.shaderLayout.bindings.find((t=>t.name==="".concat(i,"Uniforms")));if(t){switch(n||qt.c.warn('Unsetting binding "'.concat(i,'" in render pipeline "').concat(this.id,'"'))(),t.type){case"uniform":if(!(n instanceof Hi)&&!(n.buffer instanceof Hi))throw new Error("buffer value");break;case"texture":if(!(n instanceof Ki||n instanceof Qi||n instanceof Ji))throw new Error("texture value");break;case"sampler":qt.c.warn("Ignoring sampler ".concat(i))();break;default:throw new Error(t.type)}this.bindings[i]=n}else{const t=this.shaderLayout.bindings.map((t=>'"'.concat(t.name,'"'))).join(", ");null!==e&&void 0!==e&&e.disableWarnings||qt.c.warn('Unknown binding "'.concat(i,'" in render pipeline "').concat(this.id,'", expected one of ').concat(t))()}}}draw(t){var e;const{renderPass:i,parameters:n=this.props.parameters,topology:r=this.props.topology,vertexArray:s,vertexCount:o,instanceCount:a,isInstanced:c=!1,firstVertex:l=0,transformFeedback:h}=t,u=function(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(t)}}(r),d=Boolean(s.indexBuffer),p=null===(e=s.indexBuffer)||void 0===e?void 0:e.glIndexType;if("success"!==this.linkStatus)return qt.c.info(2,"RenderPipeline:".concat(this.id,".draw() aborted - waiting for shader linking"))(),!1;if(!this._areTexturesRenderable()||0===o)return qt.c.info(2,"RenderPipeline:".concat(this.id,".draw() aborted - textures not yet loaded"))(),!1;if(0===o)return qt.c.info(2,"RenderPipeline:".concat(this.id,".draw() aborted - no vertices to draw"))(),!0;this.device.gl.useProgram(this.handle),s.bindBeforeRender(i),h&&h.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const f=i;return function(t,e,i,n){if((0,$t.n)(e))return n(t);const r=t;Ze(r.gl);try{xi(t,e),Fe(r.gl,i),n(t)}finally{Ve(r.gl)}}(this.device,n,f.glParameters,(()=>{d&&c?this.device.gl.drawElementsInstanced(u,o||0,p,l,a||0):d?this.device.gl.drawElements(u,o||0,p,l):c?this.device.gl.drawArraysInstanced(u,l,o||0,a||0):this.device.gl.drawArrays(u,l,o||0),h&&h.end()})),s.unbindAfterRender(i),!0}setUniformsWebGL(t){const{bindings:e}=(0,An.y)(t);Object.keys(e).forEach((t=>{qt.c.warn('Unsupported value "'.concat(JSON.stringify(e[t]),'" used in setUniforms() for key ').concat(t,". Use setBindings() instead?"))()})),Object.assign(this.uniforms,t)}async _linkShaders(){const{gl:t}=this.device;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),qt.c.time(4,"linkProgram for ".concat(this.id))(),t.linkProgram(this.handle),qt.c.timeEnd(4,"linkProgram for ".concat(this.id))(),qt.c.level,!this.device.features.has("compilation-status-async-webgl")){const t=this._getLinkStatus();return void this._reportLinkStatus(t)}qt.c.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),qt.c.info(2,"RenderPipeline ".concat(this.id," - async linking complete: ").concat(this.linkStatus))();const e=this._getLinkStatus();this._reportLinkStatus(e)}_reportLinkStatus(t){var e;if("success"!==t){if("error"===this.vs.compilationStatus)throw this.vs.debugShader(),new Error("Error during compilation of shader ".concat(this.vs.id));if("error"===(null===(e=this.fs)||void 0===e?void 0:e.compilationStatus))throw this.fs.debugShader(),new Error("Error during compilation of shader ".concat(this.fs.id));throw new Error("Error during ".concat(t,": ").concat(this.device.gl.getProgramInfoLog(this.handle)))}}_getLinkStatus(){const{gl:t}=this.device;if(!t.getProgramParameter(this.handle,35714))return this.linkStatus="error","linking";t.validateProgram(this.handle);return t.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")}async _waitForLinkComplete(){const t=async t=>await new Promise((e=>setTimeout(e,t)));if(!this.device.features.has("compilation-status-async-webgl"))return void await t(10);const{gl:e}=this.device;for(;;){if(e.getProgramParameter(this.handle,37297))return;await t(10)}}_areTexturesRenderable(){let t=!0;for(const[,e]of Object.entries(this.bindings))e instanceof Qi&&(e.update(),t=t&&e.loaded);return t}_applyBindings(){if("success"!==this.linkStatus)return;const{gl:t}=this.device;t.useProgram(this.handle);let e=0,i=0;for(const n of this.shaderLayout.bindings){const r=this.bindings[n.name]||this.bindings[n.name.replace(/Uniforms$/,"")];if(!r)throw new Error("No value for binding ".concat(n.name," in ").concat(this.id));switch(n.type){case"uniform":const{name:s}=n,o=t.getUniformBlockIndex(this.handle,s);if(4294967295===o)throw new Error("Invalid uniform block name ".concat(s));t.uniformBlockBinding(this.handle,i,o),r instanceof Hi?t.bindBufferBase(35345,i,r.handle):t.bindBufferRange(35345,i,r.buffer.handle,r.offset||0,r.size||r.buffer.byteLength-r.offset),i+=1;break;case"texture":if(!(r instanceof Ki||r instanceof Qi||r instanceof Ji))throw new Error("texture");let a;if(r instanceof Ki)a=r.texture;else if(r instanceof Qi)a=r;else{if(!(r instanceof Ji&&r.colorAttachments[0]instanceof Ki))throw new Error("No texture");qt.c.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),a=r.colorAttachments[0].texture}t.activeTexture(33984+e),t.bindTexture(a.target,a.handle),e+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error("binding type '".concat(n.type,"' not supported in WebGL"))}}}_applyUniforms(){for(const e of this.shaderLayout.uniforms||[]){var t;const{name:i,location:n,type:r,textureUnit:s}=e,o=null!==(t=this.uniforms[i])&&void 0!==t?t:s;void 0!==o&&Bn(this.device.gl,n,r,o)}}}let kn,Gn,Zn;kn=Symbol.toStringTag;class Vn extends Ci._{get[kn](){return"CommandEncoder"}constructor(t,e){super(t,e,Vn.defaultProps)}}(0,r.Z)(Vn,"defaultProps",(0,n.Z)((0,n.Z)({},Ci._.defaultProps),{},{measureExecutionTime:void 0})),Gn=Symbol.toStringTag;class Wn extends Ci._{get[Gn](){return"CommandBuffer"}constructor(t,e){super(t,e,Wn.defaultProps)}}(0,r.Z)(Wn,"defaultProps",(0,n.Z)({},Ci._.defaultProps));class jn extends Wn{constructor(t){super(t,{}),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"commands",[]),this.device=t}submitCommands(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.commands;for(const e of t)switch(e.name){case"copy-buffer-to-buffer":Hn(this.device,e.options);break;case"copy-buffer-to-texture":zn(this.device,e.options);break;case"copy-texture-to-buffer":Xn(this.device,e.options);break;case"copy-texture-to-texture":Yn(this.device,e.options)}}}function Hn(t,e){var i,n;const r=e.source,s=e.destination;t.gl.bindBuffer(36662,r.handle),t.gl.bindBuffer(36663,s.handle),t.gl.copyBufferSubData(36662,36663,null!==(i=e.sourceOffset)&&void 0!==i?i:0,null!==(n=e.destinationOffset)&&void 0!==n?n:0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function zn(t,e){throw new Error("Not implemented")}function Xn(t,e){const{source:i,mipLevel:n=0,aspect:r="all",width:s=e.source.width,height:o=e.source.height,depthOrArrayLayers:a=0,origin:c=[0,0],destination:l,byteOffset:h=0,bytesPerRow:u,rowsPerImage:d}=e;if("all"!==r)throw new Error("not supported");if(0!==n||0!==a||u||d)throw new Error("not implemented");const{framebuffer:p,destroyFramebuffer:f}=Kn(i);let _;try{const e=l,i=s||p.width,n=o||p.height,r=Ri(p.texture.props.format),a=r.dataFormat,u=r.type;t.gl.bindBuffer(35051,e.handle),_=t.gl.bindFramebuffer(36160,p.handle),t.gl.readPixels(c[0],c[1],i,n,a,u,h)}finally{t.gl.bindBuffer(35051,null),void 0!==_&&t.gl.bindFramebuffer(36160,_),f&&p.destroy()}}function Yn(t,e){const{source:i,destinationMipLevel:n=0,origin:r=[0,0],destinationOrigin:s=[0,0],destination:o}=e;let{width:a=e.destination.width,height:c=e.destination.height}=e;const{framebuffer:l,destroyFramebuffer:h}=Kn(i),[u,d]=r,[p,f,_]=s,g=t.gl.bindFramebuffer(36160,l.handle);let E,m=null;if(!(o instanceof Qi))throw new Error("invalid destination");switch(m=o,a=Number.isFinite(a)?a:m.width,c=Number.isFinite(c)?c:m.height,m.bind(0),E=m.target,E){case 3553:case 34067:t.gl.copyTexSubImage2D(E,n,p,f,u,d,a,c);break;case 35866:case 32879:t.gl.copyTexSubImage3D(E,n,p,f,_,u,d,a,c)}m&&m.unbind(),t.gl.bindFramebuffer(36160,g),h&&l.destroy()}function Kn(t){if(t instanceof Pi.x){const{width:e,height:i,id:n}=t;return{framebuffer:t.device.createFramebuffer({id:"framebuffer-for-".concat(n),width:e,height:i,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class qn extends Vn{constructor(t,e){super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"commandBuffer",void 0),this.device=t,this.commandBuffer=new jn(t)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(t){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:t})}copyBufferToTexture(t){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:t})}copyTextureToBuffer(t){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:t})}copyTextureToTexture(t){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:t})}pushDebugGroup(t){}popDebugGroup(){}insertDebugMarker(t){}resolveQuerySet(t,e,i){}}Zn=Symbol.toStringTag;class Qn extends Ci._{get[Zn](){return"VertexArray"}constructor(t,e){super(t,e,Qn.defaultProps),(0,r.Z)(this,"maxVertexAttributes",void 0),(0,r.Z)(this,"attributeInfos",void 0),(0,r.Z)(this,"indexBuffer",null),(0,r.Z)(this,"attributes",void 0),this.maxVertexAttributes=t.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=(0,bn.TX)(e.renderPipeline.shaderLayout,e.renderPipeline.bufferLayout,this.maxVertexAttributes)}setConstantWebGL(t,e){throw new Error("constant attributes not supported")}}(0,r.Z)(Qn,"defaultProps",(0,n.Z)((0,n.Z)({},Ci._.defaultProps),{},{renderPipeline:null}));var Jn=i(89600),$n=i(10814),tr=i(17473);let er,ir,nr,rr;er=Symbol.toStringTag;class sr extends Qn{get[er](){return"VertexArray"}static isConstantAttributeZeroSupported(t){return"Chrome"===(e||(0,Kt.j)()?(0,$n.d)(e)?"Electron":(e||tr.ry.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node");var e}constructor(t,e){super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"buffer",null),(0,r.Z)(this,"bufferValue",null),this.device=t,this.handle=this.device.gl.createVertexArray()}destroy(){var t;(super.destroy(),this.buffer)&&(null===(t=this.buffer)||void 0===t||t.destroy());this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(t){const e=t;if(e&&34963!==e.glTarget)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,e?e.handle:null),this.indexBuffer=e,this.device.gl.bindVertexArray(null)}setBuffer(t,e){const i=e;if(34963===i.glTarget)throw new Error("Use .setIndexBuffer()");const{size:n,type:r,stride:s,offset:o,normalized:a,integer:c,divisor:l}=this._getAccessor(t);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,i.handle),c?this.device.gl.vertexAttribIPointer(t,n,r,s,o):this.device.gl.vertexAttribPointer(t,n,r,a,s,o),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(t),this.device.gl.vertexAttribDivisor(t,l||0),this.attributes[t]=i,this.device.gl.bindVertexArray(null)}setConstantWebGL(t,e){this._enable(t,!1),this.attributes[t]=e}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let t=0;t<this.maxVertexAttributes;++t){const e=this.attributes[t];ArrayBuffer.isView(e)&&this.device.setConstantAttributeWebGL(t,e)}}_getAccessor(t){const e=this.attributeInfos[t];if(!e)throw new Error("Unknown attribute location ".concat(t));const i=Ke(e.bufferDataType);return{size:e.bufferComponents,type:i,stride:e.byteStride,offset:e.byteOffset,normalized:e.normalized,integer:e.integer,divisor:"instance"===e.stepMode?1:0}}_enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=sr.isConstantAttributeZeroSupported(this.device);(e||(i||0!==t))&&(t=Number(t),this.device.gl.bindVertexArray(this.handle),e?this.device.gl.enableVertexAttribArray(t):this.device.gl.disableVertexAttribArray(t),this.device.gl.bindVertexArray(null))}getConstantBuffer(t,e){const i=function(t){if(Array.isArray(t))return new Float32Array(t);return t}(e),n=i.byteLength*t,r=i.length*t;if(this.buffer&&n!==this.buffer.byteLength)throw new Error("Buffer size is immutable, byte length ".concat(n," !== ").concat(this.buffer.byteLength,"."));let s=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:n}),s=s||!function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}(i,this.bufferValue),s){const t=(0,Jn.FD)(e.constructor,r);(0,Jn.kg)({target:t,source:i,start:0,count:r}),this.buffer.write(t),this.bufferValue=e}return this.buffer}}ir=Symbol.toStringTag;class or extends Ci._{get[ir](){return"TransformFeedback"}constructor(t,e){super(t,e,or.defaultProps)}}(0,r.Z)(or,"defaultProps",(0,n.Z)((0,n.Z)({},Ci._.defaultProps),{},{layout:void 0,buffers:{}}));class ar extends or{constructor(t,e){super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"layout",void 0),(0,r.Z)(this,"buffers",{}),(0,r.Z)(this,"unusedBuffers",{}),(0,r.Z)(this,"bindOnUse",!0),(0,r.Z)(this,"_bound",!1),this.device=t,this.gl=t.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,e.buffers&&this.setBuffers(e.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"point-list";this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(function(t){switch(t){case"point-list":return 0;case"line-list":case"line-strip":case"line-loop-webgl":return 1;case"triangle-list":case"triangle-strip":case"triangle-fan-webgl":return 4;default:throw new Error(t)}}(t))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(t){this.buffers={},this.unusedBuffers={},this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])}))}setBuffer(t,e){const i=this._getVaryingIndex(t),{buffer:n,byteLength:r,byteOffset:s}=this._getBufferRange(e);if(i<0)return this.unusedBuffers[t]=n,void qt.c.warn("".concat(this.id," unusedBuffers varying buffer ").concat(t))();this.buffers[i]={buffer:n,byteLength:r,byteOffset:s},this.bindOnUse||this._bindBuffer(i,n,s,r)}getBuffer(t){if(cr(t))return this.buffers[t]||null;const e=this._getVaryingIndex(t);return e>=0?this.buffers[e]:null}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this.gl.bindTransformFeedback(36386,e),this):(this._bound?t=e():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,t=e(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),t)}unbind(){this.bind(null)}_getBufferRange(t){if(t instanceof Hi)return{buffer:t,byteOffset:0,byteLength:t.byteLength};const{buffer:e,byteOffset:i=0,byteLength:n=t.buffer.byteLength}=t;return{buffer:e,byteOffset:i,byteLength:n}}_getVaryingIndex(t){if(cr(t))return Number(t);for(const e of this.layout.varyings)if(t===e.name)return e.location;return-1}_bindBuffers(){for(const t in this.buffers){const{buffer:e,byteLength:i,byteOffset:n}=this._getBufferRange(this.buffers[t]);this._bindBuffer(Number(t),e,n,i)}}_unbindBuffers(){for(const t in this.buffers)this.gl.bindBufferBase(35982,Number(t),null)}_bindBuffer(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const r=e&&e.handle;r&&void 0!==n?this.gl.bindBufferRange(35982,t,r,i,n):this.gl.bindBufferBase(35982,t,r)}}function cr(t){return"number"===typeof t?Number.isInteger(t):/^\d+$/.test(t)}nr=Symbol.toStringTag;class lr extends Ci._{get[nr](){return"QuerySet"}constructor(t,e){super(t,e,lr.defaultProps)}}(0,r.Z)(lr,"defaultProps",(0,n.Z)((0,n.Z)({},Ci._.defaultProps),{},{type:void 0,count:void 0})),rr=Symbol.toStringTag;class hr extends lr{get[rr](){return"Query"}constructor(t,e){if(super(t,e),(0,r.Z)(this,"device",void 0),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"target",null),(0,r.Z)(this,"_queryPending",!1),(0,r.Z)(this,"_pollingPromise",null),this.device=t,e.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(t){return this._begin(null!==t&&void 0!==t&&t.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(t){this._queryPending||(this.target=t,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.device.gl.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((i,n)=>{const r=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):e++>t?(n("Timed out"),this._pollingPromise=null):requestAnimationFrame(r)};requestAnimationFrame(r)})),this._pollingPromise}}function ur(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,ue.h)(!1),0}}function dr(t,e){var i,n;const{sourceX:r=0,sourceY:s=0,sourceFormat:o=6408,sourceAttachment:a=36064}=e||{};let{target:c=null,sourceWidth:l,sourceHeight:h,sourceType:u}=e||{};const{framebuffer:d,deleteFramebuffer:p}=fr(t);(0,ue.h)(d);const{gl:f,handle:_}=d;l=l||d.width,h=h||d.height;const g=a-36064;u=u||(null===(i=d.colorAttachments[g])||void 0===i||null===(n=i.texture)||void 0===n?void 0:n.type)||5121,c=function(t,e,i,n,r){if(t)return t;const s=wn(e=e||5121,{clamped:!1}),o=ur(i);return new s(n*r*o)}(c,u,o,l,h),u=u||function(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Sn)}}(c);const E=f.bindFramebuffer(36160,_);return f.readPixels(r,s,l,h,o,u,c),f.bindFramebuffer(36160,E||null),p&&d.destroy(),c}function pr(t,e){const{target:i,sourceX:n=0,sourceY:r=0,sourceFormat:s=6408,targetByteOffset:o=0}=e||{};let{sourceWidth:a,sourceHeight:c,sourceType:l}=e||{};const{framebuffer:h,deleteFramebuffer:u}=fr(t);(0,ue.h)(h),a=a||h.width,c=c||h.height;const d=h;l=l||5121;let p=i;if(!p){const t=o+a*c*ur(s)*function(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,ue.h)(!1),0}}(l);p=d.device.createBuffer({byteLength:t})}const f=t.device.createCommandEncoder();return f.copyTextureToBuffer({source:t,width:a,height:c,origin:[n,r],destination:p,byteOffset:o}),f.destroy(),u&&h.destroy(),p}function fr(t){return t instanceof Li?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:_r(t),deleteFramebuffer:!0}}function _r(t,e){const{device:i,width:r,height:s,id:o}=t;return i.createFramebuffer((0,n.Z)((0,n.Z)({},e),{},{id:"framebuffer-for-".concat(o),width:r,height:s,colorAttachments:[t]}))}const gr=256,Er=1024,mr=16384,vr="clear: bad arguments";class Tr extends he{static isSupported(){return"undefined"!==typeof WebGL2RenderingContext}static attach(t){if(t instanceof Tr)return t;if((null===t||void 0===t?void 0:t.device)instanceof he)return t.device;if(!function(t){if("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)return!0;return Boolean(t&&Number.isFinite(t._version))}(t))throw new Error("Invalid WebGL2RenderingContext");return new Tr({gl:t})}static async create(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qt.c.groupCollapsed(1,"WebGLDevice created")();const i=[];e.debug&&i.push(async function(){(0,Kt.j)()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await Di(an))}()),e.spector&&i.push(async function(t){if(!globalThis.SPECTOR)try{await Di(en)}catch(e){qt.c.warn(String(e))}}()),"string"===typeof e.canvas&&i.push(me.pageLoaded);const n=await Promise.allSettled(i);for(const o of n)"rejected"===o.status&&qt.c.error("Failed to initialize debug libraries ".concat(o.reason))();if(qt.c.probe(2,"DOM is loaded")(),null!==(t=e.gl)&&void 0!==t&&t.device)return qt.c.warn("reattaching existing device")(),Tr.attach(e.gl);const r=new Tr(e),s="Created ".concat(r.type).concat(r.debug?" debug":""," context: ").concat(r.info.vendor,", ").concat(r.info.renderer," for canvas: ").concat(r.canvasContext.id);return qt.c.probe(1,s)(),qt.c.table(1,r.info)(),qt.c.groupEnd(1)(),r}constructor(t){var e,i;super((0,n.Z)((0,n.Z)({},t),{},{id:t.id||(0,$t.h)("webgl-device")})),(0,r.Z)(this,"type","webgl"),(0,r.Z)(this,"handle",void 0),(0,r.Z)(this,"features",void 0),(0,r.Z)(this,"limits",void 0),(0,r.Z)(this,"info",void 0),(0,r.Z)(this,"canvasContext",void 0),(0,r.Z)(this,"lost",void 0),(0,r.Z)(this,"_resolveContextLost",void 0),(0,r.Z)(this,"renderPass",null),(0,r.Z)(this,"gl",void 0),(0,r.Z)(this,"debug",!1),(0,r.Z)(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1}),(0,r.Z)(this,"_extensions",{}),(0,r.Z)(this,"_polyfilled",!1),(0,r.Z)(this,"spectorJS",void 0),(0,r.Z)(this,"_constants",void 0);const s=null===(e=t.gl)||void 0===e?void 0:e.device;if(s)throw new Error("WebGL context already attached to device ".concat(s.id));const o=(null===(i=t.gl)||void 0===i?void 0:i.canvas)||t.canvas;this.canvasContext=new $i(this,(0,n.Z)((0,n.Z)({},t),{},{canvas:o})),this.lost=new Promise((t=>{this._resolveContextLost=t}));let a=t.gl||null;if(a||(a=function(t,e){e=(0,n.Z)((0,n.Z)({},He),e);let i=null;const r=t=>i=t.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);let s=null;if(s||(s=t.getContext("webgl2",e)),t.removeEventListener("webglcontextcreationerror",r,!1),!s)throw new Error("Failed to create WebGL context: ".concat(i||"Unknown error"));if(e.onContextLost){const{onContextLost:i}=e;t.addEventListener("webglcontextlost",(t=>i(t)),!1)}if(e.onContextRestored){const{onContextRestored:i}=e;t.addEventListener("webglcontextrestored",(t=>i(t)),!1)}return s}(this.canvasContext.canvas,(0,n.Z)((0,n.Z)({},t),{},{onContextLost:t=>{var e;return null===(e=this._resolveContextLost)||void 0===e?void 0:e.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}}))),!a)throw new Error("WebGL context creation failed");this.handle=a,this.gl=a,this.gl.device=this,this.gl._version=2,t.spector&&(this.spectorJS=function(t){var e,i,r,s;if(null===(e=t=(0,n.Z)((0,n.Z)({},tn),t))||void 0===e||!e.spector)return null;if(!rn&&globalThis.SPECTOR&&(qt.c.probe(nn,"SPECTOR found and initialized")(),rn=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=rn)),!rn)return null;if(sn||(sn=!0,rn.spyCanvases(),null===(r=rn)||void 0===r||r.onCaptureStarted.add((t=>qt.c.info("Spector capture started:",t)())),null===(s=rn)||void 0===s||s.onCapture.add((t=>{var e,i,n;qt.c.info("Spector capture complete:",t)(),null===(e=rn)||void 0===e||e.getResultUI(),null===(i=rn)||void 0===i||i.resultView.display(),null===(n=rn)||void 0===n||n.resultView.addCapture(t)}))),null!==(i=t)&&void 0!==i&&i.canvas){var o,a;if("string"===typeof t.spector&&t.spector!==t.canvas.id)return rn;null===(o=rn)||void 0===o||o.startCapture(null===(a=t)||void 0===a?void 0:a.canvas,500),new Promise((t=>setTimeout(t,2e3))).then((t=>{var e;qt.c.info("Spector capture stopped after 2 seconds")(),null===(e=rn)||void 0===e||e.stopCapture()}))}return rn}((0,n.Z)((0,n.Z)({},this.props),{},{canvas:this.handle.canvas}))),this.info=Xe(this.gl,this._extensions),this.limits=new Mi(this.gl),this.features=new yi(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),this.canvasContext.resize();const{enable:c=!0,copyState:l=!1}=t;Ge(this.gl,{enable:c,copyState:l,log:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return qt.c.log(1,...e)()}}),t.debug&&(this.gl=ln(this.gl,(0,n.Z)((0,n.Z)({},t),{},{throwOnError:!0})),this.debug=!0,qt.c.level=Math.max(qt.c.level,1),qt.c.warn("WebGL debug mode activated. Performance reduced.")())}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(t){return vi(this.gl,t,this._extensions)}isTextureFormatFilterable(t){return function(t,e,i){if(!vi(t,e,i))return!1;if(e.startsWith("depth")||e.startsWith("stencil"))return!1;try{if(re(e).signed)return!1}catch(n){return!1}return e.endsWith("32float")?Boolean(ze(t,"OES_texture_float_linear, extensions",i)):!e.endsWith("16float")||Boolean(ze(t,"OES_texture_half_float_linear, extensions",i))}(this.gl,t,this._extensions)}isTextureFormatRenderable(t){return function(t,e,i){return!!vi(t,e,i)&&"number"!==typeof e}(this.gl,t,this._extensions)}createCanvasContext(t){throw new Error("WebGL only supports a single canvas")}createBuffer(t){const e=this._getBufferProps(t);return new Hi(this,e)}_createTexture(t){return new Qi(this,t)}createExternalTexture(t){throw new Error("createExternalTexture() not implemented")}createSampler(t){return new Xi(this,t)}createShader(t){return new _n(this,t)}createFramebuffer(t){return new Ji(this,t)}createVertexArray(t){return new sr(this,t)}createTransformFeedback(t){return new ar(this,t)}createQuerySet(t){return new hr(this,t)}createRenderPipeline(t){return new Un(this,t)}beginRenderPass(t){return new Tn(this,t)}createComputePipeline(t){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(t){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(t){return new qn(this,t)}submit(){var t;null===(t=this.renderPass)||void 0===t||t.end(),this.renderPass=null}readPixelsToArrayWebGL(t,e){return dr(t,e)}readPixelsToBufferWebGL(t,e){return pr(t,e)}setParametersWebGL(t){Fe(this.gl,t)}getParametersWebGL(t){return xe(this.gl,t)}withParametersWebGL(t,e){return Fi(this.gl,t,e)}clearWebGL(t){!function(t,e){const{framebuffer:i=null,color:n=null,depth:r=null,stencil:s=null}=e||{},o={};i&&(o.framebuffer=i);let a=0;n&&(a|=mr,!0!==n&&(o.clearColor=n)),r&&(a|=gr,!0!==r&&(o.clearDepth=r)),s&&(a|=Er,!0!==r&&(o.clearStencil=r)),(0,ue.h)(0!==a,vr);const c=t.gl;Fi(c,o,(()=>{c.clear(a)}))}(this,t)}resetWebGL(){qt.c.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),Fe(this.gl,Re)}loseDevice(){var t;let e=!1;const i=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return i&&(e=!0,i.loseContext()),null===(t=this._resolveContextLost)||void 0===t||t.call(this,{reason:"destroyed",message:"Application triggered context loss"}),e}pushState(){Ze(this.gl)}popState(){Ve(this.gl)}setSpectorMetadata(t,e){t.__SPECTOR_Metadata=e}getGLKey(t,e){e=e||this.gl2||this.gl;const i=Number(t);for(const n in e)if(e[n]===i)return"GL.".concat(n);return String(t)}setConstantAttributeWebGL(t,e){const i=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(i).fill(null);const n=this._constants[t];switch(n&&function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}(n,e)&&qt.c.info(1,"setConstantAttributeWebGL(".concat(t,") could have been skipped, value unchanged"))(),this._constants[t]=e,e.constructor){case Float32Array:!function(t,e,i){switch(i.length){case 1:t.gl.vertexAttrib1fv(e,i);break;case 2:t.gl.vertexAttrib2fv(e,i);break;case 3:t.gl.vertexAttrib3fv(e,i);break;case 4:t.gl.vertexAttrib4fv(e,i);break;default:(0,ue.h)(!1)}}(this,t,e);break;case Int32Array:!function(t,e,i){t.gl.vertexAttribI4iv(e,i)}(this,t,e);break;case Uint32Array:!function(t,e,i){t.gl.vertexAttribI4uiv(e,i)}(this,t,e);break;default:(0,ue.h)(!1)}}getExtension(t){return ze(this.gl,t,this._extensions),this._extensions}}(0,r.Z)(Tr,"type","webgl");let Rr=0;const Ar={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:pe.stats.get("animation-loop-".concat(Rr++)),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class br{constructor(t){if((0,r.Z)(this,"device",null),(0,r.Z)(this,"canvas",null),(0,r.Z)(this,"props",void 0),(0,r.Z)(this,"animationProps",null),(0,r.Z)(this,"timeline",null),(0,r.Z)(this,"stats",void 0),(0,r.Z)(this,"cpuTime",void 0),(0,r.Z)(this,"gpuTime",void 0),(0,r.Z)(this,"frameRate",void 0),(0,r.Z)(this,"display",void 0),(0,r.Z)(this,"needsRedraw","initialized"),(0,r.Z)(this,"_initialized",!1),(0,r.Z)(this,"_running",!1),(0,r.Z)(this,"_animationFrameId",null),(0,r.Z)(this,"_nextFramePromise",null),(0,r.Z)(this,"_resolveNextFrame",null),(0,r.Z)(this,"_cpuStartTime",0),this.props=(0,n.Z)((0,n.Z)({},Ar),t),!(t=this.props).device)throw new Error("No device provided");const{useDevicePixels:e=!0}=this.props;this.stats=t.stats||new v({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:t.autoResizeViewport,autoResizeDrawingBuffer:t.autoResizeDrawingBuffer,useDevicePixels:e}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(t){return this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.props.autoResizeViewport=t.autoResizeViewport||!1),"autoResizeDrawingBuffer"in t&&(this.props.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer||!1),"useDevicePixels"in t&&(this.props.useDevicePixels=t.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let t;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(!1!==t&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(t){const e=t instanceof Error?t:new Error("Unknown error");throw this.props.onError(e),e}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var t;return null!==(t=this.device)&&void 0!==t&&t.isLost||(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers()),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(t){this.display&&(this.display.destroy(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_requestAnimationFrame(){var t;this._running&&(this._animationFrameId=(t=this._animationFrame.bind(this),"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)))}_cancelAnimationFrame(){var t;null!==this._animationFrameId&&(t=this._animationFrameId,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(t){this.display?this.display._renderFrame(t):(this.props.onRender(this._getAnimationProps()),this.device.submit())}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var t,e;if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:null===(t=this.device)||void 0===t||null===(e=t.canvasContext)||void 0===e?void 0:e.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:t,height:e,aspect:i}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var t;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=(null===(t=this.device.canvasContext)||void 0===t?void 0:t.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",this.canvas instanceof HTMLCanvasElement&&t.appendChild(this.canvas),t.appendChild(e);const i=this.props.onAddHTML(e);i&&(e.innerHTML=i)}}_getSizeAndAspect(){var t,e,i,n;if(!this.device)return{width:1,height:1,aspect:1};const[r,s]=(null===(t=this.device)||void 0===t||null===(e=t.canvasContext)||void 0===e?void 0:e.getPixelSize())||[1,1];let o=1;const a=null===(i=this.device)||void 0===i||null===(n=i.canvasContext)||void 0===n?void 0:n.canvas;return a&&a.clientHeight?o=a.clientWidth/a.clientHeight:r>0&&s>0&&(o=r/s),{width:r,height:s,aspect:o}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var t,e;this.props.autoResizeDrawingBuffer&&(null===(t=this.device)||void 0===t||null===(e=t.canvasContext)||void 0===e||e.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(t){t instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[t.offsetX,t.offsetY])}_onMouseleave(t){this._getAnimationProps()._mousePosition=null}}var Sr=i(4097);const wr=1,yr=2,Mr=4,Cr={mousedown:wr,mousemove:yr,mouseup:Mr};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const i=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return!0;return!1}(i,(e=>e.pointerId===t.pointerId))||i.push(t)),e.call(this,t)}}(Sr.PointerEventInput),Sr.MouseInput.prototype.handler=function(t){let e=Cr[t.type];e&wr&&t.button>=0&&(this.pressed=!0),e&yr&&0===t.which&&(e=Mr),this.pressed&&(e&Mr&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const Pr=Sr.Manager,Ir=Sr;class Lr{constructor(t,e,i){this.element=t,this.callback=e,this.options=(0,n.Z)({enable:!0},i)}}const Or=Ir?[[Ir.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ir.Rotate,{enable:!1}],[Ir.Pinch,{enable:!1}],[Ir.Swipe,{enable:!1}],[Ir.Pan,{threshold:0,enable:!1}],[Ir.Press,{enable:!1}],[Ir.Tap,{event:"doubletap",taps:2,enable:!1}],[Ir.Tap,{event:"anytap",enable:!1}],[Ir.Tap,{enable:!1}]]:null,Nr={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Dr={doubletap:["tap"]},Fr={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},xr={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Br={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Ur={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},kr="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Gr="undefined"!==typeof window?window:i.g;"undefined"!==typeof i.g?i.g:window,"undefined"!==typeof document&&document;let Zr=!1;try{const t={get passive(){return Zr=!0,!0}};Gr.addEventListener("test",null,t),Gr.removeEventListener("test",null)}catch(Cs){Zr=!1}const Vr=-1!==kr.indexOf("firefox"),{WHEEL_EVENTS:Wr}=xr,jr="wheel",Hr=4.000244140625;class zr extends Lr{constructor(t,e,i){super(t,e,i),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;Gr.WheelEvent&&(Vr&&t.deltaMode===Gr.WheelEvent.DOM_DELTA_PIXEL&&(e/=Gr.devicePixelRatio),t.deltaMode===Gr.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%Hr===0&&(e=Math.floor(e/Hr)),t.shiftKey&&e&&(e*=.25),this.callback({type:jr,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(Wr),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!Zr&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===jr&&(this.options.enable=e)}}const{MOUSE_EVENTS:Xr}=xr,Yr="pointermove",Kr="pointerover",qr="pointerout",Qr="pointerenter",Jr="pointerleave";class $r extends Lr{constructor(t,e,i){super(t,e,i),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:n}=this.options;this.enableMoveEvent=n,this.enableLeaveEvent=n,this.enableEnterEvent=n,this.enableOutEvent=n,this.enableOverEvent=n,this.events=(this.options.events||[]).concat(Xr),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===Yr&&(this.enableMoveEvent=e),t===Kr&&(this.enableOverEvent=e),t===qr&&(this.enableOutEvent=e),t===Qr&&(this.enableEnterEvent=e),t===Jr&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(Kr,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(qr,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(Qr,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(Jr,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit(Yr,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:ts}=xr,es="keydown",is="keyup";class ns extends Lr{constructor(t,e,i){super(t,e,i),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:es,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:is,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(ts),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===es&&(this.enableDownEvent=e),t===is&&(this.enableUpEvent=e)}}const rs="contextmenu";class ss extends Lr{constructor(t,e,i){super(t,e,i),this.handleEvent=t=>{this.options.enable&&this.callback({type:rs,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===rs&&(this.options.enable=e)}}const os=1,as=2,cs=4,ls={pointerdown:os,pointermove:as,pointerup:cs,mousedown:os,mousemove:as,mouseup:cs},hs=1,us=2,ds=3,ps=0,fs=1,_s=2,gs=1,Es=2,ms=4;const vs={srcElement:"root",priority:0};class Ts{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let i=t.srcEvent.target;for(;i&&i!==e.rootElement;){if(this._emit(e,i),e.handled)return;i=i.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:a}=this;let c=vs;"string"===typeof i||i&&i.addEventListener?c=(0,n.Z)((0,n.Z)({},vs),{},{srcElement:i}):i&&(c=(0,n.Z)((0,n.Z)({},vs),i));let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const h={type:t,handler:e,srcElement:c.srcElement,priority:c.priority};r&&(h.once=!0),s&&(h.passive=!0),o.push(h),this._active=this._active||!h.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=h.priority);)u--;l.splice(u+1,0,h)}remove(t,e){const{handlers:i,handlersByElement:n}=this;for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.type===t&&s.handler===e){i.splice(r,1);const t=n.get(s.srcElement);t.splice(t.indexOf(s),1),0===t.length&&n.delete(s.srcElement)}}this._active=i.some((t=>!t.passive))}_emit(t,e){const i=this.handlersByElement.get(e);if(i){let e=!1;const r=()=>{t.handled=!0},s=()=>{t.handled=!0,e=!0},o=[];for(let a=0;a<i.length;a++){const{type:c,handler:l,once:h}=i[a];if(l((0,n.Z)((0,n.Z)({},t),{},{type:c,stopPropagation:r,stopImmediatePropagation:s})),h&&o.push(i[a]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:i}=o[t];this.remove(e,i)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return(0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)({},t),function(t){const e=ls[t.srcEvent.type];if(!e)return null;const{buttons:i,button:n,which:r}=t.srcEvent;let s=!1,o=!1,a=!1;return e===cs||e===as&&!Number.isFinite(i)?(s=r===hs,o=r===us,a=r===ds):e===as?(s=Boolean(i&gs),o=Boolean(i&ms),a=Boolean(i&Es)):e===os&&(s=n===ps,o=n===fs,a=n===_s),{leftButton:s,middleButton:o,rightButton:a}}(t)),function(t,e){const i=t.center;if(!i)return null;const n=e.getBoundingClientRect(),r=n.width/e.offsetWidth||1,s=n.height/e.offsetHeight||1;return{center:i,offsetCenter:{x:(i.x-n.left-e.clientLeft)/r,y:(i.y-n.top-e.clientTop)/s}}}(t,e)),{},{preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e})}}const Rs={events:null,recognizers:null,recognizerOptions:{},Manager:Pr,touchAction:"none",tabIndex:0};class As{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this._onBasicInput=t=>{const{srcEvent:e}=t,i=Fr[e.type];i&&this.manager.emit(i,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options=(0,n.Z)((0,n.Z)({},Rs),e),this.events=new Map,this.setElement(t);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,i=e.Manager;this.manager=new i(t,{touchAction:e.touchAction,recognizers:e.recognizers||Or}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(Nr).forEach((t=>{const e=this.manager.get(t);e&&Nr[t].forEach((t=>{e.recognizeWith(t)}))}));for(const n in e.recognizerOptions){const t=this.manager.get(n);if(t){const i=e.recognizerOptions[n];delete i.enable,t.set(i)}}this.wheelInput=new zr(t,this._onOtherEvent,{enable:!1}),this.moveInput=new $r(t,this._onOtherEvent,{enable:!1}),this.keyInput=new ns(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new ss(t,this._onOtherEvent,{enable:!1});for(const[n,r]of this.events)r.isEmpty()||(this._toggleRecognizer(r.recognizerName,!0),this.manager.on(n,r.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,i){this._addEventHandler(t,e,i,!1)}once(t,e,i){this._addEventHandler(t,e,i,!0)}watch(t,e,i){this._addEventHandler(t,e,i,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:i}=this;if(!i)return;const n=i.get(t);if(n&&n.options.enable!==e){n.set({enable:e});const r=Dr[t];r&&!this.options.recognizers&&r.forEach((r=>{const s=i.get(r);e?(s.requireFailure(t),n.dropRequireFailure(r)):s.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,i,n,r){if("string"!==typeof t){i=e;for(const e in t)this._addEventHandler(e,t[e],i,n,r);return}const{manager:s,events:o}=this,a=Ur[t]||t;let c=o.get(a);c||(c=new Ts(this),o.set(a,c),c.recognizerName=Br[a]||a,s&&s.on(a,c.handleEvent)),c.add(t,e,i,n,r),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(t,e){if("string"!==typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:i}=this,n=Ur[t]||t,r=i.get(n);if(r&&(r.remove(t,e),r.isEmpty())){const{recognizerName:t}=r;let e=!1;for(const n of i.values())if(n.recognizerName===t&&!n.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}var bs=i(27618);function Ss(){}const ws={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:Ss,onWebGLInitialized:Ss,onResize:Ss,onViewStateChange:Ss,onInteractionStateChange:Ss,onBeforeRender:Ss,onAfterRender:Ss,onLoad:Ss,onError:t=>f.Z.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:t=>{let{isDragging:e}=t;return e?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class ys{constructor(t){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new v({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const i=t.offsetCenter;if(!i)return;e.x=i.x,e.y=i.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t},this._onEvent=t=>{const e=W.FP[t.type],i=t.offsetCenter;if(!e||!i||!this.layerManager)return;const n=this.layerManager.getLayers(),r=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:n,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=r,o=s&&(s[e.handler]||s.props[e.handler]),a=this.props[e.handler];let c=!1;o&&(c=o.call(s,r,t)),c||(null===a||void 0===a||a(r,t),this.widgetManager.onEvent(r,t))},this._onPointerDown=t=>{const e=t.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo},this.props=(0,n.Z)((0,n.Z)({},ws),t),(t=this.props).viewState&&t.initialViewState&&f.Z.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,t.device?this.device=t.device:t.gl&&(t.gl instanceof WebGLRenderingContext&&f.Z.error("WebGL1 context not supported.")(),this.device=Tr.attach(t.gl));let e=this.device;e||(pe.registerDevices([Tr]),e=pe.createDevice((0,n.Z)((0,n.Z)({},t.deviceProps),{},{canvas:this._createCanvas(t)}))),this.animationLoop=this._createAnimationLoop(e,t),this.setProps(t),t._typedArrayManagerProps&&Tt.Z.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,i,n,r,s,o,a,c,l;(null===(t=this.animationLoop)||void 0===t||t.stop(),null===(e=this.animationLoop)||void 0===e||e.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(i=this.layerManager)||void 0===i||i.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(s=this.deckRenderer)||void 0===s||s.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(a=this.eventManager)||void 0===a||a.destroy(),this.eventManager=null,null===(c=this.widgetManager)||void 0===c||c.finalize(),this.widgetManager=null,this.props.canvas||this.props.device||this.props.gl||!this.canvas)||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(t){var e;this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&f.Z.removed("onLayerHover","onHover")(),"onLayerClick"in t&&f.Z.removed("onLayerClick","onClick")(),t.initialViewState&&!(0,w.v)(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const i=Object.create(this.props);Object.assign(i,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),null===(e=this.animationLoop)||void 0===e||e.setProps(i),this.layerManager&&(this.viewManager.setProps(i),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(i),this.effectManager.setProps(i),this.deckRenderer.setProps(i),this.deckPicker.setProps(i),this.widgetManager.setProps(i)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(t),n=this.layerManager.needsRedraw(t),r=this.effectManager.needsRedraw(t),s=this.deckRenderer.needsRedraw(t);return e=e||i||n||r||s,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return(0,bs.Z)(this.viewManager),this.viewManager.views}getViewports(t){return(0,bs.Z)(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const i in t)this.layerManager.resourceManager.add({resourceId:i,data:t[i],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_addDefaultShaderModule(t){this.layerManager.addDefaultShaderModule(t)}_removeDefaultShaderModule(t){var e;null===(e=this.layerManager)||void 0===e||e.removeDefaultShaderModule(t)}_pick(t,e,i){(0,bs.Z)(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();const s=this.deckPicker[t]((0,n.Z)({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects()},i));return r.get(e).timeEnd(),s}_createCanvas(t){let e=t.canvas;if("string"===typeof e&&(e=document.getElementById(e),(0,bs.Z)(e)),!e){e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay";(t.parent||document.body).appendChild(e)}return Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:i}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(i||0===i){var n;const e=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(n=t.style)||void 0===n?void 0:n.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){var t,e;const{canvas:i}=this;if(!i)return;const n=null!==(t=i.clientWidth)&&void 0!==t?t:i.width,r=null!==(e=i.clientHeight)&&void 0!==e?e:i.height;var s,o;n===this.width&&r===this.height||(this.width=n,this.height=r,null===(s=this.viewManager)||void 0===s||s.setProps({width:n,height:r}),null===(o=this.layerManager)||void 0===o||o.activateViewport(this.getViewports()[0]),this.props.onResize({width:n,height:r}))}_createAnimationLoop(t,e){const{gl:i,onError:n,useDevicePixels:r}=e;return new br({device:t,useDevicePixels:r,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,onInitialize:t=>this._setDevice(t.device),onRender:this._onRenderFrame.bind(this),onError:n})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:t}=this.props,e=Array.isArray(t)?t:t?[t]:[new M.Z({id:"default-view"})];return e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:r,emptyInfo:s}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=r.length>0;let o=s,a=!1;for(const i of r){var e;o=i,a=(null===(e=i.layer)||void 0===e?void 0:e.onHover(i,t.event))||a}var i,n;if(!a)null===(i=(n=this.props).onHover)||void 0===i||i.call(n,o,t.event),this.widgetManager.onHover(o,t.event);t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(t){var e,i;if(this.device=t,!this.animationLoop)return;this.canvas||(this.canvas=null===(i=this.device.canvasContext)||void 0===i?void 0:i.canvas);this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof Tr&&this.props.onWebGLInitialized(this.device.gl);const n=new a;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new As(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const s in W.FP)this.eventManager.on(s,this._onEvent);this.viewManager=new y({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new S(this.device,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new it({deck:this,device:this.device}),this.deckRenderer=new at(this.device),this.deckPicker=new pt(this.device),this.widgetManager=new Et({deck:this,parentElement:null===(e=this.canvas)||void 0===e?void 0:e.parentElement}),this.widgetManager.addDefault(new vt),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){var i;const{device:r,gl:s}=this.layerManager.context;this.props.onBeforeRender({device:r,gl:s});const o=(0,n.Z)({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects()},e);null===(i=this.deckRenderer)||void 0===i||i.renderLayers(o),"screen"===o.pass&&this.widgetManager.onRedraw({viewports:o.viewports,layers:o.layers}),this.props.onAfterRender({device:r,gl:s})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),f.Z.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState=(0,n.Z)((0,n.Z)({},this.viewState),{},{[t.viewId]:e}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const i=pe.stats.get("Memory Usage");t.bufferMemory=i.get("Buffer Memory").count,t.textureMemory=i.get("Texture Memory").count,t.renderbufferMemory=i.get("Renderbuffer Memory").count,t.gpuMemory=i.get("GPU Memory").count}}ys.defaultProps=ws,ys.VERSION=Yt;const Ms=ys},23029:(t,e,i)=>{"use strict";i.d(e,{E7:()=>o,Wb:()=>s,bN:()=>l,dt:()=>n,fO:()=>c,fm:()=>r,lY:()=>a});const n={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},r=Symbol.for("component"),s=Symbol.for("propTypes"),o=Symbol.for("deprecatedProps"),a=Symbol.for("asyncPropDefaults"),c=Symbol.for("asyncPropOriginal"),l=Symbol.for("asyncPropResolved")},35485:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p});const n={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\nfloat sin_taylor_fp32(float a) {\nfloat r, s, t, x;\nif (a == 0.0) {\nreturn 0.0;\n}\nx = -a * a;\ns = a;\nr = a;\nr = r * x;\nt = r * INVERSE_FACTORIAL_3;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_5;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_7;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_9;\ns = s + t;\nreturn s;\n}\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\nif (a == 0.0) {\nsin_t = 0.0;\ncos_t = 1.0;\n}\nsin_t = sin_taylor_fp32(a);\ncos_t = sqrt(1.0 - sin_t * sin_t);\n}\nfloat tan_taylor_fp32(float a) {\nfloat sin_a;\nfloat cos_a;\nif (a == 0.0) {\nreturn 0.0;\n}\nfloat z = floor(a / TWO_PI);\nfloat r = a - TWO_PI * z;\nfloat t;\nfloat q = floor(r / PI_2 + 0.5);\nint j = int(q);\nif (j < -2 || j > 2) {\nreturn 1.0 / 0.0;\n}\nt = r - PI_2 * q;\nq = floor(t / PI_16 + 0.5);\nint k = int(q);\nint abs_k = int(abs(float(k)));\nif (abs_k > 4) {\nreturn 1.0 / 0.0;\n} else {\nt = t - PI_16 * q;\n}\nfloat u = 0.0;\nfloat v = 0.0;\nfloat sin_t, cos_t;\nfloat s, c;\nsincos_taylor_fp32(t, sin_t, cos_t);\nif (k == 0) {\ns = sin_t;\nc = cos_t;\n} else {\nif (abs(float(abs_k) - 1.0) < 0.5) {\nu = COS_TABLE_0;\nv = SIN_TABLE_0;\n} else if (abs(float(abs_k) - 2.0) < 0.5) {\nu = COS_TABLE_1;\nv = SIN_TABLE_1;\n} else if (abs(float(abs_k) - 3.0) < 0.5) {\nu = COS_TABLE_2;\nv = SIN_TABLE_2;\n} else if (abs(float(abs_k) - 4.0) < 0.5) {\nu = COS_TABLE_3;\nv = SIN_TABLE_3;\n}\nif (k > 0) {\ns = u * sin_t + v * cos_t;\nc = u * cos_t - v * sin_t;\n} else {\ns = u * sin_t - v * cos_t;\nc = u * cos_t + v * sin_t;\n}\n}\nif (j == 0) {\nsin_a = s;\ncos_a = c;\n} else if (j == 1) {\nsin_a = c;\ncos_a = -s;\n} else if (j == -1) {\nsin_a = -c;\ncos_a = s;\n} else {\nsin_a = -s;\ncos_a = -c;\n}\nreturn sin_a / cos_a;\n}\n#endif\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nreturn tan_taylor_fp32(a);\n#else\nreturn tan(a);\n#endif\n}\n"},r="#define SMOOTH_EDGE_RADIUS 0.5",s={name:"geometry",vs:"\n".concat(r,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(r,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")};var o=i(6955);const a=Object.keys(o.Df).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(o.Df[t],";"))).join(""),c=Object.keys(o.zG).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(o.zG[t],";"))).join(""),l=Object.keys(o.iI).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(o.iI[t],";"))).join(""),h="".concat(a,"\n").concat(c,"\n").concat(l,"\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\nfloat y = clamp(lat, -89.9, 89.9);\nreturn 1.0 / cos(radians(y));\n}\nfloat project_size() {\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\nproject_uPseudoMeters == false) {\nif (geometry.position.w == 0.0) {\nreturn project_size_at_latitude(geometry.worldPosition.y);\n}\nfloat y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\nfloat y2 = y * y;\nfloat y4 = y2 * y2;\nfloat y6 = y4 * y2;\nreturn 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n}\nreturn 1.0;\n}\nfloat project_size_at_latitude(float meters, float lat) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size();\n}\nvec2 project_size(vec2 meters) {\nreturn meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\nvec3 project_size(vec3 meters) {\nreturn meters * project_uCommonUnitsPerMeter * project_size();\n}\nvec4 project_size(vec4 meters) {\nreturn vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\nvec3 uz = normalize(up);\nvec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\nvec3 uy = cross(uz, ux);\nreturn mat3(ux, uy, uz);\n}\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\ntransform = project_get_orientation_matrix(commonPosition);\nreturn true;\n}\nreturn false;\n}\nvec3 project_normal(vec3 vector) {\nvec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\nvec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\nmat3 rotation;\nif (project_needs_rotation(geometry.position.xyz, rotation)) {\nn = rotation * n;\n}\nreturn n;\n}\nvec4 project_offset_(vec4 offset) {\nfloat dy = offset.y;\nvec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\nreturn vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\nfloat x = lnglat.x;\nif (project_uWrapLongitude) {\nx = mod(x + 180., 360.0) - 180.;\n}\nfloat y = clamp(lnglat.y, -89.9, 89.9);\nreturn vec2(\nradians(x) + PI,\nPI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n) * WORLD_SCALE;\n}\nvec3 project_globe_(vec3 lnglatz) {\nfloat lambda = radians(lnglatz.x);\nfloat phi = radians(lnglatz.y);\nfloat cosPhi = cos(phi);\nfloat D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\nreturn vec3(\nsin(lambda) * cosPhi,\n-cos(lambda) * cosPhi,\nsin(phi)\n) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\nvec4 position_world = project_uModelMatrix * position;\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_mercator_(position_world.xy),\nproject_size_at_latitude(position_world.z, position_world.y),\nposition_world.w\n);\n}\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\nposition_world.xyz += project_uCoordinateOrigin;\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_globe_(position_world.xyz),\nposition_world.w\n);\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nif (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\nreturn vec4(\nproject_mercator_(position_world.xy) - project_uCommonOrigin.xy,\nproject_size(position_world.z),\nposition_world.w\n);\n}\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\nposition_world.xyz -= project_uCoordinateOrigin;\n}\nreturn project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\nvec4 project_position(vec4 position) {\nreturn project_position(position, ZERO_64_LOW);\n}\nvec3 project_position(vec3 position, vec3 position64Low) {\nvec4 projected_position = project_position(vec4(position, 1.0), position64Low);\nreturn projected_position.xyz;\n}\nvec3 project_position(vec3 position) {\nvec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\nreturn projected_position.xyz;\n}\nvec2 project_position(vec2 position) {\nvec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\nreturn projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\nreturn viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\nreturn project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\nvec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\nreturn offset * project_uFocalDistance;\n}\nfloat project_size_to_pixel(float meters) {\nreturn project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\nif (unit == UNIT_METERS) return project_size_to_pixel(size);\nif (unit == UNIT_COMMON) return size * project_uScale;\nreturn size;\n}\nfloat project_pixel_size(float pixels) {\nreturn pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\nreturn pixels / project_uScale;\n}\n");var u=i(81546);const d={};const p={name:"project",dependencies:[n,s],vs:h,getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return"viewport"in t?(0,u.C)(t):{}}}},81546:(t,e,i)=>{"use strict";i.d(e,{C:()=>f,v:()=>p});var n=i(54499),r=i(70581),s=i(6955),o=i(96926);const a=[0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=[0,0,0],u=[0,0,0],d=(0,o.Z)((function(t){let{viewport:e,devicePixelRatio:i,coordinateSystem:o,coordinateOrigin:u}=t;const{projectionCenter:d,viewProjectionMatrix:f,originCommon:_,cameraPosCommon:g,shaderCoordinateOrigin:E,geospatialOrigin:m}=function(t,e,i){const{viewMatrixUncentered:s,projectionMatrix:o}=t;let{viewMatrix:l,viewProjectionMatrix:h}=t,u=a,d=a,f=t.cameraPosition;const{geospatialOrigin:_,shaderCoordinateOrigin:g,offsetMode:E}=p(t,e,i);E&&(d=t.projectPosition(_||g),f=[f[0]-d[0],f[1]-d[1],f[2]-d[2]],d[3]=1,u=n.fF([],d,h),l=s||l,h=r.Jp([],o,l),h=r.Jp([],h,c));return{viewMatrix:l,viewProjectionMatrix:h,projectionCenter:u,originCommon:d,cameraPosCommon:f,shaderCoordinateOrigin:g,geospatialOrigin:_}}(e,o,u),v=e.getDistanceScales(),T=[e.width*i,e.height*i],R=n.fF([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,A={project_uCoordinateSystem:o,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:E,project_uCommonOrigin:_.slice(0,3),project_uCenter:d,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:T,project_uDevicePixelRatio:i,project_uFocalDistance:R,project_uCommonUnitsPerMeter:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:h,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:f,project_uModelMatrix:l,project_uCameraPosition:g};if(m){const t=e.getDistanceScales(m);switch(o){case s.Df.METER_OFFSETS:A.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,A.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case s.Df.LNGLAT:case s.Df.LNGLAT_OFFSETS:e._pseudoMeters||(A.project_uCommonUnitsPerMeter=t.unitsPerMeter),A.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,A.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case s.Df.CARTESIAN:A.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],A.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return A}));function p(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;i.length<3&&(i=[i[0],i[1],0]);let n,r=i,o=!0;switch(n=e===s.Df.LNGLAT_OFFSETS||e===s.Df.METER_OFFSETS?i:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case s.zG.WEB_MERCATOR:e!==s.Df.LNGLAT&&e!==s.Df.CARTESIAN||(n=[0,0,0],o=!1);break;case s.zG.WEB_MERCATOR_AUTO_OFFSET:e===s.Df.LNGLAT?r=n:e===s.Df.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],n=t.unprojectPosition(r),r[0]-=i[0],r[1]-=i[1],r[2]-=i[2]);break;case s.zG.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case s.zG.GLOBE:o=!1,n=null;break;default:o=!1}return{geospatialOrigin:n,shaderCoordinateOrigin:r,offsetMode:o}}function f(t){let{viewport:e,devicePixelRatio:i=1,modelMatrix:n=null,coordinateSystem:r=s.Df.DEFAULT,coordinateOrigin:o=u,autoWrapLongitude:a=!1}=t;r===s.Df.DEFAULT&&(r=e.isGeospatial?s.Df.LNGLAT:s.Df.CARTESIAN);const c=d({viewport:e,devicePixelRatio:i,coordinateSystem:r,coordinateOrigin:o});return c.project_uWrapLongitude=a,c.project_uModelMatrix=n||l,c}},91155:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});class n{constructor(t){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=t}get inProgress(){return this._inProgress}start(t){var e,i;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(i=this.settings).onStart)||void 0===e||e.call(i,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}},27618:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}i.d(e,{Z:()=>n})},70898:(t,e,i)=>{"use strict";function n(t,e,i){if(t===e)return!0;if(!i||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r],i-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const o of r){if(!e.hasOwnProperty(o))return!1;if(!n(t[o],e[o],i-1))return!1}return!0}return!1}i.d(e,{v:()=>n})},22612:(t,e,i)=>{"use strict";function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(t)?r(t,e,[]):e(t)?[t]:[]}function r(t,e,i){let n=-1;for(;++n<t.length;){const s=t[n];Array.isArray(s)?r(s,e,i):e(s)&&i.push(s)}return i}function s(t){let{target:e,source:i,start:n=0,count:r=1}=t;const s=i.length,o=r*s;let a=0;for(let c=n;a<s;a++)e[c++]=i[a];for(;a<o;)a<o-a?(e.copyWithin(n+a,n,n+a),a*=2):(e.copyWithin(n+a,n,n+o-a),a=o);return e}i.d(e,{k:()=>s,x:()=>n})},95674:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=new(i(91581).Z)({id:"deck"})},77620:(t,e,i)=>{"use strict";i.d(e,{Du:()=>a,TK:()=>u,Xt:()=>o,bS:()=>s,cc:()=>d});var n=i(93170),r=i(90227);function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[12],t[13],t[14]]}function a(t){return{left:l(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:l(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:l(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:l(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:l(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:l(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const c=new r.P;function l(t,e,i,n){c.set(t,e,i);const s=c.len();return{distance:n/s,normal:new r.P(-t/s,-e/s,-i/s)}}let h;function u(t,e){const{size:i=1,startIndex:r=0}=e,s=void 0!==e.endIndex?e.endIndex:t.length,o=(s-r)/i;h=n.Z.allocate(h,o,{type:Float32Array,size:2*i});let a=r,c=0;for(;a<s;){for(let e=0;e<i;e++){const n=t[a++];h[c+e]=n,h[c+e+i]=(l=n)-Math.fround(l)}c+=2*i}var l;return h.subarray(0,o*i*2)}function d(t){let e=null,i=!1;for(const n of t)n&&(e?(i||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],i=!0),e[0][0]=Math.min(e[0][0],n[0][0]),e[0][1]=Math.min(e[0][1],n[0][1]),e[1][0]=Math.max(e[1][0],n[1][0]),e[1][1]=Math.max(e[1][1],n[1][1])):e=n);return e}},96926:(t,e,i)=>{"use strict";function n(t,e){if(t===e)return!0;if(Array.isArray(t)){const i=t.length;if(!e||e.length!==i)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}return!1}function r(t){let e,i={};return r=>{for(const s in r)if(!n(r[s],i[s])){e=t(r),i=r;break}return e}}i.d(e,{Z:()=>r})},93170:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,i){let{size:n=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}=i;const l=r||t&&t.constructor||Float32Array,h=e*n+s;if(ArrayBuffer.isView(t)){if(h<=t.length)return t;if(h*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new l(t.buffer,0,h)}let u=1/0;c&&(u=c*n+s);const d=this._allocate(l,h,a,u);return t&&o?d.set(t):a||d.fill(0,0,4),this._release(t),d}release(t){this._release(t)}_allocate(t,e,i,n){let r=Math.max(Math.ceil(e*this.opts.overAlloc),1);r>n&&(r=n);const s=this._pool,o=t.BYTES_PER_ELEMENT*r,a=s.findIndex((t=>t.byteLength>=o));if(a>=0){const e=new t(s.splice(a,1)[0],0,r);return i&&e.fill(0),e}return new t(r)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:i}=t,{byteLength:n}=i,r=e.findIndex((t=>t.byteLength>=n));r<0?e.push(i):(r>0||e.length<this.opts.poolSize)&&e.splice(r,0,i),e.length>this.opts.poolSize&&e.shift()}}},55108:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var n=i(95674),r=i(77620),s=i(60669),o=i(24541),a=i(90227),c=i(70581),l=i(91960),h=i(6955);const u=Math.PI/180,d=(0,r.bS)(),p=[0,0,0],f={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class _{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._frustumPlanes={},this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||f,this.focalDistance=t.focalDistance||1,this.position=t.position||p,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:i}=t;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?h.zG.WEB_MERCATOR:h.zG.WEB_MERCATOR_AUTO_OFFSET:h.zG.IDENTITY}equals(t){return t instanceof _&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&(0,o.fS)(t.projectionMatrix,this.projectionMatrix)&&(0,o.fS)(t.viewMatrix,this.viewMatrix))}project(t){let{topLeft:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.projectPosition(t),n=(0,l.aW)(i,this.pixelProjectionMatrix),[r,s]=n,o=e?s:this.height-s;return 2===t.length?[r,o]:[r,o,n[2]]}unproject(t){let{topLeft:e=!0,targetZ:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r,s]=t,o=e?r:this.height-r,a=i&&i*this.distanceScales.unitsPerMeter[2],c=(0,l.CT)([n,o,s],this.pixelUnprojectionMatrix,a),[h,u,d]=this.unprojectPosition(c);return Number.isFinite(s)?[h,u,d]:Number.isFinite(i)?[h,u,i]:[h,u]}projectPosition(t){const[e,i]=this.projectFlat(t);return[e,i,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,i]=this.unprojectFlat(t);return[e,i,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=(0,l.w5)(t);return e[1]=(0,o.uZ)(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?(0,l.es)(t):t}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,0],t),i=this.unproject([this.width,0],t),n=this.unproject([0,this.height],t),r=this.unproject([this.width,this.height],t);return[Math.min(e[0],i[0],n[0],r[0]),Math.min(e[1],i[1],n[1],r[1]),Math.max(e[0],i[0],n[0],r[0]),Math.max(e[1],i[1],n[1],r[1])]}getDistanceScales(t){return t?(0,l.ro)({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel(t){let{x:e,y:i,width:n=1,height:r=1}=t;return e<this.x+this.width&&this.x<e+n&&i<this.y+this.height&&this.y<i+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,(0,r.Du)(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,i=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=(0,l.Bf)({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||(0,l.ro)({latitude:i,longitude:e}));const n=Math.pow(2,this.zoom);this.scale=n;const{position:r,modelMatrix:o}=t;let c=p;if(r&&(c=o?new s.y(o).transformAsVector(r,[]):r),this.isGeospatial){const t=this.projectPosition([e,i,0]);this.center=new a.P(c).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(c)}_initMatrices(t){const{viewMatrix:e=d,projectionMatrix:i=null,orthographic:l=!1,fovyRadians:h,fovy:p=75,near:f=.1,far:_=1e3,padding:g=null,focalDistance:E=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new s.y).multiplyRight(e).translate(new a.P(this.center).negate()),this.projectionMatrix=i||function(t){let{width:e,height:i,orthographic:n,fovyRadians:r,focalDistance:a,padding:c,near:l,far:h}=t;const u=e/i,d=n?(new s.y).orthographic({fovy:r,aspect:u,focalDistance:a,near:l,far:h}):(new s.y).perspective({fovy:r,aspect:u,near:l,far:h});if(c){const{left:t=0,right:n=0,top:r=0,bottom:s=0}=c,a=(0,o.uZ)((t+e-n)/2,0,e)-e/2,l=(0,o.uZ)((r+i-s)/2,0,i)-i/2;d[8]-=2*a/e,d[9]+=2*l/i}return d}({width:this.width,height:this.height,orthographic:l,fovyRadians:h||p*u,focalDistance:E,padding:g,near:f,far:_});const m=(0,r.bS)();c.Jp(m,m,this.projectionMatrix),c.Jp(m,m,this.viewMatrix),this.viewProjectionMatrix=m,this.viewMatrixInverse=c.U_([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=(0,r.Xt)(this.viewMatrixInverse);const v=(0,r.bS)(),T=(0,r.bS)();c.bA(v,v,[this.width/2,-this.height/2,1]),c.Iu(v,v,[1,-1,0]),c.Jp(T,v,this.viewProjectionMatrix),this.pixelProjectionMatrix=T,this.pixelUnprojectionMatrix=c.U_((0,r.bS)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||n.Z.warn("Pixel project matrix not invertible")()}}_.displayName="Viewport";const g=_},74144:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(18489),r=i(55108),s=i(91960),o=i(24541),a=i(60669),c=i(85158);class l extends r.Z{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:i=0,zoom:r=0,pitch:c=0,bearing:l=0,nearZMultiplier:h=.1,farZMultiplier:u=1.01,nearZ:d,farZ:p,orthographic:f=!1,projectionMatrix:_,repeat:g=!1,worldOffset:E=0,position:m,padding:v,legacyMeterSizes:T=!1}=t;let{width:R,height:A,altitude:b=1.5}=t;const S=Math.pow(2,r);let w;R=R||1,A=A||1;let y=null;if(_)b=_[5]/2,w=(0,s.Lu)(b);else{let i;if(t.fovy?(w=t.fovy,b=(0,s.sj)(w)):w=(0,s.Lu)(b),v){const{top:t=0,bottom:e=0}=v;i=[0,(0,o.uZ)((t+A-e)/2,0,A)-A/2]}y=(0,s.wl)({width:R,height:A,scale:S,center:m&&[0,0,m[2]*(0,s.NC)(e)],offset:i,pitch:c,fovy:w,nearZMultiplier:h,farZMultiplier:u}),Number.isFinite(d)&&(y.near=d),Number.isFinite(p)&&(y.far=p)}let M=(0,s.lf)({height:A,pitch:c,bearing:l,scale:S,altitude:b});if(E){M=(new a.y).translate([512*E,0,0]).multiplyLeft(M)}super((0,n.Z)((0,n.Z)((0,n.Z)({},t),{},{width:R,height:A,viewMatrix:M,longitude:i,latitude:e,zoom:r},y),{},{fovy:w,focalDistance:b})),this.latitude=e,this.longitude=i,this.zoom=r,this.pitch=c,this.bearing=l,this.altitude=b,this.fovy=w,this.orthographic=f,this._subViewports=g?[]:null,this._pseudoMeters=T,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),i=Math.ceil((t[2]-180)/360);for(let r=e;r<=i;r++){const t=r?new l((0,n.Z)((0,n.Z)({},this),{},{worldOffset:r})):this;this._subViewports.push(t)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,i]=this.projectFlat(t);return[e,i,(t[2]||0)*(0,s.NC)(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,i]=this.unprojectFlat(t);return[e,i,(t[2]||0)/(0,s.NC)(i)]}addMetersToLngLat(t,e){return(0,s.eG)(t,e)}panByPosition(t,e){const i=(0,s.CT)(e,this.pixelUnprojectionMatrix),n=this.projectFlat(t),r=c.IH([],n,c.tk([],i)),o=c.IH([],this.center,r),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=(0,s.zX)(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:i,height:r}=this,{longitude:o,latitude:a,zoom:c}=(0,s.Xg)((0,n.Z)({width:i,height:r,bounds:t},e));return new l({width:i,height:r,longitude:o,latitude:a,zoom:c})}}l.displayName="WebMercatorViewport";const h=l},2518:(t,e,i)=>{"use strict";i.d(e,{Z:()=>U});var n=i(18489);const r=/([0-9]+\.?[0-9]*)(%|px)/;function s(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=r.exec(t);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function o(t,e){return t.relative?Math.round(t.position*e):t.position}var a=i(70898);class c{constructor(t){const{id:e,x:i=0,y:r=0,width:o="100%",height:a="100%",padding:c=null}=t;this.id=e||this.constructor.displayName||"view",this.props=(0,n.Z)((0,n.Z)({},t),{},{id:this.id}),this._x=s(i),this._y=s(r),this._width=s(o),this._height=s(a),this._padding=c&&{left:s(c.left||0),right:s(c.right||0),top:s(c.top||0),bottom:s(c.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||this.ViewportType===t.ViewportType&&(0,a.v)(this.props,t.props,2)}makeViewport(t){let{width:e,height:i,viewState:r}=t;r=this.filterViewState(r);const s=this.getDimensions({width:e,height:i});return s.height&&s.width?new this.ViewportType((0,n.Z)((0,n.Z)((0,n.Z)({},r),this.props),s)):null}getViewStateId(){const{viewState:t}=this.props;return"string"===typeof t?t:(null===t||void 0===t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e=(0,n.Z)({},t);for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions(t){let{width:e,height:i}=t;const n={x:o(this._x,e),y:o(this._y,i),width:o(this._width,e),height:o(this._height,i)};return this._padding&&(n.padding={left:o(this._padding.left,e),top:o(this._padding.top,i),right:o(this._padding.right,e),bottom:o(this._padding.bottom,i)}),n}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"===typeof t?{type:t}:(0,n.Z)({type:this.ControllerType},t):null}}var l=i(74144),h=i(24541),u=i(91155);const d=()=>{},p=2,f=3,_=t=>t,g=1;class E{constructor(t){this._onTransitionUpdate=t=>{const{time:e,settings:{interpolator:i,startProps:r,endProps:s,duration:o,easing:a}}=t,c=a(e/o),l=i.interpolateProps(r,s,c);this.propsInTransition=this.getControllerState((0,n.Z)((0,n.Z)({},this.props),l)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new u.Z(t.timeline),this.onViewStateChange=t.onViewStateChange||d,this.onStateChange=t.onStateChange||d}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const i=this.props;if(this.props=t,!i||this._shouldIgnoreViewportChange(i,t))return!1;if(this._isTransitionEnabled(t)){let r=i;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;r=(0,n.Z)((0,n.Z)({},i),t===p?e:this.propsInTransition||i)}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:i}=t;return(e>0||"auto"===e)&&Boolean(i)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){if(this.transition.inProgress){return this.transition.settings.interruption===f||this._isUpdateDueToCurrentTransition(e)}return!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const i=this.getControllerState(t),n=this.getControllerState(e).shortestPathFrom(i),r=e.transitionInterpolator,s=r.getDuration?r.getDuration(t,e):e.transitionDuration;if(0===s)return;const o=r.initializeProps(t,n);this.propsInTransition={};const a={duration:s,easing:e.transitionEasing||_,interpolator:r,interruption:e.transitionInterruption||g,startProps:o.start,endProps:o.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null===t||void 0===t||t(e)}}}var m=i(27618);class v{constructor(t){const{compare:e,extract:i,required:n}=t;this._propsToCompare=e,this._propsToExtract=i||e,this._requiredProps=n}arePropsEqual(t,e){for(const i of this._propsToCompare)if(!(i in t)||!(i in e)||!(0,h.fS)(t[i],e[i]))return!1;return!0}initializeProps(t,e){const i={},n={};for(const r of this._propsToExtract)(r in t||r in e)&&(i[r]=t[r],n[r]=e[r]);return this._checkRequiredProps(i),this._checkRequiredProps(n),{start:i,end:n}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const i=t[e];(0,m.Z)(Number.isFinite(i)||Array.isArray(i),"".concat(e," is required for transition"))}))}}const T=["longitude","latitude","zoom","bearing","pitch"],R=["longitude","latitude","zoom"];class A extends v{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=Array.isArray(t)?t:t.transitionProps,i=Array.isArray(t)?{}:t;i.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:T,required:R},super(i.transitionProps),this.opts=i}initializeProps(t,e){const i=super.initializeProps(t,e),{makeViewport:n,around:r}=this.opts;if(n&&r){const s=n(t),o=n(e),a=s.unproject(r);i.start.around=r,Object.assign(i.end,{around:o.project(a),aroundPosition:a,width:e.width,height:e.height})}return i}interpolateProps(t,e,i){const r={};for(const n of this._propsToExtract)r[n]=(0,h.t7)(t[n]||0,e[n]||0,i);if(e.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport((0,n.Z)((0,n.Z)({},e),r));Object.assign(r,s.panByPosition(e.aroundPosition,(0,h.t7)(t.around,e.around,i)))}return r}}const b={transitionDuration:0},S=t=>1-(1-t)*(1-t),w=["wheel"],y=["panstart","panmove","panend"],M=["pinchstart","pinchmove","pinchend"],C=["tripanstart","tripanmove","tripanend"],P=["doubletap"],I=["keydown"],L={};class O{constructor(t){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new E((0,n.Z)((0,n.Z)({},t),{},{getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)})),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;if(this._events[e])null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState((0,n.Z)((0,n.Z)({makeViewport:this.makeViewport},this.props),this.state)),this._controllerState}getCenter(t){const{x:e,y:i}=this.props,{offsetCenter:n}=t;return[n.x-e,n.y-i]}isPointInBounds(t,e){const{width:i,height:n}=this.props;if(e&&e.handled)return!1;const r=t[0]>=0&&t[0]<=i&&t[1]>=0&&t[1]<=n;return r&&e&&e.stopPropagation(),r}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:i=!0,dragPan:n=!0,dragRotate:r=!0,doubleClickZoom:s=!0,touchZoom:o=!0,touchRotate:a=!1,keyboard:c=!0}=t,l=Boolean(this.onViewStateChange);this.toggleEvents(w,l&&i),this.toggleEvents(y,l),this.toggleEvents(M,l&&(o||a)),this.toggleEvents(C,l&&a),this.toggleEvents(P,l&&s),this.toggleEvents(I,l&&c),this.scrollZoom=i,this.dragPan=n,this.dragRotate=r,this.doubleClickZoom=s,this.touchZoom=o,this.touchRotate=a,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(0,n.Z)((0,n.Z)({},t.getViewportProps()),e),s=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(i),s){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t,viewId:this.props.id})}}_onTransition(t){this.onViewStateChange((0,n.Z)((0,n.Z)({},t),{},{interactionState:this._interactionState,viewId:this.props.id}))}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let i=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const n=this.controllerState[i?"panStart":"rotateStart"]({pos:e});return this._panMove=i,this.updateViewport(n,b,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),i=this.controllerState.pan({pos:e});return this.updateViewport(i,b,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const i=this.getCenter(t),r=[i[0]+t.velocityX*e/2,i[1]+t.velocityY*e/2],s=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(s,(0,n.Z)((0,n.Z)({},this._getTransitionProps()),{},{transitionDuration:e,transitionEasing:S}),{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),i=this.controllerState.rotate({pos:e});return this.updateViewport(i,b,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const i=this.getCenter(t),r=[i[0]+t.velocityX*e/2,i[1]+t.velocityY*e/2],s=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(s,(0,n.Z)((0,n.Z)({},this._getTransitionProps()),{},{transitionDuration:e,transitionEasing:S}),{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;t.srcEvent.preventDefault();const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=t;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(a,(0,n.Z)((0,n.Z)({},this._getTransitionProps({around:e})),{},{transitionDuration:r?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const i=this.controllerState.rotateStart({pos:e});return this.updateViewport(i,b,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const i=this.controllerState.rotate({pos:e});return this.updateViewport(i,b,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const i=this.getCenter(t),r=[i[0],i[1]+=t.velocityY*e/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,(0,n.Z)((0,n.Z)({},this._getTransitionProps()),{},{transitionDuration:e,transitionEasing:S}),{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const i=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return L._startPinchRotation=t.rotation,L._lastPinchEvent=t,this.updateViewport(i,b,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:i}=t,n=this.getCenter(t);e=e.zoom({pos:n,scale:i})}if(this.touchRotate){const{rotation:i}=t;e=e.rotate({deltaAngleX:L._startPinchRotation-i})}return this.updateViewport(e,b,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),L._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:i}=L;if(this.touchZoom&&e&&i&&t.scale!==i.scale){const r=this.getCenter(t);let s=this.controllerState.rotateEnd();const o=Math.log2(t.scale),a=(o-Math.log2(i.scale))/(t.deltaTime-i.deltaTime),c=Math.pow(2,o+a*e/2);s=s.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(s,(0,n.Z)((0,n.Z)({},this._getTransitionProps({around:r})),{},{transitionDuration:e,transitionEasing:S}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return L._startPinchRotation=null,L._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const i=this.isFunctionKeyPressed(t),n=this.controllerState.zoom({pos:e,scale:i?.5:2});return this.updateViewport(n,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:i,moveSpeed:n,rotateSpeedX:r,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:o}=this;let a;const c={};switch(t.srcEvent.code){case"Minus":a=e?o.zoomOut(i).zoomOut(i):o.zoomOut(i),c.isZooming=!0;break;case"Equal":a=e?o.zoomIn(i).zoomIn(i):o.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":e?(a=o.rotateLeft(r),c.isRotating=!0):(a=o.moveLeft(n),c.isPanning=!0);break;case"ArrowRight":e?(a=o.rotateRight(r),c.isRotating=!0):(a=o.moveRight(n),c.isPanning=!0);break;case"ArrowUp":e?(a=o.rotateUp(s),c.isRotating=!0):(a=o.moveUp(n),c.isPanning=!0);break;case"ArrowDown":e?(a=o.rotateDown(s),c.isRotating=!0):(a=o.moveDown(n),c.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),c),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?(0,n.Z)((0,n.Z)({},e),{},{transitionInterpolator:new A((0,n.Z)((0,n.Z)((0,n.Z)({},t),e.transitionInterpolator.opts),{},{makeViewport:this.controllerState.makeViewport}))}):e:b}}class N{constructor(t,e){this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}var D=i(91960);class F extends N{constructor(t){const{width:e,height:i,latitude:n,longitude:r,zoom:s,bearing:o=0,pitch:a=0,altitude:c=1.5,position:l=[0,0,0],maxZoom:h=20,minZoom:u=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:f,startZoomLngLat:_,startRotatePos:g,startBearing:E,startPitch:v,startZoom:T,normalize:R=!0}=t;(0,m.Z)(Number.isFinite(r)),(0,m.Z)(Number.isFinite(n)),(0,m.Z)(Number.isFinite(s)),super({width:e,height:i,latitude:n,longitude:r,zoom:s,bearing:o,pitch:a,altitude:c,maxZoom:h,minZoom:u,maxPitch:d,minPitch:p,normalize:R,position:l},{startPanLngLat:f,startZoomLngLat:_,startRotatePos:g,startBearing:E,startPitch:v,startZoom:T}),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan(t){let{pos:e,startPos:i}=t;const n=this.getState().startPanLngLat||this._unproject(i);if(!n)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(n,e);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(t){let{pos:e,deltaAngleX:i=0,deltaAngleY:n=0}=t;const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+i,pitch:o+n},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:i,scale:r}=t,{startZoom:s,startZoomLngLat:o}=this.getState();if(o||(s=this.getViewportProps().zoom,o=this._unproject(i)||this._unproject(e)),!o)return this;const{maxZoom:a,minZoom:c}=this.getViewportProps();let l=s+Math.log2(r);l=(0,h.uZ)(l,c,a);const u=this.makeViewport((0,n.Z)((0,n.Z)({},this.getViewportProps()),{},{zoom:l}));return this._getUpdatedState((0,n.Z)({zoom:l},u.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),i=(0,n.Z)({},this.getViewportProps()),{bearing:r,longitude:s}=i;return Math.abs(r-e.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-e.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(t){const{maxZoom:e,minZoom:i,zoom:n}=t;t.zoom=(0,h.uZ)(n,i,e);const{maxPitch:r,minPitch:s,pitch:o}=t;t.pitch=(0,h.uZ)(o,s,r);const{normalize:a=!0}=t;return a&&Object.assign(t,(0,D.QA)(t)),t}_zoomFromCenter(t){const{width:e,height:i}=this.getViewportProps();return this.zoom({pos:[e/2,i/2],scale:t})}_panFromCenter(t){const{width:e,height:i}=this.getViewportProps();return this.pan({startPos:[e/2,i/2],pos:[e/2+t[0],i/2+t[1]]})}_getUpdatedState(t){return new this.constructor((0,n.Z)((0,n.Z)((0,n.Z)({makeViewport:this.makeViewport},this.getViewportProps()),this.getState()),t))}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,i,n){const r=t[0]-e[0],s=t[1]-e[1],o=t[1],a=e[1],{width:c,height:l}=this.getViewportProps(),u=r/c;let d=0;s>0?Math.abs(l-a)>5&&(d=s/(a-l)*1.2):s<0&&a>5&&(d=1-o/a),d=(0,h.uZ)(d,-1,1);const{minPitch:p,maxPitch:f}=this.getViewportProps();let _=i;return d>0?_=i+d*(f-i):d<0&&(_=i-d*(p-i)),{pitch:_,bearing:n+180*u}}}class x extends O{constructor(){super(...arguments),this.ControllerState=F,this.transition={transitionDuration:300,transitionInterpolator:new A({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t);(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState((0,n.Z)((0,n.Z)({makeViewport:this.makeViewport},t),this.state)))}}class B extends c{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}get ViewportType(){return l.Z}get ControllerType(){return x}}B.displayName="MapView";const U=B},62706:(t,e,i)=>{"use strict";i.d(e,{Z:()=>w});var n=i(83738),r=i(18489),s=i(62835),o=i(27618),a=i(2518),c=i(74144),l=i(22612),h=i(91960);const u=512,d=Math.PI/180;function p(t){let{map:e,gl:i,deck:n}=t;if(e.__deck)return e.__deck;const o=null===n||void 0===n?void 0:n.props._customRender,a=null===n||void 0===n?void 0:n.props.onLoad,c=g((0,r.Z)((0,r.Z)({},null===n||void 0===n?void 0:n.props),{},{_customRender:()=>{e.triggerRepaint(),null===o||void 0===o||o("")}}));let h;return n&&n.props.gl!==i||(Object.assign(c,{gl:i,width:null,height:null,touchAction:"unset",viewState:E(e)}),null!==n&&void 0!==n&&n.isInitialized?f(n,e):c.onLoad=()=>{null===a||void 0===a||a(),f(h,e)}),n?(h=n,n.setProps(c),n.userData.isExternal=!0):(h=new s.Z(c),e.on("remove",(()=>{_(e)}))),h.userData.mapboxLayers=new Set,e.__deck=h,e.on("render",(()=>{h.isInitialized&&function(t,e){const{mapboxLayers:i,isExternal:n}=t.userData;if(n){const n=Array.from(i,(t=>t.id)),r=(0,l.x)(t.props.layers,Boolean).some((t=>t&&!n.includes(t.id)));let s=t.getViewports();const o=s.findIndex((t=>"mapbox"===t.id)),a=s.length>1||o<0;(r||a)&&(o>=0&&(s=s.slice(),s[o]=m(t,e,!1)),t._drawLayers("mapbox-repaint",{viewports:s,layerFilter:e=>(!t.props.layerFilter||t.props.layerFilter(e))&&("mapbox"!==e.viewport.id||!n.includes(e.layer.id)),clearCanvas:!1}))}t.userData.currentViewport=null}(h,e)})),h}function f(t,e){const i=()=>{t.isInitialized?function(t,e){t.setProps({viewState:E(e)}),t.needsRedraw({clearRedrawFlags:!0})}(t,e):e.off("move",i)};e.on("move",i)}function _(t){var e;null===(e=t.__deck)||void 0===e||e.finalize(),t.__deck=null}function g(t){return(0,r.Z)((0,r.Z)({},t),{},{parameters:(0,r.Z)({depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthFunc:515,blendEquation:32774},t.parameters),views:t.views||[new a.Z({id:"mapbox"})]})}function E(t){var e;const{lng:i,lat:n}=t.getCenter(),r={longitude:(i+540)%360-180,latitude:n,zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),padding:t.getPadding(),repeat:t.getRenderWorldCopies()};return null!==(e=t.getTerrain)&&void 0!==e&&e.call(t)&&function(t,e){if(t.getFreeCameraOptions){const{position:i}=t.getFreeCameraOptions();if(!i||void 0===i.z)return;const n=t.transform.height,{longitude:r,latitude:s,pitch:o}=e,a=i.x*u,c=(1-i.y)*u,l=i.z*u,p=(0,h.w5)([r,s]),f=a-p[0],_=c-p[1],g=Math.sqrt(f*f+_*_),E=o*d,m=1.5*n,v=E<.001?m*Math.cos(E)/l:m*Math.sin(E)/g;e.zoom=Math.log2(v);const T=l-m*Math.cos(E)/v;e.position=[0,0,T/(0,h.NC)(s)]}else"number"===typeof t.transform.elevation&&(e.position=[0,0,t.transform.elevation])}(t,r),r}function m(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new c.Z((0,r.Z)((0,r.Z)({id:"mapbox",x:0,y:0,width:t.width,height:t.height},E(e)),{},{nearZMultiplier:i?.02:.1,nearZ:e.transform._nearZ/e.transform.height,farZ:e.transform._farZ/e.transform.height}))}function v(t){if(t.userData.isExternal)return;const e=[];t.userData.mapboxLayers.forEach((t=>{const i=new(0,t.props.type)(t.props);e.push(i)})),t.setProps({layers:e})}var T=i(95674);class R{constructor(t){if(!t.id)throw new Error("Layer must have an unique id");this.id=t.id,this.type="custom",this.renderingMode=t.renderingMode||"3d",this.map=null,this.deck=null,this.props=t}onAdd(t,e){var i,n;this.map=t,this.deck=p({map:t,gl:e,deck:this.props.deck}),i=this.deck,n=this,i.userData.mapboxLayers.add(n),v(i)}onRemove(){var t,e;this.deck&&(t=this.deck,e=this,t.userData.mapboxLayers.delete(e),v(t))}setProps(t){Object.assign(this.props,t,{id:this.id}),this.deck&&v(this.deck)}render(){!function(t,e,i){let{currentViewport:n}=t.userData,r=!1;n||(n=m(t,e,!0),t.userData.currentViewport=n,r=!0),t.isInitialized&&t._drawLayers("mapbox-repaint",{viewports:[n],layerFilter:t=>{let{layer:e}=t;return i.id===e.id||e.props.operation.includes("terrain")},clearStack:r,clearCanvas:!1})}(this.deck,this.map,this)}}const A="__UNDEFINED__";function b(t,e,i,n){if(!t||!e||!t.style||!t.style._loaded)return;const r=(0,l.x)(n,Boolean);if(i!==n){const e=(0,l.x)(i,Boolean),n=new Set(e.map((t=>t.id)));for(const t of r)n.delete(t.id);for(const i of n)t.getLayer(i)&&t.removeLayer(i)}for(const a of r){const i=t.getLayer(a.id);if(i){(i.implementation||i).setProps(a.props)}else t.addLayer(new R({id:a.id,deck:e}),a.props.beforeId)}const s=t.style._order,o={};for(const a of r){let{beforeId:t}=a.props;t&&s.includes(t)||(t=A),o[t]=o[t]||[],o[t].push(a.id)}for(const a in o){const e=o[a];let i=a===A?s.length:s.indexOf(a),n=a===A?void 0:a;for(let r=e.length-1;r>=0;r--){const o=e[r],a=s.indexOf(o);a!==i-1&&(t.moveLayer(o,n),a>i&&i++),i--,n=o}}}const S=["interleaved"];class w{constructor(t){this._handleStyleChange=()=>{b(this._map,this._deck,this._props.layers,this._props.layers)},this._updateContainerSize=()=>{if(this._map&&this._container){const{clientWidth:t,clientHeight:e}=this._map.getContainer();Object.assign(this._container.style,{width:"".concat(t,"px"),height:"".concat(e,"px")})}},this._updateViewState=()=>{const t=this._deck;t&&(t.setProps({viewState:E(this._map)}),t.isInitialized&&t.redraw())},this._handleMouseEvent=t=>{const e=this._deck;if(!e||!e.isInitialized)return;const i={type:t.type,offsetCenter:t.point,srcEvent:t},n=this._lastMouseDownPoint;switch(!t.point&&n&&(i.deltaX=t.originalEvent.clientX-n.clientX,i.deltaY=t.originalEvent.clientY-n.clientY,i.offsetCenter={x:n.x+i.deltaX,y:n.y+i.deltaY}),i.type){case"mousedown":e._onPointerDown(i),this._lastMouseDownPoint=(0,r.Z)((0,r.Z)({},t.point),{},{clientX:t.originalEvent.clientX,clientY:t.originalEvent.clientY});break;case"dragstart":i.type="panstart",e._onEvent(i);break;case"drag":i.type="panmove",e._onEvent(i);break;case"dragend":i.type="panend",e._onEvent(i);break;case"click":i.tapCount=1,e._onEvent(i);break;case"dblclick":i.type="click",i.tapCount=2,e._onEvent(i);break;case"mousemove":i.type="pointermove",e._onPointerMove(i);break;case"mouseout":i.type="pointerleave",e._onPointerMove(i);break;default:return}};const{interleaved:e=!1}=t,i=(0,n.Z)(t,S);this._interleaved=e,this._props=i}setProps(t){this._interleaved&&t.layers&&b(this._map,this._deck,this._props.layers,t.layers),Object.assign(this._props,t),this._deck&&this._deck.setProps(this._interleaved?g(this._props):this._props)}onAdd(t){return this._map=t,this._interleaved?this._onAddInterleaved(t):this._onAddOverlaid(t)}_onAddOverlaid(t){const e=document.createElement("div");return Object.assign(e.style,{position:"absolute",left:0,top:0,textAlign:"initial",pointerEvents:"none"}),this._container=e,this._deck=new s.Z((0,r.Z)((0,r.Z)({},this._props),{},{parent:e,viewState:E(t)})),t.on("resize",this._updateContainerSize),t.on("render",this._updateViewState),t.on("mousedown",this._handleMouseEvent),t.on("dragstart",this._handleMouseEvent),t.on("drag",this._handleMouseEvent),t.on("dragend",this._handleMouseEvent),t.on("mousemove",this._handleMouseEvent),t.on("mouseout",this._handleMouseEvent),t.on("click",this._handleMouseEvent),t.on("dblclick",this._handleMouseEvent),this._updateContainerSize(),e}_onAddInterleaved(t){const e=t.painter.context.gl;return e instanceof WebGLRenderingContext&&T.Z.warn("Incompatible basemap library. See: https://deck.gl/docs/api-reference/mapbox/overview#compatibility")(),this._deck=p({map:t,gl:e,deck:new s.Z((0,r.Z)((0,r.Z)({},this._props),{},{gl:e}))}),t.on("styledata",this._handleStyleChange),b(t,this._deck,[],this._props.layers),document.createElement("div")}onRemove(){const t=this._map;t&&(this._interleaved?this._onRemoveInterleaved(t):this._onRemoveOverlaid(t)),this._deck=void 0,this._map=void 0,this._container=void 0}_onRemoveOverlaid(t){var e;t.off("resize",this._updateContainerSize),t.off("render",this._updateViewState),t.off("mousedown",this._handleMouseEvent),t.off("dragstart",this._handleMouseEvent),t.off("drag",this._handleMouseEvent),t.off("dragend",this._handleMouseEvent),t.off("mousemove",this._handleMouseEvent),t.off("mouseout",this._handleMouseEvent),t.off("click",this._handleMouseEvent),t.off("dblclick",this._handleMouseEvent),null===(e=this._deck)||void 0===e||e.finalize()}_onRemoveInterleaved(t){t.off("styledata",this._handleStyleChange),b(t,this._deck,this._props.layers,[]),_(t)}getDefaultPosition(){return"top-left"}pickObject(t){return(0,o.Z)(this._deck),this._deck.pickObject(t)}pickMultipleObjects(t){return(0,o.Z)(this._deck),this._deck.pickMultipleObjects(t)}pickObjects(t){return(0,o.Z)(this._deck),this._deck.pickObjects(t)}finalize(){this._map&&this._map.removeControl(this)}getCanvas(){return this._map?this._interleaved?this._map.getCanvas():this._deck.getCanvas():null}}},96527:(t,e,i)=>{"use strict";i.d(e,{D0:()=>c,Ew:()=>l,Kn:()=>s,Lj:()=>h,Os:()=>d,Ss:()=>o,TW:()=>a,zH:()=>u});const n=t=>"boolean"===typeof t,r=t=>"function"===typeof t,s=t=>null!==t&&"object"===typeof t,o=t=>s(t)&&t.constructor==={}.constructor,a=t=>Boolean(t)&&"function"===typeof t[Symbol.iterator],c=t=>t&&"function"===typeof t[Symbol.asyncIterator],l=t=>"undefined"!==typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,h=t=>"undefined"!==typeof Blob&&t instanceof Blob,u=t=>t&&"object"===typeof t&&t.isBuffer,d=t=>(t=>"undefined"!==typeof ReadableStream&&t instanceof ReadableStream||s(t)&&r(t.tee)&&r(t.cancel)&&r(t.getReader))(t)||(t=>s(t)&&r(t.read)&&r(t.pipe)&&n(t.readable))(t)},82903:(t,e,i)=>{"use strict";i.d(e,{z:()=>Rt});var n=i(96527),r=i(31901);let s="";const o={};var a=i(39827);class c extends Error{constructor(t,e){super(t),(0,a.Z)(this,"reason",void 0),(0,a.Z)(this,"url",void 0),(0,a.Z)(this,"response",void 0),this.reason=e.reason,this.url=e.url,this.response=e.response}}const l=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,h=/^([-\w.]+\/[-\w.+]+)/;function u(t,e){return t.toLowerCase()===e.toLowerCase()}function d(t){const e=l.exec(t);return e?e[1]:""}const p=/\?.*/;function f(t){return t.replace(p,"")}function _(t){if((0,n.Ew)(t)){return t.url}if((0,n.Lj)(t)){return t.name||""}return"string"===typeof t?t:""}function g(t){if((0,n.Ew)(t)){const e=t,i=e.headers.get("content-type")||"",n=f(e.url);return function(t){const e=h.exec(t);return e?e[1]:t}(i)||d(n)}if((0,n.Lj)(t)){return t.type||""}return"string"===typeof t?d(t):""}async function E(t){if((0,n.Ew)(t))return t;const e={},i=function(t){if((0,n.Ew)(t))return t.headers["content-length"]||-1;if((0,n.Lj)(t))return t.size;return"string"===typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);i>=0&&(e["content-length"]=String(i));const r=_(t),s=g(t);s&&(e["content-type"]=s);const o=await async function(t){const e=5;if("string"===typeof t)return"data:,".concat(t.slice(0,e));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const i=new FileReader;i.onload=e=>{var i;return t(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.result)},i.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const i=function(t){let e="";const i=new Uint8Array(t);for(let n=0;n<i.byteLength;n++)e+=String.fromCharCode(i[n]);return btoa(e)}(t.slice(0,e));return"data:base64,".concat(i)}return null}(t);o&&(e["x-first-bytes"]=o),"string"===typeof t&&(t=(new TextEncoder).encode(t));const a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:r}),a}async function m(t){if(!t.ok){const e=await async function(t){const i=function(t){if(t.length<50)return t;const e=t.slice(t.length-15),i=t.substr(0,32);return"".concat(i,"...").concat(e)}(t.url);let n="Failed to fetch resource (".concat(t.status,") ").concat(t.statusText,": ").concat(i);n=n.length>100?"".concat(n.slice(0,100),"..."):n;const r={reason:t.statusText,url:t.url,response:t};try{const e=t.headers.get("Content-Type");r.reason=null!==e&&void 0!==e&&e.includes("application/json")?await t.json():t.text()}catch(e){}return new c(n,r)}(t);throw e}}async function v(t,e){if("string"===typeof t){const r=function(t){for(const e in o)if(t.startsWith(e)){const i=o[e];t=t.replace(e,i)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(s).concat(t)),t}(t);var i,n;if(function(t){return!function(t){return t.startsWith("http:")||t.startsWith("https:")}(t)&&!function(t){return t.startsWith("data:")}(t)}(r))if(null!==(i=globalThis.loaders)&&void 0!==i&&i.fetchNode)return null===(n=globalThis.loaders)||void 0===n?void 0:n.fetchNode(r,e);return await fetch(r,e)}return await E(t)}var T=i(35809);function R(t,e){const i=(0,T.pm)(),r=t||i;return"function"===typeof r.fetch?r.fetch:(0,n.Kn)(r.fetch)?t=>v(t,r.fetch):null!==e&&void 0!==e&&e.fetch?null===e||void 0===e?void 0:e.fetch:v}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof global&&global,"undefined"!==typeof document&&document;const A="object"!==typeof process||"[object process]"!==String(process)||process.browser,b="undefined"!==typeof window&&"undefined"!==typeof window.orientation,S="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);S&&parseFloat(S[1]);var w=i(18489);class y{terminate(){}}function M(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const C=new Map;function P(t){M(t.source&&!t.url||!t.source&&t.url);let e=C.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return I((e=t,"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var e}(t.url),C.set(t.url,e)),t.source&&(e=I(t.source),C.set(t.source,e))),M(e),e}function I(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function L(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;const n=i||new Set;if(t){if(O(t))n.add(t);else if(O(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(const r in t)L(t[r],e,n)}else;return void 0===i?Array.from(n):[]}function O(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const N=()=>{};class D{static isSupported(){return"undefined"!==typeof Worker&&A||"undefined"!==typeof y&&!A}constructor(t){(0,a.Z)(this,"name",void 0),(0,a.Z)(this,"source",void 0),(0,a.Z)(this,"url",void 0),(0,a.Z)(this,"terminated",!1),(0,a.Z)(this,"worker",void 0),(0,a.Z)(this,"onMessage",void 0),(0,a.Z)(this,"onError",void 0),(0,a.Z)(this,"_loadableURL","");const{name:e,source:i,url:n}=t;M(i||n),this.name=e,this.source=i,this.url=n,this.onMessage=N,this.onError=t=>console.log(t),this.worker=A?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=N,this.onError=N,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||L(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=P({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new y(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new y(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class F{constructor(t,e){(0,a.Z)(this,"name",void 0),(0,a.Z)(this,"workerThread",void 0),(0,a.Z)(this,"isRunning",!0),(0,a.Z)(this,"result",void 0),(0,a.Z)(this,"_resolve",(()=>{})),(0,a.Z)(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){M(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){M(this.isRunning),this.isRunning=!1,this._reject(t)}}class x{static isSupported(){return D.isSupported()}constructor(t){(0,a.Z)(this,"name","unnamed"),(0,a.Z)(this,"source",void 0),(0,a.Z)(this,"url",void 0),(0,a.Z)(this,"maxConcurrency",1),(0,a.Z)(this,"maxMobileConcurrency",1),(0,a.Z)(this,"onDebug",(()=>{})),(0,a.Z)(this,"reuseWorkers",!0),(0,a.Z)(this,"props",{}),(0,a.Z)(this,"jobQueue",[]),(0,a.Z)(this,"idleQueue",[]),(0,a.Z)(this,"count",0),(0,a.Z)(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props=(0,w.Z)((0,w.Z)({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,i)=>t.done(i),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const n=new Promise((n=>(this.jobQueue.push({name:t,onMessage:e,onError:i,onStart:n}),this)));return this._startQueuedJob(),await n}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new F(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}catch(i){console.error("Worker exception: ".concat(i))}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!A||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new D({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return b?this.maxMobileConcurrency:this.maxConcurrency}}const B={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class U{static isSupported(){return D.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return U._workerFarm=U._workerFarm||new U({}),U._workerFarm.setProps(t),U._workerFarm}constructor(t){(0,a.Z)(this,"props",void 0),(0,a.Z)(this,"workerPools",new Map),this.props=(0,w.Z)({},B),this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props=(0,w.Z)((0,w.Z)({},this.props),t);for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:i,url:n}=t;let r=this.workerPools.get(e);return r||(r=new x({name:e,source:i,url:n}),r.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,r)),r}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(0,a.Z)(U,"_workerFarm",void 0);const k="latest";const G=function(){var t;return null!==(t=globalThis._loadersgl_)&&void 0!==t&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.2"),globalThis._loadersgl_.version}();async function Z(t,e,i,n,r){const s=t.id,o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e[t.id]||{},n="".concat(t.id,A?"-worker.js":"-worker-node.js");let r=i.workerUrl;if(r||"compression"!==t.id||(r=e.workerUrl),"test"===e._workerType&&(r=A?"modules/".concat(t.module,"/dist/").concat(n):"modules/".concat(t.module,"/src/workers/").concat(t.id,"-worker-node.ts")),!r){let e=t.version;"latest"===e&&(e=k);const i=e?"@".concat(e):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(i,"/dist/").concat(n)}return M(r),r}(t,i),a=U.getWorkerFarm(i).getWorkerPool({name:s,url:o});i=JSON.parse(JSON.stringify(i)),n=JSON.parse(JSON.stringify(n||{}));const c=await a.startJob("process-on-worker",V.bind(null,r));c.postMessage("process",{input:e,options:i,context:n});const l=await c.result;return await l.result}async function V(t,e,i,n){switch(i){case"done":e.done(n);break;case"error":e.error(new Error(n.error));break;case"process":const{id:s,input:o,options:a}=n;try{const i=await t(o,a);e.postMessage("done",{id:s,result:i})}catch(r){const t=r instanceof Error?r.message:"unknown error";e.postMessage("error",{id:s,error:t})}break;default:console.warn("parse-with-worker unknown message ".concat(i))}}function W(t,e){return j(t||{},e)}function j(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(i>3)return e;const n=(0,w.Z)({},t);for(const[r,s]of Object.entries(e))s&&"object"===typeof s&&!Array.isArray(s)?n[r]=j(n[r]||{},e[r],i+1):n[r]=e[r];return n}var H=i(74269);function z(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){const e=t.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),i=e.reduce(((t,e)=>t+e.byteLength),0),n=new Uint8Array(i);let r=0;for(const s of e)n.set(s,r),r+=s.byteLength;return n.buffer}(e)}const X=262144;const Y=262144;var K=i(60715),q=i(3206);const Q=1048576;function J(){return(J=(0,q.Z)((function*(t,e){const i=(null===e||void 0===e?void 0:e.chunkSize)||Q;let n=0;for(;n<t.size;){const e=n+i,r=yield(0,K.Z)(t.slice(n,e).arrayBuffer());n=e,yield r}}))).apply(this,arguments)}var $=i(63914);function tt(t){if((e=t)&&"object"===typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"===typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"===typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function et(t,e){return $.jU?function(t,e){return it.apply(this,arguments)}(t,e):function(t,e){return nt.apply(this,arguments)}(t,e)}function it(){return(it=(0,q.Z)((function*(t,e){const i=t.getReader();let n;try{for(;;){const t=n||i.read();null!==e&&void 0!==e&&e._streamReadAhead&&(n=i.read());const{done:r,value:s}=yield(0,K.Z)(t);if(r)return;yield tt(s)}}catch(r){i.releaseLock()}}))).apply(this,arguments)}function nt(){return(nt=(0,q.Z)((function*(t,e){var i,n=!1,r=!1;try{for(var s,o=(0,H.Z)(t);n=!(s=yield(0,K.Z)(o.next())).done;n=!1){const t=s.value;yield tt(t)}}catch(a){r=!0,i=a}finally{try{n&&null!=o.return&&(yield(0,K.Z)(o.return()))}finally{if(r)throw i}}}))).apply(this,arguments)}function rt(t,e){if("string"===typeof t)return function*(t,e){const i=(null===e||void 0===e?void 0:e.chunkSize)||X;let n=0;const r=new TextEncoder;for(;n<t.length;){const e=Math.min(t.length-n,i),s=t.slice(n,n+e);n+=e,yield r.encode(s)}}(t,e);if(t instanceof ArrayBuffer)return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:i=Y}=e;let n=0;for(;n<t.byteLength;){const e=Math.min(t.byteLength-n,i),r=new ArrayBuffer(e),s=new Uint8Array(t,n,e);new Uint8Array(r).set(s),n+=e,yield r}}()}(t,e);if((0,n.Lj)(t))return function(t,e){return J.apply(this,arguments)}(t,e);if((0,n.Os)(t))return et(t,e);if((0,n.Ew)(t)){return et(t.body,e)}throw new Error("makeIterator")}const st="Cannot convert supplied data type";async function ot(t,e,i){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"===typeof t||r)return function(t,e,i){if(e.text&&"string"===typeof t)return t;if((0,n.zH)(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const n=t.byteLength||t.length;return 0===t.byteOffset&&n===i.byteLength||(i=i.slice(t.byteOffset,t.byteOffset+n)),i}throw new Error(st)}(t,e);if((0,n.Lj)(t)&&(t=await E(t)),(0,n.Ew)(t)){const i=t;return await m(i),e.binary?await i.arrayBuffer():await i.text()}if((0,n.Os)(t)&&(t=rt(t,i)),(0,n.TW)(t)||(0,n.D0)(t))return async function(t){const e=[];var i,n=!1,r=!1;try{for(var s,o=(0,H.Z)(t);n=!(s=await o.next()).done;n=!1){const t=s.value;e.push(t)}}catch(a){r=!0,i=a}finally{try{n&&null!=o.return&&await o.return()}finally{if(r)throw i}}return z(...e)}(t);throw new Error(st)}function at(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function ct(t,e,i){if(i)return i;const n=(0,w.Z)({fetch:R(e,t)},t);if(n.url){const t=f(n.url);n.baseUrl=t,n.queryString=function(t){const e=t.match(p);return e&&e[0]}(n.url),n.filename=at(t),n.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(n.loaders)||(n.loaders=null),n}const lt=new(i(91581).Z)({id:"loaders.gl"});var ht=i(68224);const ut=/\.([^.]+)$/;function dt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!pt(t))return null;if(e&&!Array.isArray(e))return(0,r.T)(e);let s=[];e&&(s=s.concat(e)),null!==i&&void 0!==i&&i.ignoreRegisteredLoaders||s.push(...(0,ht.kO)()),function(t){for(const e of t)(0,r.T)(e)}(s);const o=function(t,e,i,n){const r=_(t),s=g(t),o=f(r)||(null===n||void 0===n?void 0:n.url);let a=null,c="";null!==i&&void 0!==i&&i.mimeType&&(a=_t(e,null===i||void 0===i?void 0:i.mimeType),c="match forced by supplied MIME type ".concat(null===i||void 0===i?void 0:i.mimeType));a=a||function(t,e){const i=e&&ut.exec(e),n=i&&i[1];return n?function(t,e){e=e.toLowerCase();for(const i of t)for(const t of i.extensions)if(t.toLowerCase()===e)return i;return null}(t,n):null}(e,o),c=c||(a?"matched url ".concat(o):""),a=a||_t(e,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function(t,e){if(!e)return null;for(const i of t)if("string"===typeof e){if(gt(e,i))return i}else if(ArrayBuffer.isView(e)){if(Et(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer){if(Et(e,0,i))return i}return null}(e,t),c=c||(a?"matched initial data ".concat(mt(t)):""),null!==i&&void 0!==i&&i.fallbackMimeType&&(a=a||_t(e,null===i||void 0===i?void 0:i.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""));var l;c&&lt.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,"."));return a}(t,s,i,n);if(!o&&(null===i||void 0===i||!i.nothrow))throw new Error(ft(t));return o}function pt(t){return!(t instanceof Response&&204===t.status)}function ft(t){const e=_(t),i=g(t);let n="No valid loader found (";n+=e?"".concat(at(e),", "):"no url provided, ",n+="MIME type: ".concat(i?'"'.concat(i,'"'):"not provided",", ");const r=t?mt(t):"";return n+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",n+=")",n}function _t(t,e){for(const n of t){var i;if(null!==(i=n.mimeTypes)&&void 0!==i&&i.some((t=>u(e,t))))return n;if(u(e,"application/x.".concat(n.id)))return n}return null}function gt(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function Et(t,e,i){return(Array.isArray(i.tests)?i.tests:[i.tests]).some((i=>function(t,e,i,n){if(n instanceof ArrayBuffer)return function(t,e,i){if(i=i||t.byteLength,t.byteLength<i||e.byteLength<i)return!1;const n=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(n,t,n.byteLength);switch(typeof n){case"function":return n(t);case"string":return n===vt(t,e,n.length);default:return!1}}(t,e,0,i)))}function mt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return vt(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return vt(t,0,e)}return""}function vt(t,e,i){if(t.byteLength<e+i)return"";const n=new DataView(t);let r="";for(let s=0;s<i;s++)r+=String.fromCharCode(n.getUint8(e+s));return r}async function Tt(t,e,i,s){!e||Array.isArray(e)||(0,r.C)(e)||(s=void 0,i=e,e=void 0),i=i||{};const o=_(t=await t),a=function(t,e){if(t&&!Array.isArray(t))return t;let i;if(t&&(i=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];i=i?[...i,...t]:t}return i&&i.length?i:void 0}(e,s),c=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!pt(t))return null;let s=dt(t,e,(0,w.Z)((0,w.Z)({},i),{},{nothrow:!0}),r);if(s)return s;if((0,n.Lj)(t)&&(s=dt(t=await t.slice(0,10).arrayBuffer(),e,i,r)),!s&&(null===i||void 0===i||!i.nothrow))throw new Error(ft(t));return s}(t,a,i);return c?(s=ct({url:o,_parse:Tt,loaders:a},i=(0,T.GR)(i,c,a,o),s||null),await async function(t,e,i,r){if(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;M(t,"no worker provided");const i=t.version}(t),i=W(t.options,i),(0,n.Ew)(e)){const t=e,{ok:i,redirected:n,status:s,statusText:o,type:a,url:c}=t,l=Object.fromEntries(t.headers.entries());r.response={headers:l,ok:i,redirected:n,status:s,statusText:o,type:a,url:c}}e=await ot(e,t,i);const s=t;if(s.parseTextSync&&"string"===typeof e)return s.parseTextSync(e,i,r);if(function(t,e){return!!U.isSupported()&&!!(A||null!==e&&void 0!==e&&e._nodeWorkers)&&t.worker&&(null===e||void 0===e?void 0:e.worker)}(t,i))return await Z(t,e,i,r,Tt);if(s.parseText&&"string"===typeof e)return await s.parseText(e,i,r);if(s.parse)return await s.parse(e,i,r);throw M(!s.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(c,t,i,s)):null}async function Rt(t,e,i,s){let o,a;Array.isArray(e)||(0,r.C)(e)?(o=e,a=i):(o=[],a=e);const c=R(a);let l=t;return"string"===typeof t&&(l=await c(t)),(0,n.Lj)(t)&&(l=await c(t)),Array.isArray(o),await Tt(l,o,a)}},68224:(t,e,i)=>{"use strict";i.d(e,{fh:()=>o,kO:()=>a});var n=i(31901),r=i(35809);const s=()=>{const t=(0,r.rx)();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function o(t){const e=s();t=Array.isArray(t)?t:[t];for(const i of t){const t=(0,n.T)(i);e.find((e=>t===e))||e.unshift(t)}}function a(){return s()}},31901:(t,e,i)=>{"use strict";i.d(e,{C:()=>s,T:()=>o});var n=i(18489),r=i(75499);function s(t){var e;if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions)}function o(t){var e,i;let o;return(0,r.h)(t,"null loader"),(0,r.h)(s(t),"invalid loader"),Array.isArray(t)&&(o=t[1],t=t[0],t=(0,n.Z)((0,n.Z)({},t),{},{options:(0,n.Z)((0,n.Z)({},t.options),o)})),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(i=t)&&void 0!==i&&i.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}},35809:(t,e,i)=>{"use strict";i.d(e,{pm:()=>d,rx:()=>u,GR:()=>p});var n=i(18489),r=i(96527),s=i(39827);const o=new(i(91581).Z)({id:"loaders.gl"});class a{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var c=i(63914);const l={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){(0,s.Z)(this,"console",void 0),this.console=console}log(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.console.error.bind(this.console,...e)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:c.jU,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},h={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function u(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function d(){const t=u();return t.globalOptions=t.globalOptions||(0,n.Z)({},l),t.globalOptions}function p(t,e,i,n){return i=i||[],function(t,e){f(t,null,l,h,e);for(const i of e){const n=t&&t[i.id]||{},r=i.options&&i.options[i.id]||{},s=i.deprecatedOptions&&i.deprecatedOptions[i.id]||{};f(n,i.id,r,s,e)}}(t,i=Array.isArray(i)?i:[i]),g(e,t,n)}function f(t,e,i,n,s){const a=e||"Top level",c=e?"".concat(e,"."):"";for(const l in t){const h=!e&&(0,r.Kn)(t[l]);if(!(l in i)&&!("baseUri"===l&&!e)&&!("workerUrl"===l&&e))if(l in n)o.warn("".concat(a," loader option '").concat(c).concat(l,"' no longer supported, use '").concat(n[l],"'"))();else if(!h){const t=_(l,s);o.warn("".concat(a," loader option '").concat(c).concat(l,"' not recognized. ").concat(t))()}}}function _(t,e){const i=t.toLowerCase();let n="";for(const r of e)for(const e in r.options){if(t===e)return"Did you mean '".concat(r.id,".").concat(e,"'?");const s=e.toLowerCase();(i.startsWith(s)||s.startsWith(i))&&(n=n||"Did you mean '".concat(r.id,".").concat(e,"'?"))}return n}function g(t,e,i){const r=t.options||{},s=(0,n.Z)({},r);return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(s,i),null===s.log&&(s.log=new a),E(s,d()),E(s,e),s}function E(t,e){for(const i in e)if(i in e){const s=e[i];(0,r.Ss)(s)&&(0,r.Ss)(t[i])?t[i]=(0,n.Z)((0,n.Z)({},t[i]),e[i]):t[i]=e[i]}}},75499:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"loader assertion failed.")}i.d(e,{h:()=>n})},63914:(t,e,i)=>{"use strict";i.d(e,{jU:()=>n});"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof global&&global,"undefined"!==typeof document&&document;const n=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),r="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);r&&parseFloat(r[1])},91586:(t,e,i)=>{"use strict";i.d(e,{TX:()=>h,G5:()=>l,uX:()=>p});var n=i(18489),r=i(78032);const s={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},o={f32:4,f16:2,i32:4,u32:4};var a=i(33328);function c(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[i,n]=t.split("x"),r=i,s=n?parseInt(n):1,o=(0,a.e)(r),c={type:r,components:s,byteLength:o.byteLength*s,integer:o.integer,signed:o.signed,normalized:o.normalized};return e&&(c.webglOnly=!0),c}function l(t,e){const i={};for(const n of t.attributes)i[n.name]=u(t,e,n.name);return i}function h(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const n=l(t,e),r=new Array(i).fill(null);for(const s of Object.values(n))r[s.location]=s;return r}function u(t,e,i){const n=function(t,e){const i=t.attributes.find((t=>t.name===e));i||r.c.warn('shader layout attribute "'.concat(e,'" not present in shader'));return i||null}(t,i),a=function(t,e){d(t);let i=function(t,e){for(const i of t)if(i.format&&i.name===e)return{attributeName:i.name,bufferName:e,stepMode:i.stepMode,vertexFormat:i.format,byteOffset:0,byteStride:i.byteStride||0};return null}(t,e);if(i)return i;if(i=function(t,e){for(const n of t){var i;let t=n.byteStride;if("number"!==typeof n.byteStride)for(const e of n.attributes||[]){t+=c(e.format).byteLength}const r=null===(i=n.attributes)||void 0===i?void 0:i.find((t=>t.attribute===e));if(r)return{attributeName:r.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:r.format,byteOffset:r.byteOffset,byteStride:t}}return null}(t,e),i)return i;return r.c.warn('layout for attribute "'.concat(e,'" not present in buffer layout')),null}(e,i);if(!n)return null;const l=function(t){const[e,i]=s[t],n="i32"===e||"u32"===e,r="u32"!==e,a=o[e]*i,c=function(t,e){let i;switch(t){case"f32":i="float32";break;case"i32":i="sint32";break;case"u32":i="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return 1===e?i:"".concat(i,"x").concat(e)}(e,i);return{dataType:e,components:i,defaultVertexFormat:c,byteLength:a,integer:n,signed:r}}(n.type),h=(null===a||void 0===a?void 0:a.vertexFormat)||l.defaultVertexFormat,u=c(h);return{attributeName:(null===a||void 0===a?void 0:a.attributeName)||n.name,bufferName:(null===a||void 0===a?void 0:a.bufferName)||n.name,location:n.location,shaderType:n.type,shaderDataType:l.dataType,shaderComponents:l.components,vertexFormat:h,bufferDataType:u.type,bufferComponents:u.components,normalized:u.normalized,integer:l.integer,stepMode:(null===a||void 0===a?void 0:a.stepMode)||n.stepMode,byteOffset:(null===a||void 0===a?void 0:a.byteOffset)||0,byteStride:(null===a||void 0===a?void 0:a.byteStride)||0}}function d(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&r.c.warn("BufferLayout ".concat(name," must have either 'attributes' or 'format' field"))}function p(t,e){const i=(0,n.Z)((0,n.Z)({},t),{},{attributes:t.attributes.map((t=>(0,n.Z)({},t)))});for(const n of(null===e||void 0===e?void 0:e.attributes)||[]){const t=i.attributes.find((t=>t.name===n.name));t?(t.type=n.type||t.type,t.stepMode=n.stepMode||t.stepMode):r.c.warn("shader layout attribute ".concat(n.name," not present in shader"))}return i}},64092:(t,e,i)=>{"use strict";i.d(e,{l:()=>a});var n=i(18489),r=i(39827),s=i(17302);let o;o=Symbol.toStringTag;class a extends s._{get[o](){return"Buffer"}constructor(t,e){const i=(0,n.Z)({},e);(e.usage||0)&a.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?i.indexType="uint32":e.data instanceof Uint16Array&&(i.indexType="uint16")),super(t,i,a.defaultProps),(0,r.Z)(this,"usage",void 0),(0,r.Z)(this,"indexType",void 0),(0,r.Z)(this,"updateTimestamp",void 0),(0,r.Z)(this,"debugData",new ArrayBuffer(0)),this.usage=e.usage||0,this.indexType=i.indexType,this.updateTimestamp=t.incrementTimestamp()}readSyncWebGL(t,e){throw new Error("not implemented")}_setDebugData(t,e,i){const n=ArrayBuffer.isView(t)?t.buffer:t,r=Math.min(t?t.byteLength:i,a.DEBUG_DATA_MAX_LENGTH);null===t?this.debugData=new ArrayBuffer(r):0===e&&i===t.byteLength?this.debugData=n.slice(0,r):this.debugData=n.slice(e,e+r)}}(0,r.Z)(a,"defaultProps",(0,n.Z)((0,n.Z)({},s._.defaultProps),{},{usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1})),(0,r.Z)(a,"MAP_READ",1),(0,r.Z)(a,"MAP_WRITE",2),(0,r.Z)(a,"COPY_SRC",4),(0,r.Z)(a,"COPY_DST",8),(0,r.Z)(a,"INDEX",16),(0,r.Z)(a,"VERTEX",32),(0,r.Z)(a,"UNIFORM",64),(0,r.Z)(a,"STORAGE",128),(0,r.Z)(a,"INDIRECT",256),(0,r.Z)(a,"QUERY_RESOLVE",512),(0,r.Z)(a,"DEBUG_DATA_MAX_LENGTH",32)},2200:(t,e,i)=>{"use strict";i.d(e,{h:()=>a});var n=i(18489),r=i(39827),s=i(17302);let o;o=Symbol.toStringTag;class a extends s._{get[o](){return"RenderPipeline"}constructor(t,e){super(t,e,a.defaultProps),(0,r.Z)(this,"shaderLayout",void 0),(0,r.Z)(this,"bufferLayout",void 0),(0,r.Z)(this,"linkStatus","pending"),(0,r.Z)(this,"hash",""),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}setUniformsWebGL(t){throw new Error("Use uniform blocks")}}(0,r.Z)(a,"defaultProps",(0,n.Z)((0,n.Z)({},s._.defaultProps),{},{vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}}))},17302:(t,e,i)=>{"use strict";i.d(e,{_:()=>o});var n=i(18489),r=i(39827),s=i(92631);class o{constructor(t,e,i){if((0,r.Z)(this,"id",void 0),(0,r.Z)(this,"props",void 0),(0,r.Z)(this,"userData",{}),(0,r.Z)(this,"_device",void 0),(0,r.Z)(this,"destroyed",!1),(0,r.Z)(this,"allocatedBytes",0),(0,r.Z)(this,"_attachedResources",new Set),!t)throw new Error("no device");this._device=t,this.props=function(t,e){const i=(0,n.Z)({},e);for(const n in t)void 0!==t[n]&&(i[n]=t[n]);return i}(e,i);const o="undefined"!==this.props.id?this.props.id:(0,s.h)(this[Symbol.toStringTag]);this.props.id=o,this.id=o,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}getProps(){return this.props}attachResource(t){this._attachedResources.add(t)}detachResource(t){this._attachedResources.delete(t)}destroyAttachedResource(t){this._attachedResources.delete(t)&&t.destroy()}destroyAttachedResources(){for(const t of Object.values(this._attachedResources))t.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const t=this._device.statsManager.getStats("Resource Counts"),e=this[Symbol.toStringTag];t.get("".concat(e,"s Active")).decrementCount()}trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const i=this._device.statsManager.getStats("Resource Counts");i.get("GPU Memory").addCount(t),i.get("".concat(e," Memory")).addCount(t),this.allocatedBytes=t}trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const e=this._device.statsManager.getStats("Resource Counts");e.get("GPU Memory").subtractCount(this.allocatedBytes),e.get("".concat(t," Memory")).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const t=this._device.statsManager.getStats("Resource Counts"),e=this[Symbol.toStringTag];t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}}(0,r.Z)(o,"defaultProps",{id:"undefined",handle:void 0,userData:void 0})},31502:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(18489),r=i(39827),s=i(17302);let o;o=Symbol.toStringTag;class a extends s._{get[o](){return"Sampler"}constructor(t,e){super(t,e,a.defaultProps)}}(0,r.Z)(a,"defaultProps",(0,n.Z)((0,n.Z)({},s._.defaultProps),{},{type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1}))},33750:(t,e,i)=>{"use strict";i.d(e,{e:()=>p});var n=i(18489),r=i(39827),s=i(17302),o=i(92631);function a(t,e,i,n){if(null!==n&&void 0!==n&&n.inlineSource){const n=function(t,e,i){let n="";for(let r=e-2;r<=e;r++){const s=t[r-1];void 0!==s&&(n+=c(s,e,i))}return n}(e,i),r=t.linePos>0?"".concat(" ".repeat(t.linePos+5),"^^^\n"):"";return"\n".concat(n).concat(r).concat(t.type.toUpperCase(),": ").concat(t.message,"\n\n")}return null!==n&&void 0!==n&&n.html?"<div class='luma-compiler-log-error' style=\"color:red;\"><b> ".concat(t.type.toUpperCase(),": ").concat(t.message,"</b></div>"):"".concat(t.type.toUpperCase(),": ").concat(t.message)}function c(t,e,i){const n=null!==i&&void 0!==i&&i.html?t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"):t;return"".concat(function(t,e){let i="";for(let n=t.length;n<e;++n)i+=" ";return i+t}(String(e),4),": ").concat(n).concat(null!==i&&void 0!==i&&i.html?"<br/>":"\n")}function l(t,e){return{name:h(t,e),language:"glsl",version:u(t)}}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return i?i[1]:e}function u(t){let e=100;const i=t.match(/[^\s]+/g);if(i&&i.length>=2&&"#version"===i[0]){const t=parseInt(i[1],10);Number.isFinite(t)&&(e=t)}return e}let d;d=Symbol.toStringTag;class p extends s._{get[d](){return"Shader"}constructor(t,e){super(t,(0,n.Z)({id:f(e)},e),p.defaultProps),(0,r.Z)(this,"stage",void 0),(0,r.Z)(this,"source",void 0),(0,r.Z)(this,"compilationStatus","pending"),this.stage=this.props.stage,this.source=this.props.source}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.debug){case"never":return;case"errors":if("success"===this.compilationStatus)return}const t=await this.getCompilationInfo();"warnings"===this.props.debug&&0===(null===t||void 0===t?void 0:t.length)||this._displayShaderLog(t)}_displayShaderLog(t){var e,i;if("undefined"===typeof document||null===(e=document)||void 0===e||!e.createElement)return;const r=l(this.source).name,s="".concat(this.stage," ").concat(r);let o=function(t,e,i){let r="";const s=e.split(/\r?\n/),o=t.slice().sort(((t,e)=>t.lineNum-e.lineNum));switch((null===i||void 0===i?void 0:i.showSourceCode)||"no"){case"all":let e=0;for(let t=1;t<=s.length;t++)for(r+=c(s[t-1],t,i);o.length>e&&o[e].lineNum===t;){const t=o[e++];r+=a(t,s,t.lineNum,(0,n.Z)((0,n.Z)({},i),{},{inlineSource:!1}))}return r;case"issues":case"no":for(const n of t)r+=a(n,s,n.lineNum,{inlineSource:"no"!==(null===i||void 0===i?void 0:i.showSourceCode)});return r}}(t,this.source,{showSourceCode:"all",html:!0});const h=this.getTranslatedSource();h&&(o+='<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>'.concat(h,"</pre></code>"));const u=document.createElement("Button");u.innerHTML="\n<h1>Shader Compilation Error in ".concat(s,'</h1><br /><br />\n<code style="user-select:text;"><pre>\n').concat(o,"\n</pre></code>"),u.style.top="10px",u.style.left="10px",u.style.position="absolute",u.style.zIndex="9999",u.style.width="100%",u.style.textAlign="left",document.body.appendChild(u);const d=document.getElementsByClassName("luma-compiler-log-error");null!==(i=d[0])&&void 0!==i&&i.scrollIntoView&&d[0].scrollIntoView(),u.onclick=()=>{const t="data:text/plain,".concat(encodeURIComponent(this.source));navigator.clipboard.writeText(t)}}}function f(t){return l(t.source).name||t.id||(0,o.h)("unnamed ".concat(t.stage,"-shader"))}(0,r.Z)(p,"defaultProps",(0,n.Z)((0,n.Z)({},s._.defaultProps),{},{language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"}))},13014:(t,e,i)=>{"use strict";i.d(e,{s:()=>a});var n=i(18489),r=i(39827),s=i(17302);let o;o=Symbol.toStringTag;class a extends s._{get[o](){return"TextureView"}constructor(t,e){super(t,e,a.defaultProps)}}(0,r.Z)(a,"defaultProps",(0,n.Z)((0,n.Z)({},s._.defaultProps),{},{format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0}))},92310:(t,e,i)=>{"use strict";i.d(e,{x:()=>a});var n=i(18489),r=i(39827),s=i(17302);let o;o=Symbol.toStringTag;class a extends s._{get[o](){return"Texture"}constructor(t,e){super(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.defaultProps),(0,r.Z)(this,"dimension",void 0),(0,r.Z)(this,"format",void 0),(0,r.Z)(this,"width",void 0),(0,r.Z)(this,"height",void 0),(0,r.Z)(this,"depth",void 0),(0,r.Z)(this,"updateTimestamp",void 0),this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=t.incrementTimestamp()}}(0,r.Z)(a,"defaultProps",(0,n.Z)((0,n.Z)({},s._.defaultProps),{},{data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0})),(0,r.Z)(a,"COPY_SRC",1),(0,r.Z)(a,"COPY_DST",2),(0,r.Z)(a,"TEXTURE_BINDING",4),(0,r.Z)(a,"STORAGE_BINDING",8),(0,r.Z)(a,"RENDER_ATTACHMENT",16)},33328:(t,e,i)=>{"use strict";function n(t){const e=function(t){const e=s[t];return e}(r[t]),i=t.includes("norm"),n=!i&&!t.startsWith("float"),o=t.startsWith("s");return{dataType:r[t],byteLength:e,integer:n,signed:o,normalized:i}}i.d(e,{e:()=>n});const r={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},s={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4}},35460:(t,e,i)=>{"use strict";i.d(e,{y:()=>r});var n=i(64701);function r(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach((i=>{const r=t[i];var s;s=r,null!==(0,n.v)(s)||"number"===typeof s||"boolean"===typeof s?e.uniforms[i]=r:e.bindings[i]=r})),e}},89600:(t,e,i)=>{"use strict";let n;function r(t){return(!n||n.byteLength<t)&&(n=new ArrayBuffer(t)),n}function s(t,e){return new t(r(t.BYTES_PER_ELEMENT*e),0,e)}function o(t){const{target:e,source:i,start:n=0,count:r=1}=t,s=i.length,o=r*s;let a=0;for(let c=n;a<s;a++)e[c++]=i[a];for(;a<o;)a<o-a?(e.copyWithin(n+a,n,n+a),a*=2):(e.copyWithin(n+a,n,n+o-a),a=o);return t.target}i.d(e,{D4:()=>r,FD:()=>s,kg:()=>o})},3540:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}i.d(e,{h:()=>n})},64701:(t,e,i)=>{"use strict";function n(t){return Array.isArray(t)?0===t.length||"number"===typeof t[0]?t:null:function(t){return!ArrayBuffer.isView(t)||t instanceof DataView?null:t}(t)}i.d(e,{v:()=>n})},78032:(t,e,i)=>{"use strict";i.d(e,{c:()=>n});const n=new(i(91581).Z)({id:"luma.gl"})},92631:(t,e,i)=>{"use strict";i.d(e,{h:()=>r,n:()=>s});const n={};function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";n[t]=n[t]||1;const e=n[t]++;return"".concat(t,"-").concat(e)}function s(t){let e=!0;for(const i in t){e=!1;break}return e}},15572:(t,e,i)=>{"use strict";i.d(e,{q:()=>w});var n=i(18489),r=i(39827),s=i(58624);function o(t){if(t.source&&"webgpu"===t.platformInfo.type){return(0,n.Z)((0,n.Z)({},t),{},{vs:void 0,fs:void 0})}if(!t.vs)throw new Error("no vertex shader");const e=a(t.platformInfo,t.vs);let i;return t.fs&&(i=a(t.platformInfo,t.fs)),(0,n.Z)((0,n.Z)({},t),{},{vs:e,fs:i})}function a(t,e){if("string"===typeof e)return e;if("webgpu"===t.type){if(null!==e&&void 0!==e&&e.wgsl)return e.wgsl;throw new Error("WebGPU does not support GLSL shaders")}if(null!==e&&void 0!==e&&e.glsl)return e.glsl;throw new Error("WebGL does not support WGSL shaders")}var c=i(54933);var l=i(65246);const h=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],u=[...h,[f("attribute"),"in $1"],[f("varying"),"out $1"]],d=[...h,[f("varying"),"in $1"]];function p(t,e){for(const[i,n]of e)t=t.replace(i,n);return t}function f(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}function _(t,e){let i="";for(const n in t){const r=t[n];if(i+="void ".concat(r.signature," {\n"),r.header&&(i+="  ".concat(r.header)),e[n]){const t=e[n];t.sort(((t,e)=>t.order-e.order));for(const e of t)i+="  ".concat(e.injection,"\n")}r.footer&&(i+="  ".concat(r.footer)),i+="}\n"}return i}function g(t){const e={vertex:{},fragment:{}};for(const i of t){let t,n;"string"!==typeof i?(t=i,n=t.hook):(t={},n=i),n=n.trim();const[r,s]=n.split(":"),o=n.replace(/\(.+/,""),a=Object.assign(t,{signature:s});switch(r){case"vs":e.vertex[o]=a;break;case"fs":e.fragment[o]=a;break;default:throw new Error(r)}}return e}var E=i(79325);function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return i?i[1]:e}function v(t){let e=100;const i=t.match(/[^\s]+/g);if(i&&i.length>=2&&"#version"===i[0]){const t=parseInt(i[1],10);Number.isFinite(t)&&(e=t)}if(100!==e&&300!==e)throw new Error("Invalid GLSL version ".concat(e));return e}const T="\n\n".concat(l.O_,"\n"),R="precision highp float;\n";function A(t,e){const{source:i,stage:n,modules:r,hookFunctions:s=[],inject:o={},log:a}=e;(0,E.h)("string"===typeof i,"shader source must be a string");const c=i;let h="";const u=g(s),d={},p={},f={};for(const l in o){const t="string"===typeof o[l]?{injection:o[l],order:0}:o[l],e=/^(v|f)s:(#)?([\w-]+)$/.exec(l);if(e){const i=e[2],n=e[3];i?"decl"===n?p[l]=[t]:f[l]=[t]:d[l]=[t]}else f[l]=[t]}const m="webgpu"!==t.type?r:[];for(const l of m){a&&l.checkDeprecations(c,a);h+=l.getModuleSource(n,"wgsl");const t=l.injections[n];for(const e in t){const i=/^(v|f)s:#([\w-]+)$/.exec(e);if(i){const n="decl"===i[2]?p:f;n[e]=n[e]||[],n[e].push(t[e])}else d[e]=d[e]||[],d[e].push(t[e])}}return h+=T,h=(0,l.AM)(h,n,p),h+=_(u[n],d),h+=c,h=(0,l.AM)(h,n,f),h}function b(t,e){const{id:i,source:n,stage:r,language:s="glsl",modules:o,defines:a={},hookFunctions:c=[],inject:h={},prologue:f=!0,log:A}=e;(0,E.h)("string"===typeof n,"shader source must be a string");const b="glsl"===s?function(t,e){return{name:m(t,e),language:"glsl",version:v(t)}}(n).version:-1,S=t.shaderLanguageVersion,w=100===b?"#version 100":"#version 300 es",y=n.split("\n").slice(1).join("\n"),M={};o.forEach((t=>{Object.assign(M,t.getDefines())})),Object.assign(M,a);let C="";switch(s){case"wgsl":break;case"glsl":C=f?"".concat(w,"\n\n// ----- PROLOGUE -------------------------\n").concat(function(t){const{id:e,source:i,stage:n}=t,r=e&&-1===i.indexOf("SHADER_NAME");return r?"\n#define SHADER_NAME ".concat(e,"_").concat(n,"\n\n"):""}({id:i,source:n,stage:r}),"\n","#define SHADER_TYPE_".concat(r.toUpperCase()),"\n").concat(function(t){switch(null===t||void 0===t?void 0:t.gpu.toLowerCase()){case"apple":return"#define APPLE_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"nvidia":return"#define NVIDIA_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat("fragment"===r?R:"","\n\n// ----- APPLICATION DEFINES -------------------------\n\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="";for(const i in t){const n=t[i];(n||Number.isFinite(n))&&(e+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return e}(M),"\n\n"):"".concat(w,"\n")}const P=g(c),I={},L={},O={};for(const l in h){const t="string"===typeof h[l]?{injection:h[l],order:0}:h[l],e=/^(v|f)s:(#)?([\w-]+)$/.exec(l);if(e){const i=e[2],n=e[3];i?"decl"===n?L[l]=[t]:O[l]=[t]:I[l]=[t]}else O[l]=[t]}for(const l of o){A&&l.checkDeprecations(y,A);C+=l.getModuleSource(r);const t=l.injections[r];for(const e in t){const i=/^(v|f)s:#([\w-]+)$/.exec(e);if(i){const n="decl"===i[2]?L:O;n[e]=n[e]||[],n[e].push(t[e])}else I[e]=I[e]||[],I[e].push(t[e])}}return C+="// ----- MAIN SHADER SOURCE -------------------------",C+=T,C=(0,l.AM)(C,r,L),C+=_(P[r],I),C+=y,C=(0,l.AM)(C,r,O),"glsl"===s&&b!==S&&(C=function(t,e){var i;if(300!==Number((null===(i=t.match(/^#version[ \t]+(\d+)/m))||void 0===i?void 0:i[1])||100))throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return p(t,u);case"fragment":return p(t,d);default:throw new Error(e)}}(C,r)),C.trim()}function S(t){return function(e){const i={};for(const n of t){const t=n.getUniforms(e,i);Object.assign(i,t)}return i}}class w{constructor(){(0,r.Z)(this,"_hookFunctions",[]),(0,r.Z)(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return w.defaultShaderAssembler=w.defaultShaderAssembler||new w,w.defaultShaderAssembler}addDefaultModule(t){this._defaultModules.find((e=>e.name===("string"===typeof t?t:t.name)))||this._defaultModules.push(t)}removeDefaultModule(t){const e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e))}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t)}assembleShader(t){const e=this._getModuleList(t.modules),i=this._hookFunctions,r=o(t),s=function(t){const e=(0,c.WQ)(t.modules||[]);return{source:A(t.platformInfo,(0,n.Z)((0,n.Z)({},t),{},{source:t.source,stage:"vertex",modules:e})),getUniforms:S(e)}}((0,n.Z)((0,n.Z)({platformInfo:t.platformInfo},r),{},{modules:e,hookFunctions:i}));return(0,n.Z)((0,n.Z)({},s),{},{modules:e})}assembleShaderPair(t){const e=o(t),i=this._getModuleList(t.modules),r=this._hookFunctions,{platformInfo:s}=t,a="wgsl"===t.platformInfo.shaderLanguage?function(t){const e=(0,c.WQ)(t.modules||[]);return{vs:A(t.platformInfo,(0,n.Z)((0,n.Z)({},t),{},{source:t.vs,stage:"vertex",modules:e})),fs:A(t.platformInfo,(0,n.Z)((0,n.Z)({},t),{},{source:t.fs,stage:"fragment",modules:e})),getUniforms:S(e)}}((0,n.Z)((0,n.Z)({platformInfo:s},e),{},{modules:i,hookFunctions:r})):function(t){const{vs:e,fs:i}=t,r=(0,c.WQ)(t.modules||[]);return{vs:b(t.platformInfo,(0,n.Z)((0,n.Z)({},t),{},{source:e,stage:"vertex",modules:r})),fs:b(t.platformInfo,(0,n.Z)((0,n.Z)({},t),{},{source:i,stage:"fragment",modules:r})),getUniforms:S(r)}}((0,n.Z)((0,n.Z)({platformInfo:s},e),{},{modules:i,hookFunctions:r}));return(0,n.Z)((0,n.Z)({},a),{},{modules:i})}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),i={};let n=0;for(let r=0,s=this._defaultModules.length;r<s;++r){const t=this._defaultModules[r],s=t.name;e[n++]=t,i[s]=!0}for(let r=0,s=t.length;r<s;++r){const s=t[r],o=s.name;i[o]||(e[n++]=s,i[o]=!0)}return e.length=n,s.E.instantiateModules(e)}}(0,r.Z)(w,"defaultShaderAssembler",void 0)},54933:(t,e,i)=>{"use strict";i.d(e,{WQ:()=>r});var n=i(58624);function r(t){return s(n.E.instantiateModules(t))}function s(t){const e={},i={};return o({modules:t,level:0,moduleMap:e,moduleDepth:i}),Object.keys(i).sort(((t,e)=>i[e]-i[t])).map((t=>e[t]))}function o(t){const{modules:e,level:i,moduleMap:n,moduleDepth:r}=t;if(i>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)n[s.name]=s,(void 0===r[s.name]||r[s.name]<i)&&(r[s.name]=i);for(const s of e)s.dependencies&&o({modules:s.dependencies,level:i+1,moduleMap:n,moduleDepth:r})}},65246:(t,e,i)=>{"use strict";i.d(e,{O_:()=>a,AM:()=>h,hZ:()=>c});const n={vertex:"#ifdef MODULE_LOGDEPTH\nlogdepth_adjustPosition(gl_Position);\n#endif\n",fragment:"#ifdef MODULE_MATERIAL\ngl_FragColor = material_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_LIGHTING\ngl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_FOG\ngl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_PICKING\ngl_FragColor = picking_filterHighlightColor(gl_FragColor);\ngl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n#ifdef MODULE_LOGDEPTH\nlogdepth_setFragDepth();\n#endif\n"},r=/void\s+main\s*\([^)]*\)\s*\{\n?/,s=/}\n?[^{}]*$/,o=[],a="__LUMA_INJECT_DECLARATIONS__";function c(t){const e={vertex:{},fragment:{}};for(const i in t){let n=t[i];"string"===typeof n&&(n={order:0,injection:n}),e[l(i)][i]=n}return e}function l(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function h(t,e,i){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const l="vertex"===e;for(const n in i){const e=i[n];e.sort(((t,e)=>t.order-e.order)),o.length=e.length;for(let t=0,i=e.length;t<i;++t)o[t]=e[t].injection;const c="".concat(o.join("\n"),"\n");switch(n){case"vs:#decl":l&&(t=t.replace(a,c));break;case"vs:#main-start":l&&(t=t.replace(r,(t=>t+c)));break;case"vs:#main-end":l&&(t=t.replace(s,(t=>c+t)));break;case"fs:#decl":l||(t=t.replace(a,c));break;case"fs:#main-start":l||(t=t.replace(r,(t=>t+c)));break;case"fs:#main-end":l||(t=t.replace(s,(t=>c+t)));break;default:t=t.replace(n,(t=>t+c))}}return t=t.replace(a,""),c&&(t=t.replace(/\}\s*$/,(t=>t+n[e]))),t}},58624:(t,e,i)=>{"use strict";i.d(e,{E:()=>u});var n=i(39827),r=i(79325),s=i(18489);const o={number:{type:"number",validate:(t,e)=>Number.isFinite(t)&&"object"===typeof e&&(void 0===e.max||t<=e.max)&&(void 0===e.min||t>=e.min)},array:{type:"array",validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function a(t){let e=c(t);if("object"!==e)return(0,s.Z)((0,s.Z)({value:t},o[e]),{},{type:e});if("object"===typeof t)return t?void 0!==t.type?(0,s.Z)((0,s.Z)((0,s.Z)({},t),o[t.type]),{},{type:t.type}):void 0===t.value?{type:"object",value:t}:(e=c(t.value),(0,s.Z)((0,s.Z)((0,s.Z)({},t),o[e]),{},{type:e})):{type:"object",value:null};throw new Error("props")}function c(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}var l=i(65246);let h=1;class u{static instantiateModules(t){return t.map((t=>{if(t instanceof u)return t;(0,r.h)("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(JSON.stringify(t),"' and use it directly.")),t.name||(console.warn("shader module has no name"),t.name="shader-module-".concat(h++));const e=new u(t);return e.dependencies=u.instantiateModules(t.dependencies||[]),e}))}constructor(t){(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"vs",void 0),(0,n.Z)(this,"fs",void 0),(0,n.Z)(this,"getModuleUniforms",void 0),(0,n.Z)(this,"dependencies",void 0),(0,n.Z)(this,"deprecations",void 0),(0,n.Z)(this,"defines",void 0),(0,n.Z)(this,"injections",void 0),(0,n.Z)(this,"uniforms",{}),(0,n.Z)(this,"uniformTypes",{});const{name:e,vs:i,fs:s,dependencies:o=[],uniformTypes:c={},uniformPropTypes:h={},getUniforms:d,deprecations:p=[],defines:f={},inject:_={}}=t;(0,r.h)("string"===typeof e),this.name=e,this.vs=i,this.fs=s,this.getModuleUniforms=d,this.dependencies=u.instantiateModules(o),this.deprecations=this._parseDeprecationDefinitions(p),this.defines=f,this.injections=(0,l.hZ)(_),this.uniformTypes=c,h&&(this.uniforms=function(t){const e={};for(const[i,n]of Object.entries(t))e[i]=a(n);return e}(h))}getModuleSource(t){let e;switch(t){case"vertex":e=this.vs||"";break;case"fragment":e=this.fs||"";break;default:(0,r.h)(!1)}const i=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return"// ----- MODULE ".concat(this.name," ---------------\n\n#define MODULE_").concat(i,"\n").concat(e,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):function(t,e,i){const n={};for(const[s,o]of Object.entries(e))t&&s in t&&!o.private?(o.validate&&(0,r.h)(o.validate(t[s],o),"".concat(i,": invalid ").concat(s)),n[s]=t[s]):n[s]=o.value;return n}(t,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((i=>{var n;null!==(n=i.regex)&&void 0!==n&&n.test(t)&&(i.deprecated?e.deprecated(i.old,i.new)():e.removed(i.old,i.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},i=this.uniforms;for(const n in i){const s=i[n];n in t&&!s.private?(s.validate&&(0,r.h)(s.validate(t[n],s),"".concat(this.name,": invalid ").concat(n)),e[n]=t[n]):e[n]=s.value}return e}}},79325:(t,e,i)=>{"use strict";function n(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}i.d(e,{h:()=>n})},76085:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(24541);class r extends Array{clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<this.ELEMENTS;++i)this[i]=t[i+e];return this.check()}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<this.ELEMENTS;++i)t[e+i]=this[i];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:(0,n.kJ)(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(n.vc)}formatString(t){let e="";for(let i=0;i<this.ELEMENTS;++i)e+=(i>0?", ":"")+(0,n.Bw)(this[i],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,n.fS)(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,i){if(void 0===i)return this.lerp(this,t,e);for(let n=0;n<this.ELEMENTS;++n){const r=t[n],s="number"===typeof e?e:e[n];this[n]=r+i*(s-r)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t[i]),e[i]);return this.check()}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const n of e)for(let t=0;t<this.ELEMENTS;++t)this[t]+=n[t];return this.check()}subtract(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const n of e)for(let t=0;t<this.ELEMENTS;++t)this[t]-=n[t];return this.check()}scale(t){if("number"===typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(n.vc.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t),e);return this.check()}get elements(){return this}}},60669:(t,e,i)=>{"use strict";i.d(e,{y:()=>m});var n=i(76085),r=i(70646),s=i(24541);class o extends n.Z{toString(){let t="[";if(s.vc.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let i=0;i<this.RANK;++i)t+=" ".concat(this[i*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,i){return this[e*this.RANK+t]=(0,r.u5)(i),this}getColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const i=t*this.RANK;for(let n=0;n<this.RANK;++n)e[n]=this[i+n];return e}setColumn(t,e){const i=t*this.RANK;for(let n=0;n<this.RANK;++n)this[i+n]=e[n];return this}}var a,c=i(51705),l=i(70581),h=i(85158),u=i(43676),d=i(54499);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(a||(a={}));const p=45*Math.PI/180,f=1,_=.1,g=500,E=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class m extends o{static get IDENTITY(){return function(){T||(T=new m,Object.freeze(T));return T}()}static get ZERO(){return function(){v||(v=new m([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(v));return v}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return a}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,i,n,r,s,o,a,c,l,h,u,d,p,f,_){return this[0]=t,this[1]=e,this[2]=i,this[3]=n,this[4]=r,this[5]=s,this[6]=o,this[7]=a,this[8]=c,this[9]=l,this[10]=h,this[11]=u,this[12]=d,this[13]=p,this[14]=f,this[15]=_,this.check()}setRowMajor(t,e,i,n,r,s,o,a,c,l,h,u,d,p,f,_){return this[0]=t,this[1]=r,this[2]=c,this[3]=d,this[4]=e,this[5]=s,this[6]=l,this[7]=p,this[8]=i,this[9]=o,this[10]=h,this[11]=f,this[12]=n,this[13]=a,this[14]=u,this[15]=_,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(E)}fromObject(t){return this.check()}fromQuaternion(t){return(0,l.en)(this,t),this.check()}frustum(t){const{left:e,right:i,bottom:n,top:r,near:s=_,far:o=g}=t;return o===1/0?function(t,e,i,n,r,s){const o=2*s/(i-e),a=2*s/(r-n),c=(i+e)/(i-e),l=(r+n)/(r-n),h=-1,u=-1,d=-2*s;t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=h,t[11]=u,t[12]=0,t[13]=0,t[14]=d,t[15]=0}(this,e,i,n,r,s):(0,l.oy)(this,e,i,n,r,s,o),this.check()}lookAt(t){const{eye:e,center:i=[0,0,0],up:n=[0,1,0]}=t;return(0,l.zB)(this,e,i,n),this.check()}ortho(t){const{left:e,right:i,bottom:n,top:r,near:s=_,far:o=g}=t;return(0,l.M5)(this,e,i,n,r,s,o),this.check()}orthographic(t){const{fovy:e=p,aspect:i=f,focalDistance:n=1,near:r=_,far:s=g}=t;R(e);const o=e/2,a=n*Math.tan(o),c=a*i;return this.ortho({left:-c,right:c,bottom:-a,top:a,near:r,far:s})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:i=1,near:n=.1,far:r=500}=t;return R(e),(0,l.G3)(this,e,i,n,r),this.check()}determinant(){return(0,l.GH)(this)}getScale(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const i=this.getScale(e),n=1/i[0],r=1/i[1],s=1/i[2];return t[0]=this[0]*n,t[1]=this[1]*r,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*n,t[5]=this[5]*r,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*n,t[9]=this[9]*r,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const i=this.getScale(e),n=1/i[0],r=1/i[1],s=1/i[2];return t[0]=this[0]*n,t[1]=this[1]*r,t[2]=this[2]*s,t[3]=this[4]*n,t[4]=this[5]*r,t[5]=this[6]*s,t[6]=this[8]*n,t[7]=this[9]*r,t[8]=this[10]*s,t}transpose(){return(0,l.p4)(this,this),this.check()}invert(){return(0,l.U_)(this,this),this.check()}multiplyLeft(t){return(0,l.Jp)(this,t,this),this.check()}multiplyRight(t){return(0,l.Jp)(this,this,t),this.check()}rotateX(t){return(0,l.lM)(this,this,t),this.check()}rotateY(t){return(0,l.uD)(this,this,t),this.check()}rotateZ(t){return(0,l.jI)(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return(0,l.U1)(this,this,t,e),this.check()}scale(t){return(0,l.bA)(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return(0,l.Iu)(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=(0,d.fF)(e||[-0,-0,-0,-0],t,this),(0,r.IL)(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:i}=t;let n;switch(i){case 2:n=(0,h.fF)(e||[-0,-0],t,this);break;case 3:n=(0,u.fF)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,r.IL)(n,t.length),n}transformAsVector(t,e){let i;switch(t.length){case 2:i=(0,c.pb)(e||[-0,-0],t,this);break;case 3:i=(0,c.pL)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,r.IL)(i,t.length),i}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,i){return this.identity().translate([t,e,i])}}let v,T;function R(t){if(t>2*Math.PI)throw Error("expected radians")}},90227:(t,e,i)=>{"use strict";i.d(e,{P:()=>d});var n=i(76085),r=i(70646);function s(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class o extends n.Z{get x(){return this[0]}set x(t){this[0]=(0,r.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,r.u5)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let i=0;i<this.ELEMENTS;++i){const n=this[i]-t[i];e+=n*n}return(0,r.u5)(e)}dot(t){let e=0;for(let i=0;i<this.ELEMENTS;++i)e+=this[i]*t[i];return(0,r.u5)(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const n of e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=n[t];return this.check()}divide(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const n of e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=n[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return s(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,r.u5)(this[t])}setComponent(t,e){return s(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var a=i(24541),c=i(43676),l=i(51705);const h=[0,0,0];let u;class d extends o{static get ZERO(){return u||(u=new d(0,0,0),Object.freeze(u)),u}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&(0,a.kJ)(t)?this.copy(t):(a.vc.debug&&((0,r.u5)(t),(0,r.u5)(e),(0,r.u5)(i)),this[0]=t,this[1]=e,this[2]=i)}set(t,e,i){return this[0]=t,this[1]=e,this[2]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return a.vc.debug&&((0,r.u5)(t.x),(0,r.u5)(t.y),(0,r.u5)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,r.u5)(t)}angle(t){return(0,c.EU)(this,t)}cross(t){return(0,c.kC)(this,this,t),this.check()}rotateX(t){let{radians:e,origin:i=h}=t;return(0,c.lM)(this,this,i,e),this.check()}rotateY(t){let{radians:e,origin:i=h}=t;return(0,c.uD)(this,this,i,e),this.check()}rotateZ(t){let{radians:e,origin:i=h}=t;return(0,c.jI)(this,this,i,e),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return(0,c.fF)(this,this,t),this.check()}transformAsVector(t){return(0,l.pL)(this,this,t),this.check()}transformByMatrix3(t){return(0,c.kK)(this,this,t),this.check()}transformByMatrix2(t){return(0,l.eQ)(this,this,t),this.check()}transformByQuaternion(t){return(0,c.VC)(this,this,t),this.check()}}},60197:(t,e,i)=>{"use strict";i.d(e,{Ib:()=>n,WT:()=>r});const n=1e-6;let r="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI},70581:(t,e,i)=>{"use strict";i.d(e,{G3:()=>g,GH:()=>o,Iu:()=>c,Jp:()=>a,M5:()=>E,U1:()=>h,U_:()=>s,bA:()=>l,en:()=>f,jI:()=>p,lM:()=>u,oy:()=>_,p4:()=>r,uD:()=>d,zB:()=>m});var n=i(60197);function r(t,e){if(t===e){const i=e[1],n=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function s(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],h=e[8],u=e[9],d=e[10],p=e[11],f=e[12],_=e[13],g=e[14],E=e[15],m=i*a-n*o,v=i*c-r*o,T=i*l-s*o,R=n*c-r*a,A=n*l-s*a,b=r*l-s*c,S=h*_-u*f,w=h*g-d*f,y=h*E-p*f,M=u*g-d*_,C=u*E-p*_,P=d*E-p*g;let I=m*P-v*C+T*M+R*y-A*w+b*S;return I?(I=1/I,t[0]=(a*P-c*C+l*M)*I,t[1]=(r*C-n*P-s*M)*I,t[2]=(_*b-g*A+E*R)*I,t[3]=(d*A-u*b-p*R)*I,t[4]=(c*y-o*P-l*w)*I,t[5]=(i*P-r*y+s*w)*I,t[6]=(g*T-f*b-E*v)*I,t[7]=(h*b-d*T+p*v)*I,t[8]=(o*C-a*y+l*S)*I,t[9]=(n*y-i*C-s*S)*I,t[10]=(f*A-_*T+E*m)*I,t[11]=(u*T-h*A-p*m)*I,t[12]=(a*w-o*M-c*S)*I,t[13]=(i*M-n*w+r*S)*I,t[14]=(_*v-f*R-g*m)*I,t[15]=(h*R-u*v+d*m)*I,t):null}function o(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8],h=t[9],u=t[10],d=t[11],p=t[12],f=t[13],_=t[14],g=e*o-i*s,E=e*a-n*s,m=i*a-n*o,v=l*f-h*p,T=l*_-u*p,R=h*_-u*f;return c*(e*R-i*T+n*v)-r*(s*R-o*T+a*v)+t[15]*(l*m-h*E+u*g)-d*(p*m-f*E+_*g)}function a(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],h=e[7],u=e[8],d=e[9],p=e[10],f=e[11],_=e[12],g=e[13],E=e[14],m=e[15];let v=i[0],T=i[1],R=i[2],A=i[3];return t[0]=v*n+T*a+R*u+A*_,t[1]=v*r+T*c+R*d+A*g,t[2]=v*s+T*l+R*p+A*E,t[3]=v*o+T*h+R*f+A*m,v=i[4],T=i[5],R=i[6],A=i[7],t[4]=v*n+T*a+R*u+A*_,t[5]=v*r+T*c+R*d+A*g,t[6]=v*s+T*l+R*p+A*E,t[7]=v*o+T*h+R*f+A*m,v=i[8],T=i[9],R=i[10],A=i[11],t[8]=v*n+T*a+R*u+A*_,t[9]=v*r+T*c+R*d+A*g,t[10]=v*s+T*l+R*p+A*E,t[11]=v*o+T*h+R*f+A*m,v=i[12],T=i[13],R=i[14],A=i[15],t[12]=v*n+T*a+R*u+A*_,t[13]=v*r+T*c+R*d+A*g,t[14]=v*s+T*l+R*p+A*E,t[15]=v*o+T*h+R*f+A*m,t}function c(t,e,i){const n=i[0],r=i[1],s=i[2];let o,a,c,l,h,u,d,p,f,_,g,E;return e===t?(t[12]=e[0]*n+e[4]*r+e[8]*s+e[12],t[13]=e[1]*n+e[5]*r+e[9]*s+e[13],t[14]=e[2]*n+e[6]*r+e[10]*s+e[14],t[15]=e[3]*n+e[7]*r+e[11]*s+e[15]):(o=e[0],a=e[1],c=e[2],l=e[3],h=e[4],u=e[5],d=e[6],p=e[7],f=e[8],_=e[9],g=e[10],E=e[11],t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=h,t[5]=u,t[6]=d,t[7]=p,t[8]=f,t[9]=_,t[10]=g,t[11]=E,t[12]=o*n+h*r+f*s+e[12],t[13]=a*n+u*r+_*s+e[13],t[14]=c*n+d*r+g*s+e[14],t[15]=l*n+p*r+E*s+e[15]),t}function l(t,e,i){const n=i[0],r=i[1],s=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h(t,e,i,r){let s,o,a,c,l,h,u,d,p,f,_,g,E,m,v,T,R,A,b,S,w,y,M,C,P=r[0],I=r[1],L=r[2],O=Math.sqrt(P*P+I*I+L*L);return O<n.Ib?null:(O=1/O,P*=O,I*=O,L*=O,o=Math.sin(i),s=Math.cos(i),a=1-s,c=e[0],l=e[1],h=e[2],u=e[3],d=e[4],p=e[5],f=e[6],_=e[7],g=e[8],E=e[9],m=e[10],v=e[11],T=P*P*a+s,R=I*P*a+L*o,A=L*P*a-I*o,b=P*I*a-L*o,S=I*I*a+s,w=L*I*a+P*o,y=P*L*a+I*o,M=I*L*a-P*o,C=L*L*a+s,t[0]=c*T+d*R+g*A,t[1]=l*T+p*R+E*A,t[2]=h*T+f*R+m*A,t[3]=u*T+_*R+v*A,t[4]=c*b+d*S+g*w,t[5]=l*b+p*S+E*w,t[6]=h*b+f*S+m*w,t[7]=u*b+_*S+v*w,t[8]=c*y+d*M+g*C,t[9]=l*y+p*M+E*C,t[10]=h*y+f*M+m*C,t[11]=u*y+_*M+v*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function u(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],h=e[9],u=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+l*n,t[5]=o*r+h*n,t[6]=a*r+u*n,t[7]=c*r+d*n,t[8]=l*r-s*n,t[9]=h*r-o*n,t[10]=u*r-a*n,t[11]=d*r-c*n,t}function d(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],h=e[9],u=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-l*n,t[1]=o*r-h*n,t[2]=a*r-u*n,t[3]=c*r-d*n,t[8]=s*n+l*r,t[9]=o*n+h*r,t[10]=a*n+u*r,t[11]=c*n+d*r,t}function p(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],h=e[5],u=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+l*n,t[1]=o*r+h*n,t[2]=a*r+u*n,t[3]=c*r+d*n,t[4]=l*r-s*n,t[5]=h*r-o*n,t[6]=u*r-a*n,t[7]=d*r-c*n,t}function f(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=i+i,a=n+n,c=r+r,l=i*o,h=n*o,u=n*a,d=r*o,p=r*a,f=r*c,_=s*o,g=s*a,E=s*c;return t[0]=1-u-f,t[1]=h+E,t[2]=d-g,t[3]=0,t[4]=h-E,t[5]=1-l-f,t[6]=p+_,t[7]=0,t[8]=d+g,t[9]=p-_,t[10]=1-l-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e,i,n,r,s,o){const a=1/(i-e),c=1/(r-n),l=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*c,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(r+n)*c,t[10]=(o+s)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*l,t[15]=0,t}const g=function(t,e,i,n,r){const s=1/Math.tan(e/2);if(t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0){const e=1/(n-r);t[10]=(r+n)*e,t[14]=2*r*n*e}else t[10]=-1,t[14]=-2*n;return t};const E=function(t,e,i,n,r,s,o){const a=1/(e-i),c=1/(n-r),l=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*a,t[13]=(r+n)*c,t[14]=(o+s)*l,t[15]=1,t};function m(t,e,i,r){let s,o,a,c,l,h,u,d,p,f;const _=e[0],g=e[1],E=e[2],m=r[0],v=r[1],T=r[2],R=i[0],A=i[1],b=i[2];return Math.abs(_-R)<n.Ib&&Math.abs(g-A)<n.Ib&&Math.abs(E-b)<n.Ib?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(d=_-R,p=g-A,f=E-b,s=1/Math.sqrt(d*d+p*p+f*f),d*=s,p*=s,f*=s,o=v*f-T*p,a=T*d-m*f,c=m*p-v*d,s=Math.sqrt(o*o+a*a+c*c),s?(s=1/s,o*=s,a*=s,c*=s):(o=0,a=0,c=0),l=p*c-f*a,h=f*o-d*c,u=d*a-p*o,s=Math.sqrt(l*l+h*h+u*u),s?(s=1/s,l*=s,h*=s,u*=s):(l=0,h=0,u=0),t[0]=o,t[1]=l,t[2]=d,t[3]=0,t[4]=a,t[5]=h,t[6]=p,t[7]=0,t[8]=c,t[9]=u,t[10]=f,t[11]=0,t[12]=-(o*_+a*g+c*E),t[13]=-(l*_+h*g+u*E),t[14]=-(d*_+p*g+f*E),t[15]=1,t)}},85158:(t,e,i)=>{"use strict";i.d(e,{IH:()=>r,fF:()=>a,t7:()=>o,tk:()=>s});var n=i(60197);function r(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function s(t,e){return t[0]=-e[0],t[1]=-e[1],t}function o(t,e,i,n){const r=e[0],s=e[1];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t}function a(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t}!function(){const t=function(){const t=new n.WT(2);return n.WT!=Float32Array&&(t[0]=0,t[1]=0),t}()}()},43676:(t,e,i)=>{"use strict";i.d(e,{EU:()=>p,VC:()=>l,fF:()=>a,jI:()=>d,kC:()=>o,kK:()=>c,lM:()=>h,lu:()=>f,tk:()=>r,uD:()=>u});var n=i(60197);function r(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function s(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function o(t,e,i){const n=e[0],r=e[1],s=e[2],o=i[0],a=i[1],c=i[2];return t[0]=r*c-s*a,t[1]=s*o-n*c,t[2]=n*a-r*o,t}function a(t,e,i){const n=e[0],r=e[1],s=e[2];let o=i[3]*n+i[7]*r+i[11]*s+i[15];return o=o||1,t[0]=(i[0]*n+i[4]*r+i[8]*s+i[12])/o,t[1]=(i[1]*n+i[5]*r+i[9]*s+i[13])/o,t[2]=(i[2]*n+i[6]*r+i[10]*s+i[14])/o,t}function c(t,e,i){const n=e[0],r=e[1],s=e[2];return t[0]=n*i[0]+r*i[3]+s*i[6],t[1]=n*i[1]+r*i[4]+s*i[7],t[2]=n*i[2]+r*i[5]+s*i[8],t}function l(t,e,i){const n=i[0],r=i[1],s=i[2],o=i[3],a=e[0],c=e[1],l=e[2];let h=r*l-s*c,u=s*a-n*l,d=n*c-r*a,p=r*d-s*u,f=s*h-n*d,_=n*u-r*h;const g=2*o;return h*=g,u*=g,d*=g,p*=2,f*=2,_*=2,t[0]=a+h+p,t[1]=c+u+f,t[2]=l+d+_,t}function h(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[0],s[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),s[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function u(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),s[1]=r[1],s[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function d(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),s[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),s[2]=r[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function p(t,e){const i=t[0],n=t[1],r=t[2],o=e[0],a=e[1],c=e[2],l=Math.sqrt((i*i+n*n+r*r)*(o*o+a*a+c*c)),h=l&&s(t,e)/l;return Math.acos(Math.min(Math.max(h,-1),1))}const f=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t};!function(){const t=function(){const t=new n.WT(3);return n.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}()},54499:(t,e,i)=>{"use strict";i.d(e,{bA:()=>r,fF:()=>s});var n=i(60197);function r(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function s(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*s+i[12]*o,t[1]=i[1]*n+i[5]*r+i[9]*s+i[13]*o,t[2]=i[2]*n+i[6]*r+i[10]*s+i[14]*o,t[3]=i[3]*n+i[7]*r+i[11]*s+i[15]*o,t}!function(){const t=function(){const t=new n.WT(4);return n.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}()},24541:(t,e,i)=>{"use strict";i.d(e,{Bw:()=>s,fS:()=>l,kJ:()=>o,t7:()=>c,uZ:()=>a,vc:()=>r});var n=i(18489);Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:(0,n.Z)({},{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1})};const r=globalThis.mathgl.config;function s(t){let{precision:e=r.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=function(t){return Math.round(t/r.EPSILON)*r.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function a(t,e,i){return h(t,(t=>Math.max(e,Math.min(i,t))))}function c(t,e,i){return o(t)?t.map(((t,n)=>c(t,e[n],i))):i*e+(1-i)*t}function l(t,e,i){const n=r.EPSILON;i&&(r.EPSILON=i);try{if(t===e)return!0;if(o(t)&&o(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!l(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"===typeof t&&"number"===typeof e&&Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{r.EPSILON=n}}function h(t,e,i){if(o(t)){const n=t;i=i||function(t){return t.clone?t.clone():new Array(t.length)}(n);for(let r=0;r<i.length&&r<n.length;++r){const n="number"===typeof t?t:t[r];i[r]=e(n,r,i)}return i}return e(t)}},51705:(t,e,i)=>{"use strict";function n(t,e,i){const n=e[0],r=e[1],s=i[3]*n+i[7]*r||1;return t[0]=(i[0]*n+i[4]*r)/s,t[1]=(i[1]*n+i[5]*r)/s,t}function r(t,e,i){const n=e[0],r=e[1],s=e[2],o=i[3]*n+i[7]*r+i[11]*s||1;return t[0]=(i[0]*n+i[4]*r+i[8]*s)/o,t[1]=(i[1]*n+i[5]*r+i[9]*s)/o,t[2]=(i[2]*n+i[6]*r+i[10]*s)/o,t}function s(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t[2]=e[2],t}i.d(e,{eQ:()=>s,pL:()=>r,pb:()=>n})},70646:(t,e,i)=>{"use strict";i.d(e,{IL:()=>s,u5:()=>r});var n=i(24541);function r(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(JSON.stringify(t)));return t}function s(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(n.vc.debug&&!function(t,e){if(t.length!==e)return!1;for(let i=0;i<t.length;++i)if(!Number.isFinite(t[i]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(i," some fields set to invalid numbers'"));return t}},91960:(t,e,i)=>{"use strict";i.d(e,{eG:()=>w,Lu:()=>C,Xg:()=>O,sj:()=>P,zX:()=>D,ro:()=>S,Bf:()=>A,wl:()=>M,lf:()=>y,w5:()=>T,QA:()=>B,CT:()=>L,NC:()=>b,es:()=>R,aW:()=>I});var n=i(54499);function r(t,e){const i=n.fF([],e,t);return n.bA(i,i,1/i[3]),i}function s(t,e){const i=t%e;return i<0?e+i:i}function o(t,e,i){return t<e?e:t>i?i:t}const a=Math.log2||function(t){return Math.log(t)*Math.LOG2E};var c=i(70581),l=i(43676),h=i(85158);function u(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const d=Math.PI,p=d/4,f=d/180,_=180/d,g=512,E=4003e4,m=85.051129,v=1.5;function T(t){const[e,i]=t;u(Number.isFinite(e)),u(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude");const n=i*f;return[g*(e*f+d)/(2*d),g*(d+Math.log(Math.tan(p+.5*n)))/(2*d)]}function R(t){const[e,i]=t,n=e/g*(2*d)-d,r=2*(Math.atan(Math.exp(i/g*(2*d)-d))-p);return[n*_,r*_]}function A(t){const{latitude:e}=t;u(Number.isFinite(e));const i=Math.cos(e*f);return a(E*i)-9}function b(t){const e=Math.cos(t*f);return g/E/e}function S(t){const{latitude:e,longitude:i,highPrecision:n=!1}=t;u(Number.isFinite(e)&&Number.isFinite(i));const r=g,s=Math.cos(e*f),o=r/360,a=o/s,c=r/E/s,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[o,a,c],degreesPerUnit:[1/o,1/a,1/c]};if(n){const t=f*Math.tan(e*f)/s,i=o*t/2,n=r/E*t,h=n/a*c;l.unitsPerDegree2=[0,i,n],l.unitsPerMeter2=[h,0,h]}return l}function w(t,e){const[i,n,r]=t,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=S({longitude:i,latitude:n,highPrecision:!0}),h=T(t);h[0]+=s*(c[0]+l[0]*o),h[1]+=o*(c[1]+l[1]*o);const u=R(h),d=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[u[0],u[1],d]:u}function y(t){const{height:e,pitch:i,bearing:n,altitude:r,scale:s,center:o}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];c.Iu(a,a,[0,0,-r]),c.lM(a,a,-i*f),c.jI(a,a,n*f);const h=s/e;return c.bA(a,a,[h,h,h]),o&&c.Iu(a,a,l.tk([],o)),a}function M(t){const{width:e,height:i,altitude:n,pitch:r=0,offset:s,center:a,scale:c,nearZMultiplier:l=1,farZMultiplier:h=1}=t;let{fovy:u=C(v)}=t;void 0!==n&&(u=C(n));const d=u*f,p=r*f,_=P(u);let g=_;a&&(g+=a[2]*c/Math.cos(p)/i);const E=d*(.5+(s?s[1]:0)/i),m=Math.sin(E)*g/Math.sin(o(Math.PI/2-p-E,.01,Math.PI-.01)),T=Math.sin(p)*m+g,R=10*g;return{fov:d,aspect:e/i,focalDistance:_,near:l,far:Math.min(T*h,R)}}function C(t){return 2*Math.atan(.5/t)*_}function P(t){return.5/Math.tan(.5*t*f)}function I(t,e){const[i,n,s=0]=t;return u(Number.isFinite(i)&&Number.isFinite(n)&&Number.isFinite(s)),r(e,[i,n,s,1])}function L(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[n,s,o]=t;if(u(Number.isFinite(n)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(o)){return r(e,[n,s,o,1])}const a=r(e,[n,s,0,1]),c=r(e,[n,s,1,1]),l=a[2],d=c[2],p=l===d?0:((i||0)-l)/(d-l);return h.t7([],a,c,p)}function O(t){const{width:e,height:i,bounds:n,minExtent:r=0,maxZoom:s=24,offset:c=[0,0]}=t,[[l,h],[d,p]]=n,f=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof t)return{top:t,bottom:t,left:t,right:t};return u(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),_=T([l,o(p,-m,m)]),g=T([d,o(h,-m,m)]),E=[Math.max(Math.abs(g[0]-_[0]),r),Math.max(Math.abs(g[1]-_[1]),r)],v=[e-f.left-f.right-2*Math.abs(c[0]),i-f.top-f.bottom-2*Math.abs(c[1])];u(v[0]>0&&v[1]>0);const A=v[0]/E[0],b=v[1]/E[1],S=(f.right-f.left)/2/A,w=(f.top-f.bottom)/2/b,y=R([(g[0]+_[0])/2+S,(g[1]+_[1])/2+w]),M=Math.min(s,a(Math.abs(Math.min(A,b))));return u(Number.isFinite(M)),{longitude:y[0],latitude:y[1],zoom:M}}const N=Math.PI/180;function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:i,height:n,unproject:r}=t,s={targetZ:e},o=r([0,n],s),a=r([i,n],s);let c,l;return(t.fovy?.5*t.fovy*N:Math.atan(.5/t.altitude))>(90-t.pitch)*N-.01?(c=F(t,0,e),l=F(t,i,e)):(c=r([0,0],s),l=r([i,0],s)),[o,a,l,c]}function F(t,e,i){const{pixelUnprojectionMatrix:n}=t,s=r(n,[e,0,1,1]),o=r(n,[e,t.height,1,1]),a=(i*t.distanceScales.unitsPerMeter[2]-s[2])/(o[2]-s[2]),c=R(h.t7([],s,o,a));return c.push(i),c}const x=512;function B(t){const{width:e,height:i,pitch:n=0}=t;let{longitude:r,latitude:o,zoom:c,bearing:l=0}=t;(r<-180||r>180)&&(r=s(r+180,360)-180),(l<-180||l>180)&&(l=s(l+180,360)-180);const h=a(i/x);if(c<=h)c=h,o=0;else{const t=i/2/Math.pow(2,c),e=R([0,t])[1];if(o<e)o=e;else{const e=R([0,x-t])[1];o>e&&(o=e)}}return{width:e,height:i,longitude:r,latitude:o,zoom:c,pitch:n,bearing:l}}},17473:(t,e,i)=>{"use strict";i.d(e,{N4:()=>r,ry:()=>s,u9:()=>n});globalThis;const n=globalThis,r=(globalThis.document,globalThis.process||{}),s=(globalThis.console,globalThis.navigator||{})},91233:(t,e,i)=>{"use strict";i.d(e,{j:()=>r});var n=i(10814);function r(){var t;return!("object"===typeof process&&"[object process]"===String(process)&&!(null!==(t=process)&&void 0!==t&&t.browser))||(0,n.d)()}},10814:(t,e,i)=>{"use strict";function n(t){var e,i;if("undefined"!==typeof window&&"renderer"===(null===(e=window.process)||void 0===e?void 0:e.type))return!0;if("undefined"!==typeof process&&Boolean(null===(i=process.versions)||void 0===i?void 0:i.electron))return!0;const n="undefined"!==typeof navigator&&navigator.userAgent,r=t||n;return Boolean(r&&r.indexOf("Electron")>=0)}i.d(e,{d:()=>n})},91581:(t,e,i)=>{"use strict";i.d(e,{Z:()=>E});var n=i(91233);const r="4.0.7";class s{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=function(t){try{const e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),e}catch(e){return null}}(i),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}var o;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(o||(o={}));const a=10;function c(t){return"string"!==typeof t?t:(t=t.toUpperCase(),o[t]||o.WHITE)}function l(t,e){if(!t)throw new Error(e||"Assertion failed")}var h=i(17473);function u(){let t;var e,i;if((0,n.j)()&&h.u9.performance)t=null===h.u9||void 0===h.u9||null===(e=h.u9.performance)||void 0===e||null===(i=e.now)||void 0===i?void 0:i.call(e);else if("hrtime"in h.N4){var r;const e=null===h.N4||void 0===h.N4||null===(r=h.N4.hrtime)||void 0===r?void 0:r.call(h.N4);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const d={debug:(0,n.j)()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},p={enabled:!0,level:0};function f(){}const _={},g={once:!0};class E{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.VERSION=r,this._startTs=u(),this._deltaTs=u(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new s("__probe-".concat(this.id,"__"),p),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const i=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(i),r=t;for(const s of n){const i=r[s];"function"===typeof i&&(e.find((t=>s===t))||(r[s]=i.bind(t)))}}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((u()-this._startTs).toPrecision(10))}getDelta(){return Number((u()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){if(!t)throw new Error(e||"Assertion failed")}warn(t){return this._getLogFunction(0,t,d.warn,arguments,g)}error(t){return this._getLogFunction(0,t,d.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,d.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,d.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){return this._getLogFunction(t,e,d.debug||d.info,arguments,g)}table(t,e,i){return e?this._getLogFunction(t,e,console.table||f,i&&[i],{tag:T(e)}):f}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||f)}group(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const n=v({logLevel:t,message:e,opts:i}),{collapsed:r}=i;return n.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}groupCollapsed(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},i,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||f)}withGroup(t,e,i){this.group(t,e)();try{i()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=m(t)}_getLogFunction(t,e,i,r,s){if(this._shouldLog(t)){s=v({logLevel:t,message:e,args:r,opts:s}),l(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=u();const o=s.tag||s.message;if(s.once&&o){if(_[o])return f;_[o]=u()}return e=function(t,e,i){if("string"===typeof e){const r=i.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const i=Math.max(e-t.length,0);return"".concat(" ".repeat(i)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(i.total)):"";e=function(t,e,i){if(!n.j&&"string"===typeof t){if(e){const i=c(e);t="\x1b[".concat(i,"m").concat(t,"\x1b[39m")}if(i){const e=c(i);t="\x1b[".concat(e+a,"m").concat(t,"\x1b[49m")}}return t}(e=i.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),i.color,i.background)}return e}(this.id,s.message,s),i.bind(console,e,...s.args)}return f}}function m(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return l(Number.isFinite(e)&&e>=0),e}function v(t){const{logLevel:e,message:i}=t;t.logLevel=m(e);const n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==i;);switch(typeof e){case"string":case"function":void 0!==i&&n.unshift(i),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());const r=typeof t.message;return l("string"===r||"object"===r),Object.assign(t,{args:n},t.opts)}function T(t){for(const e in t)for(const i in t[e])return i||"untitled";return"empty"}E.VERSION=r},876:(t,e,i)=>{"use strict";function n(t,e){this.v=t,this.k=e}i.d(e,{Z:()=>n})},74269:(t,e,i)=>{"use strict";function n(t){var e,i,n,s=2;for("undefined"!=typeof Symbol&&(i=Symbol.asyncIterator,n=Symbol.iterator);s--;){if(i&&null!=(e=t[i]))return e.call(t);if(n&&null!=(e=t[n]))return new r(e.call(t));i="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function r(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return r=function(t){this.s=t,this.n=t.next},r.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var i=this.s.return;return void 0===i?Promise.resolve({value:t,done:!0}):e(i.apply(this.s,arguments))},throw:function(t){var i=this.s.return;return void 0===i?Promise.reject(t):e(i.apply(this.s,arguments))}},new r(t)}i.d(e,{Z:()=>n})},60715:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(876);function r(t){return new n.Z(t,0)}},3206:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(876);function r(t){var e,i;function r(e,i){try{var o=t[e](i),a=o.value,c=a instanceof n.Z;Promise.resolve(c?a.v:a).then((function(i){if(c){var n="return"===e?"return":"next";if(!a.k||i.done)return r(n,i);i=t[n](i).value}s(o.done?"return":"normal",i)}),(function(t){r("throw",t)}))}catch(l){s("throw",l)}}function s(t,n){switch(t){case"return":e.resolve({value:n,done:!0});break;case"throw":e.reject(n);break;default:e.resolve({value:n,done:!1})}(e=e.next)?r(e.key,e.arg):i=null}this._invoke=function(t,n){return new Promise((function(s,o){var a={key:t,arg:n,resolve:s,reject:o,next:null};i?i=i.next=a:(e=i=a,r(t,n))}))},"function"!=typeof t.return&&(this.return=void 0)}function s(t){return function(){return new r(t.apply(this,arguments))}}r.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},r.prototype.next=function(t){return this._invoke("next",t)},r.prototype.throw=function(t){return this._invoke("throw",t)},r.prototype.return=function(t){return this._invoke("return",t)}}}]);
//# sourceMappingURL=62706.88d26a0a.chunk.js.map
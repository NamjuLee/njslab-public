"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[67213],{47615:(e,t,n)=>{n.d(t,{O3:()=>F,lG:()=>j,my:()=>Z,q9:()=>l});var r=n(10064),o=n(3182),i=n(80457),s=n(80031);const a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function l(e){return a[e]}function*c(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*u(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function p(e){for(const t of e)if(t.length>2)return!0;return!1}function d(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n],o=e[(n+1)%e.length];t+=r[0]*o[1]-o[0]*r[1]}return t<=0}function f(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function y(e,t,n){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,n){return h(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function(e,t,n){for(const r of t.coordinates)h(e,r,n);return e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(const r of t.coordinates){g(e,r[0],n);for(let t=1;t<r.length;t++)m(e,r[t],n)}return e}(e,t,n);case"Point":return function(e,t,n){return b(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function(e,t,n){const r=t.coordinates;g(e,r[0],n);for(let o=1;o<r.length;o++)m(e,r[o],n);return e}(e,t,n)}}function g(e,t,n){const r=f(t);!function(e){return!d(e)}(r)?h(e,r,n):w(e,r,n)}function m(e,t,n){const r=f(t);!function(e){return d(e)}(r)?h(e,r,n):w(e,r,n)}function h(e,t,n){for(const r of t)b(e,r,n);e.lengths.push(t.length)}function w(e,t,n){for(let r=t.length-1;r>=0;r--)b(e,t[r],n);e.lengths.push(t.length)}function b(e,t,n){const[r,o,i]=t;e.coords.push(r,o),n.hasZ&&e.coords.push(i||0)}function v(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function F(e){if(!e)throw new r.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new r.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,o=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!o.test(n))throw new r.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function Z(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[],o=new Set,i=new Set;let a,d=!1,f=null,y=!1,{geometryType:g=null}=n,m=!1;for(const w of c(e)){const{geometry:e,properties:t,id:n}=w;if((!e||(g||(g=l(e.type)),l(e.type)===g))&&(d||(d=p(u(e))),y||(y=null!=n,y&&(a=typeof n,f=Object.keys(t).filter((e=>t[e]===n)))),y&&null!=n&&(f.length>1?f=f.filter((e=>t[e]===n)):1===f.length&&(f=t[f[0]]===n?f:[])),!m&&t)){let e=!0;for(const n in t){if(o.has(n))continue;const a=t[n];if(null==a){e=!1,i.add(n);continue}const l=v(a);"unknown"!==l?(i.delete(n),o.add(n),r.push({name:(0,s.q6)(n),alias:n,type:l})):i.add(n)}m=e}}const h=(0,s.q6)(1===(null===(t=f)||void 0===t?void 0:t.length)&&f[0]||null);if(h)for(const l of r)if(l.name===h&&(0,s.H7)(l)){l.type="esriFieldTypeOID";break}return{fields:r,geometryType:g,hasZ:d,objectIdFieldName:h,objectIdFieldType:a,unknownFields:Array.from(i)}}function j(e,t){return Array.from(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{geometryType:n,objectIdField:r}=t;for(const a of e){var s;const{geometry:e,properties:c,id:u}=a;if(e&&l(e.type)!==n)continue;const p=c||{};let d=null!==(s=p[r])&&void 0!==s?s:null;r&&null!=u&&!p[r]&&(p[r]=d=u);const f=new o.u_(e?y(new i.Z,e,t):null,p,null,d);yield f}}()}(c(e),t))}},63543:(e,t,n)=>{n.d(t,{Dm:()=>p,Hq:()=>d,MS:()=>f,bU:()=>l});var r=n(18489),o=n(93169),i=n(84652),s=n(60480),a=n(76115);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?a.I4:"esriGeometryPolyline"===e?a.ET:a.lF}}}const c=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let u=1;function p(e,t){if((0,o.Z)("esri-csp-restrictions"))return()=>(0,r.Z)({[t]:null},e);try{let n="this.".concat(t," = null;");for(const t in e)n+="this".concat(c.test(t)?".".concat(t):'["'.concat(t,'"]')," = ").concat(JSON.stringify(e[t]),";");const r=new Function("\n      return class AttributesClass$".concat(u++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return()=>new r}catch(n){return()=>(0,r.Z)({[t]:null},e)}}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,i.d9)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:s.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},67213:(e,t,n)=>{n.d(t,{$9:()=>v,G4:()=>j,Lu:()=>b,WW:()=>P,d:()=>k,eS:()=>I,gp:()=>S,j:()=>Z,w9:()=>F,yN:()=>T});var r=n(38244),o=n(18489),i=(n(59486),n(76200)),s=n(10064),a=n(32718),l=n(92026),c=n(92975),u=n(81753),p=n(83406),d=n(6908),f=n(47615),y=n(63543),g=n(52410),m=n(85249),h=n(78952);const w=a.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),b="http://www.opengis.net/def/crs/",v="".concat(b,"OGC/1.3/CRS84");async function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const{links:a}=e,c=M(a,"items","application/geo+json")||M(a,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,l.Wi)(c))throw new s.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:u}=await(0,i.default)(c.href,{signal:n.signal,query:(0,o.Z)((0,o.Z)({limit:r},n.customParameters),{},{token:n.apiKey}),headers:{accept:"application/geo+json"}});await(0,f.O3)(u);const p=(0,f.my)(u,{geometryType:t.geometryType}),d=t.fields||p.fields||[],h=null!=t.hasZ?t.hasZ:p.hasZ,b=p.geometryType,v=t.objectIdField||p.objectIdFieldName||"OBJECTID";let F=t.timeInfo;const Z=d.find((e=>{let{name:t}=e;return t===v}));if(Z)Z.editable=!1,Z.nullable=!1;else{if(!p.objectIdFieldType)throw new s.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");d.unshift({name:v,alias:v,type:"number"===p.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(v!==p.objectIdFieldName){const e=d.find((e=>{let{name:t}=e;return t===p.objectIdFieldName}));e&&(e.type="esriFieldTypeInteger")}d===p.fields&&p.unknownFields.length>0&&w.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:p.unknownFields}});for(const o of d){if(null==o.name&&(o.name=o.alias),null==o.alias&&(o.alias=o.name),"esriFieldTypeOID"!==o.type&&"esriFieldTypeGlobalID"!==o.type&&(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable),!o.name)throw new s.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:o});if(!m.v.jsonValues.includes(o.type))throw new s.Z("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(o.name,'"'),{field:o})}if(F){const e=new g.Z(d);if(F.startTimeField){const t=e.get(F.startTimeField);t?(F.startTimeField=t.name,t.type="esriFieldTypeDate"):F.startTimeField=null}if(F.endTimeField){const t=e.get(F.endTimeField);t?(F.endTimeField=t.name,t.type="esriFieldTypeDate"):F.endTimeField=null}if(F.trackIdField){const t=e.get(F.trackIdField);t?F.trackIdField=t.name:(F.trackIdField=null,w.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:F}}))}F.startTimeField||F.endTimeField||(w.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:F}}),F=null)}return{drawingInfo:b?(0,y.bU)(b):null,extent:C(e),geometryType:b,fields:d,hasZ:!!h,objectIdField:v,timeInfo:F}}async function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{links:n}=e,r=M(n,"data","application/json")||M(n,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,l.Wi)(r))throw new s.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:a,customParameters:c,signal:u}=t,{data:p}=await(0,i.default)(r.href,{signal:u,headers:{accept:"application/json"},query:(0,o.Z)((0,o.Z)({},c),{},{token:a})});return p}async function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{links:n}=e,r=M(n,"conformance","application/json")||M(n,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,l.Wi)(r))throw new s.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:a,customParameters:c,signal:u}=t,{data:p}=await(0,i.default)(r.href,{signal:u,headers:{accept:"application/json"},query:(0,o.Z)((0,o.Z)({},c),{},{token:a})});return p}async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{apiKey:n,customParameters:r,signal:s}=t,{data:a}=await(0,i.default)(e,{signal:s,headers:{accept:"application/json"},query:(0,o.Z)((0,o.Z)({},r),{},{token:n})});return a}async function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="application/vnd.oai.openapi+json;version=3.0",r=M(e.links,"service-desc",n);if((0,l.Wi)(r))return w.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:s,customParameters:a,signal:c}=t,{data:u}=await(0,i.default)(r.href,{signal:c,headers:{accept:n},query:(0,o.Z)((0,o.Z)({},a),{},{token:s})});return u}function k(e){var t;const n=null===(t=(0,r.Z)(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e))||void 0===t?void 0:t.groups;if(!n)return null;const{authority:o,code:i}=n;switch(o.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return h.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return h.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const e=Number.parseInt(i,10);return Number.isNaN(e)?null:e}default:return null}}async function T(e,t,n){const r=await P(e,t,n);return(0,p.cn)(r)}async function P(e,t,n){const{collection:r,layerDefinition:a,maxRecordCount:y,queryParameters:{apiKey:g,customParameters:m},spatialReference:w,supportedCrs:b}=e,{links:v}=r,F=M(v,"items","application/geo+json")||M(v,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,l.Wi)(F))throw new s.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:Z,num:j,start:S,timeExtent:I,where:k}=t;if(t.objectIds)throw new s.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const T=h.Z.fromJSON(w),P=(0,l.Pt)(t.outSpatialReference,T),O=P.isWGS84?null:x(P,b),C=G(Z,b),N=function(e){if((0,l.Wi)(e))return null;const{start:t,end:n}=e;return"".concat((0,l.pC)(t)?t.toISOString():"..","/").concat((0,l.pC)(n)?n.toISOString():"..")}(I),W=(A=k,(0,l.Wi)(A)||!A||"1=1"===A?null:A),R=null!==j&&void 0!==j?j:null!=S&&void 0!==S?10:y,{data:q}=await(0,i.default)(F.href,(0,o.Z)((0,o.Z)({},n),{},{query:(0,o.Z)((0,o.Z)((0,o.Z)({},m),C),{},{crs:O,datetime:N,query:W,limit:R,startindex:S,token:g}),headers:{accept:"application/geo+json"}}));var A;let D=!1;if(q.links){D=!!q.links.find((e=>"next"===e.rel))}!D&&Number.isInteger(q.numberMatched)&&Number.isInteger(q.numberReturned)&&(D=q.numberReturned<q.numberMatched);const{fields:L,geometryType:E,hasZ:_,objectIdField:J}=a,$=(0,f.lG)(q,{geometryType:E,hasZ:_,objectIdField:J});if(!O&&P.isWebMercator)for(const o of $)if((0,l.pC)(o.geometry)){const e=(0,p.di)(o.geometry,E,_,!1);e.spatialReference=h.Z.WGS84,o.geometry=(0,p.GH)((0,u.iV)(e,P))}for(const o of $)o.objectId=o.attributes[J];const U=O||!O&&P.isWebMercator?P.toJSON():c.Zn,H=new d.Z;return H.exceededTransferLimit=D,H.features=$,H.fields=L,H.geometryType=E,H.hasZ=_,H.objectIdFieldName=J,H.spatialReference=U,H}function x(e,t){var n,r,o;const{isWebMercator:i,wkid:s}=e;if(!s)return null;const a=i?null!==(n=null!==(r=null!==(o=t[3857])&&void 0!==o?o:t[102100])&&void 0!==r?r:t[102113])&&void 0!==n?n:t[900913]:t[e.wkid];return a?"".concat(b).concat(a):null}function O(e){if((0,l.Wi)(e))return"";const{xmin:t,ymin:n,xmax:r,ymax:o}=e;return"".concat(t,",").concat(n,",").concat(r,",").concat(o)}function G(e,t){if(!function(e){return(0,l.pC)(e)&&"extent"===e.type}(e))return null;const{spatialReference:n}=e;if(!n||n.isWGS84)return{bbox:O(e)};const r=x(n,t);return(0,l.pC)(r)?{bbox:O(e),"bbox-crs":r}:n.isWebMercator?{bbox:O((0,u.iV)(e,h.Z.WGS84))}:null}function C(e){var t;const n=null===(t=e.extent)||void 0===t?void 0:t.spatial;if(!n)return null;const r=n.bbox[0],o=4===r.length,i=r[0],s=r[1],a=o?void 0:r[2];return{xmin:i,ymin:s,xmax:o?r[2]:r[3],ymax:o?r[3]:r[4],zmin:a,zmax:o?void 0:r[5],spatialReference:h.Z.WGS84.toJSON()}}function M(e,t,n){return e.find((e=>e.rel===t&&e.type===n))||e.find((e=>e.rel===t&&!e.type))}},38244:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(29675);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function i(){i=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,i){var s=new RegExp(e,r);return t.set(s,i||t.get(e)),o(s,n.prototype)}function s(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=s(n,this);var r=n.indices;r&&(r.groups=s(r,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,r.Z)(e[e.length-1])&&(e=[].slice.call(e)).push(s(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},i.apply(this,arguments)}}}]);
//# sourceMappingURL=67213.238fec39.chunk.js.map
{"version":3,"file":"static/js/72142.d01bc4c3.chunk.js","mappings":"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","sources":["njslab/Raster/image-dithering-api/index.ts"],"sourcesContent":["import { RendererCanvas, getImgFromURL, TypeDithering, dithering4_4, ditheringFloydSteinberg, getArrayBinaryImgFromCtx, DitheringFloyd } from '../../../lib';\r\n// import { } from '../../../'\r\nimport { setData } from '../../DB/FireBase';\r\n\r\nexport class Solution {\r\n    public divHost: HTMLElement;\r\n    public renderer: Renderer;\r\n    constructor(id: string) {\r\n        this.divHost = document.getElementById(id)\r\n\r\n        // Center align\r\n        this.divHost.style.display = 'flex';\r\n        this.divHost.style.alignItems = 'center';\r\n        const div = document.createElement('div');\r\n        div.style.marginLeft = 'auto';\r\n        div.style.marginRight = 'auto';\r\n        div.style.backgroundColor = '#555';\r\n        div.style.margin = '50px';\r\n        div.style.background = 'rgba(0,0,0,0)';\r\n        this.divHost.appendChild(div);\r\n\r\n        this.renderer = new Renderer(div);\r\n    }\r\n    public destroy() {\r\n        this.renderer.destroy();\r\n        while (this.divHost.lastElementChild) {\r\n            this.divHost.removeChild(this.divHost.lastElementChild);\r\n        }\r\n    }\r\n}\r\n\r\nexport class Renderer extends RendererCanvas {\r\n    img: HTMLImageElement | undefined = undefined\r\n    rotation = 0.0;\r\n    m: number[] = [0, 0];\r\n\r\n    switch = true;\r\n\r\n    typeDithering: TypeDithering = TypeDithering.FloydSteinberg;\r\n    constructor(div: any) {\r\n        super(div);\r\n\r\n        this.ctx = this.canvas.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n\r\n        this.canvas.style.position = 'relative';\r\n        this.canvas.style.width = '100%';\r\n        this.canvas.style.height = '100%';\r\n\r\n        // getImgFromURL('https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg').then( (img: HTMLImageElement) => {\r\n        getImgFromURL('https://www.glenstone.org/wp-content/uploads/2018/07/AV_Landscape-Hero-Contour-2993-1276x800.jpg').then((img: HTMLImageElement | void) => {\r\n            if (!img) return;\r\n            this.img = img;\r\n            this.img.onload = (ev) => {\r\n                this.update(img);\r\n            }\r\n        });\r\n        const divInput = document.createElement('input');\r\n        divInput.value = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg';\r\n        divInput.addEventListener('keydown', (e: KeyboardEvent) => {\r\n            if (e.code === 'Enter') {\r\n                getImgFromURL(divInput.value).then((img: HTMLImageElement | void) => {\r\n                    if (!img) return;\r\n                    this.img = img;\r\n                    this.img.onload = (ev) => {\r\n                        this.update(img);\r\n                    }\r\n                });\r\n            }\r\n\r\n        })\r\n        this.divHost.appendChild(divInput);\r\n\r\n   \r\n        const divMain_01 = document.createElement('div');\r\n        divMain_01.style.display = 'flex';\r\n        divMain_01.style.marginTop = '15px';\r\n        this.divHost.appendChild(divMain_01);\r\n\r\n\r\n        const slType = getSlider(TypeDithering.FloydSteinberg, 0, 2);\r\n        slType.slider.defaultValue = '0';\r\n        this.divHost.appendChild(slType.div);\r\n        slType.slider.oninput = () => {\r\n            const value = parseInt(slType.slider.value);\r\n\r\n            if (value === 0) {\r\n                this.typeDithering = TypeDithering.FloydSteinberg;\r\n                slType.text.textContent = TypeDithering.FloydSteinberg;\r\n            } else if (value === 1) {\r\n                this.typeDithering = TypeDithering.BayerOrderedDithering;\r\n                slType.text.textContent = TypeDithering.BayerOrderedDithering;\r\n            } else {\r\n                this.typeDithering = TypeDithering.None;\r\n                slType.text.textContent = TypeDithering.None;\r\n            }\r\n            this.render(this.ctx, this.typeDithering);\r\n        };\r\n\r\n        const divButtonImgLoad = buttonImgLoad((img: HTMLImageElement) => {\r\n            this.img = img;\r\n            this.canvas.width = this.img.width;\r\n            this.canvas.height = this.img.height;\r\n            this.render(this.ctx, this.typeDithering);\r\n        });\r\n        divMain_01.appendChild(divButtonImgLoad);\r\n\r\n        const divID = document.createElement('div');\r\n        divMain_01.appendChild(divID);\r\n        divID.style.width = '100px';\r\n        divID.style.background = '#fff';\r\n        divID.style.paddingRight = '50px';\r\n        divID.contentEditable = 'true';\r\n        divID.textContent = 'id';\r\n\r\n        const divLight = document.createElement('div');\r\n        divMain_01.appendChild(divLight);\r\n        divLight.textContent = 'Base64 to clipboard';\r\n        divLight.style.paddingRight = '50px';\r\n        divLight.onclick = () => {\r\n            const base64 = this.ctx.canvas.toDataURL();\r\n            // console.log(base64);\r\n            this.getByAPI();\r\n\r\n            copyContent(base64);\r\n\r\n            setData('image', divID.textContent, {'base64': base64})\r\n        };\r\n\r\n        const divDownload = document.createElement('div');\r\n        divMain_01.appendChild(divDownload);\r\n        divDownload.textContent = 'Download';\r\n        divDownload.style.paddingLeft = '50px';\r\n        divDownload.style.paddingRight = '50px';\r\n        divDownload.onclick = () => {\r\n            const d = getArrayBinaryImgFromCtx(this.ctx);\r\n            fileDownload(d);\r\n        };\r\n\r\n        this.start();\r\n    }\r\n    public async getByAPI () {\r\n        // // https://openweathermap.org/api\r\n        // const CityName = \"Seoul\";\r\n        // const query = `http://api.openweathermap.org/data/2.5/weather?q=${CityName}&appid=${this.API_KEY}&units=metric`;\r\n\r\n        const query = `http://127.0.0.1:5001/njs-lab/us-central1/ditheringString?url=https://img.mbn.co.kr/filewww/news/other/2015/12/16/060081001581.png`;\r\n\r\n        getJSONFromURL(query).then((d) => {\r\n            console.log('ddddd', d)\r\n            // this.data.push(d)\r\n        });\r\n    }\r\n    public update(img: HTMLImageElement) {\r\n        this.img = img;\r\n        this.canvas.width = this.img.width;\r\n        this.canvas.height = this.img.height;\r\n        this.render(this.ctx, this.typeDithering);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D, typeDitheringType?: TypeDithering): void {\r\n        if (this.img === undefined) { return; }\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n        if (this.img) {\r\n            this.ctx.drawImage(this.img, 0, 0);\r\n        }\r\n        this.ctx.restore();\r\n\r\n        switch (typeDitheringType) {\r\n            case TypeDithering.FloydSteinberg:\r\n                ditheringFloydSteinberg(ctx);\r\n                // DitheringFloyd.make(ctx);\r\n                break;\r\n            case TypeDithering.BayerOrderedDithering:\r\n                dithering4_4(ctx);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // !! can stop render after this frame.\r\n        this.isStatic = true;\r\n    }\r\n}\r\nconst getSlider = (title: string, min: number, max: number) => {\r\n    // <input type=\"range\" min=\"1\" max=\"100\" value=\"50\" class=\"slider\" id=\"myRange\">\r\n    const div = document.createElement('div');\r\n    div.style.display = 'flex';\r\n\r\n    const slider = document.createElement('input');\r\n    slider.type = 'range';\r\n    slider.min = `${min}`;\r\n    slider.max = `${max}`;\r\n\r\n    const text = document.createElement('div');\r\n    text.textContent = title;\r\n    text.style.color = '#aaa';\r\n    div.appendChild(slider);\r\n    div.appendChild(text);\r\n    return {\r\n        div, slider, text\r\n    }\r\n};\r\nconst buttonImgLoad = (callback: (img: HTMLImageElement) => void) => {\r\n    const inputFile = document.createElement('input');\r\n    inputFile.type = 'file';\r\n    inputFile.onchange = (e) => {\r\n        //@ts-ignore\r\n        if (e.target.files) {\r\n            //@ts-ignore\r\n            let imageFile = e.target.files[0]; //here we get the image file\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(imageFile);\r\n            reader.onloadend = (e) => {\r\n                const img = new Image(); // Creates image object\r\n                //@ts-ignore\r\n                img.src = e.target.result; // Assigns converted image to image object\r\n                img.onload = (ev) => {\r\n                    callback(img);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return inputFile;\r\n};\r\nconst fileDownload = (d: any, fileName: string = 'img.txt') => {\r\n    const blob = new Blob(d, { type: \"text/plain\" });\r\n    const link = document.createElement('a');\r\n    link.download = fileName;\r\n    link.href = URL.createObjectURL(blob);\r\n    link.click();\r\n    URL.revokeObjectURL(link.href);\r\n};\r\nconst copyContent = async (base64: any) => {\r\n    try {\r\n        await navigator.clipboard.writeText(base64);\r\n        console.log('Content copied to clipboard');\r\n    } catch (err) {\r\n        console.error('Failed to copy: ', err);\r\n    }\r\n};\r\n\r\nexport const getJSONFromURL = async (url: string) => {\r\n    return await (await (await fetch(url)).text);\r\n};"],"names":["Solution","constructor","id","divHost","renderer","this","document","getElementById","style","display","alignItems","div","createElement","marginLeft","marginRight","backgroundColor","margin","background","appendChild","Renderer","destroy","lastElementChild","removeChild","RendererCanvas","super","img","undefined","rotation","m","switch","typeDithering","TypeDithering","ctx","canvas","getContext","willReadFrequently","position","width","height","getImgFromURL","then","onload","ev","update","divInput","value","addEventListener","e","code","divMain_01","marginTop","slType","getSlider","slider","defaultValue","oninput","parseInt","text","textContent","render","divButtonImgLoad","buttonImgLoad","divID","paddingRight","contentEditable","divLight","onclick","base64","toDataURL","getByAPI","copyContent","setData","divDownload","paddingLeft","d","getArrayBinaryImgFromCtx","fileDownload","start","getJSONFromURL","console","log","typeDitheringType","clearRect","drawImage","restore","ditheringFloydSteinberg","dithering4_4","isStatic","title","min","max","type","color","callback","inputFile","onchange","target","files","imageFile","reader","FileReader","readAsDataURL","onloadend","Image","src","result","fileName","blob","Blob","link","download","href","URL","createObjectURL","click","revokeObjectURL","async","navigator","clipboard","writeText","err","error","fetch","url"],"sourceRoot":""}
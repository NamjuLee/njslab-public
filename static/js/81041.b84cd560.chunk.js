"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[81041,1367,3039,99690,7460,88824,33461,31617,58244,65595,96906,57078,61843,49576,35109,97423],{1367:(t,i,e)=>{e.r(i),e.d(i,{Canvas:()=>s});class s{constructor(t){this.app=void 0,this.gl=void 0,this.canvas=void 0,this.app=t,this.canvas=document.createElement("canvas"),this.app.host&&(this.app.host.appendChild(this.canvas),this.canvas.width=this.app.host.clientWidth,this.canvas.height=this.app.host.clientHeight);const i=this.canvas.getContext("webgl2");null!==i&&(this.gl=i),this.loop(this.gl)}loop(t){this.clear(t),requestAnimationFrame((()=>{this.loop(t)})),this.app.renderer.render(t)}clear(t){t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}}},3039:(t,i,e)=>{e.r(i),e.d(i,{Renderer:()=>s});class s{constructor(t){this.app=void 0,this.app=t}render(t){this.app.camera&&this.app.camera.updateViewMatrix(),this.app.scene.geometries.forEach((i=>{i.render(t)}))}}},99690:(t,i,e)=>{e.r(i),e.d(i,{Scene:()=>s});class s{constructor(t){this.NGL3dApp=void 0,this.geometries=[],this.NGL3dApp=t}add(t){this.geometries.push(t)}}},7460:(t,i,e)=>{e.r(i),e.d(i,{GeometryBase:()=>s});class s{constructor(t){this.scene=void 0,this.scene=t,this.scene.add(this)}render(t){}}},88824:(t,i,e)=>{e.r(i),e.d(i,{GridAxis:()=>h});var s=e(97423),r=e(61843),o=e(49576),a=e(7460);class n extends o.Shader{constructor(t,i,e,s,r){if(super(t,i,e),this.uPointSize=void 0,this.uAngle=void 0,this.program){this.setPerspective(r),t.useProgram(this.program);let i=t.getUniformLocation(this.program,"uColor");t.uniform3fv(i,s)}}renderModel(t){return this.setModelMatrix(t.transform.getViewMatrix()),this.gl.bindVertexArray(t.vao.vao),t.vao.indexCount?this.gl.drawElements(t.vao.drawMode,t.vao.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(t.vao.drawMode,0,t.vao.vertexCount),this.gl.bindVertexArray(null),this}}class h extends a.GeometryBase{constructor(t){super(t.scene),this.v="#version 300 es\n    in vec3 a_position;\t//Standard position data.\n    layout(location=4) in float a_color;\t//Will hold the 4th custom position of the custom position buffer.\n\n    uniform mat4 uPMatrix;\n    uniform mat4 uMVMatrix;\n    uniform mat4 uCameraMatrix;\n\n    uniform vec3 uColor[4];\t//Color Array\n\n    out lowp vec4 color;\t//Color to send to fragment shader.\n\n    void main(void) {\n        color = vec4(uColor[ int(a_color) ],1.0); //Using the 4th float as a color index.\n        gl_Position = uPMatrix * uCameraMatrix * uMVMatrix * vec4(a_position, 1.0);\n    }\n    ",this.f="#version 300 es\n    precision mediump float;\n\n    in vec4 color;\n    out vec4 finalColor;\n\n    void main(void) { finalColor = color; }\n    ",this.app=void 0,this.gl=void 0,this.vao=void 0,this.model=void 0,this.shader=void 0,this.ro=0,this.t=0,this.app=t,this.gl=t.canvas.gl,this.initShader(this.gl)}GetVAO(){let t,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=[],r=.9;for(let s=0;s<=10;s++)t=.18*s-.9,e.push(t),e.push(0),e.push(r),e.push(0),e.push(t),e.push(0),e.push(-.9),e.push(0),t=r-.18*s,e.push(-.9),e.push(0),e.push(t),e.push(0),e.push(r),e.push(0),e.push(t),e.push(0);i&&(e.push(-1.1),e.push(0),e.push(0),e.push(1),e.push(1.1),e.push(0),e.push(0),e.push(1),e.push(0),e.push(-1.1),e.push(0),e.push(2),e.push(0),e.push(1.1),e.push(0),e.push(2),e.push(0),e.push(0),e.push(-1.1),e.push(3),e.push(0),e.push(0),e.push(1.1),e.push(3)),this.vao=new s.VAO(this.gl,"grid",e),this.vao.drawMode=this.gl.LINES,this.vao.vao=this.gl.createVertexArray(),this.vao.vertexComponentLen=4,this.vao.vertexCount=e.length/this.vao.vertexComponentLen;let a=Float32Array.BYTES_PER_ELEMENT*this.vao.vertexComponentLen;return this.vao.bufVertices=this.gl.createBuffer(),this.gl.bindVertexArray(this.vao.vao),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vao.bufVertices),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(o.ATTR.ATTR_POSITION_LOC),this.gl.enableVertexAttribArray(o.ATTR.ATTR_COLOR_LOC),this.gl.vertexAttribPointer(o.ATTR.ATTR_POSITION_LOC,3,this.gl.FLOAT,!1,a,0),this.gl.vertexAttribPointer(o.ATTR.ATTR_COLOR_LOC,1,this.gl.FLOAT,!1,a,3*Float32Array.BYTES_PER_ELEMENT),this.gl.bindVertexArray(null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.vao}initShader(t){this.shader=new n(t,this.v,this.f,[.8,.8,.8,1,0,0,0,1,0,0,0,1],this.app.camera.projectionMatrix),this.vao=this.GetVAO(),this.model=new r.Model(this.vao)}render(){this.shader.activate().setCameraMatrix(this.app.camera.viewMatrix).renderModel(this.model.preRender()),this.t=.01}}},33461:(t,i,e)=>{e.r(i),e.d(i,{PointScreen:()=>h});var s=e(97423),r=e(61843),o=e(7460),a=e(49576);class n extends a.Shader{constructor(t,i,e){super(t,i,e),this.uPointSize=void 0,this.uAngle=void 0,this.program&&(this.uPointSize=t.getUniformLocation(this.program,"uPointSize"),this.uAngle=t.getUniformLocation(this.program,"uAngle")),t.useProgram(null)}set(t,i){return this.gl.uniform1f(this.uPointSize,t),this.gl.uniform1f(this.uAngle,i),this}}class h extends o.GeometryBase{constructor(t){super(t.scene),this.vOld="#version 300 es\n        in vec3 a_position;\n\n        uniform float uPointSize;\n\n        void main(void) {\n            gl_PointSize = uPointSize;\n            gl_Position = vec4(a_position, 1.0);\n        }\n    ",this.fOld="#version 300 es\n        precision mediump float;\n\n        out vec4 finalColor;\n\n        void main(void) {\n            finalColor = vec4(1.0, 0.0, 0.0, 1.0);\n        }\n    ",this.v="#version 300 es\n\n        in vec3 a_position;\n\n        uniform mediump float uPointSize;\n        uniform float uAngle;\n\n        void main(void) {\n            gl_PointSize = uPointSize;\n            gl_Position = vec4(cos(uAngle) * 0.8 + a_position.x, sin(uAngle) * 0.8 + a_position.y, a_position.z, 1.0);\n        }\n    ",this.f="#version 300 es\n        precision mediump float;\n\n        uniform float uPointSize;\n\n        out vec4 finalColor;\n\n        void main(void) {\n            float c = (40. - uPointSize ) / 20.;\n            finalColor = vec4(c, c, c, 1.0);\n        }\n    ",this.app=void 0,this.gl=void 0,this.vao=void 0,this.model=void 0,this.shader=void 0,this.size=2.5,this.rotation=0,this.app=t,this.gl=t.canvas.gl,this.initShader(this.gl)}initShader(t){this.shader=new n(t,this.v,this.f),this.vao=new s.VAO(t,"dots",[0,0,0,.1,.1,0,.1,-.1,0,-.1,-.1,0,-.1,.1,0]),this.vao.drawMode=t.POINTS,this.model=new r.Model(this.vao)}render(){this.size+=.01;let t=10*Math.sin(this.size)+30;this.rotation+=.02,this.shader.activate(),this.shader.set(t,this.rotation),this.shader.renderModel(this.model)}}},31617:(t,i,e)=>{e.r(i),e.d(i,{PointWorld:()=>h});var s=e(97423),r=e(61843),o=e(7460),a=e(49576);class n extends a.Shader{constructor(t,i,e,s){super(t,i,e),this.uPointSize=void 0,this.uAngle=void 0,this.pMatrix=void 0,this.pMatrix=s,this.program&&(this.setPerspective(s),this.uPointSize=t.getUniformLocation(this.program,"uPointSize"),this.uAngle=t.getUniformLocation(this.program,"uAngle"),t.useProgram(null))}set(t,i){return this.gl.uniform1f(this.uAngle,i),this.gl.uniform1f(this.uPointSize,t),this}}class h extends o.GeometryBase{constructor(t){super(t.scene),this.v="#version 300 es\n\n        in vec3 a_position;\n\n        uniform mat4 uPMatrix;\n        uniform mat4 uMVMatrix;\n        uniform mat4 uCameraMatrix;\n\n        uniform mediump float uPointSize;\n        uniform float uAngle;\n\n        void main(void) {\n            gl_PointSize = uPointSize;\n            gl_Position = uPMatrix * uCameraMatrix * uMVMatrix * vec4(cos(uAngle) * 0.8 + a_position.x, sin(uAngle) * 0.8 + a_position.y, a_position.z, 1.0);\n        }\n    ",this.f="#version 300 es\n        precision mediump float;\n\n        uniform float uPointSize;\n\n        out vec4 finalColor;\n\n        void main(void) {\n            float c =  uPointSize / 20.;\n            finalColor = vec4(0, 50, c, 1.0);\n        }\n    ",this.app=void 0,this.gl=void 0,this.vao=void 0,this.model=void 0,this.shader=void 0,this.size=20.5,this.rotation=0,this.app=t,this.gl=t.canvas.gl,this.initShader(this.gl)}initShader(t){this.shader=new n(t,this.v,this.f,this.app.camera.projectionMatrix),this.vao=new s.VAO(t,"dots",[0,0,0,.1,.1,0,.1,-.1,0,-.1,-.1,0,-.1,.1,0]),this.vao.drawMode=t.POINTS,this.model=new r.Model(this.vao)}render(){this.size+=.01;let t=10*Math.sin(this.size)+20;this.rotation+=.03,this.shader.activate(),this.shader.setPerspective(this.shader.pMatrix),this.shader.set(t,this.rotation),this.shader.setCameraMatrix(this.app.camera.viewMatrix),this.shader.renderModel(this.model.preRender())}}},58244:(t,i,e)=>{e.r(i),e.d(i,{Matrix4:()=>s});class s{static identity(){let t=new Float32Array(16);return t[0]=t[5]=t[10]=t[15]=1,t}static perspective(t,i,e,s,r){let o=1/Math.tan(i/2),a=1/(s-r);t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+s)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*s*a,t[15]=0}static ortho(t,i,e,s,r,o,a){let n=1/(i-e),h=1/(s-r),d=1/(o-a);t[0]=-2*n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(i+e)*n,t[13]=(r+s)*h,t[14]=(a+o)*d,t[15]=1}static transpose(t,i){if(t===i){let e=i[1],s=i[2],r=i[3],o=i[6],a=i[7],n=i[11];t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=e,t[6]=i[9],t[7]=i[13],t[8]=s,t[9]=o,t[11]=i[14],t[12]=r,t[13]=a,t[14]=n}else t[0]=i[0],t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=i[1],t[5]=i[5],t[6]=i[9],t[7]=i[13],t[8]=i[2],t[9]=i[6],t[10]=i[10],t[11]=i[14],t[12]=i[3],t[13]=i[7],t[14]=i[11],t[15]=i[15];return t}static normalMat3(t,i){let e=i[0],s=i[1],r=i[2],o=i[3],a=i[4],n=i[5],h=i[6],d=i[7],l=i[8],u=i[9],v=i[10],c=i[11],m=i[12],p=i[13],f=i[14],g=i[15],A=e*n-s*a,T=e*h-r*a,M=e*d-o*a,R=s*h-r*n,_=s*d-o*n,x=r*d-o*h,w=l*p-u*m,L=l*f-v*m,C=l*g-c*m,O=u*f-v*p,S=u*g-c*p,P=v*g-c*f,V=A*P-T*S+M*O+R*C-_*L+x*w;return V?(V=1/V,t[0]=(n*P-h*S+d*O)*V,t[1]=(h*C-a*P-d*L)*V,t[2]=(a*S-n*C+d*w)*V,t[3]=(r*S-s*P-o*O)*V,t[4]=(e*P-r*C+o*L)*V,t[5]=(s*C-e*S-o*w)*V,t[6]=(p*x-f*_+g*R)*V,t[7]=(f*M-m*x-g*T)*V,t[8]=(m*_-p*M+g*A)*V,t):null}static multiplyVector(t,i){let e=i[0],s=i[1],r=i[2],o=i[3],a=t[0],n=t[1],h=t[2],d=t[3],l=t[4],u=t[5],v=t[6],c=t[7],m=t[8],p=t[9],f=t[10],g=t[11];return[e*a+s*l+r*m+o*t[12],e*n+s*u+r*p+o*t[13],e*h+s*v+r*f+o*t[14],e*d+s*c+r*g+o*t[15]]}static transformVec4(t,i,e){return t[0]=e[0]*i[0]+e[4]*i[1]+e[8]*i[2]+e[12]*i[3],t[1]=e[1]*i[0]+e[5]*i[1]+e[9]*i[2]+e[13]*i[3],t[2]=e[2]*i[0]+e[6]*i[1]+e[10]*i[2]+e[14]*i[3],t[3]=e[3]*i[0]+e[7]*i[1]+e[11]*i[2]+e[15]*i[3],t}static mult(t,i,e){let s=i[0],r=i[1],o=i[2],a=i[3],n=i[4],h=i[5],d=i[6],l=i[7],u=i[8],v=i[9],c=i[10],m=i[11],p=i[12],f=i[13],g=i[14],A=i[15],T=e[0],M=e[1],R=e[2],_=e[3];return t[0]=T*s+M*n+R*u+_*p,t[1]=T*r+M*h+R*v+_*f,t[2]=T*o+M*d+R*c+_*g,t[3]=T*a+M*l+R*m+_*A,T=e[4],M=e[5],R=e[6],_=e[7],t[4]=T*s+M*n+R*u+_*p,t[5]=T*r+M*h+R*v+_*f,t[6]=T*o+M*d+R*c+_*g,t[7]=T*a+M*l+R*m+_*A,T=e[8],M=e[9],R=e[10],_=e[11],t[8]=T*s+M*n+R*u+_*p,t[9]=T*r+M*h+R*v+_*f,t[10]=T*o+M*d+R*c+_*g,t[11]=T*a+M*l+R*m+_*A,T=e[12],M=e[13],R=e[14],_=e[15],t[12]=T*s+M*n+R*u+_*p,t[13]=T*r+M*h+R*v+_*f,t[14]=T*o+M*d+R*c+_*g,t[15]=T*a+M*l+R*m+_*A,t}static scale(t,i,e,s){return t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=s,t[9]*=s,t[10]*=s,t[11]*=s,t}static rotateY(t,i){let e=Math.sin(i),s=Math.cos(i),r=t[0],o=t[1],a=t[2],n=t[3],h=t[8],d=t[9],l=t[10],u=t[11];return t[0]=r*s-h*e,t[1]=o*s-d*e,t[2]=a*s-l*e,t[3]=n*s-u*e,t[8]=r*e+h*s,t[9]=o*e+d*s,t[10]=a*e+l*s,t[11]=n*e+u*s,t}static rotateX(t,i){let e=Math.sin(i),s=Math.cos(i),r=t[4],o=t[5],a=t[6],n=t[7],h=t[8],d=t[9],l=t[10],u=t[11];return t[4]=r*s+h*e,t[5]=o*s+d*e,t[6]=a*s+l*e,t[7]=n*s+u*e,t[8]=h*s-r*e,t[9]=d*s-o*e,t[10]=l*s-a*e,t[11]=u*s-n*e,t}static rotateZ(t,i){let e=Math.sin(i),s=Math.cos(i),r=t[0],o=t[1],a=t[2],n=t[3],h=t[4],d=t[5],l=t[6],u=t[7];return t[0]=r*s+h*e,t[1]=o*s+d*e,t[2]=a*s+l*e,t[3]=n*s+u*e,t[4]=h*s-r*e,t[5]=d*s-o*e,t[6]=l*s-a*e,t[7]=u*s-n*e,t}static rotate(t,i,e){let s,r,o,a,n,h,d,l,u,v,c,m,p,f,g,A,T,M,R,_,x,w,L,C,O=e[0],S=e[1],P=e[2],V=Math.sqrt(O*O+S*S+P*P);return Math.abs(V)<1e-6?null:(V=1/V,O*=V,S*=V,P*=V,s=Math.sin(i),r=Math.cos(i),o=1-r,a=t[0],n=t[1],h=t[2],d=t[3],l=t[4],u=t[5],v=t[6],c=t[7],m=t[8],p=t[9],f=t[10],g=t[11],A=O*O*o+r,T=S*O*o+P*s,M=P*O*o-S*s,R=O*S*o-P*s,_=S*S*o+r,x=P*S*o+O*s,w=O*P*o+S*s,L=S*P*o-O*s,C=P*P*o+r,t[0]=a*A+l*T+m*M,t[1]=n*A+u*T+p*M,t[2]=h*A+v*T+f*M,t[3]=d*A+c*T+g*M,t[4]=a*R+l*_+m*x,t[5]=n*R+u*_+p*x,t[6]=h*R+v*_+f*x,t[7]=d*R+c*_+g*x,t[8]=a*w+l*L+m*C,t[9]=n*w+u*L+p*C,t[10]=h*w+v*L+f*C,t[11]=d*w+c*L+g*C,t)}static invert(t,i){void 0===i&&(i=t);let e=i[0],s=i[1],r=i[2],o=i[3],a=i[4],n=i[5],h=i[6],d=i[7],l=i[8],u=i[9],v=i[10],c=i[11],m=i[12],p=i[13],f=i[14],g=i[15],A=e*n-s*a,T=e*h-r*a,M=e*d-o*a,R=s*h-r*n,_=s*d-o*n,x=r*d-o*h,w=l*p-u*m,L=l*f-v*m,C=l*g-c*m,O=u*f-v*p,S=u*g-c*p,P=v*g-c*f,V=A*P-T*S+M*O+R*C-_*L+x*w;return!!V&&(V=1/V,t[0]=(n*P-h*S+d*O)*V,t[1]=(r*S-s*P-o*O)*V,t[2]=(p*x-f*_+g*R)*V,t[3]=(v*_-u*x-c*R)*V,t[4]=(h*C-a*P-d*L)*V,t[5]=(e*P-r*C+o*L)*V,t[6]=(f*M-m*x-g*T)*V,t[7]=(l*x-v*M+c*T)*V,t[8]=(a*S-n*C+d*w)*V,t[9]=(s*C-e*S-o*w)*V,t[10]=(m*_-p*M+g*A)*V,t[11]=(u*M-l*_-c*A)*V,t[12]=(n*L-a*O-h*w)*V,t[13]=(e*O-s*L+r*w)*V,t[14]=(p*T-m*R-f*A)*V,t[15]=(l*R-u*T+v*A)*V,!0)}static translate(t,i,e,s){t[12]=t[0]*i+t[4]*e+t[8]*s+t[12],t[13]=t[1]*i+t[5]*e+t[9]*s+t[13],t[14]=t[2]*i+t[6]*e+t[10]*s+t[14],t[15]=t[3]*i+t[7]*e+t[11]*s+t[15]}constructor(){this.raw=void 0,this.raw=s.identity()}vtranslate(t){return s.translate(this.raw,t.x,t.y,t.z),this}translate(t,i,e){return s.translate(this.raw,t,i,e),this}rotateY(t){return s.rotateY(this.raw,t),this}rotateX(t){return s.rotateX(this.raw,t),this}rotateZ(t){return s.rotateZ(this.raw,t),this}vscale(t){return s.scale(this.raw,t.x,t.y,t.z),this}scale(t,i,e){return s.scale(this.raw,t,i,e),this}invert(){return s.invert(this.raw),this}resetRotation(){for(let t=0;t<this.raw.length;t++)t>=12&&t<=14||(this.raw[t]=t%5===0?1:0);return this}reset(){for(let t=0;t<this.raw.length;t++)this.raw[t]=t%5===0?1:0;return this}}},65595:(t,i,e)=>{e.r(i),e.d(i,{Vector3:()=>s});class s{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=i,this.z=e}magnitude(t){if(void 0===t)return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);let i=t.x-this.x,e=t.y-this.y,s=t.y-this.z;return Math.sqrt(i*i+e*e+s*s)}normalize(){let t=this.magnitude();return this.x/=t,this.y/=t,this.z/=t,this}set(t,i,e){return this.x=t,this.y=i,this.z=e,this}multiScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}getArray(){return[this.x,this.y,this.z]}getFloatArray(){return new Float32Array([this.x,this.y,this.z])}clone(){return new s(this.x,this.y,this.z)}}},96906:(t,i,e)=>{let s;e.r(i),e.d(i,{ATTR:()=>s,AttribLocations:()=>r,UniformLocations:()=>o}),function(t){t.ATTR_POSITION_NAME="a_position",t[t.ATTR_POSITION_LOC=0]="ATTR_POSITION_LOC",t.ATTR_NORMAL_NAME="a_norm",t[t.ATTR_NORMAL_LOC=1]="ATTR_NORMAL_LOC",t.ATTR_UV_NAME="a_uv",t[t.ATTR_UV_LOC=2]="ATTR_UV_LOC",t[t.ATTR_COLOR_LOC=4]="ATTR_COLOR_LOC",t.ATTR_COLOR_NAME="a_color"}(s||(s={}));class r{constructor(t,i){this.position=void 0,this.normal=void 0,this.uv=void 0,this.position=t.getAttribLocation(i,s.ATTR_NORMAL_NAME),this.normal=t.getAttribLocation(i,s.ATTR_NORMAL_NAME),this.uv=t.getAttribLocation(i,s.ATTR_UV_NAME)}}class o{constructor(t,i){this.uPointSize=void 0,this.uAngle=void 0,this.perspective=void 0,this.modelMatrix=void 0,this.cameraMatrix=void 0,this.mainTexture=void 0,this.perspective=t.getUniformLocation(i,"uPMatrix"),this.modelMatrix=t.getUniformLocation(i,"uMVMatrix"),this.cameraMatrix=t.getUniformLocation(i,"uCameraMatrix"),this.mainTexture=t.getUniformLocation(i,"uMainTex")}}},57078:(t,i,e)=>{e.r(i),e.d(i,{CAMERA_MODE:()=>o,Camera:()=>a,CameraController:()=>n});var s=e(58244),r=e(35109);let o;!function(t){t[t.FREE=0]="FREE",t[t.ORBIT=1]="ORBIT"}(o||(o={}));class a{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:45,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.projectionMatrix=void 0,this.viewMatrix=void 0,this.transform=void 0,this.mode=void 0,this.projectionMatrix=new Float32Array(16);var n=t.canvas.width/t.canvas.height;s.Matrix4.perspective(this.projectionMatrix,i||45,n,e||.1,a||100),this.transform=new r.Transform,this.viewMatrix=new Float32Array(16),this.mode=o.ORBIT}panX(t){this.mode!==o.ORBIT&&(this.updateViewMatrix(),this.transform.position.x+=this.transform.right[0]*t,this.transform.position.y+=this.transform.right[1]*t,this.transform.position.z+=this.transform.right[2]*t)}panY(t){this.updateViewMatrix(),this.transform.position.y+=this.transform.up[1]*t,this.mode!==o.ORBIT&&(this.transform.position.x+=this.transform.up[0]*t,this.transform.position.z+=this.transform.up[2]*t)}panZ(t){this.updateViewMatrix(),this.mode===o.ORBIT?this.transform.position.z+=t:(this.transform.position.x+=this.transform.forward[0]*t,this.transform.position.y+=this.transform.forward[1]*t,this.transform.position.z+=this.transform.forward[2]*t)}updateViewMatrix(){return this.mode===o.FREE?this.transform.matView.reset().vtranslate(this.transform.position).rotateX(this.transform.rotation.x*r.Transform.deg2Rad).rotateY(this.transform.rotation.y*r.Transform.deg2Rad):this.transform.matView.reset().rotateX(this.transform.rotation.x*r.Transform.deg2Rad).rotateY(this.transform.rotation.y*r.Transform.deg2Rad).vtranslate(this.transform.position),this.transform.updateDirection(),s.Matrix4.invert(this.viewMatrix,this.transform.matView.raw),this.viewMatrix}}class n{constructor(t,i){this.canvas=void 0,this.camera=void 0,this.rotateRate=void 0,this.panRate=void 0,this.zoomRate=void 0,this.offsetX=void 0,this.offsetY=void 0,this.initX=void 0,this.initY=void 0,this.prevX=void 0,this.prevY=void 0,this.onUpHandler=void 0,this.onMoveHandler=void 0,this.canvas=t.canvas,this.camera=i,this.rotateRate=-300,this.panRate=5,this.zoomRate=200,this.offsetX=10,this.offsetY=10,this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.onUpHandler=t=>this.onMouseUp(t),this.onMoveHandler=t=>{this.onMouseMove(t)},this.canvas.addEventListener("mousedown",(t=>{this.onMouseDown(t)})),this.canvas.addEventListener("mousewheel",(t=>{this.onMouseWheel(t)}))}getMouseVec2(t){return{x:t.pageX-this.offsetX,y:t.pageY-this.offsetY}}onMouseDown(t){this.initX=this.prevX=t.pageX-this.offsetX,this.initY=this.prevY=t.pageY-this.offsetY,this.canvas.addEventListener("mouseup",this.onUpHandler),this.canvas.addEventListener("mousemove",this.onMoveHandler)}onMouseUp(t){this.canvas.removeEventListener("mouseup",this.onUpHandler),this.canvas.removeEventListener("mousemove",this.onMoveHandler)}onMouseWheel(t){var i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));this.camera.panZ(i*(this.zoomRate/this.canvas.height))}onMouseMove(t){var i=t.pageX-this.offsetX,e=t.pageY-this.offsetY,s=i-this.prevX,r=e-this.prevY;t.shiftKey?(this.camera.panX(-s*(this.panRate/this.canvas.width)),this.camera.panY(r*(this.panRate/this.canvas.height))):(this.camera.transform.rotation.y+=s*(this.rotateRate/this.canvas.width),this.camera.transform.rotation.x+=r*(this.rotateRate/this.canvas.height)),this.prevX=i,this.prevY=e}}},61843:(t,i,e)=>{e.r(i),e.d(i,{Model:()=>r});var s=e(35109);class r{constructor(t){this.vao=void 0,this.transform=void 0,this.transform=new s.Transform,this.vao=t}setScale(t,i,e){return this.transform.scale.set(t,i,e),this}setPosition(t,i,e){return this.transform.position.set(t,i,e),this}setRotation(t,i,e){return this.transform.rotation.set(t,i,e),this}addScale(t,i,e){return this.transform.scale.x+=t,this.transform.scale.y+=i,this.transform.scale.y+=i,this}addPosition(t,i,e){return this.transform.position.x+=t,this.transform.position.y+=i,this.transform.position.z+=e,this}addRotation(t,i,e){return this.transform.rotation.x+=t,this.transform.rotation.y+=i,this.transform.rotation.z+=e,this}preRender(){return this.transform.updateMatrix(),this}}},49576:(t,i,e)=>{let s;e.r(i),e.d(i,{ATTR:()=>s,AttribLocations:()=>r,Shader:()=>a,UniformLocations:()=>o}),function(t){t.ATTR_POSITION_NAME="a_position",t[t.ATTR_POSITION_LOC=0]="ATTR_POSITION_LOC",t.ATTR_NORMAL_NAME="a_norm",t[t.ATTR_NORMAL_LOC=1]="ATTR_NORMAL_LOC",t.ATTR_UV_NAME="a_uv",t[t.ATTR_UV_LOC=2]="ATTR_UV_LOC",t.ATTR_COLOR_NAME="a_color",t[t.ATTR_COLOR_LOC=4]="ATTR_COLOR_LOC"}(s||(s={}));class r{constructor(t,i){this.position=void 0,this.norm=void 0,this.uv=void 0,this.position=t.getAttribLocation(i,s.ATTR_POSITION_NAME),this.norm=t.getAttribLocation(i,s.ATTR_NORMAL_NAME),this.uv=t.getAttribLocation(i,s.ATTR_UV_NAME)}}class o{constructor(t,i){this.perspective=void 0,this.modelMatrix=void 0,this.cameraMatrix=void 0,this.mainTexture=void 0,this.perspective=t.getUniformLocation(i,"uPMatrix"),this.modelMatrix=t.getUniformLocation(i,"uMVMatrix"),this.cameraMatrix=t.getUniformLocation(i,"uCameraMatrix"),this.mainTexture=t.getUniformLocation(i,"uMainTex")}}class a{constructor(t,i,e){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.gl=void 0,this.program=void 0,this.attribLoc=void 0,this.uniformLoc=void 0,this.vShader=void 0,this.fShader=void 0,this.gl=t,this.vShader=n.CreateShader(t,t.VERTEX_SHADER,i),this.fShader=n.CreateShader(t,t.FRAGMENT_SHADER,e),this.vShader&&this.fShader){let i=n.CreateProgram(t,this.vShader,this.fShader,s);if(i)return this.program=i,t.useProgram(this.program),this.attribLoc=new r(t,this.program),void(this.uniformLoc=new o(t,this.program))}}activate(){return this.gl.useProgram(this.program),this}deactivate(){return this.gl.useProgram(null),this}dispose(){this.gl.getParameter(this.gl.CURRENT_PROGRAM)===this.program&&this.gl.useProgram(null),this.gl.deleteProgram(this.program)}setPerspective(t){return this.gl.uniformMatrix4fv(this.uniformLoc.perspective,!1,t),this}setModelMatrix(t){return this.gl.uniformMatrix4fv(this.uniformLoc.modelMatrix,!1,t),this}setCameraMatrix(t){return this.gl.uniformMatrix4fv(this.uniformLoc.cameraMatrix,!1,t),this}preRender(){}renderModel(t){return this.setModelMatrix(t.transform.getViewMatrix()),this.gl.bindVertexArray(t.vao.vao),t.vao.noCulling&&this.gl.disable(this.gl.CULL_FACE),t.vao.doBlending&&this.gl.enable(this.gl.BLEND),t.vao.indexCount?this.gl.drawElements(t.vao.drawMode,t.vao.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(t.vao.drawMode,0,t.vao.vertexCount),this.gl.bindVertexArray(null),t.vao.noCulling&&this.gl.enable(this.gl.CULL_FACE),t.vao.doBlending&&this.gl.disable(this.gl.BLEND),this}}class n{static CreateProgram(t,i,e){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=t.createProgram();if(null===o)return null;if(t.attachShader(o,i),t.attachShader(o,e),t.bindAttribLocation(o,s.ATTR_POSITION_LOC,s.ATTR_POSITION_NAME),t.bindAttribLocation(o,s.ATTR_NORMAL_LOC,s.ATTR_NORMAL_NAME),t.bindAttribLocation(o,s.ATTR_UV_LOC,s.ATTR_UV_NAME),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS)){const s=t.getProgramInfoLog(o);return console.log("Failed to link program: "+s),t.deleteProgram(o),t.deleteShader(e),t.deleteShader(i),null}return r&&(t.validateProgram(o),!t.getProgramParameter(o,t.VALIDATE_STATUS))?(console.error("Failed to validate program",t.getProgramInfoLog(o)),t.deleteProgram(o),t.deleteShader(e),t.deleteShader(i),null):(t.deleteShader(e),t.deleteShader(i),o)}static CreateShader(t,i,e){const s=t.createShader(i);if(null===s)return null;t.shaderSource(s,e),t.compileShader(s);return t.getShaderParameter(s,t.COMPILE_STATUS)?s:(console.log(t.getShaderInfoLog(s)),t.deleteShader(s),null)}}},35109:(t,i,e)=>{e.r(i),e.d(i,{Transform:()=>o});var s=e(65595),r=e(58244);class o{constructor(){this.position=void 0,this.scale=void 0,this.rotation=void 0,this.matView=void 0,this.matNormal=void 0,this.forward=void 0,this.up=void 0,this.right=void 0,this.position=new s.Vector3(0,0,0),this.scale=new s.Vector3(1,1,1),this.rotation=new s.Vector3(0,0,0),this.matView=new r.Matrix4,this.matNormal=new Float32Array(9),this.forward=new Float32Array(4),this.up=new Float32Array(4),this.right=new Float32Array(4)}updateMatrix(){return this.matView.reset().vtranslate(this.position).rotateX(this.rotation.x*o.deg2Rad).rotateZ(this.rotation.z*o.deg2Rad).rotateY(this.rotation.y*o.deg2Rad).vscale(this.scale),r.Matrix4.normalMat3(this.matNormal,this.matView.raw),r.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),r.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),r.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this.matView.raw}updateDirection(){return r.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),r.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),r.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this}getViewMatrix(){return this.matView.raw}getNormalMatrix(){return this.matNormal}reset(){this.position.set(0,0,0),this.scale.set(1,1,1),this.rotation.set(0,0,0)}}o.deg2Rad=Math.PI/180},97423:(t,i,e)=>{e.r(i),e.d(i,{DRAW_MODE:()=>r,RTN:()=>o,VAO:()=>a});var s=e(96906);let r;r||(r={});class o{constructor(){this.name=void 0,this.vao=void 0,this.bufVertices=void 0,this.bufNormals=void 0,this.bufUV=void 0,this.bufIndex=void 0,this.vertexComponentLen=void 0,this.vertexCount=void 0,this.indexCount=void 0,this.drawMode=void 0}}class a{constructor(t,i,e,r,o,a){this.name=void 0,this.noCulling=!0,this.doBlending=!0,this.vao=void 0,this.bufVertices=void 0,this.bufNormals=void 0,this.bufUV=void 0,this.bufIndex=void 0,this.vertexComponentLen=void 0,this.vertexCount=void 0,this.indexCount=void 0,this.drawMode=void 0,this.name=i,this.drawMode=t.TRIANGLES,this.vao=t.createVertexArray(),t.bindVertexArray(this.vao),void 0!==e&&null!=e&&(this.bufVertices=t.createBuffer(),this.vertexComponentLen=3,this.vertexCount=e.length/this.vertexComponentLen,t.bindBuffer(t.ARRAY_BUFFER,this.bufVertices),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(s.ATTR.ATTR_POSITION_LOC),t.vertexAttribPointer(s.ATTR.ATTR_POSITION_LOC,3,t.FLOAT,!1,0,0)),void 0!==o&&null!=o&&(this.bufNormals=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bufNormals),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),t.enableVertexAttribArray(s.ATTR.ATTR_NORMAL_LOC),t.vertexAttribPointer(s.ATTR.ATTR_NORMAL_LOC,3,t.FLOAT,!1,0,0)),void 0!==a&&null!=a&&(this.bufUV=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bufUV),t.bufferData(t.ARRAY_BUFFER,new Float32Array(a),t.STATIC_DRAW),t.enableVertexAttribArray(s.ATTR.ATTR_UV_LOC),t.vertexAttribPointer(s.ATTR.ATTR_UV_LOC,2,t.FLOAT,!1,0,0)),void 0!==r&&null!=r&&(this.bufIndex=t.createBuffer(),this.indexCount=r.length,console.log(this),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bufIndex),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),t.STATIC_DRAW)),t.bindVertexArray(null),t.bindBuffer(t.ARRAY_BUFFER,null)}}},81041:(t,i,e)=>{e.r(i),e.d(i,{NGL3dApp:()=>l});var s=e(1367),r=e(3039),o=e(99690),a=e(57078),n=e(88824),h=e(33461),d=e(31617);class l{constructor(t){this.host=void 0,this.canvas=void 0,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.cameraCtrl=void 0;const i=document.getElementById(t);i&&(this.host=i),this.scene=new o.Scene(this),this.renderer=new r.Renderer(this),this.canvas=new s.Canvas(this),this.camera=new a.Camera(this.canvas.gl),this.camera.transform.position.set(0,1,3),this.cameraCtrl=new a.CameraController(this.canvas.gl,this.camera);new h.PointScreen(this),new d.PointWorld(this),new n.GridAxis(this)}}}}]);
//# sourceMappingURL=81041.b84cd560.chunk.js.map
{"version":3,"file":"static/js/84570.e1af9d90.chunk.js","mappings":"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","sources":["njslab/Tools/MapboxPolygon/MapboxGLWrapper/index.ts","njslab/Tools/MapboxPolygon/Scene/index.ts","../node_modules/@turf/union/index.ts","njslab/Tools/MapboxPolygon/Feature/index.ts","njslab/Tools/MapboxPolygon/Util/index.ts","njslab/Tools/MapboxPolygon/index.ts","../node_modules/@turf/bbox/index.ts"],"sourcesContent":["import mapboxgl from \"mapbox-gl\";\r\n\r\nexport class MapboxGLWrapper {\r\n    public map: mapboxgl.Map\r\n    constructor(id: string) {\r\n\r\n        this.initMap(id);\r\n    }\r\n    private initMap(id: string) {\r\n        // https://account.mapbox.com\r\n        // mapboxgl.accessToken = process.env.NEXT_PUBLIC_API_KEY_MAPBOX;\r\n        mapboxgl.accessToken = process.env.REACT_APP_MAPBOX\r\n        this.map = new mapboxgl.Map({\r\n            container: id,\r\n            zoom: 5,\r\n            // minZoom: 10,\r\n            center: [-71.093161, 42.358871],\r\n            style: 'mapbox://styles/mapbox/dark-v10' // 'mapbox://styles/mapbox/streets-v11'\r\n        });\r\n        this.map.dragRotate.disable();\r\n\r\n        // this.map.getCanvas().\r\n\r\n        // https://docs.mapbox.com/mapbox-gl-js/api/events/#mapmouseevent#type\r\n        this.map.on('mousemove', (e) => { this.mouseMove(e); });\r\n        this.map.on('click', (e) => { this.mouseClick(e); });\r\n        this.map.on('mousedown', (e) => { this.mouseDown(e); });\r\n        this.map.on('dblclick', (e) => { this.mouseDClick(e); });\r\n        this.map.on('mouseup', (e) => { this.mouseUp(e); });\r\n\r\n        let div = document.getElementsByClassName('mapboxgl-canvas')[0] as HTMLDivElement;\r\n        div.style.position = 'absolute';\r\n        \r\n        div = document.getElementsByClassName('mapboxgl-control-container')[0] as HTMLDivElement;\r\n        div.style.display = 'none';\r\n\r\n    }\r\n    public center = (lng: number = -99.292649, lat: number = 39.043903) => {\r\n        // const v = new mapboxgl.LngLat(lon, lat);\r\n        // console.log(v);\r\n        this.map.setCenter({ lat, lng })\r\n    }\r\n    public toMap = (x: number, y: number) => {\r\n        const p = this.map.unproject({x, y} as any)\r\n        return [p.lng, p.lat];\r\n    }\r\n    public toScreen = (lon: number, lat: number) => {\r\n        const p = this.map.project([lon, lat])\r\n        return [p.x, p.y];\r\n    }\r\n    public mouseDown = (e) => {\r\n        // console.log(this.toScreen(-71.093161, 42.358871))\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseUp = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseMove = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseClick = (e) => {\r\n        // console.log(e)\r\n        \r\n        // console.log(this.toMap(100, 100));\r\n        // console.log(e.point)\r\n        // this.center()\r\n        // this.map.zoomTo(0)\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n    public mouseDClick = (e) => {\r\n        // console.log(JSON.stringify(e.point), e.lngLat.wrap())\r\n    }\r\n}\r\n\r\n\r\n","import * as turf from '@turf/turf';\n\nexport class Scene {\n    public renderer = {\n        type: 'FeatureCollection',\n        name: 'ready-polygon-editor',\n        features: [],\n\n    }\n    public id = 'scene-polygon-editor';\n    public hoveredPolygonId = null;\n    public source;\n    public map: mapboxgl.Map;\n    constructor() {\n        /* */\n    }\n    public initScene = () => {\n        this.source = {\n            'type': 'geojson',\n            'data': this.getDataScene(),\n            'generateId': true\n        }\n        this.map.addSource( this.renderer.name, this.source);\n\n        // Add a new layer to visualize the polygon.\n        this.map.addLayer({\n            'id': this.id,\n            'type': 'fill',\n            'source': this.renderer.name, // reference the data source\n            'layout': {},\n            'paint': {\n                'fill-color': ['get', 'color'], // blue color fill\n                // 'fill-color': [\n                //     'case',\n                //     ['boolean',['feature-state', 'clicked'], true],\n                //     '#64bdbb', // if selected true, paint in blue\n                //     '#888888' // else paint in gray\n                // ],\n\n                // 'fill-color': [\n                //     'case',\n                //     ['boolean', ['feature-state', 'clicked'], true],\n                //     '#64bdbb', // if selected true, paint in blue\n                //     '#888888' // else paint in gray\n                // ],\n\n                'fill-opacity': [\n                    'case',\n                    ['boolean', ['feature-state', 'hover'], false],\n                    0.8,\n                    0.4\n                ]\n                // 'fill-opacity': 0.5\n            }\n        });\n        // Add a black outline around the polygon.\n        this.map.addLayer({\n            'id': 'outline',\n            'type': 'line',\n            'source': this.renderer.name,\n            'layout': {},\n            'paint': {\n                'line-color': '#000',\n                'line-width': 1\n            }\n        });\n\n        this.map.on('click', this.id, (e) => {\n            // new mapboxgl.Popup()\n            // .setLngLat(e.lngLat)\n            // .setHTML(e.features[0].properties.name)\n            // .addTo(map);\n            // });\n            // console.log(e.features[0].properties.uuid);\n        });\n        // this.map.on('mouseover', 'scene-polygon-editor', (e) => {\n        //     // this.map.getCanvas().style.cursor = 'grab', //'pointer';\n        //     // new mapboxgl.Popup()\n        //     // .setLngLat(e.lngLat)\n        //     // .setHTML(e.features[0].properties.name)\n        //     // .addTo(map);\n        //     // });\n        //     console.log(e.features[0].properties.uuid);\n        // });\n\n        // var originalColor = \"#088\";             \n        // this.map.on('mouseenter', this.id, (e) => {\n        //     console.log(e)\n        //     this.map.setPaintProperty(this.id, 'fill-opacity', 1);\n        // });\n\n        // this.map.on('mouseleave', this.id, () => {\n        //   this.map.setPaintProperty(this.id, 'fill-opacity', 0.5);\n        // });  \n\n        this.map.on('mousemove', this.id, (e) => {\n\n            if (e.features.length > 0) {\n                if (this.hoveredPolygonId !== null) {\n                    this.map.setFeatureState(\n                        { source: this.renderer.name, id: this.hoveredPolygonId },\n                        { hover: false }\n                    );\n                }\n                this.hoveredPolygonId = e.features[0].id;\n                // console.log(this.hoveredPolygonId)\n                // console.log(e.features[0])\n                this.map.setFeatureState(\n                    { source: this.renderer.name, id: this.hoveredPolygonId },\n                    { hover: true }\n                );\n            }\n        });\n        this.map.on('mouseleave', this.id, () => {\n            if (this.hoveredPolygonId !== null) {\n                this.map.setFeatureState(\n                    { source: this.renderer.name, id: this.hoveredPolygonId },\n                    { hover: false }\n                );\n            }\n            this.hoveredPolygonId = null;\n        });\n\n    }\n    public removePolygon(polygonId) {\n        const indexToRemove = this.renderer.features.map((feature, i) => {\n            if (feature.properties.uuid === polygonId) {\n                return i\n            } else {\n                return -1\n            }\n        });\n\n        for(let i = indexToRemove.length -1 ; i > -1; --i) {\n            if (indexToRemove[i] !== -1) {\n                this.renderer.features.splice(indexToRemove[i], 1);\n            }\n        }\n\n        this.updateRenderer();\n    }\n    public pushFeature = (feature) => {\n        this.renderer.features.push(feature);\n    }\n    public updateRenderer = () => {\n        // @ts-ignore\n        this.map.getSource(this.renderer.name).setData(this.getDataScene())\n    }\n    public updateZoom = (geojsonData) => {\n        const bounds = turf.bbox(geojsonData); // Assuming you have the Turf library loaded\n        // Fit the map to the bounds\n        // @ts-ignore\n        this.map.fitBounds(bounds, { padding: 20 });\n    }\n    public getDataScene() {\n        return JSON.parse(JSON.stringify(this.renderer));\n    }\n}","import polygonClipping from \"polygon-clipping\";\nimport { multiPolygon, polygon } from \"@turf/helpers\";\nimport { geomEach } from \"@turf/meta\";\nimport {\n  FeatureCollection,\n  Feature,\n  Polygon,\n  MultiPolygon,\n  GeoJsonProperties,\n} from \"geojson\";\n\n/**\n * Takes input {@link (Multi)Polygon(s)} and returns a combined polygon. If the input polygons are not contiguous, this function returns a {@link MultiPolygon} feature.\n *\n * @name union\n * @param {Feature<Polygon|MultiPolygon>} polygon1 input Polygon features\n * @param {Object} [options={}] Optional Parameters\n * @param {Object} [options.properties={}] Translate Properties to output Feature\n * @returns {Feature<(Polygon|MultiPolygon)>} a combined {@link Polygon} or {@link MultiPolygon} feature, or null if the inputs are empty\n * @example\n * var poly1 = turf.polygon([[\n *     [-82.574787, 35.594087],\n *     [-82.574787, 35.615581],\n *     [-82.545261, 35.615581],\n *     [-82.545261, 35.594087],\n *     [-82.574787, 35.594087]\n * ]], {\"fill\": \"#0f0\"});\n * var poly2 = turf.polygon([[\n *     [-82.560024, 35.585153],\n *     [-82.560024, 35.602602],\n *     [-82.52964, 35.602602],\n *     [-82.52964, 35.585153],\n *     [-82.560024, 35.585153]\n * ]], {\"fill\": \"#00f\"});\n *\n * var union = turf.union(turf.featureCollection([poly1, poly2]));\n *\n * //addToMap\n * var addToMap = [poly1, poly2, union];\n */\nfunction union<P extends GeoJsonProperties = GeoJsonProperties>(\n  features: FeatureCollection<Polygon | MultiPolygon>,\n  options: { properties?: P } = {}\n): Feature<Polygon | MultiPolygon, P> | null {\n  const geoms: polygonClipping.Geom[] = [];\n  geomEach(features, (geom) => {\n    geoms.push(geom.coordinates as polygonClipping.Geom);\n  });\n\n  if (geoms.length < 2) {\n    throw new Error(\"Must have at least 2 geometries\");\n  }\n\n  const unioned = polygonClipping.union(geoms[0], ...geoms.slice(1));\n  if (unioned.length === 0) return null;\n  if (unioned.length === 1) return polygon(unioned[0], options.properties);\n  else return multiPolygon(unioned, options.properties);\n}\n\nexport { union };\nexport default union;\n","import { Scene } from '../Scene';\nimport { getUUID, getRandomHex } from '../../../../lib';\nimport * as turf from '@turf/turf'\n\nclass PLayer {\n    divHost: HTMLElement;\n    div: HTMLDivElement;\n    divBtn: HTMLDivElement;\n    divViz: HTMLDivElement;\n    divBtnSplit: HTMLDivElement;\n    divLayerName: HTMLDivElement;\n    constructor(divHost: HTMLElement, destroy: () => void, splitNeeded = false, visFn = () => { }, splitFn = () => { }) {\n        this.divHost = divHost;\n\n        this.div = document.createElement('div');\n        this.divHost.appendChild(this.div);\n        this.div.style.width = '200px';\n        this.div.style.height = '40px';\n        this.div.style.background = 'black';\n        this.div.style.fontSize = '12px';\n        this.div.style.margin = '3px';\n        this.div.style.zIndex = '5';\n        this.div.style.position = 'relative';\n        this.div.style.display = 'flex';\n        // this.div.textContent = 'layer';\n\n        this.divBtn = document.createElement('div');\n        this.divBtn.style.width = '38px';\n        this.divBtn.style.height = '38px';\n        this.divBtn.style.background = 'black'\n        this.divBtn.style.padding = '10px'\n        this.divBtn.style.margin = '1px'\n\n        this.divBtn.textContent = 'X'\n        this.divBtn.onclick = () => destroy();\n        this.div.appendChild(this.divBtn);\n\n        this.divViz = document.createElement('div');\n        this.divViz.style.width = '38px';\n        this.divViz.style.height = '38px';\n        this.divViz.style.background = 'black'\n        this.divViz.style.padding = '10px'\n        this.divViz.style.margin = '1px'\n\n        this.divViz.textContent = 'V'\n        this.divViz.onclick = () => visFn();\n        this.div.appendChild(this.divViz);\n\n        if (splitNeeded) {\n            this.appendSplit(splitFn);\n        }\n\n        this.divLayerName = document.createElement('div');\n        this.divLayerName.style.width = '100%';\n        this.divLayerName.style.height = '40px';\n        this.divLayerName.style.color = 'black';\n\n\n        this.div.appendChild(this.divLayerName);\n    }\n    public appendSplit(splitFn = () => { }) {\n        this.divBtnSplit = document.createElement('div');\n        this.divBtnSplit.style.width = '38px';\n        this.divBtnSplit.style.height = '38px';\n        this.divBtnSplit.style.background = 'black'\n        this.divBtnSplit.style.padding = '10px'\n        this.divBtnSplit.style.margin = '1px'\n        this.divBtnSplit.textContent = 'S'\n        this.divBtnSplit.onclick = () => splitFn();\n        this.div.appendChild(this.divBtnSplit);\n    }\n    public destroy() {\n        this.div.removeChild(this.divLayerName)\n        this.div.removeChild(this.divBtn)\n        this.divHost.removeChild(this.div);\n    }\n}\n\nexport class PFeature {\n    public data = {\n        name: 'untitled',\n        type: 'FeatureCollection',\n        features: [],\n    }\n    public layer: PLayer\n    public scene: Scene;\n    public uuid: string;\n    public color: string;\n    public isVisible: boolean = true;\n    public conditionSplit = {\n        needSplit: false,\n        isMultiFeature: false,\n        isMultiPolygon: false,\n    };\n    constructor(scene, geojson) {\n        this.scene = scene;\n        this.data = JSON.parse(geojson);\n\n        console.log(this.data)\n\n        const ddd = []\n        const coordinate = []\n\n        this.data.features.map(f => {\n            // console.log(f.geometry.coordinates)\n            const pp = turf.polygon(f.geometry.coordinates)\n            // console.log(pp)\n            ddd.push(pp)\n            coordinate.push(f.geometry.coordinates)\n            return undefined\n        })\n\n        // this.data = removeOverlappingAreaFromPolygons(this.data)\n        this.data = unionPolygons2(this.data)\n\n\n        // console.log('ddd', ddd)\n        // console.log({coordinate})\n        // console.log(this.data.features)\n        \n        // const uu = turf.difference(ddd[0], ddd[1]) \n        // console.log(uu)\n        // this.data.features = []\n        // this.data.features.push(uu); //JSON.parse(uu);\n\n\n\n\n        this.uuid = getUUID();\n        this.color = getRandomHex();\n        this.conditionSplit = checkSplitCondition(this.data);\n\n        this.layer = new PLayer(\n            scene.map.getCanvas().parentElement,\n            this.destroy,\n            this.conditionSplit.needSplit,\n            this.toggleVisibility,\n            this.split,\n        );\n\n        this.layer.div.style.background = this.color;\n        this.data.name = this.data.name ? this.data.name : 'untitled'\n        this.layer.divLayerName.textContent = this.data.name;\n\n        this.addScene();\n        this.zoomIn();\n    }\n    public addScene () {\n        for (let i = 0; i < this.data.features.length; ++i) {\n            const feature = this.data.features[i];\n            feature.properties.uuid = this.uuid;\n            feature.properties.color = this.color;\n            this.scene.pushFeature(feature);\n        }\n\n        this.scene.updateRenderer();\n        \n    }\n    public removeScene() {\n        this.scene.removePolygon(this.uuid)\n    }\n    public zoomIn(){\n        this.scene.updateZoom(this.data);\n    }\n    public toggleVisibility = () => {\n        this.isVisible = !this.isVisible;\n        if (this.isVisible) {\n            this.addScene();\n            // this.zoomIn();\n        } else {\n            this.removeScene();\n        }\n    }\n    public split = () => {\n        if (this.conditionSplit.isMultiFeature) {\n            splitFeature(this.data).forEach((geoJson) => {\n                new PFeature(this.scene, JSON.stringify(geoJson))\n            });\n        }\n\n        if (!this.conditionSplit.isMultiFeature && this.conditionSplit.isMultiPolygon) {\n            splitPolygon(this.data).forEach((geoJson) => {\n                new PFeature(this.scene, JSON.stringify(geoJson))\n            });\n        }\n\n        this.destroy();\n    }\n    public destroy = () => {\n        this.removeScene();\n        this.layer.destroy();\n    }\n}\n\nconst checkSplitCondition = (geojson) => {\n    const isMultiFeature = geojson.features.length > 1;\n    const isMultiPolygon = geojson.features[0]['geometry']['coordinates'].length > 1;\n    return {\n        isMultiFeature, isMultiPolygon,\n        needSplit: isMultiFeature || isMultiPolygon,\n    }\n}\nconst splitFeature = (geojson) => {\n    const listGeojson = [];\n    for (let i = 0; i < geojson.features.length; ++i) {\n        const coordinates = geojson.features[i]['geometry']['coordinates'];\n        const newGeojson = {\n            features: [{\n                geometry: {\n                    coordinates,\n                    type: geojson.features[i]['geometry']['type']\n                },\n                type: geojson.features[i]['type'],\n                properties: geojson.features[i]['properties']\n            }\n            ],\n            type: geojson.type,\n            name: `${geojson.name}_${i}`,\n        }\n        listGeojson.push(newGeojson);\n    }\n    return listGeojson;\n}\nconst splitPolygon = (geojson) => {\n    const listGeojson = [];\n    for (let i = 0; i < geojson.features.length; ++i) {\n        const coordinates = geojson.features[i]['geometry']['coordinates'];\n        for (let j = 0; j < coordinates.length; ++j) {\n            const newGeojson = {\n                features: [{\n                    geometry: {\n                        coordinates: [coordinates[j]],\n                        type: geojson.features[i]['geometry']['type']\n                    },\n                    type:  geojson.features[i]['type'],\n                    properties: geojson.features[i]['properties']\n                }\n                ],\n                type: geojson.type,\n                name: `${geojson.name}_${j}`,\n            }\n            listGeojson.push(newGeojson);\n        }\n    }\n    return listGeojson;\n}\n\nconst unionPolygons2 = (data) => {\n    if (data.features.length < 2) {\n        return undefined;\n    }\n\n    let unionResult = data.features[0];\n\n    for (let i = 1; i < data.features.length; i++) {\n        unionResult = turf.union(unionResult, data.features[i]);\n    }\n\n    data.features = [unionResult]\n    return data;\n}\n\n\nconst unionPolygons = (data) => {\n    const newOne = []\n    for(let j = 0 ; j < data.features.length; ++j) {\n        let f0 = data.features[j]\n        let a = undefined\n        // let b\n        for(let i = 0 ; i < data.features.length; ++i) {\n            const f1 = data.features[i]\n            if (j !== i) {\n                if (turf.intersect(f0, f1)){\n                    f0 = turf.union(f0, f1)\n                    // b = turf.difference(f1, f0) \n                    // f0 = a\n                }\n            }\n        }\n\n        // if (a != undefined){\n            newOne.push(f0)\n        // }\n        // data.features[i] = b\n    }\n    data.features = newOne;\n    return data;\n}\n\nconst removeOverlappingAreaFromPolygons = (data) => {\n    const newOne = []\n    for(let j = 0 ; j < data.features.length; ++j) {\n        let f0 = data.features[j]\n        let a = undefined\n        // let b\n        for(let i = 0 ; i < data.features.length; ++i) {\n            const f1 = data.features[i]\n            if (j !== i) {\n                if (turf.intersect(f0, f1)){\n                    // @ts-ignore\n                    f0 = turf.difference(f0, f1)\n                    // b = turf.difference(f1, f0) \n                    // f0 = a\n                }\n            }\n        }\n\n        // if (a != undefined){\n            newOne.push(f0)\n        // }\n        // data.features[i] = b\n    }\n    data.features = newOne;\n\n\n    // const newOne = data.features.map((f0, j) => {\n    //     return data.features\n    //         .filter((f1, i) => j !== i && turf.intersect(f0, f1))\n    //         .reduce((result, f1) => turf.difference(result, f1), f0);\n    // });\n    \n    // data.features = newOne.filter((f0, j) => !newOne.some((f1, i) => j !== i && turf.intersect(f0, f1)));\n\n    return data\n}","export const getHolder = (out: (d: any) => any) => {\n    const divDrop = document.createElement('div');\n    divDrop.ondrop = (e) => {\n        // this.className = '';\n        e.preventDefault();\n        const file = e.dataTransfer.files[0];\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            // console.log(event.target);\n            out(event.target)\n            // divDrop.innerText = event.target.result;\n        };\n        // console.log(file);\n        reader.readAsText(file);\n        // return false;\n        return\n    };\n    divDrop.ondragover = () => {\n        // this.className = 'hover';\n        return false;\n    };\n    divDrop.ondragend = () => {\n        // this.className = '';\n        return false;\n    };\n    return divDrop;\n}\n\nexport const geojsonDownloader = (geojsonData: string) => {\n    const encode = (s: string) => {\n        let out: number[] = [];\n        for (let i = 0; i < s.length; i++) { out.push(s.charCodeAt(i)); }\n        return new Uint8Array(out);\n    };\n\n    var data = encode((JSON.stringify(geojsonData, null, 4)));\n    // console.log(data)\n    var blob = new Blob([data], { type: 'esri/drawingTool' });\n    let url = URL.createObjectURL(blob);\n    var link = document.createElement('a');\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'scene.json');\n    var event = document.createEvent('MouseEvents');\n    event.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n    link.dispatchEvent(event);\n\n}","import { MapboxGLWrapper } from './MapboxGLWrapper';\r\nimport { Scene } from './Scene';\r\nimport { PFeature } from './Feature';\r\n\r\nimport { geojsonDownloader } from './Util';\r\n\r\n// https://geojson.io/#map=5.97/42.914/-73.24\r\n\r\nexport class Solution {\r\n    public divHost: HTMLDivElement;\r\n    public mapboxWrapper: MapboxGLWrapper;\r\n    // public renderer: Renderer;\r\n\r\n    public scene: Scene;\r\n    constructor(id: string) {\r\n        this.divHost = document.getElementById(id) as HTMLDivElement;\r\n        this.divHost.style.position = 'relative';\r\n\r\n        this.divHost.ondrop = (e) => {\r\n            e.preventDefault();\r\n            const file: any = e.dataTransfer?.files[0];\r\n            const reader = new FileReader();\r\n            reader.onload = (event) => {\r\n                this.importData(event.target);\r\n            };\r\n            reader.readAsText(file);\r\n            return\r\n        };\r\n        this.divHost.ondragover = () => {\r\n            return false;\r\n        };\r\n        this.divHost.ondragend = () => {\r\n            return false;\r\n        };\r\n\r\n        this.mapboxWrapper = new MapboxGLWrapper(this.divHost.id);\r\n        this.scene = new Scene();\r\n        this.scene.map = this.mapboxWrapper.map;\r\n\r\n        this.mapboxWrapper.mouseDown = this.mouseDown\r\n        this.mapboxWrapper.mouseUp = this.mouseUp\r\n        this.mapboxWrapper.mouseClick = this.mouseClick\r\n        this.mapboxWrapper.mouseMove = this.mouseMove\r\n\r\n        setTimeout(() => {\r\n            this.mapboxWrapper.map.on('load', () => {\r\n                // Add a data source containing GeoJSON data.\r\n                this.scene.initScene();\r\n            });\r\n\r\n        }, 100);\r\n\r\n\r\n        const divMenu = document.createElement('div');\r\n        divMenu.style.position = 'absolute';\r\n        this.divHost.appendChild(divMenu);\r\n\r\n        const divMenu1 = document.createElement('div');\r\n        divMenu1.style.width = '200px';\r\n        divMenu1.style.height = '20px';\r\n        divMenu1.style.background = 'rgba(0, 0, 0, 0.8)';\r\n        divMenu1.style.zIndex = '10';\r\n        // divMenu1.style.position = 'absolute';\r\n        divMenu1.textContent = 'DOWNLOAD by polygon';\r\n        divMenu1.onclick = () => {\r\n            const scData = this.scene.getDataScene();\r\n            geojsonDownloader(scData);\r\n        }\r\n        divMenu.appendChild(divMenu1);\r\n\r\n        const divMenu2 = document.createElement('div');\r\n        divMenu2.style.width = '200px';\r\n        divMenu2.style.height = '20px';\r\n        divMenu2.style.background = 'rgba(0, 0, 0, 0.8)';\r\n        divMenu2.style.zIndex = '10';\r\n        // divMenu2.style.position = 'absolute';\r\n        divMenu2.textContent = 'DOWNLOAD by feature';\r\n        divMenu2.onclick = () => {\r\n            const scData = this.scene.getDataScene();\r\n\r\n            geojsonDownloader(geojsonByFeature(scData));\r\n        }\r\n        divMenu.appendChild(divMenu2);\r\n\r\n    }\r\n    \r\n    public importData = (d: any) => {\r\n        new PFeature(this.scene, d.result);\r\n    }\r\n    public mouseDown = (e: any) => {\r\n        // TODO\r\n    }\r\n    public mouseUp = (e: any) => {\r\n        // TODO\r\n    }\r\n    public mouseDrag = (e: any) => {\r\n        // TODO\r\n    }\r\n    public mouseClick = (e: any) => {\r\n        // const dd: AnySourceImpl = this.mapboxWrapper.map.getSource('scene-polygon-editor');\r\n        // console.log(dd._options.data.geometry.coordinates.pop())\r\n        // this.mapboxWrapper.map.removeSource('scene-polygon-editor')\r\n        // console.log(this.data);\r\n        // this.data[0].pop();\r\n        // this.data.features[0].geometry.coordinates[0].pop()\r\n\r\n        // console.log(this.data.features[0].geometry.coordinates[0])\r\n\r\n        // this.setData(this.data)\r\n        // this.addData();\r\n        // TODO\r\n        // console.log(e);\r\n        // console.log(e['lngLat']);\r\n        // this.renderer.pts.push([e['lngLat']['lng'], e['lngLat']['lat']])\r\n\r\n        // this.mapboxWrapper.map.on('click', 'scene-polygon-editor', (e) => {\r\n        //     // new mapboxgl.Popup()\r\n        //     // .setLngLat(e.lngLat)\r\n        //     // .setHTML(e.features[0].properties.name)\r\n        //     // .addTo(map);\r\n        //     // });\r\n        //     console.log(e.features[0].properties.id);\r\n        // });\r\n        // console.log(e)\r\n    }\r\n    public mouseMove = (e: any) => {\r\n        // TODO\r\n    }\r\n    public keyDown(k: KeyboardEvent) {\r\n        // TODO\r\n    }\r\n    public destroy() {\r\n        // this.renderer.destroy();\r\n        try {\r\n            while (this.divHost && this.divHost.lastElementChild) {\r\n                const lastChild = this.divHost.lastElementChild as Node;\r\n                this.divHost.removeChild(lastChild);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error removing child elements:', error);\r\n        }\r\n        \r\n    }\r\n}\r\n\r\n\r\nconst geojsonByFeature = (geojson: any) => {\r\n    const coordinates = [];\r\n    for(let i = 0; i < geojson.features.length; ++i) {\r\n        coordinates.push(geojson.features[i]['geometry']['coordinates'])\r\n    }\r\n    const newGeojson = {\r\n        features: [{\r\n            geometry: {\r\n                coordinates: coordinates,\r\n                type: 'MultiPolygon',\r\n            },\r\n            type: geojson.features[0]['type'],\r\n            properties: geojson.features[0]['properties']\r\n        }\r\n        ],\r\n        type: geojson.type,\r\n        name: `${geojson.name}`,\r\n    }\r\n    return JSON.parse(JSON.stringify(newGeojson));\r\n}","import { BBox } from \"geojson\";\nimport { AllGeoJSON } from \"@turf/helpers\";\nimport { coordEach } from \"@turf/meta\";\n\n/**\n * Calculates the bounding box for any GeoJSON object, including FeatureCollection.\n * Uses geojson.bbox if available and options.recompute is not set.\n *\n * @name bbox\n * @param {GeoJSON} geojson any GeoJSON object\n * @param {Object} [options={}] Optional parameters\n * @param {boolean} [options.recompute] Whether to ignore an existing bbox property on geojson\n * @returns {BBox} bbox extent in [minX, minY, maxX, maxY] order\n * @example\n * var line = turf.lineString([[-74, 40], [-78, 42], [-82, 35]]);\n * var bbox = turf.bbox(line);\n * var bboxPolygon = turf.bboxPolygon(bbox);\n *\n * //addToMap\n * var addToMap = [line, bboxPolygon]\n */\nfunction bbox(\n  geojson: AllGeoJSON,\n  options: {\n    recompute?: boolean;\n  } = {}\n): BBox {\n  if (geojson.bbox != null && true !== options.recompute) {\n    return geojson.bbox;\n  }\n  const result: BBox = [Infinity, Infinity, -Infinity, -Infinity];\n  coordEach(geojson, (coord) => {\n    if (result[0] > coord[0]) {\n      result[0] = coord[0];\n    }\n    if (result[1] > coord[1]) {\n      result[1] = coord[1];\n    }\n    if (result[2] < coord[0]) {\n      result[2] = coord[0];\n    }\n    if (result[3] < coord[1]) {\n      result[3] = coord[1];\n    }\n  });\n  return result;\n}\n\nexport { bbox };\nexport default bbox;\n"],"names":["MapboxGLWrapper","constructor","id","map","center","lng","lat","setCenter","toMap","x","y","p","this","unproject","toScreen","lon","project","mouseDown","e","mouseUp","mouseMove","mouseClick","mouseDClick","initMap","mapboxgl","process","container","zoom","style","dragRotate","disable","on","div","document","getElementsByClassName","position","display","Scene","renderer","type","name","features","hoveredPolygonId","source","initScene","getDataScene","addSource","addLayer","length","setFeatureState","hover","pushFeature","feature","push","updateRenderer","getSource","setData","updateZoom","geojsonData","bounds","turf","fitBounds","padding","removePolygon","polygonId","indexToRemove","i","properties","uuid","splice","JSON","parse","stringify","union","options","geoms","geomEach","geom","coordinates","Error","unioned","polygonClipping","slice","polygon","multiPolygon","PLayer","divHost","destroy","splitNeeded","visFn","splitFn","divBtn","divViz","divBtnSplit","divLayerName","createElement","appendChild","width","height","background","fontSize","margin","zIndex","textContent","onclick","appendSplit","color","removeChild","PFeature","scene","geojson","data","layer","isVisible","conditionSplit","needSplit","isMultiFeature","isMultiPolygon","toggleVisibility","addScene","removeScene","split","splitFeature","forEach","geoJson","splitPolygon","console","log","ddd","coordinate","f","pp","geometry","unionPolygons2","getUUID","getRandomHex","checkSplitCondition","getCanvas","parentElement","zoomIn","listGeojson","newGeojson","j","unionResult","geojsonDownloader","s","out","charCodeAt","Uint8Array","encode","blob","Blob","url","URL","createObjectURL","link","setAttribute","event","createEvent","initMouseEvent","window","dispatchEvent","Solution","mapboxWrapper","importData","d","result","mouseDrag","getElementById","ondrop","preventDefault","file","dataTransfer","files","reader","FileReader","onload","target","readAsText","ondragover","ondragend","setTimeout","divMenu","divMenu1","scData","divMenu2","geojsonByFeature","keyDown","k","lastElementChild","lastChild","error","bbox","recompute","Infinity","coordEach","coord"],"sourceRoot":""}